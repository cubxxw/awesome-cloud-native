<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/img/1.jpg"><title>ç¬¬64èŠ‚ kubeadmæ¦‚è¿°ã€åŸç†ã€ä»¥åŠéƒ¨åˆ†æºç é˜…è¯» | ä½ å¥½</title><meta name="description" content="é“¾å­¦ç¤¾è‡´åŠ›äºæ‰“é€ å‡ºåŒºå—é“¾å»ä¸­å¿ƒåŒ–çš„å­¦ä¹ å¹³å°">
    <link rel="modulepreload" href="/assets/app.bc2ec9df.js"><link rel="modulepreload" href="/assets/64.html.9cf57be1.js"><link rel="modulepreload" href="/assets/64.html.875cd724.js"><link rel="prefetch" href="/assets/index.html.c499f25b.js"><link rel="prefetch" href="/assets/1.html.9e1553e6.js"><link rel="prefetch" href="/assets/10.html.b7ebfc66.js"><link rel="prefetch" href="/assets/11.html.2e4c4099.js"><link rel="prefetch" href="/assets/12.html.693741b8.js"><link rel="prefetch" href="/assets/13.html.2dae1833.js"><link rel="prefetch" href="/assets/14.html.a87633d9.js"><link rel="prefetch" href="/assets/15.html.88e104a0.js"><link rel="prefetch" href="/assets/16.html.8930277d.js"><link rel="prefetch" href="/assets/17.html.8ade317c.js"><link rel="prefetch" href="/assets/18.html.3b6fe606.js"><link rel="prefetch" href="/assets/19.html.19b0e452.js"><link rel="prefetch" href="/assets/2.html.ca7e5998.js"><link rel="prefetch" href="/assets/20.html.537d64f6.js"><link rel="prefetch" href="/assets/21.html.9eba97d7.js"><link rel="prefetch" href="/assets/22.html.eb5ddb66.js"><link rel="prefetch" href="/assets/23.html.2aa6b813.js"><link rel="prefetch" href="/assets/24.html.1abb586c.js"><link rel="prefetch" href="/assets/25.html.129b8aee.js"><link rel="prefetch" href="/assets/26.html.f00952bd.js"><link rel="prefetch" href="/assets/27.html.bb3833c5.js"><link rel="prefetch" href="/assets/28.html.de76c576.js"><link rel="prefetch" href="/assets/29.html.efa508a0.js"><link rel="prefetch" href="/assets/3.html.34b5fa12.js"><link rel="prefetch" href="/assets/30.html.bb990189.js"><link rel="prefetch" href="/assets/31.html.220881c1.js"><link rel="prefetch" href="/assets/32.html.02e7faad.js"><link rel="prefetch" href="/assets/33.html.9b5caaf0.js"><link rel="prefetch" href="/assets/34.html.b0f614b8.js"><link rel="prefetch" href="/assets/35.html.93b92893.js"><link rel="prefetch" href="/assets/36.html.4c610e94.js"><link rel="prefetch" href="/assets/37.html.9db997c0.js"><link rel="prefetch" href="/assets/38.html.ad90b9e2.js"><link rel="prefetch" href="/assets/39.html.a0df80fb.js"><link rel="prefetch" href="/assets/4.html.41789675.js"><link rel="prefetch" href="/assets/40.html.010630a9.js"><link rel="prefetch" href="/assets/41.html.fb6ca406.js"><link rel="prefetch" href="/assets/42.html.42f70d7c.js"><link rel="prefetch" href="/assets/43.html.5ee2a21b.js"><link rel="prefetch" href="/assets/44.html.9dc19608.js"><link rel="prefetch" href="/assets/45.html.65a00f64.js"><link rel="prefetch" href="/assets/46.html.3f216863.js"><link rel="prefetch" href="/assets/47.html.771bca91.js"><link rel="prefetch" href="/assets/48.html.c9fdb58d.js"><link rel="prefetch" href="/assets/49.html.2cd1d985.js"><link rel="prefetch" href="/assets/5.html.9d834973.js"><link rel="prefetch" href="/assets/50.html.494b0ca7.js"><link rel="prefetch" href="/assets/51.html.51a4ea70.js"><link rel="prefetch" href="/assets/52.html.7fbf333e.js"><link rel="prefetch" href="/assets/53.html.3d3c9f66.js"><link rel="prefetch" href="/assets/54.html.c41944b8.js"><link rel="prefetch" href="/assets/55.html.6cac9530.js"><link rel="prefetch" href="/assets/56.html.f3d1621a.js"><link rel="prefetch" href="/assets/57.html.3fb6f308.js"><link rel="prefetch" href="/assets/58.html.e98a53c6.js"><link rel="prefetch" href="/assets/59.html.efc1a270.js"><link rel="prefetch" href="/assets/6.html.7f20f46a.js"><link rel="prefetch" href="/assets/60.html.895494dd.js"><link rel="prefetch" href="/assets/61.html.4fff4e8f.js"><link rel="prefetch" href="/assets/62.html.7f0dc57f.js"><link rel="prefetch" href="/assets/63.html.d3d63fbd.js"><link rel="prefetch" href="/assets/64.html.d81518de.js"><link rel="prefetch" href="/assets/65.html.5a2a423c.js"><link rel="prefetch" href="/assets/66.html.09006efe.js"><link rel="prefetch" href="/assets/67.html.c44147c4.js"><link rel="prefetch" href="/assets/68.html.5123bdda.js"><link rel="prefetch" href="/assets/69.html.709fcbfa.js"><link rel="prefetch" href="/assets/7.html.73107fb7.js"><link rel="prefetch" href="/assets/70.html.d5175b4e.js"><link rel="prefetch" href="/assets/71.html.5c7276ad.js"><link rel="prefetch" href="/assets/72.html.be0505f9.js"><link rel="prefetch" href="/assets/73.html.945cee02.js"><link rel="prefetch" href="/assets/74.html.ed0427d0.js"><link rel="prefetch" href="/assets/75.html.22eaa4c1.js"><link rel="prefetch" href="/assets/76.html.83a60559.js"><link rel="prefetch" href="/assets/77.html.6a485035.js"><link rel="prefetch" href="/assets/78.html.5184af63.js"><link rel="prefetch" href="/assets/79.html.f31f80ee.js"><link rel="prefetch" href="/assets/8.html.0592d8bf.js"><link rel="prefetch" href="/assets/80.html.71fe2de3.js"><link rel="prefetch" href="/assets/81.html.674b9f45.js"><link rel="prefetch" href="/assets/82.html.84a9da67.js"><link rel="prefetch" href="/assets/83.html.f9366f23.js"><link rel="prefetch" href="/assets/84.html.077d9bdc.js"><link rel="prefetch" href="/assets/85.html.afe84b99.js"><link rel="prefetch" href="/assets/86.html.0cab34db.js"><link rel="prefetch" href="/assets/87.html.f2d70c50.js"><link rel="prefetch" href="/assets/88.html.3842a471.js"><link rel="prefetch" href="/assets/89.html.bd36ae29.js"><link rel="prefetch" href="/assets/9.html.8b1df622.js"><link rel="prefetch" href="/assets/90.html.59d1af05.js"><link rel="prefetch" href="/assets/91.html.bff9db18.js"><link rel="prefetch" href="/assets/92.html.8d1d3932.js"><link rel="prefetch" href="/assets/93.html.2e25826f.js"><link rel="prefetch" href="/assets/94.html.3bf21ffb.js"><link rel="prefetch" href="/assets/95.html.703f578c.js"><link rel="prefetch" href="/assets/96.html.b168fbc0.js"><link rel="prefetch" href="/assets/97.html.9a9e7eb7.js"><link rel="prefetch" href="/assets/98.html.dba9b839.js"><link rel="prefetch" href="/assets/99.html.403135da.js"><link rel="prefetch" href="/assets/index.html.90f79834.js"><link rel="prefetch" href="/assets/TODO.html.830317c3.js"><link rel="prefetch" href="/assets/1.html.bd959b6e.js"><link rel="prefetch" href="/assets/10.html.ae2469e0.js"><link rel="prefetch" href="/assets/11.html.cf3c12f9.js"><link rel="prefetch" href="/assets/12.html.a0411a0f.js"><link rel="prefetch" href="/assets/13.html.2caa0b00.js"><link rel="prefetch" href="/assets/14.html.381371db.js"><link rel="prefetch" href="/assets/15.html.e47b1665.js"><link rel="prefetch" href="/assets/16.html.30b1bf5d.js"><link rel="prefetch" href="/assets/17.html.073b9d56.js"><link rel="prefetch" href="/assets/18.html.8c025525.js"><link rel="prefetch" href="/assets/19.html.f06d2ea4.js"><link rel="prefetch" href="/assets/2.html.c24a2383.js"><link rel="prefetch" href="/assets/20.html.9e702c70.js"><link rel="prefetch" href="/assets/21.html.087be0ef.js"><link rel="prefetch" href="/assets/22.html.67972d7c.js"><link rel="prefetch" href="/assets/23.html.7f287dfd.js"><link rel="prefetch" href="/assets/24.html.e8034405.js"><link rel="prefetch" href="/assets/25.html.8bdb4208.js"><link rel="prefetch" href="/assets/26.html.52f08579.js"><link rel="prefetch" href="/assets/27.html.16632077.js"><link rel="prefetch" href="/assets/28.html.6d11f2d1.js"><link rel="prefetch" href="/assets/29.html.059e6730.js"><link rel="prefetch" href="/assets/3.html.b3db0053.js"><link rel="prefetch" href="/assets/30.html.a53b02db.js"><link rel="prefetch" href="/assets/31.html.0b37e7ce.js"><link rel="prefetch" href="/assets/32.html.cea0c777.js"><link rel="prefetch" href="/assets/33.html.ff558a34.js"><link rel="prefetch" href="/assets/34.html.e8b4b97e.js"><link rel="prefetch" href="/assets/35.html.cb802a9c.js"><link rel="prefetch" href="/assets/36.html.a719dfcb.js"><link rel="prefetch" href="/assets/37.html.d139e2b1.js"><link rel="prefetch" href="/assets/38.html.89fc986d.js"><link rel="prefetch" href="/assets/39.html.f9fda674.js"><link rel="prefetch" href="/assets/4.html.0f09f509.js"><link rel="prefetch" href="/assets/40.html.8a6f76c5.js"><link rel="prefetch" href="/assets/41.html.da32683f.js"><link rel="prefetch" href="/assets/42.html.19b82696.js"><link rel="prefetch" href="/assets/43.html.d3c5a1fb.js"><link rel="prefetch" href="/assets/44.html.37c86fd1.js"><link rel="prefetch" href="/assets/45.html.49d43e8d.js"><link rel="prefetch" href="/assets/46.html.c897c137.js"><link rel="prefetch" href="/assets/47.html.9fc11c19.js"><link rel="prefetch" href="/assets/48.html.61399716.js"><link rel="prefetch" href="/assets/49.html.4bff12f5.js"><link rel="prefetch" href="/assets/5.html.c137122b.js"><link rel="prefetch" href="/assets/6.html.082624e8.js"><link rel="prefetch" href="/assets/7.html.a4ae3c8b.js"><link rel="prefetch" href="/assets/8.html.9f5571b9.js"><link rel="prefetch" href="/assets/9.html.9d8ed5f6.js"><link rel="prefetch" href="/assets/1.html.9e750f7a.js"><link rel="prefetch" href="/assets/10.html.e77e0455.js"><link rel="prefetch" href="/assets/11.html.7e785902.js"><link rel="prefetch" href="/assets/12.html.1599a54d.js"><link rel="prefetch" href="/assets/13.html.70628749.js"><link rel="prefetch" href="/assets/14.html.18e6797b.js"><link rel="prefetch" href="/assets/15.html.df743cd2.js"><link rel="prefetch" href="/assets/16.html.5bb25047.js"><link rel="prefetch" href="/assets/17.html.6874d49f.js"><link rel="prefetch" href="/assets/18.html.65b90de4.js"><link rel="prefetch" href="/assets/19.html.dde6b661.js"><link rel="prefetch" href="/assets/2.html.e1274803.js"><link rel="prefetch" href="/assets/20.html.0fe80452.js"><link rel="prefetch" href="/assets/21.html.f85d8468.js"><link rel="prefetch" href="/assets/22.html.0afb63ed.js"><link rel="prefetch" href="/assets/23.html.acd56ad8.js"><link rel="prefetch" href="/assets/24.html.f874b480.js"><link rel="prefetch" href="/assets/25.html.e020387b.js"><link rel="prefetch" href="/assets/26.html.ccbed0cc.js"><link rel="prefetch" href="/assets/27.html.148446d1.js"><link rel="prefetch" href="/assets/28.html.a94af5c0.js"><link rel="prefetch" href="/assets/29.html.aa33eff4.js"><link rel="prefetch" href="/assets/3.html.cac76b28.js"><link rel="prefetch" href="/assets/30.html.6c68425a.js"><link rel="prefetch" href="/assets/31.html.9b16aa42.js"><link rel="prefetch" href="/assets/32.html.6d1882b9.js"><link rel="prefetch" href="/assets/33.html.450fcdf8.js"><link rel="prefetch" href="/assets/34.html.b2875ca6.js"><link rel="prefetch" href="/assets/35.html.b9867f79.js"><link rel="prefetch" href="/assets/36.html.614ee854.js"><link rel="prefetch" href="/assets/37.html.2d010e5c.js"><link rel="prefetch" href="/assets/38.html.db03c609.js"><link rel="prefetch" href="/assets/39.html.dae7a11d.js"><link rel="prefetch" href="/assets/4.html.d793bb26.js"><link rel="prefetch" href="/assets/40.html.f1b53d8e.js"><link rel="prefetch" href="/assets/41.html.f71f97a0.js"><link rel="prefetch" href="/assets/42.html.8af2270a.js"><link rel="prefetch" href="/assets/43.html.aeab5555.js"><link rel="prefetch" href="/assets/44.html.ca417de8.js"><link rel="prefetch" href="/assets/45.html.26989a52.js"><link rel="prefetch" href="/assets/46.html.48fe7270.js"><link rel="prefetch" href="/assets/47.html.3e47ee65.js"><link rel="prefetch" href="/assets/48.html.d08a8b7f.js"><link rel="prefetch" href="/assets/49.html.1c55cdc2.js"><link rel="prefetch" href="/assets/5.html.f58f6203.js"><link rel="prefetch" href="/assets/50.html.581cdfdd.js"><link rel="prefetch" href="/assets/51.html.143c32e9.js"><link rel="prefetch" href="/assets/52.html.7488aa3f.js"><link rel="prefetch" href="/assets/53.html.df9bfd27.js"><link rel="prefetch" href="/assets/54.html.97e0befc.js"><link rel="prefetch" href="/assets/55.html.9f2e0fc4.js"><link rel="prefetch" href="/assets/56.html.832dc435.js"><link rel="prefetch" href="/assets/57.html.55b5f82f.js"><link rel="prefetch" href="/assets/58.html.f97be2b4.js"><link rel="prefetch" href="/assets/59.html.c2454b9d.js"><link rel="prefetch" href="/assets/6.html.2b7b8ad3.js"><link rel="prefetch" href="/assets/60.html.5867f9c4.js"><link rel="prefetch" href="/assets/61.html.1e8bbff2.js"><link rel="prefetch" href="/assets/62.html.ce4e8457.js"><link rel="prefetch" href="/assets/63.html.b668ae9a.js"><link rel="prefetch" href="/assets/65.html.53b86f35.js"><link rel="prefetch" href="/assets/66.html.ce2e31bd.js"><link rel="prefetch" href="/assets/67.html.2214b226.js"><link rel="prefetch" href="/assets/68.html.f38d825f.js"><link rel="prefetch" href="/assets/69.html.6b940e8d.js"><link rel="prefetch" href="/assets/7.html.44323637.js"><link rel="prefetch" href="/assets/70.html.1b09fdec.js"><link rel="prefetch" href="/assets/71.html.fc91e357.js"><link rel="prefetch" href="/assets/72.html.3ed54957.js"><link rel="prefetch" href="/assets/73.html.3269221e.js"><link rel="prefetch" href="/assets/74.html.d36867b2.js"><link rel="prefetch" href="/assets/75.html.8b1ecf89.js"><link rel="prefetch" href="/assets/76.html.6edcd166.js"><link rel="prefetch" href="/assets/77.html.e7635ab7.js"><link rel="prefetch" href="/assets/78.html.0de8f8e0.js"><link rel="prefetch" href="/assets/79.html.b84c0c1d.js"><link rel="prefetch" href="/assets/8.html.fbdd9051.js"><link rel="prefetch" href="/assets/80.html.72b53b23.js"><link rel="prefetch" href="/assets/81.html.2df80b97.js"><link rel="prefetch" href="/assets/82.html.ad487a1e.js"><link rel="prefetch" href="/assets/83.html.c2f31839.js"><link rel="prefetch" href="/assets/84.html.8f08ca4d.js"><link rel="prefetch" href="/assets/85.html.58986e20.js"><link rel="prefetch" href="/assets/86.html.b208cc40.js"><link rel="prefetch" href="/assets/87.html.c3518680.js"><link rel="prefetch" href="/assets/88.html.4987ffcc.js"><link rel="prefetch" href="/assets/89.html.ba926430.js"><link rel="prefetch" href="/assets/9.html.1b790a84.js"><link rel="prefetch" href="/assets/90.html.21f82605.js"><link rel="prefetch" href="/assets/91.html.b7301274.js"><link rel="prefetch" href="/assets/92.html.3662bc0c.js"><link rel="prefetch" href="/assets/93.html.e2ac0831.js"><link rel="prefetch" href="/assets/94.html.02d9e407.js"><link rel="prefetch" href="/assets/95.html.10a9639a.js"><link rel="prefetch" href="/assets/96.html.62960ce9.js"><link rel="prefetch" href="/assets/97.html.d0ab9bbe.js"><link rel="prefetch" href="/assets/98.html.89ca1b0b.js"><link rel="prefetch" href="/assets/99.html.5143f23b.js"><link rel="prefetch" href="/assets/index.html.43f40a16.js"><link rel="prefetch" href="/assets/1.html.fefabf1f.js"><link rel="prefetch" href="/assets/10.html.a591fdaf.js"><link rel="prefetch" href="/assets/11.html.f0c58879.js"><link rel="prefetch" href="/assets/12.html.6174ec90.js"><link rel="prefetch" href="/assets/13.html.181888e9.js"><link rel="prefetch" href="/assets/14.html.7b106669.js"><link rel="prefetch" href="/assets/15.html.c0e4acaa.js"><link rel="prefetch" href="/assets/16.html.7a3ba1ea.js"><link rel="prefetch" href="/assets/17.html.7a0b131d.js"><link rel="prefetch" href="/assets/18.html.a9e5ae4a.js"><link rel="prefetch" href="/assets/19.html.f9a1dad0.js"><link rel="prefetch" href="/assets/2.html.47656e60.js"><link rel="prefetch" href="/assets/20.html.7990e495.js"><link rel="prefetch" href="/assets/21.html.10de0a75.js"><link rel="prefetch" href="/assets/22.html.ccdeb6c4.js"><link rel="prefetch" href="/assets/23.html.371d6681.js"><link rel="prefetch" href="/assets/24.html.1e3b14eb.js"><link rel="prefetch" href="/assets/25.html.ce330676.js"><link rel="prefetch" href="/assets/26.html.d044406f.js"><link rel="prefetch" href="/assets/27.html.ccc926f6.js"><link rel="prefetch" href="/assets/28.html.49f5cbc7.js"><link rel="prefetch" href="/assets/29.html.f44fb171.js"><link rel="prefetch" href="/assets/3.html.44eda9ad.js"><link rel="prefetch" href="/assets/30.html.71962bb9.js"><link rel="prefetch" href="/assets/31.html.05d73e5f.js"><link rel="prefetch" href="/assets/32.html.e98a73d9.js"><link rel="prefetch" href="/assets/33.html.55b3c6fb.js"><link rel="prefetch" href="/assets/34.html.5146048c.js"><link rel="prefetch" href="/assets/35.html.51cb1df4.js"><link rel="prefetch" href="/assets/36.html.dea92735.js"><link rel="prefetch" href="/assets/37.html.4987df3a.js"><link rel="prefetch" href="/assets/38.html.94359779.js"><link rel="prefetch" href="/assets/39.html.e9fb19b6.js"><link rel="prefetch" href="/assets/4.html.11bb9c93.js"><link rel="prefetch" href="/assets/40.html.12ce2063.js"><link rel="prefetch" href="/assets/41.html.17b39dbf.js"><link rel="prefetch" href="/assets/42.html.737c2f7f.js"><link rel="prefetch" href="/assets/43.html.4aa549bb.js"><link rel="prefetch" href="/assets/44.html.461dd21b.js"><link rel="prefetch" href="/assets/45.html.f7fa8b44.js"><link rel="prefetch" href="/assets/46.html.0c1c3d86.js"><link rel="prefetch" href="/assets/47.html.7a6006c3.js"><link rel="prefetch" href="/assets/48.html.876530ae.js"><link rel="prefetch" href="/assets/49.html.93195ef1.js"><link rel="prefetch" href="/assets/5.html.d52a2513.js"><link rel="prefetch" href="/assets/50.html.ae771c42.js"><link rel="prefetch" href="/assets/6.html.6207e399.js"><link rel="prefetch" href="/assets/7.html.60b74bd7.js"><link rel="prefetch" href="/assets/8.html.4ebadc89.js"><link rel="prefetch" href="/assets/9.html.38305fea.js"><link rel="prefetch" href="/assets/k8s_011.html.a02b632d.js"><link rel="prefetch" href="/assets/k8s_012.html.43d51b72.js"><link rel="prefetch" href="/assets/k8s_013.html.ec5b47f7.js"><link rel="prefetch" href="/assets/k8s_014.html.f6d97c90.js"><link rel="prefetch" href="/assets/k8s_015.html.e0a1919b.js"><link rel="prefetch" href="/assets/k8s_016.html.3974eb6c.js"><link rel="prefetch" href="/assets/k8s_017.html.75871624.js"><link rel="prefetch" href="/assets/k8s_018.html.12099bf7.js"><link rel="prefetch" href="/assets/k8s_019.html.056e3a37.js"><link rel="prefetch" href="/assets/k8s_020.html.81fc58d1.js"><link rel="prefetch" href="/assets/k8s_021.html.28a3099b.js"><link rel="prefetch" href="/assets/k8s_022.html.bd4c9467.js"><link rel="prefetch" href="/assets/k8s_023.html.ffd7194a.js"><link rel="prefetch" href="/assets/k8s_024.html.3422943c.js"><link rel="prefetch" href="/assets/k8s_025.html.29b4b1e1.js"><link rel="prefetch" href="/assets/k8s_026.html.37a39c28.js"><link rel="prefetch" href="/assets/k8s_027.html.ffb2e25f.js"><link rel="prefetch" href="/assets/k8s_028.html.d98c6ad6.js"><link rel="prefetch" href="/assets/k8s_029.html.ca41febf.js"><link rel="prefetch" href="/assets/k8s_030.html.9902d045.js"><link rel="prefetch" href="/assets/README (copy).html.e4b91025.js"><link rel="prefetch" href="/assets/index.html.32aff7af.js"><link rel="prefetch" href="/assets/404.html.c3e557d0.js"><link rel="prefetch" href="/assets/index.html.1290aed6.js"><link rel="prefetch" href="/assets/1.html.ac5c931c.js"><link rel="prefetch" href="/assets/10.html.87770262.js"><link rel="prefetch" href="/assets/11.html.11e0485a.js"><link rel="prefetch" href="/assets/12.html.1ec8a8d3.js"><link rel="prefetch" href="/assets/13.html.e28b948f.js"><link rel="prefetch" href="/assets/14.html.ab751fa8.js"><link rel="prefetch" href="/assets/15.html.f231e595.js"><link rel="prefetch" href="/assets/16.html.ffbdabe0.js"><link rel="prefetch" href="/assets/17.html.c85af4e8.js"><link rel="prefetch" href="/assets/18.html.cf927445.js"><link rel="prefetch" href="/assets/19.html.28fdfacd.js"><link rel="prefetch" href="/assets/2.html.8f0c4ea7.js"><link rel="prefetch" href="/assets/20.html.1c3ec216.js"><link rel="prefetch" href="/assets/21.html.09f6f7df.js"><link rel="prefetch" href="/assets/22.html.63aa4c38.js"><link rel="prefetch" href="/assets/23.html.cc77834c.js"><link rel="prefetch" href="/assets/24.html.76294631.js"><link rel="prefetch" href="/assets/25.html.9a8281d7.js"><link rel="prefetch" href="/assets/26.html.c80aa421.js"><link rel="prefetch" href="/assets/27.html.20b70cc6.js"><link rel="prefetch" href="/assets/28.html.efa53b40.js"><link rel="prefetch" href="/assets/29.html.96643410.js"><link rel="prefetch" href="/assets/3.html.a9a2c21a.js"><link rel="prefetch" href="/assets/30.html.38eb2916.js"><link rel="prefetch" href="/assets/31.html.8754ec7e.js"><link rel="prefetch" href="/assets/32.html.e492938e.js"><link rel="prefetch" href="/assets/33.html.c5fa5a13.js"><link rel="prefetch" href="/assets/34.html.a4423081.js"><link rel="prefetch" href="/assets/35.html.33d44f9b.js"><link rel="prefetch" href="/assets/36.html.092b161d.js"><link rel="prefetch" href="/assets/37.html.0fbb5fd3.js"><link rel="prefetch" href="/assets/38.html.25e2bfc8.js"><link rel="prefetch" href="/assets/39.html.4b63dac1.js"><link rel="prefetch" href="/assets/4.html.42116853.js"><link rel="prefetch" href="/assets/40.html.270ee435.js"><link rel="prefetch" href="/assets/41.html.91df770a.js"><link rel="prefetch" href="/assets/42.html.16b8766a.js"><link rel="prefetch" href="/assets/43.html.c8ceccaf.js"><link rel="prefetch" href="/assets/44.html.c8056014.js"><link rel="prefetch" href="/assets/45.html.ca230335.js"><link rel="prefetch" href="/assets/46.html.34f6909b.js"><link rel="prefetch" href="/assets/47.html.44f074f2.js"><link rel="prefetch" href="/assets/48.html.b971a312.js"><link rel="prefetch" href="/assets/49.html.aedc8491.js"><link rel="prefetch" href="/assets/5.html.6f8a55ae.js"><link rel="prefetch" href="/assets/50.html.80351acb.js"><link rel="prefetch" href="/assets/51.html.0fd5a7c1.js"><link rel="prefetch" href="/assets/52.html.3769d0be.js"><link rel="prefetch" href="/assets/53.html.9ec8b31c.js"><link rel="prefetch" href="/assets/54.html.e9b22b6c.js"><link rel="prefetch" href="/assets/55.html.0676d603.js"><link rel="prefetch" href="/assets/56.html.8fc8b6c3.js"><link rel="prefetch" href="/assets/57.html.5b04a177.js"><link rel="prefetch" href="/assets/58.html.d50d237b.js"><link rel="prefetch" href="/assets/59.html.b3a0b611.js"><link rel="prefetch" href="/assets/6.html.c05467bb.js"><link rel="prefetch" href="/assets/60.html.3ca3df30.js"><link rel="prefetch" href="/assets/61.html.ef4754ae.js"><link rel="prefetch" href="/assets/62.html.04c33bfa.js"><link rel="prefetch" href="/assets/63.html.828be608.js"><link rel="prefetch" href="/assets/64.html.ec81c033.js"><link rel="prefetch" href="/assets/65.html.06018290.js"><link rel="prefetch" href="/assets/66.html.60fe5e56.js"><link rel="prefetch" href="/assets/67.html.3f286431.js"><link rel="prefetch" href="/assets/68.html.6428cd4d.js"><link rel="prefetch" href="/assets/69.html.c6ef10db.js"><link rel="prefetch" href="/assets/7.html.773da5c4.js"><link rel="prefetch" href="/assets/70.html.768767d9.js"><link rel="prefetch" href="/assets/71.html.392c28eb.js"><link rel="prefetch" href="/assets/72.html.710c6a33.js"><link rel="prefetch" href="/assets/73.html.bf097338.js"><link rel="prefetch" href="/assets/74.html.7770a244.js"><link rel="prefetch" href="/assets/75.html.1802d799.js"><link rel="prefetch" href="/assets/76.html.b0d47926.js"><link rel="prefetch" href="/assets/77.html.75864ddd.js"><link rel="prefetch" href="/assets/78.html.7cc87cef.js"><link rel="prefetch" href="/assets/79.html.f28671cb.js"><link rel="prefetch" href="/assets/8.html.0f92323e.js"><link rel="prefetch" href="/assets/80.html.8ae4e2e2.js"><link rel="prefetch" href="/assets/81.html.a8d11a56.js"><link rel="prefetch" href="/assets/82.html.1095a8e5.js"><link rel="prefetch" href="/assets/83.html.9b6840f5.js"><link rel="prefetch" href="/assets/84.html.8aa456de.js"><link rel="prefetch" href="/assets/85.html.2e522c64.js"><link rel="prefetch" href="/assets/86.html.1775e7ae.js"><link rel="prefetch" href="/assets/87.html.ed049040.js"><link rel="prefetch" href="/assets/88.html.ecdaac13.js"><link rel="prefetch" href="/assets/89.html.a0f4bb1e.js"><link rel="prefetch" href="/assets/9.html.5c921297.js"><link rel="prefetch" href="/assets/90.html.ead7e1a5.js"><link rel="prefetch" href="/assets/91.html.19ebdc35.js"><link rel="prefetch" href="/assets/92.html.b610d613.js"><link rel="prefetch" href="/assets/93.html.d1bfc488.js"><link rel="prefetch" href="/assets/94.html.7b63f179.js"><link rel="prefetch" href="/assets/95.html.94101264.js"><link rel="prefetch" href="/assets/96.html.43f99431.js"><link rel="prefetch" href="/assets/97.html.236372f2.js"><link rel="prefetch" href="/assets/98.html.9005f8ce.js"><link rel="prefetch" href="/assets/99.html.3d83e1e0.js"><link rel="prefetch" href="/assets/index.html.3ee1eadc.js"><link rel="prefetch" href="/assets/TODO.html.f6949723.js"><link rel="prefetch" href="/assets/1.html.cce79077.js"><link rel="prefetch" href="/assets/10.html.1019516a.js"><link rel="prefetch" href="/assets/11.html.db8967c8.js"><link rel="prefetch" href="/assets/12.html.0f8b248d.js"><link rel="prefetch" href="/assets/13.html.dd5d9d1c.js"><link rel="prefetch" href="/assets/14.html.95b9fc5e.js"><link rel="prefetch" href="/assets/15.html.574c0bfc.js"><link rel="prefetch" href="/assets/16.html.0f3ffb2e.js"><link rel="prefetch" href="/assets/17.html.9053b213.js"><link rel="prefetch" href="/assets/18.html.dc97b8bd.js"><link rel="prefetch" href="/assets/19.html.8fae2ab6.js"><link rel="prefetch" href="/assets/2.html.0d911783.js"><link rel="prefetch" href="/assets/20.html.15dd1abc.js"><link rel="prefetch" href="/assets/21.html.375ba9cc.js"><link rel="prefetch" href="/assets/22.html.e8ab06a9.js"><link rel="prefetch" href="/assets/23.html.e3f54e6f.js"><link rel="prefetch" href="/assets/24.html.8f768a40.js"><link rel="prefetch" href="/assets/25.html.2516d318.js"><link rel="prefetch" href="/assets/26.html.cc7ea51b.js"><link rel="prefetch" href="/assets/27.html.c8d4c831.js"><link rel="prefetch" href="/assets/28.html.6a619643.js"><link rel="prefetch" href="/assets/29.html.b82fed7f.js"><link rel="prefetch" href="/assets/3.html.43dfc28b.js"><link rel="prefetch" href="/assets/30.html.fbd1b6dc.js"><link rel="prefetch" href="/assets/31.html.30cdcf11.js"><link rel="prefetch" href="/assets/32.html.184c8481.js"><link rel="prefetch" href="/assets/33.html.8a9cf31e.js"><link rel="prefetch" href="/assets/34.html.f525d161.js"><link rel="prefetch" href="/assets/35.html.23199ad4.js"><link rel="prefetch" href="/assets/36.html.1de4cb38.js"><link rel="prefetch" href="/assets/37.html.5f58a936.js"><link rel="prefetch" href="/assets/38.html.533066a0.js"><link rel="prefetch" href="/assets/39.html.74e33d8a.js"><link rel="prefetch" href="/assets/4.html.07f40e7d.js"><link rel="prefetch" href="/assets/40.html.ba0d1286.js"><link rel="prefetch" href="/assets/41.html.084e2a1a.js"><link rel="prefetch" href="/assets/42.html.98ad5762.js"><link rel="prefetch" href="/assets/43.html.059eef6b.js"><link rel="prefetch" href="/assets/44.html.32831557.js"><link rel="prefetch" href="/assets/45.html.124cf44d.js"><link rel="prefetch" href="/assets/46.html.0915d06d.js"><link rel="prefetch" href="/assets/47.html.846971be.js"><link rel="prefetch" href="/assets/48.html.658c6ef2.js"><link rel="prefetch" href="/assets/49.html.5a67c156.js"><link rel="prefetch" href="/assets/5.html.c163e8fd.js"><link rel="prefetch" href="/assets/6.html.71bc26fe.js"><link rel="prefetch" href="/assets/7.html.bca116ab.js"><link rel="prefetch" href="/assets/8.html.21142885.js"><link rel="prefetch" href="/assets/9.html.dc92f1e7.js"><link rel="prefetch" href="/assets/1.html.a92cc9e8.js"><link rel="prefetch" href="/assets/10.html.0666eeb9.js"><link rel="prefetch" href="/assets/11.html.a0fb86cf.js"><link rel="prefetch" href="/assets/12.html.1e8a51be.js"><link rel="prefetch" href="/assets/13.html.a457a086.js"><link rel="prefetch" href="/assets/14.html.71d2e62a.js"><link rel="prefetch" href="/assets/15.html.d3f39842.js"><link rel="prefetch" href="/assets/16.html.455ce5dc.js"><link rel="prefetch" href="/assets/17.html.8d0efe3f.js"><link rel="prefetch" href="/assets/18.html.e0df6059.js"><link rel="prefetch" href="/assets/19.html.e391e21f.js"><link rel="prefetch" href="/assets/2.html.56d54f70.js"><link rel="prefetch" href="/assets/20.html.1237063d.js"><link rel="prefetch" href="/assets/21.html.ea418afa.js"><link rel="prefetch" href="/assets/22.html.e0565205.js"><link rel="prefetch" href="/assets/23.html.ef9f83e2.js"><link rel="prefetch" href="/assets/24.html.3f26ac2f.js"><link rel="prefetch" href="/assets/25.html.6f713fcd.js"><link rel="prefetch" href="/assets/26.html.21918a71.js"><link rel="prefetch" href="/assets/27.html.67f0cded.js"><link rel="prefetch" href="/assets/28.html.554b5385.js"><link rel="prefetch" href="/assets/29.html.b36adb99.js"><link rel="prefetch" href="/assets/3.html.11ab0f7c.js"><link rel="prefetch" href="/assets/30.html.b5f5c004.js"><link rel="prefetch" href="/assets/31.html.963667d1.js"><link rel="prefetch" href="/assets/32.html.78aa25f3.js"><link rel="prefetch" href="/assets/33.html.3602a975.js"><link rel="prefetch" href="/assets/34.html.1dc66df9.js"><link rel="prefetch" href="/assets/35.html.0d1c4978.js"><link rel="prefetch" href="/assets/36.html.31937e28.js"><link rel="prefetch" href="/assets/37.html.1dfd0154.js"><link rel="prefetch" href="/assets/38.html.0e95d24a.js"><link rel="prefetch" href="/assets/39.html.8957083d.js"><link rel="prefetch" href="/assets/4.html.d5784fcd.js"><link rel="prefetch" href="/assets/40.html.457ea449.js"><link rel="prefetch" href="/assets/41.html.c944fe1b.js"><link rel="prefetch" href="/assets/42.html.1fb75770.js"><link rel="prefetch" href="/assets/43.html.6e63092e.js"><link rel="prefetch" href="/assets/44.html.a544fb69.js"><link rel="prefetch" href="/assets/45.html.4bd93458.js"><link rel="prefetch" href="/assets/46.html.2438091b.js"><link rel="prefetch" href="/assets/47.html.3e3d1d38.js"><link rel="prefetch" href="/assets/48.html.457208b2.js"><link rel="prefetch" href="/assets/49.html.e30e6f16.js"><link rel="prefetch" href="/assets/5.html.8b205b36.js"><link rel="prefetch" href="/assets/50.html.2b555d4f.js"><link rel="prefetch" href="/assets/51.html.8f2426bd.js"><link rel="prefetch" href="/assets/52.html.b1b9a834.js"><link rel="prefetch" href="/assets/53.html.4fe07f94.js"><link rel="prefetch" href="/assets/54.html.2bf22cdd.js"><link rel="prefetch" href="/assets/55.html.de341ac3.js"><link rel="prefetch" href="/assets/56.html.91b7744c.js"><link rel="prefetch" href="/assets/57.html.77fdae36.js"><link rel="prefetch" href="/assets/58.html.3b0eaf00.js"><link rel="prefetch" href="/assets/59.html.a52da71f.js"><link rel="prefetch" href="/assets/6.html.1952864a.js"><link rel="prefetch" href="/assets/60.html.ad463a6a.js"><link rel="prefetch" href="/assets/61.html.cbf73b32.js"><link rel="prefetch" href="/assets/62.html.9f6fab34.js"><link rel="prefetch" href="/assets/63.html.9097588e.js"><link rel="prefetch" href="/assets/65.html.01b9a580.js"><link rel="prefetch" href="/assets/66.html.6fe5352c.js"><link rel="prefetch" href="/assets/67.html.3a27e178.js"><link rel="prefetch" href="/assets/68.html.ee0dd76c.js"><link rel="prefetch" href="/assets/69.html.7beac90a.js"><link rel="prefetch" href="/assets/7.html.de71d766.js"><link rel="prefetch" href="/assets/70.html.1c181608.js"><link rel="prefetch" href="/assets/71.html.aa6d1fed.js"><link rel="prefetch" href="/assets/72.html.00b5486a.js"><link rel="prefetch" href="/assets/73.html.8085ae1b.js"><link rel="prefetch" href="/assets/74.html.0ad4f062.js"><link rel="prefetch" href="/assets/75.html.bda29023.js"><link rel="prefetch" href="/assets/76.html.3d32ba92.js"><link rel="prefetch" href="/assets/77.html.ad665aeb.js"><link rel="prefetch" href="/assets/78.html.0bcef8ec.js"><link rel="prefetch" href="/assets/79.html.869e1b3e.js"><link rel="prefetch" href="/assets/8.html.b3a90826.js"><link rel="prefetch" href="/assets/80.html.0fc75cf4.js"><link rel="prefetch" href="/assets/81.html.52908d60.js"><link rel="prefetch" href="/assets/82.html.44697881.js"><link rel="prefetch" href="/assets/83.html.bff32d88.js"><link rel="prefetch" href="/assets/84.html.12f20d31.js"><link rel="prefetch" href="/assets/85.html.d481ffa1.js"><link rel="prefetch" href="/assets/86.html.c368cb0a.js"><link rel="prefetch" href="/assets/87.html.acec4485.js"><link rel="prefetch" href="/assets/88.html.6dd33831.js"><link rel="prefetch" href="/assets/89.html.8503ecb1.js"><link rel="prefetch" href="/assets/9.html.21d69359.js"><link rel="prefetch" href="/assets/90.html.bb18a027.js"><link rel="prefetch" href="/assets/91.html.37d631dd.js"><link rel="prefetch" href="/assets/92.html.42f6623e.js"><link rel="prefetch" href="/assets/93.html.2112e665.js"><link rel="prefetch" href="/assets/94.html.573fa096.js"><link rel="prefetch" href="/assets/95.html.82576ed9.js"><link rel="prefetch" href="/assets/96.html.0c42b0eb.js"><link rel="prefetch" href="/assets/97.html.d9c27985.js"><link rel="prefetch" href="/assets/98.html.687b7817.js"><link rel="prefetch" href="/assets/99.html.fb5b64f5.js"><link rel="prefetch" href="/assets/index.html.117557fa.js"><link rel="prefetch" href="/assets/1.html.971e3e1b.js"><link rel="prefetch" href="/assets/10.html.ff2574e1.js"><link rel="prefetch" href="/assets/11.html.a4ee46fb.js"><link rel="prefetch" href="/assets/12.html.b4f3656e.js"><link rel="prefetch" href="/assets/13.html.4438879a.js"><link rel="prefetch" href="/assets/14.html.3fd17035.js"><link rel="prefetch" href="/assets/15.html.c87ab2cb.js"><link rel="prefetch" href="/assets/16.html.bd0a377f.js"><link rel="prefetch" href="/assets/17.html.89906250.js"><link rel="prefetch" href="/assets/18.html.6f6fc099.js"><link rel="prefetch" href="/assets/19.html.b8fc33bd.js"><link rel="prefetch" href="/assets/2.html.846d9fad.js"><link rel="prefetch" href="/assets/20.html.6d0e99e0.js"><link rel="prefetch" href="/assets/21.html.60e8d73c.js"><link rel="prefetch" href="/assets/22.html.463c61dc.js"><link rel="prefetch" href="/assets/23.html.047da37f.js"><link rel="prefetch" href="/assets/24.html.bda5b4b9.js"><link rel="prefetch" href="/assets/25.html.d5a9e48c.js"><link rel="prefetch" href="/assets/26.html.980526c4.js"><link rel="prefetch" href="/assets/27.html.901b363c.js"><link rel="prefetch" href="/assets/28.html.30c943d0.js"><link rel="prefetch" href="/assets/29.html.ea38ebdb.js"><link rel="prefetch" href="/assets/3.html.b95d3f3b.js"><link rel="prefetch" href="/assets/30.html.dc9859ff.js"><link rel="prefetch" href="/assets/31.html.0dbea751.js"><link rel="prefetch" href="/assets/32.html.33137289.js"><link rel="prefetch" href="/assets/33.html.523377c9.js"><link rel="prefetch" href="/assets/34.html.867448e3.js"><link rel="prefetch" href="/assets/35.html.7582dc97.js"><link rel="prefetch" href="/assets/36.html.aba1b60a.js"><link rel="prefetch" href="/assets/37.html.66c3b539.js"><link rel="prefetch" href="/assets/38.html.c7ecb9ce.js"><link rel="prefetch" href="/assets/39.html.0abc0d11.js"><link rel="prefetch" href="/assets/4.html.9b153e01.js"><link rel="prefetch" href="/assets/40.html.9d3d1208.js"><link rel="prefetch" href="/assets/41.html.8caac670.js"><link rel="prefetch" href="/assets/42.html.606a4242.js"><link rel="prefetch" href="/assets/43.html.be4df9d5.js"><link rel="prefetch" href="/assets/44.html.efad8a0d.js"><link rel="prefetch" href="/assets/45.html.2bf66f92.js"><link rel="prefetch" href="/assets/46.html.69047468.js"><link rel="prefetch" href="/assets/47.html.6737fe24.js"><link rel="prefetch" href="/assets/48.html.e8277f5f.js"><link rel="prefetch" href="/assets/49.html.db7a74e8.js"><link rel="prefetch" href="/assets/5.html.04fce5b5.js"><link rel="prefetch" href="/assets/50.html.7378a031.js"><link rel="prefetch" href="/assets/6.html.7bc2565e.js"><link rel="prefetch" href="/assets/7.html.919480d6.js"><link rel="prefetch" href="/assets/8.html.fbf4356b.js"><link rel="prefetch" href="/assets/9.html.c791bb27.js"><link rel="prefetch" href="/assets/k8s_011.html.70021f48.js"><link rel="prefetch" href="/assets/k8s_012.html.cf029499.js"><link rel="prefetch" href="/assets/k8s_013.html.873b86d0.js"><link rel="prefetch" href="/assets/k8s_014.html.fb705f81.js"><link rel="prefetch" href="/assets/k8s_015.html.ae3b28f6.js"><link rel="prefetch" href="/assets/k8s_016.html.84c52c94.js"><link rel="prefetch" href="/assets/k8s_017.html.140cbe96.js"><link rel="prefetch" href="/assets/k8s_018.html.856a238c.js"><link rel="prefetch" href="/assets/k8s_019.html.2dd347d5.js"><link rel="prefetch" href="/assets/k8s_020.html.045e485d.js"><link rel="prefetch" href="/assets/k8s_021.html.5ffac998.js"><link rel="prefetch" href="/assets/k8s_022.html.fe4af60d.js"><link rel="prefetch" href="/assets/k8s_023.html.486ef1c7.js"><link rel="prefetch" href="/assets/k8s_024.html.70f0695b.js"><link rel="prefetch" href="/assets/k8s_025.html.c4aa71f5.js"><link rel="prefetch" href="/assets/k8s_026.html.9b64fdf8.js"><link rel="prefetch" href="/assets/k8s_027.html.48f668bd.js"><link rel="prefetch" href="/assets/k8s_028.html.cba1a45b.js"><link rel="prefetch" href="/assets/k8s_029.html.e1fcad19.js"><link rel="prefetch" href="/assets/k8s_030.html.9e86538b.js"><link rel="prefetch" href="/assets/README (copy).html.dfb68e61.js"><link rel="prefetch" href="/assets/index.html.928ad631.js"><link rel="prefetch" href="/assets/404.html.000e9968.js">
    <link rel="stylesheet" href="/assets/style.57cbcbfb.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="åˆ‡æ¢ä¾§è¾¹æ " aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">ä½ å¥½</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¤µå…³äºæˆ‘"><span class="title">ğŸ¤µå…³äºæˆ‘</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¤µå…³äºæˆ‘"><span class="title">ğŸ¤µå…³äºæˆ‘</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/3293172751/cs-awesome-Block_Chain" target="_self" aria-label="Githubä»“åº“"><!--[--><!--]--> Githubä»“åº“ <!----><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="http://nsddd.top" target="_self" aria-label="æˆ‘çš„åšå®¢"><!--[--><!--]--> æˆ‘çš„åšå®¢ <!----><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://www.zhihu.com/people/3293172751" rel="noopener noreferrer" target="_blank" aria-label="çŸ¥ä¹"><!--[--><!--]--> çŸ¥ä¹ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/C-UB/" rel="noopener noreferrer" target="_blank" aria-label="â›“ï¸é“¾å­¦ç¤¾ç»„ç»‡"><!--[--><!--]--> â›“ï¸é“¾å­¦ç¤¾ç»„ç»‡ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/" class="" aria-label="ğŸ é¦–é¡µ"><!--[--><!--]--> ğŸ é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://go.nsddd.top" rel="noopener noreferrer" target="_blank" aria-label="ğŸ“šGoè¯­è¨€å­¦ä¹ "><!--[--><!--]--> ğŸ“šGoè¯­è¨€å­¦ä¹  <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/Cloud-Native-k8s/" class="router-link-active" aria-label="âš¡ k8så­¦ä¹ ç¯‡"><!--[--><!--]--> âš¡ k8så­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/markdown/" class="" aria-label="âš¡ dockerå­¦ä¹ ç¯‡"><!--[--><!--]--> âš¡ dockerå­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/Cloud-Native/" class="" aria-label="ğŸ„â€â™‚ï¸ äº‘åŸç”Ÿå­¦ä¹ ç¯‡"><!--[--><!--]--> ğŸ„â€â™‚ï¸ äº‘åŸç”Ÿå­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/3293172751/awesome-docker" rel="noopener noreferrer" target="_blank" aria-label="æŸ¥çœ‹æºç "><!--[--><!--]--> æŸ¥çœ‹æºç  <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="åˆ‡æ¢é¢œè‰²æ¨¡å¼"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¤µå…³äºæˆ‘"><span class="title">ğŸ¤µå…³äºæˆ‘</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¤µå…³äºæˆ‘"><span class="title">ğŸ¤µå…³äºæˆ‘</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/3293172751/cs-awesome-Block_Chain" target="_self" aria-label="Githubä»“åº“"><!--[--><!--]--> Githubä»“åº“ <!----><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="http://nsddd.top" target="_self" aria-label="æˆ‘çš„åšå®¢"><!--[--><!--]--> æˆ‘çš„åšå®¢ <!----><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://www.zhihu.com/people/3293172751" rel="noopener noreferrer" target="_blank" aria-label="çŸ¥ä¹"><!--[--><!--]--> çŸ¥ä¹ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/C-UB/" rel="noopener noreferrer" target="_blank" aria-label="â›“ï¸é“¾å­¦ç¤¾ç»„ç»‡"><!--[--><!--]--> â›“ï¸é“¾å­¦ç¤¾ç»„ç»‡ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/" class="" aria-label="ğŸ é¦–é¡µ"><!--[--><!--]--> ğŸ é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://go.nsddd.top" rel="noopener noreferrer" target="_blank" aria-label="ğŸ“šGoè¯­è¨€å­¦ä¹ "><!--[--><!--]--> ğŸ“šGoè¯­è¨€å­¦ä¹  <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/Cloud-Native-k8s/" class="router-link-active" aria-label="âš¡ k8så­¦ä¹ ç¯‡"><!--[--><!--]--> âš¡ k8så­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/markdown/" class="" aria-label="âš¡ dockerå­¦ä¹ ç¯‡"><!--[--><!--]--> âš¡ dockerå­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/Cloud-Native/" class="" aria-label="ğŸ„â€â™‚ï¸ äº‘åŸç”Ÿå­¦ä¹ ç¯‡"><!--[--><!--]--> ğŸ„â€â™‚ï¸ äº‘åŸç”Ÿå­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/3293172751/awesome-docker" rel="noopener noreferrer" target="_blank" aria-label="æŸ¥çœ‹æºç "><!--[--><!--]--> æŸ¥çœ‹æºç  <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/" class="sidebar-item sidebar-heading" aria-label="ğŸ å›åˆ°ä¸»é¡µ"><!--[--><!--]--> ğŸ å›åˆ°ä¸»é¡µ <!--[--><!--]--></a><!----></li><li><a class="external-link sidebar-item sidebar-heading" href="https://xxw.nsddd.top/s/wRSz" rel="noopener noreferrer" target="_blank" aria-label="ğŸ’±ä¸ªäººäº‘ç›˜åœ°å€"><!--[--><!--]--> ğŸ’±ä¸ªäººäº‘ç›˜åœ°å€ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">âš¡ k8säº‘åŸç”Ÿå­¦ä¹ ç¯‡ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/Cloud-Native-k8s/1.html" class="sidebar-item" aria-label="ç¬¬1èŠ‚ äº‘å¹³å°"><!--[--><!--]--> ç¬¬1èŠ‚ äº‘å¹³å° <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/2.html" class="sidebar-item" aria-label="ç¬¬2èŠ‚ dockerå®ç”¨æ“ä½œ"><!--[--><!--]--> ç¬¬2èŠ‚ dockerå®ç”¨æ“ä½œ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/3.html" class="sidebar-item" aria-label="ç¬¬3èŠ‚ dockerä¸‰é©¾é©¬è½¦"><!--[--><!--]--> ç¬¬3èŠ‚ dockerä¸‰é©¾é©¬è½¦ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/4.html" class="sidebar-item" aria-label="ç¬¬4èŠ‚ kubernetes(k8s)æ•™ç¨‹"><!--[--><!--]--> ç¬¬4èŠ‚ kubernetes(k8s)æ•™ç¨‹ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/5.html" class="sidebar-item" aria-label="ç¬¬5èŠ‚ é›†ç¾¤æ­å»º"><!--[--><!--]--> ç¬¬5èŠ‚ é›†ç¾¤æ­å»º <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/6.html" class="sidebar-item" aria-label="ç¬¬6èŠ‚ sealosæ­å»ºk8s"><!--[--><!--]--> ç¬¬6èŠ‚ sealosæ­å»ºk8s <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/7.html" class="sidebar-item" aria-label="ç¬¬7èŠ‚ k8såœ¨çº¿å®éªŒå­¦ä¹ å¹³å°"><!--[--><!--]--> ç¬¬7èŠ‚ k8såœ¨çº¿å®éªŒå­¦ä¹ å¹³å° <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/8.html" class="sidebar-item" aria-label="ç¬¬8èŠ‚ å›¾å½¢ç•Œé¢å’Œå‘½åç©ºé—´"><!--[--><!--]--> ç¬¬8èŠ‚ å›¾å½¢ç•Œé¢å’Œå‘½åç©ºé—´ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/9.html" class="sidebar-item" aria-label="ç¬¬9èŠ‚ Pod"><!--[--><!--]--> ç¬¬9èŠ‚ Pod <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/10.html" class="sidebar-item" aria-label="ç¬¬10èŠ‚ Deployment"><!--[--><!--]--> ç¬¬10èŠ‚ Deployment <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/11.html" class="sidebar-item" aria-label="ç¬¬11èŠ‚ service"><!--[--><!--]--> ç¬¬11èŠ‚ service <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/12.html" class="sidebar-item" aria-label="ç¬¬12èŠ‚ Ingress"><!--[--><!--]--> ç¬¬12èŠ‚ Ingress <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/13.html" class="sidebar-item" aria-label="ç¬¬13èŠ‚ å­˜å‚¨æŠ½è±¡"><!--[--><!--]--> ç¬¬13èŠ‚ å­˜å‚¨æŠ½è±¡ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/14.html" class="sidebar-item" aria-label="ç¬¬14èŠ‚ k3s"><!--[--><!--]--> ç¬¬14èŠ‚ k3s <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/15.html" class="sidebar-item" aria-label="ç¬¬15èŠ‚ k3s è¡¥å……"><!--[--><!--]--> ç¬¬15èŠ‚ k3s è¡¥å…… <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/16.html" class="sidebar-item" aria-label="Treafik LB"><!--[--><!--]--> Treafik LB <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/17.html" class="sidebar-item" aria-label="ç¬¬17èŠ‚ Service LB"><!--[--><!--]--> ç¬¬17èŠ‚ Service LB <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/18.html" class="sidebar-item" aria-label="ç¬¬18èŠ‚kubernetes API è®¿é—®æ§åˆ¶"><!--[--><!--]--> ç¬¬18èŠ‚kubernetes API è®¿é—®æ§åˆ¶ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/19.html" class="sidebar-item" aria-label="ç¬¬19èŠ‚  StatefulSet"><!--[--><!--]--> ç¬¬19èŠ‚  StatefulSet <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/20.html" class="sidebar-item" aria-label="ç¬¬19èŠ‚  StatefulSet"><!--[--><!--]--> ç¬¬19èŠ‚  StatefulSet <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/21.html" class="sidebar-item" aria-label="ç¬¬21èŠ‚ Minikube å’Œ Kind"><!--[--><!--]--> ç¬¬21èŠ‚ Minikube å’Œ Kind <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/22.html" class="sidebar-item" aria-label="ç¬¬22èŠ‚ è¿è¡Œæœ‰çŠ¶æ€åº”ç”¨"><!--[--><!--]--> ç¬¬22èŠ‚ è¿è¡Œæœ‰çŠ¶æ€åº”ç”¨ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/23.html" class="sidebar-item" aria-label="ç¬¬23èŠ‚ Kubeconfig &amp;&amp; token"><!--[--><!--]--> ç¬¬23èŠ‚ Kubeconfig &amp;&amp; token <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/24.html" class="sidebar-item" aria-label="ç¬¬24èŠ‚ ETCD"><!--[--><!--]--> ç¬¬24èŠ‚ ETCD <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/25.html" class="sidebar-item" aria-label="ç¬¬25èŠ‚ raft ç®—æ³•"><!--[--><!--]--> ç¬¬25èŠ‚ raft ç®—æ³• <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/26.html" class="sidebar-item" aria-label="ç¬¬26èŠ‚ helm æ•™ç¨‹"><!--[--><!--]--> ç¬¬26èŠ‚ helm æ•™ç¨‹ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/27.html" class="sidebar-item" aria-label="ç¬¬27èŠ‚ k3s è¡¥å……ï¼ˆé«˜çº§ï¼‰"><!--[--><!--]--> ç¬¬27èŠ‚ k3s è¡¥å……ï¼ˆé«˜çº§ï¼‰ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/28.html" class="sidebar-item" aria-label="ç¬¬28èŠ‚ Linuxç³»ç»Ÿç§»æ¤ï¼Œåˆ†åŒºï¼Œrootfs"><!--[--><!--]--> ç¬¬28èŠ‚ Linuxç³»ç»Ÿç§»æ¤ï¼Œåˆ†åŒºï¼Œrootfs <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/29.html" class="sidebar-item" aria-label="ç¬¬29èŠ‚ CloudNative / Kubernetes å­¦ä¹ èµ„æºæ•´ç†"><!--[--><!--]--> ç¬¬29èŠ‚ CloudNative / Kubernetes å­¦ä¹ èµ„æºæ•´ç† <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/30.html" class="sidebar-item" aria-label="ç¬¬30èŠ‚ K8s å¼€å‘ç¯å¢ƒæ­å»º"><!--[--><!--]--> ç¬¬30èŠ‚ K8s å¼€å‘ç¯å¢ƒæ­å»º <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/31.html" class="sidebar-item" aria-label="ç¬¬31èŠ‚ kubernetes çš„ç¼–è¯‘å’Œè°ƒè¯•"><!--[--><!--]--> ç¬¬31èŠ‚ kubernetes çš„ç¼–è¯‘å’Œè°ƒè¯• <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/32.html" class="sidebar-item" aria-label="ç¬¬32èŠ‚ kubernetes ç›®å½•ç»“æ„"><!--[--><!--]--> ç¬¬32èŠ‚ kubernetes ç›®å½•ç»“æ„ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/33.html" class="sidebar-item" aria-label="ç¬¬33èŠ‚ Postmanè¯·æ±‚Server"><!--[--><!--]--> ç¬¬33èŠ‚ Postmanè¯·æ±‚Server <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/34.html" class="sidebar-item" aria-label="ç¬¬34èŠ‚ API Server"><!--[--><!--]--> ç¬¬34èŠ‚ API Server <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/35.html" class="sidebar-item" aria-label="ç¬¬35èŠ‚ client-go å†™ k8s æ§åˆ¶å™¨"><!--[--><!--]--> ç¬¬35èŠ‚ client-go å†™ k8s æ§åˆ¶å™¨ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/36.html" class="sidebar-item" aria-label="ç¬¬ 36 èŠ‚ ä¸€äº›ç–‘é—®"><!--[--><!--]--> ç¬¬ 36 èŠ‚ ä¸€äº›ç–‘é—® <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/37.html" class="sidebar-item" aria-label="ç¬¬ 37 èŠ‚ ä¸€äº›ç–‘é—®å’Œè§£ç­” 2"><!--[--><!--]--> ç¬¬ 37 èŠ‚ ä¸€äº›ç–‘é—®å’Œè§£ç­” 2 <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/38.html" class="sidebar-item" aria-label="ç¬¬38èŠ‚ ä¸€äº›ç–‘é—®å’Œè§£ç­”3"><!--[--><!--]--> ç¬¬38èŠ‚ ä¸€äº›ç–‘é—®å’Œè§£ç­”3 <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/39.html" class="sidebar-item" aria-label="ç¬¬ 39 èŠ‚ å…³äº Kubernetes çš„ä¸€äº›ç–‘é—® 4"><!--[--><!--]--> ç¬¬ 39 èŠ‚ å…³äº Kubernetes çš„ä¸€äº›ç–‘é—® 4 <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/40.html" class="sidebar-item" aria-label="ç¬¬40èŠ‚ Istio"><!--[--><!--]--> ç¬¬40èŠ‚ Istio <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/41.html" class="sidebar-item" aria-label="ç¬¬41èŠ‚ ä»£ç ç”Ÿæˆ"><!--[--><!--]--> ç¬¬41èŠ‚ ä»£ç ç”Ÿæˆ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/42.html" class="sidebar-item" aria-label="ç¬¬ 42 èŠ‚ Kubernetes çš„å¤šç§Ÿæˆ·"><!--[--><!--]--> ç¬¬ 42 èŠ‚ Kubernetes çš„å¤šç§Ÿæˆ· <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/43.html" class="sidebar-item" aria-label="ç¬¬43èŠ‚ kubernetes çš„è´¡çŒ®å­¦ä¹ "><!--[--><!--]--> ç¬¬43èŠ‚ kubernetes çš„è´¡çŒ®å­¦ä¹  <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/44.html" class="sidebar-item" aria-label="ç¬¬44èŠ‚ kubernetes èµ„æºå†…éƒ¨ç‰ˆæœ¬å’Œå¤–éƒ¨ç‰ˆæœ¬"><!--[--><!--]--> ç¬¬44èŠ‚ kubernetes èµ„æºå†…éƒ¨ç‰ˆæœ¬å’Œå¤–éƒ¨ç‰ˆæœ¬ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/45.html" class="sidebar-item" aria-label="ç¬¬45èŠ‚ namespace é€šä¿¡é—®é¢˜"><!--[--><!--]--> ç¬¬45èŠ‚ namespace é€šä¿¡é—®é¢˜ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/46.html" class="sidebar-item" aria-label="ç¬¬46èŠ‚ æ·±æŒ–å®¹å™¨åº•å±‚æŠ€æœ¯"><!--[--><!--]--> ç¬¬46èŠ‚ æ·±æŒ–å®¹å™¨åº•å±‚æŠ€æœ¯ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/47.html" class="sidebar-item" aria-label="ç¬¬47èŠ‚ Kubernetes æ¦‚å¿µä»¥åŠæ¶æ„"><!--[--><!--]--> ç¬¬47èŠ‚ Kubernetes æ¦‚å¿µä»¥åŠæ¶æ„ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/48.html" class="sidebar-item" aria-label="ç¬¬48èŠ‚ æ·±å…¥ç†è§£Kubernetesæ§åˆ¶å¹³é¢ç»„ä»¶ï¼šETCD"><!--[--><!--]--> ç¬¬48èŠ‚ æ·±å…¥ç†è§£Kubernetesæ§åˆ¶å¹³é¢ç»„ä»¶ï¼šETCD <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/49.html" class="sidebar-item" aria-label="ç¬¬49èŠ‚ æ·±å…¥ç†è§£ Kube-APIServer"><!--[--><!--]--> ç¬¬49èŠ‚ æ·±å…¥ç†è§£ Kube-APIServer <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/50.html" class="sidebar-item" aria-label="ç¬¬50èŠ‚ Kubernetes æ§åˆ¶å¹³é¢ï¼šè°ƒåº¦å™¨"><!--[--><!--]--> ç¬¬50èŠ‚ Kubernetes æ§åˆ¶å¹³é¢ï¼šè°ƒåº¦å™¨ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/51.html" class="sidebar-item" aria-label="ç¬¬51èŠ‚  Controller Manager"><!--[--><!--]--> ç¬¬51èŠ‚  Controller Manager <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/52.html" class="sidebar-item" aria-label="ç¬¬52èŠ‚ kubectl"><!--[--><!--]--> ç¬¬52èŠ‚ kubectl <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/53.html" class="sidebar-item" aria-label="ç¬¬53èŠ‚ CRIã€CNIã€CSI åº•å±‚åˆ¨æ"><!--[--><!--]--> ç¬¬53èŠ‚ CRIã€CNIã€CSI åº•å±‚åˆ¨æ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/54.html" class="sidebar-item" aria-label="ç¬¬54èŠ‚ Kubernetes ç”Ÿå‘½å‘¨æœŸç®¡ç†å’ŒæœåŠ¡å‘ç°"><!--[--><!--]--> ç¬¬54èŠ‚ Kubernetes ç”Ÿå‘½å‘¨æœŸç®¡ç†å’ŒæœåŠ¡å‘ç° <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/55.html" class="sidebar-item" aria-label="ç¬¬55èŠ‚ æœåŠ¡å‘ç°"><!--[--><!--]--> ç¬¬55èŠ‚ æœåŠ¡å‘ç° <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/56.html" class="sidebar-item" aria-label="ç¬¬56èŠ‚ service"><!--[--><!--]--> ç¬¬56èŠ‚ service <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/57.html" class="sidebar-item" aria-label="ç¬¬57èŠ‚ kube-proxy"><!--[--><!--]--> ç¬¬57èŠ‚ kube-proxy <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/58.html" class="sidebar-item" aria-label="ç¬¬58èŠ‚ Kubernetes ç½‘ç»œ"><!--[--><!--]--> ç¬¬58èŠ‚ Kubernetes ç½‘ç»œ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/59.html" class="sidebar-item" aria-label="ç¬¬59èŠ‚ CoreDNS å’Œ Ingress"><!--[--><!--]--> ç¬¬59èŠ‚ CoreDNS å’Œ Ingress <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/60.html" class="sidebar-item" aria-label="ç¬¬60èŠ‚ ç”Ÿäº§åŒ–é›†ç¾¤çš„ç®¡ç†"><!--[--><!--]--> ç¬¬60èŠ‚ ç”Ÿäº§åŒ–é›†ç¾¤çš„ç®¡ç† <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/61.html" class="sidebar-item" aria-label="ç¬¬61èŠ‚ èŠ‚ç‚¹èµ„æºç®¡ç†ã€å¼‚å¸¸æ£€æµ‹ä»¥åŠå¸¸è§é—®é¢˜æ’æŸ¥"><!--[--><!--]--> ç¬¬61èŠ‚ èŠ‚ç‚¹èµ„æºç®¡ç†ã€å¼‚å¸¸æ£€æµ‹ä»¥åŠå¸¸è§é—®é¢˜æ’æŸ¥ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/62.html" class="sidebar-item" aria-label="ç¬¬62èŠ‚ Istio é«˜çº§æµé‡ç®¡ç†"><!--[--><!--]--> ç¬¬62èŠ‚ Istio é«˜çº§æµé‡ç®¡ç† <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/63.html" class="sidebar-item" aria-label="ç¬¬63èŠ‚ Prometheus å’Œ Grafana æ—¥å¿—æ”¶é›†æ–¹æ¡ˆ"><!--[--><!--]--> ç¬¬63èŠ‚ Prometheus å’Œ Grafana æ—¥å¿—æ”¶é›†æ–¹æ¡ˆ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/64.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="ç¬¬64èŠ‚ kubeadmæ¦‚è¿°ã€åŸç†ã€ä»¥åŠéƒ¨åˆ†æºç é˜…è¯»"><!--[--><!--]--> ç¬¬64èŠ‚ kubeadmæ¦‚è¿°ã€åŸç†ã€ä»¥åŠéƒ¨åˆ†æºç é˜…è¯» <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Cloud-Native-k8s/64.html#kubeadm" class="router-link-active router-link-exact-active sidebar-item" aria-label="kubeadm"><!--[--><!--]--> kubeadm <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/64.html#kubeadm-init" class="router-link-active router-link-exact-active sidebar-item" aria-label="kubeadm init"><!--[--><!--]--> kubeadm init <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/64.html#kubeadm-join" class="router-link-active router-link-exact-active sidebar-item" aria-label="kubeadm join"><!--[--><!--]--> kubeadm join <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/64.html#kubeadm-upgrade" class="router-link-active router-link-exact-active sidebar-item" aria-label="kubeadm upgrade"><!--[--><!--]--> kubeadm upgrade <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/64.html#kubeadm-config" class="router-link-active router-link-exact-active sidebar-item" aria-label="kubeadm config"><!--[--><!--]--> kubeadm config <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/64.html#kubeadm-reset" class="router-link-active router-link-exact-active sidebar-item" aria-label="kubeadm reset"><!--[--><!--]--> kubeadm reset <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/64.html#kubeadm-token" class="router-link-active router-link-exact-active sidebar-item" aria-label="kubeadm token"><!--[--><!--]--> kubeadm token <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/64.html#kubeadm-version" class="router-link-active router-link-exact-active sidebar-item" aria-label="kubeadm version"><!--[--><!--]--> kubeadm version <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/64.html#kubeadm-alpha" class="router-link-active router-link-exact-active sidebar-item" aria-label="kubeadm alpha"><!--[--><!--]--> kubeadm alpha <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/64.html#kubeadm-init-phase" class="router-link-active router-link-exact-active sidebar-item" aria-label="kubeadm init phase"><!--[--><!--]--> kubeadm init phase <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/64.html#kubeadm-join-phase" class="router-link-active router-link-exact-active sidebar-item" aria-label="kubeadm join phase"><!--[--><!--]--> kubeadm join phase <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/64.html#ç»†èŠ‚" class="router-link-active router-link-exact-active sidebar-item" aria-label="ç»†èŠ‚"><!--[--><!--]--> ç»†èŠ‚ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/64.html#end-é“¾æ¥" class="router-link-active router-link-exact-active sidebar-item" aria-label="END é“¾æ¥"><!--[--><!--]--> END é“¾æ¥ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/Cloud-Native-k8s/65.html" class="sidebar-item" aria-label="ç¬¬65èŠ‚ eBPF åˆ¨æä»¥åŠæºç å­¦ä¹ "><!--[--><!--]--> ç¬¬65èŠ‚ eBPF åˆ¨æä»¥åŠæºç å­¦ä¹  <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/66.html" class="sidebar-item" aria-label="ç¬¬66èŠ‚ Kubernetes äºŒæ¬¡å¼€å‘ CRD å­¦ä¹ "><!--[--><!--]--> ç¬¬66èŠ‚ Kubernetes äºŒæ¬¡å¼€å‘ CRD å­¦ä¹  <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/67.html" class="sidebar-item" aria-label="ç¬¬67èŠ‚ K8s æ·±å…¥ç†è§£ Operator-client è¯¦è§£"><!--[--><!--]--> ç¬¬67èŠ‚ K8s æ·±å…¥ç†è§£ Operator-client è¯¦è§£ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/68.html" class="sidebar-item" aria-label="ç¬¬68èŠ‚ Reflector åŸç†"><!--[--><!--]--> ç¬¬68èŠ‚ Reflector åŸç† <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/69.html" class="sidebar-item" aria-label="ç¬¬69èŠ‚  DeltaFIFO åŸç†"><!--[--><!--]--> ç¬¬69èŠ‚  DeltaFIFO åŸç† <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/70.html" class="sidebar-item" aria-label="ç¬¬70èŠ‚"><!--[--><!--]--> ç¬¬70èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/71.html" class="sidebar-item" aria-label="ç¬¬71èŠ‚"><!--[--><!--]--> ç¬¬71èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/72.html" class="sidebar-item" aria-label="ç¬¬72èŠ‚"><!--[--><!--]--> ç¬¬72èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/73.html" class="sidebar-item" aria-label="ç¬¬73èŠ‚"><!--[--><!--]--> ç¬¬73èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/74.html" class="sidebar-item" aria-label="ç¬¬74èŠ‚"><!--[--><!--]--> ç¬¬74èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/75.html" class="sidebar-item" aria-label="ç¬¬75èŠ‚"><!--[--><!--]--> ç¬¬75èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/76.html" class="sidebar-item" aria-label="ç¬¬76èŠ‚"><!--[--><!--]--> ç¬¬76èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/77.html" class="sidebar-item" aria-label="ç¬¬77èŠ‚"><!--[--><!--]--> ç¬¬77èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/78.html" class="sidebar-item" aria-label="ç¬¬78èŠ‚"><!--[--><!--]--> ç¬¬78èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/79.html" class="sidebar-item" aria-label="ç¬¬79èŠ‚"><!--[--><!--]--> ç¬¬79èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/80.html" class="sidebar-item" aria-label="ç¬¬80èŠ‚"><!--[--><!--]--> ç¬¬80èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/81.html" class="sidebar-item" aria-label="ç¬¬81èŠ‚"><!--[--><!--]--> ç¬¬81èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/82.html" class="sidebar-item" aria-label="ç¬¬82èŠ‚"><!--[--><!--]--> ç¬¬82èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/83.html" class="sidebar-item" aria-label="ç¬¬83èŠ‚"><!--[--><!--]--> ç¬¬83èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/84.html" class="sidebar-item" aria-label="ç¬¬84èŠ‚"><!--[--><!--]--> ç¬¬84èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/85.html" class="sidebar-item" aria-label="ç¬¬85èŠ‚"><!--[--><!--]--> ç¬¬85èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/86.html" class="sidebar-item" aria-label="ç¬¬86èŠ‚"><!--[--><!--]--> ç¬¬86èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/87.html" class="sidebar-item" aria-label="ç¬¬87èŠ‚"><!--[--><!--]--> ç¬¬87èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/88.html" class="sidebar-item" aria-label="ç¬¬88èŠ‚"><!--[--><!--]--> ç¬¬88èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/89.html" class="sidebar-item" aria-label="ç¬¬89èŠ‚"><!--[--><!--]--> ç¬¬89èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/90.html" class="sidebar-item" aria-label="ç¬¬90èŠ‚"><!--[--><!--]--> ç¬¬90èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/91.html" class="sidebar-item" aria-label="ç¬¬91èŠ‚"><!--[--><!--]--> ç¬¬91èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/92.html" class="sidebar-item" aria-label="ç¬¬92èŠ‚"><!--[--><!--]--> ç¬¬92èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/93.html" class="sidebar-item" aria-label="ç¬¬93èŠ‚"><!--[--><!--]--> ç¬¬93èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/94.html" class="sidebar-item" aria-label="ç¬¬94èŠ‚"><!--[--><!--]--> ç¬¬94èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/95.html" class="sidebar-item" aria-label="ç¬¬95èŠ‚"><!--[--><!--]--> ç¬¬95èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/96.html" class="sidebar-item" aria-label="ç¬¬96èŠ‚"><!--[--><!--]--> ç¬¬96èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/97.html" class="sidebar-item" aria-label="ç¬¬97èŠ‚"><!--[--><!--]--> ç¬¬97èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/98.html" class="sidebar-item" aria-label="ç¬¬98èŠ‚"><!--[--><!--]--> ç¬¬98èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/99.html" class="sidebar-item" aria-label="ç¬¬99èŠ‚"><!--[--><!--]--> ç¬¬99èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/100.md" class="sidebar-item" aria-label="100.md"><!--[--><!--]--> 100.md <!--[--><!--]--></a><!----></li><li><a class="external-link sidebar-item" href="https://nsddd.top/archives/contributors" rel="noopener noreferrer" target="_blank" aria-label="ğŸ’å¦‚ä½•å‚ä¸è´¡çŒ®ï¼Ÿ"><!--[--><!--]--> ğŸ’å¦‚ä½•å‚ä¸è´¡çŒ®ï¼Ÿ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><ul><li><a href="http://nsddd.top" target="_blank" rel="noopener noreferrer">author<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h1 id="ç¬¬64èŠ‚-kubeadmæ¦‚è¿°ã€åŸç†ã€ä»¥åŠéƒ¨åˆ†æºç é˜…è¯»" tabindex="-1"><a class="header-anchor" href="#ç¬¬64èŠ‚-kubeadmæ¦‚è¿°ã€åŸç†ã€ä»¥åŠéƒ¨åˆ†æºç é˜…è¯»" aria-hidden="true">#</a> ç¬¬64èŠ‚ kubeadmæ¦‚è¿°ã€åŸç†ã€ä»¥åŠéƒ¨åˆ†æºç é˜…è¯»</h1><div><a href="63.md" style="float:left;">â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”— </a><a href="65.md" style="float:right;"> â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div><br><blockquote><p>â¤ï¸ğŸ’•ğŸ’•æ–°æ—¶ä»£æ‹¥æŠ±äº‘åŸç”Ÿï¼Œäº‘åŸç”Ÿå…·æœ‰ç¯å¢ƒç»Ÿä¸€ã€æŒ‰éœ€ä»˜è´¹ã€å³å¼€å³ç”¨ã€ç¨³å®šæ€§å¼ºç‰¹ç‚¹ã€‚Myblog:<a href="http://nsddd.top/" target="_blank" rel="noopener noreferrer">http://nsddd.top<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><hr><p>[TOC]</p><h2 id="kubeadm" tabindex="-1"><a class="header-anchor" href="#kubeadm" aria-hidden="true">#</a> kubeadm</h2><ul><li><a href="https://github.com/kubernetes/kubeadm/blob/main/docs/design/" target="_blank" rel="noopener noreferrer">github kubeadm design docs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><p>æˆ‘ä»¬åœ¨å‰é¢å‡ åä¸ªå°èŠ‚å­¦ä¹ ä¸­ä¹ŸçŸ¥é“äº† REST APIæ˜¯Kubernetesçš„åŸºæœ¬ç»“æ„ã€‚ç»„ä»¶å’Œå¤–éƒ¨ç”¨æˆ·å‘½ä»¤ä¹‹é—´çš„æ‰€æœ‰æ“ä½œå’Œé€šä¿¡éƒ½æ˜¯APIæœåŠ¡å™¨å¤„ç†çš„REST APIè°ƒç”¨ã€‚å› æ­¤ï¼ŒKuberneteså¹³å°ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½è¢«è§†ä¸ºAPIå¯¹è±¡ï¼Œå¹¶ä¸”åœ¨APIä¸­æœ‰ç›¸åº”çš„æ¡ç›®ã€‚</p><p>å¤§å¤šæ•°æ“ä½œéƒ½å¯ä»¥é€šè¿‡<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/kubectl_cli/overview_of_kubectl.html" target="_blank" rel="noopener noreferrer"><code>kubectl</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>å‘½ä»¤è¡Œç•Œé¢æˆ–å…¶ä»–å‘½ä»¤è¡Œå·¥å…·(å¦‚<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/overview_of_kubeadm.html" target="_blank" rel="noopener noreferrer"><code>kubeadm</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)æ‰§è¡Œï¼Œè€Œè¿™äº›å·¥å…·åˆä½¿ç”¨APIã€‚ä¸è¿‡ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨RESTè°ƒç”¨ç›´æ¥è®¿é—®APIã€‚</p><p>Kubeadmæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå®ƒæä¾›<code>kubeadm init</code>å’Œ<code>kubeadm join</code>ä½œä¸ºåˆ›å»ºKubernetesé›†ç¾¤çš„æœ€ä½³å®è·µâ€œå¿«æ·è·¯å¾„â€ã€‚</p><blockquote><p>kubeadmæ˜¯ä¸€ä¸ªç”¨äºéƒ¨ç½²Kubernetesé›†ç¾¤çš„å·¥å…·ã€‚å®ƒè¢«è®¾è®¡ç”¨äºè‡ªåŠ¨åŒ–å¤§å¤šæ•°Kubernetesé›†ç¾¤çš„éƒ¨ç½²ä»»åŠ¡ï¼Œä»è€Œä½¿Kubernetesé›†ç¾¤çš„éƒ¨ç½²å˜å¾—æ›´åŠ ç®€å•å’Œé«˜æ•ˆã€‚kubeadmè´Ÿè´£åˆå§‹åŒ–MasterèŠ‚ç‚¹ï¼Œå¹¶åœ¨èŠ‚ç‚¹ä¸Šå®‰è£…Kubernetesç»„ä»¶ã€‚å®ƒè¿˜å¯ä»¥æ·»åŠ WorkerèŠ‚ç‚¹ï¼Œä»¥ä¾¿å°†å®ƒä»¬æ·»åŠ åˆ°é›†ç¾¤ä¸­ã€‚</p></blockquote><p>kubeadmæ‰§è¡Œå¿…è¦çš„æ“ä½œæ¥å¯åŠ¨å’Œè¿è¡Œæœ€å°å¯è¡Œé›†ç¾¤ã€‚æŒ‰ç…§è®¾è®¡ï¼Œå®ƒåªå…³å¿ƒå¼•å¯¼ï¼Œè€Œä¸å…³å¿ƒé…ç½®æœºå™¨ã€‚åŒæ ·ï¼Œå®‰è£…å„ç§æ¼‚äº®çš„æ’ä»¶(æ¯”å¦‚Kubernetes Dashboardã€ç›‘æ§è§£å†³æ–¹æ¡ˆå’Œç‰¹å®šäºäº‘çš„æ’ä»¶)ä¹Ÿä¸åœ¨è®¨è®ºèŒƒå›´ä¹‹å†…ã€‚</p><p>ç›¸åï¼Œæˆ‘ä»¬æœŸæœ›åœ¨kubeadmçš„åŸºç¡€ä¸Šæ„å»ºæ›´é«˜çº§ã€æ›´å®šåˆ¶åŒ–çš„å·¥å…·ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œä½¿ç”¨kubeadmä½œä¸ºæ‰€æœ‰éƒ¨ç½²çš„åŸºç¡€å°†ä½¿åˆ›å»ºç¬¦åˆè§„èŒƒçš„é›†ç¾¤å˜å¾—æ›´å®¹æ˜“ã€‚</p><h2 id="kubeadm-init" tabindex="-1"><a class="header-anchor" href="#kubeadm-init" aria-hidden="true">#</a> kubeadm init</h2><p>æ­¤å‘½ä»¤ç”¨äºåˆå§‹åŒ–Kubernetesæ§åˆ¶å¹³é¢èŠ‚ç‚¹ã€‚</p><p><code>init</code>å‘½ä»¤æ‰§è¡Œä»¥ä¸‹é˜¶æ®µ:</p><ol><li><strong>preflight</strong> è¿è¡Œé¢„æ£€æŸ¥</li><li><strong>certs</strong>ï¼šè¯ä¹¦ç”Ÿæˆ <ul><li><strong>/ca</strong> ç”Ÿæˆç”¨äºä¸ºå…¶ä»–Kubernetesç»„ä»¶æä¾›èº«ä»½çš„è‡ªç­¾åKubernetes CA</li><li><strong>/apiserver</strong> ç”Ÿæˆç”¨äºæä¾›Kubernetes APIçš„è¯ä¹¦</li><li><strong>/apiserver-kubelet-client</strong> ç”ŸæˆAPIæœåŠ¡å™¨ç”¨äºè¿æ¥kubeletçš„è¯ä¹¦</li><li><strong>/front-proxy-ca</strong> ç”Ÿæˆç”¨äºæä¾›å‰ç½®ä»£ç†èº«ä»½çš„è‡ªç­¾åCA</li><li><strong>/front-proxy-client</strong> ç”Ÿæˆå‰ç½®ä»£ç†å®¢æˆ·ç«¯è¯ä¹¦</li><li><strong>/etcd-ca</strong> ç”Ÿæˆç”¨äºä¸ºetcdæä¾›èº«ä»½çš„è‡ªç­¾åCA</li><li><strong>/etcd-server</strong> ç”Ÿæˆç”¨äºæä¾›etcdæœåŠ¡çš„è¯ä¹¦</li><li><strong>/etcd-peer</strong> ç”Ÿæˆä¾›etcdèŠ‚ç‚¹ç›¸äº’é€šä¿¡çš„è¯ä¹¦</li><li><strong>/etcd-healthcheck-client</strong> ç”Ÿæˆç”¨äºå¥åº·æ£€æŸ¥etcdçš„æ´»æ€§æ¢é’ˆè¯ä¹¦</li><li><strong>/apiserver-etcd-client</strong> ç”Ÿæˆapiserverç”¨äºè®¿é—®etcdçš„è¯ä¹¦</li><li><strong>/sa</strong> ç”Ÿæˆç”¨äºç­¾ç½²æœåŠ¡å¸æˆ·ä»¤ç‰Œçš„ç§é’¥åŠå…¶å…¬é’¥</li></ul></li><li><strong>kubeconfig</strong>ï¼šç”Ÿæˆæ‰€æœ‰kubeconfigæ–‡ä»¶ï¼Œä»¥å»ºç«‹æ§åˆ¶å¹³é¢å’Œç®¡ç†å‘˜kubeconfigæ–‡ä»¶ <ul><li><strong>/admin</strong> ä¸ºç®¡ç†å‘˜å’Œkubeadmæœ¬èº«ç”Ÿæˆkubeconfigæ–‡ä»¶</li><li><strong>/kubelet</strong> ä¸ºkubeletç”Ÿæˆkubeconfigæ–‡ä»¶ï¼Œä»…ç”¨äºé›†ç¾¤å¼•å¯¼ç›®çš„</li><li><strong>/controller-manager</strong> ä¸ºæ§åˆ¶å™¨ç®¡ç†å™¨ç”Ÿæˆkubeconfigæ–‡ä»¶</li><li><strong>/scheduler</strong> ä¸ºè°ƒåº¦å™¨ç”Ÿæˆkubeconfigæ–‡ä»¶</li></ul></li><li><strong>kubelet-start</strong> å†™å…¥kubeletè®¾ç½®å¹¶ï¼ˆé‡æ–°ï¼‰å¯åŠ¨kubelet</li><li><strong>control-plane</strong>ï¼šç”Ÿæˆæ‰€æœ‰é™æ€Podæ¸…å•æ–‡ä»¶ï¼Œä»¥å»ºç«‹æ§åˆ¶å¹³é¢ <ul><li><strong>/apiserver</strong> ç”Ÿæˆkube-apiserveré™æ€Podæ¸…å•</li><li><strong>/controller-manager</strong> ç”Ÿæˆkube-controller-manageré™æ€Podæ¸…å•</li><li><strong>/scheduler</strong> ç”Ÿæˆkube-scheduleré™æ€Podæ¸…å•</li></ul></li><li><strong>etcd</strong>ï¼šä¸ºæœ¬åœ°etcdç”Ÿæˆé™æ€Podæ¸…å•æ–‡ä»¶ <ul><li><strong>/local</strong> ä¸ºæœ¬åœ°å•èŠ‚ç‚¹etcdå®ä¾‹ç”Ÿæˆé™æ€Podæ¸…å•æ–‡ä»¶</li></ul></li><li><strong>upload-config</strong>ï¼šå°†kubeadmå’Œkubeleté…ç½®ä¸Šä¼ åˆ°ConfigMap <ul><li><strong>/kubeadm</strong> å°†kubeadm ClusterConfigurationä¸Šä¼ åˆ°ConfigMap</li><li><strong>/kubelet</strong> å°†kubeletç»„ä»¶é…ç½®ä¸Šä¼ åˆ°ConfigMap</li></ul></li><li><strong>upload-certs</strong> å°†è¯ä¹¦ä¸Šä¼ åˆ°kubeadm-certs</li><li><strong>mark-control-plane</strong> å°†èŠ‚ç‚¹æ ‡è®°ä¸ºæ§åˆ¶å¹³é¢</li><li><strong>bootstrap-token</strong> ç”Ÿæˆç”¨äºå°†èŠ‚ç‚¹åŠ å…¥é›†ç¾¤çš„å¼•å¯¼ä»¤ç‰Œ</li><li><strong>kubelet-finalize</strong>ï¼šåœ¨TLSå¼•å¯¼åæ›´æ–°ä¸kubeletç›¸å…³çš„è®¾ç½® <ul><li><strong>/experimental-cert-rotation</strong> å¯ç”¨kubeletå®¢æˆ·ç«¯è¯ä¹¦è½®æ¢</li></ul></li><li><strong>addon</strong>ï¼šå®‰è£…é€šè¿‡ä¸€è‡´æ€§æµ‹è¯•æ‰€éœ€çš„å¿…è¦æ’ä»¶ <ul><li><strong>/coredns</strong> å°†CoreDNSæ’ä»¶å®‰è£…åˆ°Kubernetesé›†ç¾¤</li><li><strong>/kube-proxy</strong> å°†kube-proxyæ’ä»¶å®‰è£…åˆ°Kubernetesé›†ç¾¤</li></ul></li><li><strong>show-join-command</strong> æ˜¾ç¤ºæ§åˆ¶å¹³é¢å’Œå·¥ä½œèŠ‚ç‚¹çš„åŠ å…¥å‘½ä»¤</li></ol><h3 id="é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#é€‰é¡¹" aria-hidden="true">#</a> é€‰é¡¹</h3><table><thead><tr><th>é€‰é¡¹</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>--apiserver-advertise-address</td><td>string</td><td>API Server å¹¿å‘Šå…¶ç›‘å¬çš„ IP åœ°å€ã€‚å¦‚æœæœªè®¾ç½®ï¼Œåˆ™ä½¿ç”¨é»˜è®¤ç½‘ç»œæ¥å£ã€‚</td></tr><tr><td>--apiserver-bind-port</td><td>int32</td><td>é»˜è®¤å€¼ï¼š6443ã€‚API Serverç»‘å®šçš„ç«¯å£ã€‚</td></tr><tr><td>--apiserver-cert-extra-sans</td><td>stringSlice</td><td>API Server æœåŠ¡è¯ä¹¦çš„å¯é€‰é¢å¤–ä¸»ä½“æ›¿ä»£åç§°ï¼ˆSANï¼‰ï¼Œå¯ä»¥æ˜¯ IP åœ°å€å’Œ DNS åç§°ã€‚</td></tr><tr><td>--cert-dir</td><td>string</td><td>é»˜è®¤å€¼ï¼š&quot;/etc/kubernetes/pki&quot;ã€‚</td></tr><tr><td>--certificate-key</td><td>string</td><td>ç”¨äºåŠ å¯† kubeadm-certs Secret ä¸­çš„æ§åˆ¶å¹³é¢è¯ä¹¦çš„å¯†é’¥ã€‚</td></tr><tr><td>--config</td><td>string</td><td>kubeadm é…ç½®æ–‡ä»¶çš„è·¯å¾„ã€‚</td></tr><tr><td>--cri-socket</td><td>string</td><td>è¦è¿æ¥çš„CRIå¥—æ¥å­—çš„è·¯å¾„ã€‚å¦‚æœä¸ºç©ºï¼Œkubeadmå°†å°è¯•è‡ªåŠ¨æ£€æµ‹æ­¤å€¼ï¼›ä»…åœ¨å®‰è£…äº†å¤šä¸ªCRIæˆ–å­˜åœ¨éæ ‡å‡†CRIå¥—æ¥å­—æ—¶ä½¿ç”¨æ­¤é€‰é¡¹ã€‚</td></tr><tr><td>--dry-run</td><td></td><td>ä¸åº”ç”¨ä»»ä½•æ›´æ”¹ï¼›åªè¾“å‡ºå°†è¦æ‰§è¡Œçš„æ“ä½œã€‚</td></tr><tr><td>--experimental-upload-certs</td><td></td><td>ä¸Šä¼ æ§åˆ¶å¹³é¢è¯ä¹¦åˆ° kubeadm-certs Secretã€‚</td></tr><tr><td>--feature-gates</td><td>string</td><td>ä¸€ç»„é”®å€¼å¯¹ï¼Œæè¿°å„ç§åŠŸèƒ½çš„ç‰¹æ€§é—¨ã€‚å¯é€‰é¡¹ä¸ºï¼š</td></tr><tr><td>-h, --help</td><td></td><td>init çš„å¸®åŠ©ä¿¡æ¯ã€‚</td></tr><tr><td>--ignore-preflight-errors</td><td>stringSlice</td><td>è¦å°†å…¶é”™è¯¯æ˜¾ç¤ºä¸ºè­¦å‘Šçš„æ£€æŸ¥åˆ—è¡¨ã€‚ç¤ºä¾‹ï¼šâ€œIsPrivilegedUserï¼ŒSwapâ€ã€‚å€¼â€œallâ€ä¼šå¿½ç•¥æ‰€æœ‰æ£€æŸ¥çš„é”™è¯¯ã€‚</td></tr><tr><td>--image-repository</td><td>string</td><td>é»˜è®¤å€¼ï¼šâ€œhttp://k8s.gcr.io/â€ã€‚é€‰æ‹©ä¸€ä¸ªå®¹å™¨æ³¨å†Œè¡¨ä»¥æ‹‰å–æ§åˆ¶å¹³é¢æ˜ åƒã€‚</td></tr><tr><td>--kubernetes-version</td><td>string</td><td>é»˜è®¤å€¼ï¼šâ€œstable-1â€ã€‚ä¸ºæ§åˆ¶å¹³é¢é€‰æ‹©ç‰¹å®šçš„ Kubernetes ç‰ˆæœ¬ã€‚</td></tr><tr><td>--node-name</td><td>string</td><td>æŒ‡å®šèŠ‚ç‚¹åç§°ã€‚</td></tr><tr><td>--pod-network-cidr</td><td>string</td><td>æŒ‡å®š Pod ç½‘ç»œçš„ IP åœ°å€èŒƒå›´ã€‚å¦‚æœè®¾ç½®ï¼Œåˆ™æ§åˆ¶å¹³é¢å°†è‡ªåŠ¨ä¸ºæ¯ä¸ªèŠ‚ç‚¹åˆ†é… CIDRã€‚</td></tr><tr><td>--service-cidr</td><td>string</td><td>é»˜è®¤å€¼ï¼šâ€œ10.96.0.0/12â€ã€‚ä½¿ç”¨æ›¿ä»£ IP åœ°å€èŒƒå›´æ¥è®¾ç½®æœåŠ¡ VIPã€‚</td></tr><tr><td>--service-dns-domain</td><td>string</td><td>é»˜è®¤å€¼ï¼šâ€œcluster.localâ€ã€‚ä½¿ç”¨æ›¿ä»£åŸŸåä¸ºæœåŠ¡å‘½åï¼Œä¾‹å¦‚â€œmyorg.internalâ€ã€‚</td></tr><tr><td>--skip-certificate-key-print</td><td></td><td>ä¸æ‰“å°ç”¨äºåŠ å¯†æ§åˆ¶å¹³é¢è¯ä¹¦çš„å¯†é’¥ã€‚</td></tr><tr><td>--skip-phases</td><td>stringSlice</td><td>è¦è·³è¿‡çš„é˜¶æ®µåˆ—è¡¨ã€‚</td></tr><tr><td>--skip-token-print</td><td></td><td>è·³è¿‡æ‰“å°ç”±â€œkubeadm initâ€ç”Ÿæˆçš„é»˜è®¤å¼•å¯¼ä»¤ç‰Œã€‚</td></tr><tr><td>--token</td><td>string</td><td>ç”¨äºåœ¨èŠ‚ç‚¹å’Œæ§åˆ¶å¹³é¢èŠ‚ç‚¹ä¹‹é—´å»ºç«‹åŒå‘ä¿¡ä»»çš„ä»¤ç‰Œã€‚æ ¼å¼ä¸º[a-z0-9] {6}ã€‚[a-z0-9] {16} - ä¾‹å¦‚abcdef.0123456789abcdef</td></tr><tr><td>--token-ttl duration</td><td></td><td>é»˜è®¤å€¼ï¼š24h0m0sã€‚ä»¤ç‰Œè‡ªåŠ¨åˆ é™¤ä¹‹å‰çš„æŒç»­æ—¶é—´ï¼ˆä¾‹å¦‚1sï¼Œ2mï¼Œ3hï¼‰ã€‚å¦‚æœè®¾ç½®ä¸ºâ€œ0â€ï¼Œåˆ™ä»¤ç‰Œæ°¸ä¸è¿‡æœŸã€‚</td></tr></tbody></table><h3 id="ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹" aria-hidden="true">#</a> ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹</h3><table><thead><tr><th style="text-align:left;">é€‰é¡¹</th><th style="text-align:left;">ç±»å‹</th><th style="text-align:left;">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left;">--rootfs</td><td style="text-align:left;">string</td><td style="text-align:left;">[EXPERIMENTAL] The path to the &#39;real&#39; host root filesystem.</td></tr></tbody></table><h3 id="åˆå§‹åŒ–æµç¨‹" tabindex="-1"><a class="header-anchor" href="#åˆå§‹åŒ–æµç¨‹" aria-hidden="true">#</a> åˆå§‹åŒ–æµç¨‹</h3><h4 id="pre-flifht-æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#pre-flifht-æ£€æŸ¥" aria-hidden="true">#</a> pre-flifht æ£€æŸ¥</h4><p>åœ¨æ‰§è¡Œ kubeadm init å‘½ä»¤ä¹‹å‰ï¼Œkubeadm ä¼šè¿è¡Œä¸€ä¸ª preflight é˜¶æ®µï¼Œç”¨äºæ£€æŸ¥é›†ç¾¤èŠ‚ç‚¹æ˜¯å¦æ»¡è¶³ Kubernetes çš„æœ€ä½è¦æ±‚ã€‚åœ¨ preflight é˜¶æ®µä¸­ï¼Œkubeadm ä¼šæ ¹æ®ç”¨æˆ·æä¾›çš„é€‰é¡¹æ¥æ‰§è¡Œä¸€ç³»åˆ—æ£€æŸ¥ï¼Œä»¥ç¡®ä¿ Kubernetes æ§åˆ¶å¹³é¢çš„æ­£å¸¸è¿è¡Œã€‚</p><p>å¸¸ç”¨çš„ preflight é˜¶æ®µé€‰é¡¹åŒ…æ‹¬ï¼š</p><ul><li>-configï¼šæŒ‡å®š kubeadm é…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼›</li><li>-cri-socketï¼šæŒ‡å®šå®¹å™¨è¿è¡Œæ—¶ï¼ˆCRIï¼‰çš„ socket æ–‡ä»¶è·¯å¾„ï¼›</li><li>-skip-phasesï¼šè·³è¿‡ preflight é˜¶æ®µä¸­çš„æŸäº›æ£€æŸ¥é˜¶æ®µï¼›</li><li>-ignore-preflight-errorsï¼šå¿½ç•¥ preflight é˜¶æ®µä¸­çš„æŸäº›é”™è¯¯ã€‚</li></ul><h4 id="certificate-ç”Ÿæˆé˜¶æ®µ" tabindex="-1"><a class="header-anchor" href="#certificate-ç”Ÿæˆé˜¶æ®µ" aria-hidden="true">#</a> certificate ç”Ÿæˆé˜¶æ®µ</h4><p>åœ¨åˆå§‹åŒ– Kubernetes æ§åˆ¶å¹³é¢æ—¶ï¼Œkubeadm è¿˜ä¼šè‡ªåŠ¨ä¸º Kubernetes ç»„ä»¶ç”Ÿæˆ TLS è¯ä¹¦å’Œç§˜é’¥ã€‚è¿™äº›è¯ä¹¦å’Œç§˜é’¥ç”¨äºç¡®ä¿ Kubernetes ç»„ä»¶ä¹‹é—´çš„å®‰å…¨é€šä¿¡ã€‚</p><p>ç”Ÿæˆè‡ªç­¾åCAï¼ˆå¦‚æœæä¾›äº†ï¼Œåˆ™ä½¿ç”¨ç°æœ‰CAï¼‰ï¼Œä¸ºé›†ç¾¤ä¸­çš„æ¯ä¸ªç»„ä»¶è®¾ç½®æ ‡è¯†ã€‚å¦‚æœç”¨æˆ·æä¾›äº†è‡ªå·±çš„CAè¯ä¹¦å’Œ/æˆ–å¯†é’¥ï¼Œå¹¶å°†å…¶æ”¾å…¥é€šè¿‡ <code>--cert-dir</code> é€‰é¡¹ï¼ˆé»˜è®¤å€¼ä¸º<code>/etc/kubernetes/pki</code> ï¼‰é…ç½®çš„è¯ä¹¦ç›®å½•ä¸­ã€‚å¯ä»¥æŒ‰ç…§<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_init.html#zidingyizhengshu" target="_blank" rel="noopener noreferrer">ä½¿ç”¨è‡ªå®šä¹‰è¯ä¹¦<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æ–‡æ¡£ä¸­çš„æè¿°è·³è¿‡æ­¤æ­¥éª¤ã€‚APIæœåŠ¡å™¨è¯ä¹¦æ‹¥æœ‰ç”¨äº <code>--apiserver-cert-extra-sans</code>å‚æ•°ï¼ˆå¿…è¦æ—¶å°å†™ï¼‰çš„é¢å¤–SANæ¡ç›®ã€‚</p><h4 id="ç”Ÿæˆ-kubeconfig-æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#ç”Ÿæˆ-kubeconfig-æ–‡ä»¶" aria-hidden="true">#</a> ç”Ÿæˆ kubeconfig æ–‡ä»¶</h4><p>å°†kubeconfigæ–‡ä»¶å†™åˆ°<code>/etc/kubernetes/</code>ä¸­ï¼Œä¾›kubeletã€æ§åˆ¶å™¨-ç®¡ç†å™¨å’Œè°ƒåº¦å™¨è¿æ¥APIæœåŠ¡å™¨ï¼Œæ¯ä¸ªkubeconfigæ–‡ä»¶éƒ½æœ‰è‡ªå·±çš„æ ‡è¯†ï¼Œå¦å¤–è¿˜æœ‰ä¸€ä¸ªåä¸º<code>admin.conf</code>çš„kubeconfigæ–‡ä»¶ç”¨äºç®¡ç†ã€‚</p><h4 id="pod" tabindex="-1"><a class="header-anchor" href="#pod" aria-hidden="true">#</a> pod</h4><p>ä¸ºAPIæœåŠ¡å™¨ã€æ§åˆ¶å™¨ç®¡ç†å™¨å’Œè°ƒåº¦å™¨ç”Ÿæˆé™æ€Podæ¸…å•ã€‚å¦‚æœæ²¡æœ‰æä¾›å¤–éƒ¨etcdï¼Œåˆ™ä¸ºetcdç”Ÿæˆé¢å¤–çš„é™æ€Podæ¸…å•ã€‚</p><p>é™æ€Podæ¸…å•è¢«å†™å…¥<code>/etc/kubernetes/manifests</code>ï¼›kubeletç›‘è§†è¿™ä¸ªç›®å½•ï¼Œä»¥ä¾¿åœ¨å¯åŠ¨æ—¶åˆ›å»ºpodã€‚</p><p>ä¸€æ—¦æ§åˆ¶å¹³é¢podå¯åŠ¨å¹¶è¿è¡Œï¼Œ<code>kubeadm init</code>æµç¨‹å°±å¯ä»¥ç»§ç»­ã€‚</p><ol><li><p>å°†æ ‡ç­¾å’Œæ±¡æŸ“åº”ç”¨åˆ°æ§åˆ¶å¹³é¢èŠ‚ç‚¹ï¼Œè¿™æ ·å°±ä¸ä¼šåœ¨é‚£é‡Œè¿è¡Œé¢å¤–çš„å·¥ä½œè´Ÿè½½ã€‚</p></li><li><p>ç”Ÿæˆä»¤ç‰Œï¼Œé¢å¤–çš„èŠ‚ç‚¹å¯ä»¥ä½¿ç”¨è¯¥ä»¤ç‰Œåœ¨å°†æ¥å‘æ§åˆ¶å¹³é¢æ³¨å†Œè‡ªå·±ã€‚ç”¨æˆ·å¯ä»¥é€‰æ‹©é€šè¿‡<code>--token</code>é€‰é¡¹æä¾›ä»¤ç‰Œï¼Œå¦‚<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_token.html" target="_blank" rel="noopener noreferrer">kubeadm token<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æ–‡æ¡£ä¸­æ‰€è¿°ã€‚</p></li><li><p>é…ç½®æ‰€æœ‰å¿…è¦çš„é…ç½®ï¼Œå…è®¸èŠ‚ç‚¹ä½¿ç”¨<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/accessing_api/authenticating_with_bootstrap_tokens.html" target="_blank" rel="noopener noreferrer">å¼•å¯¼ä»¤ç‰Œ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>å’Œ<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/command_line_tools_reference/tls_bootstrapping.html" target="_blank" rel="noopener noreferrer">TLSå¼•å¯¼<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æœºåˆ¶åŠ å…¥é›†ç¾¤ï¼š</p><ul><li>ç¼–å†™ä¸€ä¸ªConfigMapæ¥æä¾›åŠ å…¥é›†ç¾¤æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¹¶è®¾ç½®ç›¸å…³çš„RBACè®¿é—®è§„åˆ™ã€‚</li><li>ä½¿å¼•å¯¼ä»¤ç‰Œè®¿é—®CSRç­¾åAPIã€‚</li><li>ä¸ºæ–°çš„CSRè¯·æ±‚é…ç½®è‡ªåŠ¨æ‰¹å‡†ã€‚</li></ul><p>æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_join.html" target="_blank" rel="noopener noreferrer">kubeadm join<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p></li><li><p>é€šè¿‡APIæœåŠ¡å™¨å®‰è£…DNSæœåŠ¡å™¨(CoreDNS)å’Œkube-proxyæ’ä»¶ç»„ä»¶ã€‚åœ¨Kubernetes v1.11å’Œæ›´é«˜ç‰ˆæœ¬ä¸­ï¼ŒCoreDNSæ˜¯é»˜è®¤çš„DNSæœåŠ¡å™¨ã€‚å¦‚æœä½ è¦å®‰è£…kube-dnsè€Œä¸æ˜¯CoreDNSï¼Œå¿…é¡»åœ¨kubeadm <code>ClusterConfiguration</code>é…ç½®DNSæ’ä»¶ã€‚</p></li></ol><h3 id="ä½¿ç”¨kubeadmçš„åˆå§‹åŒ–é˜¶æ®µ" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨kubeadmçš„åˆå§‹åŒ–é˜¶æ®µ" aria-hidden="true">#</a> ä½¿ç”¨kubeadmçš„åˆå§‹åŒ–é˜¶æ®µ</h3><p>Kubeadmå…è®¸ä½ åˆ†é˜¶æ®µåˆ›å»ºä¸€ä¸ªæ§åˆ¶å¹³é¢èŠ‚ç‚¹ã€‚åœ¨v1.13ä¸­ï¼Œ<code>kubeadm init phase</code>å‘½ä»¤å·²ç»ä»alphaçº§åˆ«çš„<code>kubeadm alpha phase</code>å‡çº§åˆ°äº†GAçº§åˆ«ã€‚</p><p>è¦æŸ¥çœ‹æœ‰åºçš„é˜¶æ®µå’Œå­é˜¶æ®µåˆ—è¡¨ï¼Œå¯ä»¥è°ƒç”¨<code>kubeadm init --help</code>ã€‚åˆ—è¡¨å°†ä½äºå¸®åŠ©ä¿¡æ¯çš„é¡¶éƒ¨ï¼Œæ¯ä¸ªé˜¶æ®µæ—è¾¹éƒ½æœ‰ä¸€ä¸ªæè¿°ã€‚æ³¨æ„ï¼Œé€šè¿‡è°ƒç”¨<code>kubeadm init</code>ï¼Œæ‰€æœ‰é˜¶æ®µå’Œå­é˜¶æ®µéƒ½å°†æŒ‰ç…§è¿™ä¸ªé¡ºåºæ‰§è¡Œã€‚</p><p>æœ‰äº›é˜¶æ®µæœ‰ç‹¬ç‰¹çš„é€‰é¡¹ï¼Œå¦‚æœä½ æƒ³æŸ¥çœ‹å¯ç”¨çš„é€‰é¡¹åˆ—è¡¨ï¼Œè¯·æ·»åŠ <code>--help</code>ï¼Œä¾‹å¦‚:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> kubeadm init phase control-plane controller-manager <span class="token parameter variable">--help</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½ è¿˜å¯ä»¥ä½¿ç”¨<code>--help</code>æŸ¥çœ‹ç‰¹å®šçˆ¶é˜¶æ®µçš„å­é˜¶æ®µåˆ—è¡¨:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> kubeadm init phase control-plane <span class="token parameter variable">--help</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>kubeadm init</code>è¿˜æš´éœ²äº†ä¸€ä¸ªåä¸º<code>--skip-phase</code>çš„é€‰é¡¹ï¼Œè¯¥é€‰é¡¹å¯ç”¨äºè·³è¿‡æŸäº›é˜¶æ®µã€‚è¯¥é€‰é¡¹æ¥å—ä¸€ä¸ªé˜¶æ®µåç§°åˆ—è¡¨ï¼Œè¿™äº›åç§°å¯ä»¥ä»ä¸Šé¢çš„æœ‰åºåˆ—è¡¨ä¸­è·å–ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> kubeadm init phase control-plane all <span class="token parameter variable">--config</span><span class="token operator">=</span>configfile.yaml
<span class="token function">sudo</span> kubeadm init phase etcd <span class="token builtin class-name">local</span> <span class="token parameter variable">--config</span><span class="token operator">=</span>configfile.yaml
<span class="token comment"># you can now modify the control plane and etcd manifest files</span>
<span class="token function">sudo</span> kubeadm init --skip-phases<span class="token operator">=</span>control-plane,etcd <span class="token parameter variable">--config</span><span class="token operator">=</span>configfile.yaml
<span class="token function">sudo</span> kubeadm init phase control-plane all <span class="token parameter variable">--config</span><span class="token operator">=</span>configfile.yaml
<span class="token function">sudo</span> kubeadm init phase etcd <span class="token builtin class-name">local</span> <span class="token parameter variable">--config</span><span class="token operator">=</span>configfile.yaml
<span class="token comment"># you can now modify the control plane and etcd manifest files</span>
<span class="token function">sudo</span> kubeadm init --skip-phases<span class="token operator">=</span>control-plane,etcd <span class="token parameter variable">--config</span><span class="token operator">=</span>configfile.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯¥ç¤ºä¾‹å°†ç¼–å†™åŸºäº<code>configfile.yaml</code>ä¸­çš„é…ç½®ï¼Œä½äº<code>/etc/kubernetes/manifests</code>ä¸­çš„æ¸…å•æ–‡ä»¶ã€‚è¿™å…è®¸ä½ ä¿®æ”¹æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨<code>--skip-phases</code>é€‰é¡¹è·³è¿‡è¿™äº›é˜¶æ®µã€‚é€šè¿‡è°ƒç”¨æœ€åä¸€ä¸ªå‘½ä»¤ï¼Œä½ å°†åˆ›å»ºä¸€ä¸ªå¸¦æœ‰è‡ªå®šä¹‰æ¸…å•æ–‡ä»¶çš„æ§åˆ¶å¹³é¢èŠ‚ç‚¹ã€‚</p><h3 id="ä¸ºkubeadm-initæŒ‡å®šé…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#ä¸ºkubeadm-initæŒ‡å®šé…ç½®æ–‡ä»¶" aria-hidden="true">#</a> ä¸ºkubeadm initæŒ‡å®šé…ç½®æ–‡ä»¶</h3><p>å¯ä»¥ç”¨é…ç½®æ–‡ä»¶è€Œä¸æ˜¯å‘½ä»¤è¡Œé€‰é¡¹æ¥é…ç½®<code>kubeadm init</code>ï¼Œä¸€äº›æ›´é«˜çº§çš„ç‰¹æ€§å¯èƒ½åªä½œä¸ºé…ç½®æ–‡ä»¶é€‰é¡¹ä½¿ç”¨ã€‚è¯¥æ–‡ä»¶é€šè¿‡ <code>--config</code> é€‰é¡¹ä¼ é€’ã€‚</p><h4 id="å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰é•œåƒ" tabindex="-1"><a class="header-anchor" href="#å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰é•œåƒ" aria-hidden="true">#</a> å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰é•œåƒ</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œkubeadmä» <code>k8s.gcr.io</code>ä¸­æ‹‰å–é•œåƒï¼Œé™¤éè¯·æ±‚çš„Kubernetesç‰ˆæœ¬æ˜¯CIç‰ˆæœ¬ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå°†ä½¿ç”¨ <code>gcr.io/kubernetes-ci-images</code> ã€‚</p><p>è¿™ç§æƒ…å†µä¸‹åœ¨å›½å†…å¯èƒ½ä¼šå‡ºç°æ‹‰å– over time</p><p>ä½ å¯ä»¥å‘kubeadmæŒ‡å®šä¸€ä¸ªé…ç½®æ–‡ä»¶è¦†ç›–æ­¤è¡Œä¸ºã€‚å…è®¸è‡ªå®šä¹‰æœ‰ï¼š</p><ul><li>æä¾›ä¸€ä¸ªæ›¿ä»£ <code>k8s.gcr.io</code>çš„<code>imageRepository</code>ã€‚</li><li>å°†<code>useHyperKubeImage</code>è®¾ç½®ä¸º<code>true</code>ä»¥ä½¿ç”¨HyperKubeå›¾åƒã€‚</li><li>ä¸ºetcdæˆ–DNSæ’ä»¶æä¾›ç‰¹å®šçš„<code>imageRepository</code>å’Œ<code>imageTag</code>ã€‚</li></ul><p>è¯·æ³¨æ„ï¼Œé…ç½®å­—æ®µ<code>kubernetesVersion</code>å’Œå‘½ä»¤è¡Œé€‰é¡¹ <code>--kubernetes-version</code> éƒ½ä¼šå½±å“é•œåƒçš„ç‰ˆæœ¬ã€‚</p><h3 id="ä½¿ç”¨è‡ªå®šä¹‰è¯ä¹¦" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨è‡ªå®šä¹‰è¯ä¹¦" aria-hidden="true">#</a> ä½¿ç”¨è‡ªå®šä¹‰è¯ä¹¦</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œkubeadmç”Ÿæˆé›†ç¾¤è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰è¯ä¹¦ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡æä¾›è‡ªå·±çš„è¯ä¹¦æ¥è¦†ç›–æ­¤è¡Œä¸ºã€‚</p><p>ä¸ºæ­¤ï¼Œä½ å¿…é¡»å°†å®ƒä»¬æ”¾åœ¨ç”± <code>--cert-dir</code>é€‰é¡¹æˆ– <code>CertificatesDir</code>é…ç½®æ–‡ä»¶é”®æŒ‡å®šçš„ç›®å½•ä¸­ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥ç›®å½•ä¸º<code>/etc/kubernetes/pki</code>ã€‚</p><p>å¦‚æœå­˜åœ¨ç»™å®šçš„è¯ä¹¦å’Œç§é’¥å¯¹ï¼Œkubeadmå°†è·³è¿‡ç”Ÿæˆæ­¥éª¤ï¼Œä½¿ç”¨ç°æœ‰æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥å°†ç°æœ‰çš„CAå¤åˆ¶åˆ° <code>/etc/kubernetes/pki/ca.crt</code>å’Œ <code>/etc/kubernetes/pki/ca.key</code>ï¼Œkubeadmå°†ä½¿ç”¨æ­¤CAç­¾ç½²å…¶ä½™çš„è¯ä¹¦ã€‚</p><h4 id="å¤–éƒ¨caæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å¤–éƒ¨caæ¨¡å¼" aria-hidden="true">#</a> å¤–éƒ¨CAæ¨¡å¼</h4><p>ä¹Ÿå¯ä»¥åªæä¾›<code>ca.crt</code> æ–‡ä»¶ï¼Œè€Œä¸æä¾›<code>ca.key</code>æ–‡ä»¶ï¼ˆè¿™åªé€‚ç”¨äºæ ¹CAæ–‡ä»¶ï¼Œä¸é€‚ç”¨äºå…¶ä»–è¯ä¹¦å¯¹ï¼‰ã€‚å¦‚æœæ‰€æœ‰å…¶ä»–è¯ä¹¦å’Œkubeconfigæ–‡ä»¶éƒ½åˆ°ä½ï¼Œkubeadmå°†è¯†åˆ«æ­¤æ¡ä»¶å¹¶æ¿€æ´»â€œå¤–éƒ¨CAâ€æ¨¡å¼ã€‚kubeadmå°†åœ¨ç£ç›˜ä¸Šæ²¡æœ‰CAå¯†é’¥çš„æƒ…å†µä¸‹ç»§ç»­æ‰§è¡Œã€‚</p><p>ç›¸åï¼Œä½¿ç”¨ <code>--controllers=csrsigner</code>ç‹¬ç«‹è¿è¡Œæ§åˆ¶å™¨ç®¡ç†å™¨ï¼Œå¹¶æŒ‡å‘CAè¯ä¹¦å’Œå¯†é’¥ã€‚</p><h3 id="æŒ‡å®š-cri" tabindex="-1"><a class="header-anchor" href="#æŒ‡å®š-cri" aria-hidden="true">#</a> æŒ‡å®š CRI</h3><p>ä»v1.6.0å¼€å§‹ï¼ŒKuberneteså°±é»˜è®¤å¯ç”¨äº†CRIå®¹å™¨è¿è¡Œæ—¶æ¥å£ã€‚é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨çš„å®¹å™¨è¿è¡Œæ—¶æ˜¯Dockerï¼Œå®ƒæ˜¯é€šè¿‡<code>kubelet</code>å†…ç½®çš„<code>dockershim </code>CRIå¯ç”¨çš„ã€‚</p><p>ä» Kubernetes 1.20 å¼€å§‹ï¼Œé»˜è®¤å®¹å™¨è¿è¡Œæ—¶ä¸º <code>containerd</code>ï¼Œè€Œä¹‹å‰çš„ç‰ˆæœ¬é»˜è®¤å®¹å™¨è¿è¡Œæ—¶ä¸º <code>Docker</code>ã€‚</p><p>æˆåŠŸå®‰è£…<code>kubeadm</code>å’Œ<code>kubelet</code>ä¹‹åï¼Œæ‰§è¡Œä»¥ä¸‹ä¸¤ä¸ªé¢å¤–æ­¥éª¤:</p><ol><li><p>æŒ‰ç…§ä¸Šé¢è¿è¡Œæ—¶shimé¡¹ç›®æ¸…å•ä¸­çš„å®‰è£…æ–‡æ¡£ï¼Œåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šå®‰è£…è¿è¡Œæ—¶shimã€‚</p></li><li><p>é…ç½®kubeletä½¿ç”¨è¿œç¨‹CRIè¿è¡Œæ—¶ã€‚è¯·è®°ä½å°†<code>RUNTIME_ENDPOINT</code>æ›´æ”¹ä¸ºä½ è‡ªå·±çš„å€¼ï¼Œæ¯”å¦‚ <code>/var/run/{your_runtime}.sock</code>ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token operator">&gt;</span> /etc/systemd/system/kubelet.service.d/20-cri.conf <span class="token operator">&lt;&lt;</span>EOF<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>Environment<span class="token operator">=</span><span class="token string">&quot;KUBELET_EXTRA_ARGS=--container-runtime=remote --container-runtime-endpoint=<span class="token variable">$RUNTIME_ENDPOINT</span>&quot;</span>EOFsystemctl daemon-reload
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><p>ç°åœ¨<code>kubelet</code>å·²ç»å‡†å¤‡å¥½ä½¿ç”¨æŒ‡å®šçš„CRIè¿è¡Œæ—¶ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨<code>kubeadm init</code>å’Œ<code>kubeadm join</code>æ¥éƒ¨ç½²Kubernetesé›†ç¾¤ã€‚</p><p>åœ¨ä½¿ç”¨å¤–éƒ¨CRIå®ç°æ—¶ï¼Œè¯·å°†åœ¨æ‰§è¡Œ <code>kubeadm init</code> å’Œ<code>kubeadm reset</code>æ—¶æ·»åŠ  <code>--cri-socket</code> é€‰é¡¹ã€‚</p><h3 id="ç¦»çº¿è¿è¡Œ-kubeadm" tabindex="-1"><a class="header-anchor" href="#ç¦»çº¿è¿è¡Œ-kubeadm" aria-hidden="true">#</a> ç¦»çº¿è¿è¡Œ kubeadm</h3><p>è¦åœ¨æ²¡æœ‰äº’è”ç½‘è¿æ¥çš„æƒ…å†µä¸‹è¿è¡Œkubeadmï¼Œä½ å¿…é¡»é¢„å…ˆæ‹‰å–æ‰€éœ€çš„æ§åˆ¶å¹³é¢é•œåƒã€‚</p><p>åœ¨Kubernetes v1.11å’Œæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>kubeadm config images</code>çš„å­å‘½ä»¤è·å–å’Œæ‹‰å–é•œåƒ:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>â¯ ./kubeadm config images list

W0319 <span class="token number">15</span>:08:46.559718   <span class="token number">50461</span> version.go:112<span class="token punctuation">]</span> could not obtain neither client nor remote version<span class="token punctuation">;</span> fall back to: <span class="token number">1.0</span>.0-placeholder-version
W0319 <span class="token number">15</span>:08:46.561620   <span class="token number">50461</span> images.go:80<span class="token punctuation">]</span> could not <span class="token function">find</span> officially supported version of etcd <span class="token keyword">for</span> Kubernetes v1.0.0-placeholder-version, falling back
to the nearest etcd version <span class="token punctuation">(</span><span class="token number">3.2</span>.24<span class="token punctuation">)</span>
registry.k8s.io/kube-apiserver:v1.0.0-placeholder-version
registry.k8s.io/kube-controller-manager:v1.0.0-placeholder-version
registry.k8s.io/kube-scheduler:v1.0.0-placeholder-version
registry.k8s.io/kube-proxy:v1.0.0-placeholder-version
registry.k8s.io/pause:3.9
registry.k8s.io/etcd:3.2.24
registry.k8s.io/coredns/coredns:v1.10.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‹‰å–ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>kubeadm config images pull
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="kubeadm-join" tabindex="-1"><a class="header-anchor" href="#kubeadm-join" aria-hidden="true">#</a> kubeadm join</h2><p>è¯¥å‘½ä»¤åˆå§‹åŒ–Kuberneteså·¥ä½œèŠ‚ç‚¹å¹¶å°†å…¶åŠ å…¥åˆ°é›†ç¾¤ã€‚åœ¨å¸Œæœ›åŠ å…¥ç°æœ‰é›†ç¾¤çš„æ‰€æœ‰æœºå™¨ä¸Šè¿è¡Œæ­¤æ“ä½œã€‚</p><p><code>kubeadm init</code> å’Œ <code>kubeadm join</code> ä¸€èµ·æä¾›äº†è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œå¯ä»¥ä»å¤´å¼€å§‹åˆ›å»ºæœ€ä½³å®è·µçš„è£¸Kubernetesé›†ç¾¤ã€‚ç„¶è€Œï¼Œkubeadmæ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„ï¼Œå¯èƒ½å¹¶ä¸æ˜æ˜¾ã€‚</p><p>åœ¨åŠ å…¥ç”±kubeadmåˆå§‹åŒ–çš„é›†ç¾¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹åŒå‘ä¿¡ä»»ã€‚è¿™åˆ†ä¸º<em><strong>å‘ç°</strong></em>ï¼ˆè®©èŠ‚ç‚¹ä¿¡ä»»Kubernetesæ§åˆ¶å¹³é¢ï¼‰å’Œ<em>TLS<strong>å¼•å¯¼</strong></em>(è®©Kubernetesæ§åˆ¶å¹³é¢ä¿¡ä»»èŠ‚ç‚¹)ã€‚</p><p>æœ‰ä¸¤ç§ä¸»è¦çš„å‘ç°æ–¹æ¡ˆã€‚ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å…±äº«ä»¤ç‰Œå’ŒAPIæœåŠ¡å™¨çš„IPåœ°å€ã€‚ç¬¬äºŒç§æ–¹æ³•æ˜¯æä¾›ä¸€ä¸ªæ–‡ä»¶â€”â€”æ ‡å‡†kubeconfigæ–‡ä»¶çš„å­é›†ã€‚è¯¥æ–‡ä»¶å¯ä»¥æ˜¯æœ¬åœ°æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡HTTPS URLä¸‹è½½ã€‚å½¢å¼ä¸º<code>kubeadm join --discovery-token abcdef.1234567890abcdef 1.2.3.4:6443</code>ã€ <code>kubeadm join --discovery-file path/to/file.conf</code>æˆ–<code>kubeadm join --discovery-file https://url/file.conf</code>ã€‚åªèƒ½ä½¿ç”¨å…¶ä¸­ä¸€ç§å½¢å¼ã€‚å¦‚æœå‘ç°ä¿¡æ¯æ˜¯ä»URLåŠ è½½çš„ï¼Œåˆ™å¿…é¡»ä½¿ç”¨HTTPSã€‚æ­¤å¤–ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨å·²å®‰è£…çš„ä¸»æœºCAåŒ…éªŒè¯è¿æ¥ã€‚</p><h3 id="å‘½ä»¤é˜¶æ®µ" tabindex="-1"><a class="header-anchor" href="#å‘½ä»¤é˜¶æ®µ" aria-hidden="true">#</a> å‘½ä»¤é˜¶æ®µ</h3><p><code>join [api-server-endpoint]</code>å‘½ä»¤æ‰§è¡Œä»¥ä¸‹é˜¶æ®µ:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code>The <span class="token string">&quot;join [api-server-endpoint]&quot;</span> command executes the <span class="token keyword">following</span> phases:
<span class="token identifier"><span class="token punctuation">`</span><span class="token punctuation">`</span></span><span class="token punctuation">`</span>
preflight              Run <span class="token keyword">join</span> pre<span class="token operator">-</span>flight checks
control<span class="token operator">-</span>plane<span class="token operator">-</span><span class="token keyword">prepare</span>  <span class="token keyword">Prepare</span> the machine <span class="token keyword">for</span> serving a control plane
  <span class="token operator">/</span>download<span class="token operator">-</span>certs        <span class="token punctuation">[</span>EXPERIMENTAL<span class="token punctuation">]</span> Download certificates shared among control<span class="token operator">-</span>plane nodes <span class="token keyword">from</span> the kubeadm<span class="token operator">-</span>certs Secret
  <span class="token operator">/</span>certs                 Generate the certificates <span class="token keyword">for</span> the new control plane components
  <span class="token operator">/</span>kubeconfig            Generate the kubeconfig <span class="token keyword">for</span> the new control plane components
  <span class="token operator">/</span>control<span class="token operator">-</span>plane         Generate the manifests <span class="token keyword">for</span> the new control plane components
kubelet<span class="token operator">-</span><span class="token keyword">start</span>          <span class="token keyword">Write</span> kubelet settings<span class="token punctuation">,</span> certificates <span class="token operator">and</span> <span class="token punctuation">(</span>re<span class="token punctuation">)</span><span class="token keyword">start</span> the kubelet
control<span class="token operator">-</span>plane<span class="token operator">-</span><span class="token keyword">join</span>     <span class="token keyword">Join</span> a machine <span class="token keyword">as</span> a control plane instance
  <span class="token operator">/</span>etcd                  <span class="token keyword">Add</span> a new <span class="token keyword">local</span> etcd member
  <span class="token operator">/</span><span class="token keyword">update</span><span class="token operator">-</span><span class="token keyword">status</span>         Register the new control<span class="token operator">-</span>plane node <span class="token keyword">into</span> the ClusterStatus maintained <span class="token operator">in</span> the kubeadm<span class="token operator">-</span>config ConfigMap <span class="token punctuation">(</span>DEPRECATED<span class="token punctuation">)</span>
  <span class="token operator">/</span>mark<span class="token operator">-</span>control<span class="token operator">-</span>plane    Mark a node <span class="token keyword">as</span> a control<span class="token operator">-</span>plane
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>preflight</code>ï¼šè¿è¡ŒåŠ å…¥å‰æ£€æŸ¥</li><li><code>control-plane-prepare</code>ï¼šå‡†å¤‡æœºå™¨ä»¥æœåŠ¡äºæ§åˆ¶å¹³é¢</li><li><ul><li><code>/download-certs</code>ï¼š[å®éªŒæ€§] ä» kubeadm-certs Secret ä¸‹è½½æ§åˆ¶å¹³é¢èŠ‚ç‚¹é—´å…±äº«çš„è¯ä¹¦</li><li><code>/certs</code>ï¼šä¸ºæ–°çš„æ§åˆ¶å¹³é¢ç»„ä»¶ç”Ÿæˆè¯ä¹¦</li><li><code>/kubeconfig</code>ï¼šä¸ºæ–°çš„æ§åˆ¶å¹³é¢ç»„ä»¶ç”Ÿæˆ kubeconfig</li><li><code>/control-plane</code>ï¼šä¸ºæ–°çš„æ§åˆ¶å¹³é¢ç»„ä»¶ç”Ÿæˆæ¸…å•</li></ul></li><li><code>kubelet-start</code>ï¼šç¼–å†™ kubelet è®¾ç½®ï¼Œè¯ä¹¦å¹¶å¯åŠ¨ kubelet</li><li><code>control-plane-join</code>ï¼šå°†æœºå™¨ä½œä¸ºæ§åˆ¶å¹³é¢å®ä¾‹åŠ å…¥</li><li><ul><li><code>/etcd</code>ï¼šæ·»åŠ ä¸€ä¸ªæ–°çš„æœ¬åœ° etcd æˆå‘˜</li><li><code>/update-status</code>ï¼šå°†æ–°çš„æ§åˆ¶å¹³é¢èŠ‚ç‚¹æ³¨å†Œåˆ°ç»´æŠ¤åœ¨ kubeadm-config ConfigMap ä¸­çš„ ClusterStatus ä¸­ (å·²å¼ƒç”¨)</li><li><code>/mark-control-plane</code>ï¼šå°†èŠ‚ç‚¹æ ‡è®°ä¸ºæ§åˆ¶å¹³é¢èŠ‚ç‚¹</li></ul></li></ul><h3 id="é€‰é¡¹-1" tabindex="-1"><a class="header-anchor" href="#é€‰é¡¹-1" aria-hidden="true">#</a> é€‰é¡¹</h3><table><thead><tr><th>é€‰é¡¹</th><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>--apiserver-advertise-address</code></td><td>string</td><td>å¦‚æœèŠ‚ç‚¹åº”è¯¥æ‰˜ç®¡æ–°çš„æ§åˆ¶å¹³é¢å®ä¾‹ï¼Œåˆ™æ˜¯ API æœåŠ¡å™¨å°†å¹¿å‘Šå®ƒæ­£åœ¨ä¾¦å¬çš„ IP åœ°å€ã€‚å¦‚æœæœªè®¾ç½®ï¼Œå°†ä½¿ç”¨é»˜è®¤ç½‘ç»œæ¥å£ã€‚</td></tr><tr><td><code>--apiserver-bind-port</code></td><td>int32</td><td>é»˜è®¤å€¼ï¼š6443ã€‚å¦‚æœèŠ‚ç‚¹åº”è¯¥æ‰˜ç®¡æ–°çš„æ§åˆ¶å¹³é¢å®ä¾‹ï¼Œåˆ™æ˜¯ API æœåŠ¡å™¨ç»‘å®šçš„ç«¯å£ã€‚</td></tr><tr><td><code>--certificate-key</code></td><td>string</td><td>ä½¿ç”¨æ­¤å¯†é’¥è§£å¯†ç”± init ä¸Šä¼ çš„è¯ä¹¦å¯†é’¥ã€‚</td></tr><tr><td><code>--config</code></td><td>string</td><td>kubeadm é…ç½®æ–‡ä»¶çš„è·¯å¾„ã€‚</td></tr><tr><td><code>--cri-socket</code></td><td>string</td><td>è¿æ¥çš„ CRI å¥—æ¥å­—çš„è·¯å¾„ã€‚å¦‚æœä¸ºç©ºï¼Œkubeadm å°†å°è¯•è‡ªåŠ¨æ£€æµ‹æ­¤å€¼ã€‚ä»…åœ¨å®‰è£…äº†å¤šä¸ª CRI æˆ–å…·æœ‰éæ ‡å‡† CRI å¥—æ¥å­—æ—¶ä½¿ç”¨æ­¤é€‰é¡¹ã€‚</td></tr><tr><td><code>--discovery-file</code></td><td>string</td><td>å¯¹äºåŸºäºæ–‡ä»¶çš„å‘ç°ï¼Œè¦ä»ä¸­åŠ è½½ç¾¤é›†ä¿¡æ¯çš„æ–‡ä»¶æˆ– URLã€‚</td></tr><tr><td><code>--discovery-token</code></td><td>string</td><td>å¯¹äºåŸºäºä»¤ç‰Œçš„å‘ç°ï¼Œç”¨äºéªŒè¯ä» API æœåŠ¡å™¨è·å–çš„ç¾¤é›†ä¿¡æ¯çš„ä»¤ç‰Œã€‚</td></tr><tr><td><code>--discovery-token-ca-cert-hash</code></td><td>stringSlice</td><td>å¯¹äºåŸºäºä»¤ç‰Œçš„å‘ç°ï¼ŒéªŒè¯æ ¹ CA å…¬é’¥æ˜¯å¦ä¸æ­¤å“ˆå¸Œå€¼åŒ¹é…ï¼ˆæ ¼å¼ï¼šâ€œ : â€ï¼‰ã€‚</td></tr><tr><td><code>--discovery-token-unsafe-skip-ca-verification</code></td><td></td><td>å¯¹äºåŸºäºä»¤ç‰Œçš„å‘ç°ï¼Œå…è®¸åŠ å…¥è€Œä¸ä½¿ç”¨ --discovery-token-ca-cert-hash å›ºå®šã€‚</td></tr><tr><td><code>--experimental-control-plane</code></td><td></td><td>åœ¨æ­¤èŠ‚ç‚¹ä¸Šåˆ›å»ºæ–°çš„æ§åˆ¶å¹³é¢å®ä¾‹ã€‚</td></tr><tr><td><code>-h</code>, <code>--help</code></td><td></td><td>join çš„å¸®åŠ©ä¿¡æ¯</td></tr><tr><td><code>--ignore-preflight-errors</code></td><td>stringSlice</td><td>æ˜¾ç¤ºä¸ºè­¦å‘Šçš„æ£€æŸ¥åˆ—è¡¨çš„é”™è¯¯ã€‚ç¤ºä¾‹ï¼šâ€œIsPrivilegedUser,Swapâ€ã€‚å€¼â€œallâ€ä¼šå¿½ç•¥æ‰€æœ‰æ£€æŸ¥çš„é”™è¯¯ã€‚</td></tr><tr><td><code>--node-name</code></td><td>string</td><td>æŒ‡å®šèŠ‚ç‚¹åç§°ã€‚</td></tr><tr><td><code>--skip-phases</code></td><td>stringSlice</td><td>è¦è·³è¿‡çš„é˜¶æ®µåˆ—è¡¨ã€‚</td></tr><tr><td><code>--tls-bootstrap-token</code></td><td>string</td><td>åœ¨åŠ å…¥èŠ‚ç‚¹æ—¶ï¼ŒæŒ‡å®šç”¨äºä¸´æ—¶èº«ä»½éªŒè¯ Kubernetes æ§åˆ¶å¹³é¢çš„ä»¤ç‰Œã€‚</td></tr><tr><td><code>--token</code></td><td>string</td><td>åœ¨æœªæä¾› discovery-token å’Œ tls-bootstrap-token æ—¶ä½¿ç”¨æ­¤ä»¤ç‰Œã€‚</td></tr></tbody></table><h3 id="åŠ å…¥æµç¨‹" tabindex="-1"><a class="header-anchor" href="#åŠ å…¥æµç¨‹" aria-hidden="true">#</a> åŠ å…¥æµç¨‹</h3><p><code>kubeadm join</code>å¼•å¯¼Kuberneteså·¥ä½œèŠ‚ç‚¹æˆ–æ§åˆ¶å¹³é¢èŠ‚ç‚¹ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°é›†ç¾¤ä¸­ã€‚å¯¹äºå·¥ä½œèŠ‚ç‚¹ï¼Œè¯¥æ“ä½œåŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤:</p><ol><li><p>kubeadmä»APIæœåŠ¡å™¨ä¸‹è½½å¿…è¦çš„é›†ç¾¤ä¿¡æ¯ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä½¿ç”¨å¼•å¯¼ä»¤ç‰Œå’ŒCAå¯†é’¥çš„å“ˆå¸Œå€¼æ¥éªŒè¯æ•°æ®çš„çœŸå®æ€§ã€‚æ ¹CAä¹Ÿå¯ä»¥é€šè¿‡æ–‡ä»¶æˆ–URLç›´æ¥è·å–ã€‚</p></li><li><p>ä¸€æ—¦è·å–äº†é›†ç¾¤ä¿¡æ¯ï¼Œkubeletå°±å¯ä»¥å¯åŠ¨TLSå¼•å¯¼æµç¨‹ã€‚</p><p>TLSå¼•å¯¼ä½¿ç”¨å…±äº«ä»¤ç‰Œä¸Kubernetes APIæœåŠ¡å™¨è¿›è¡Œä¸´æ—¶è®¤è¯ï¼Œæäº¤è¯ä¹¦ç­¾åè¯·æ±‚(CSR)ï¼›é»˜è®¤æƒ…å†µä¸‹ï¼Œæ§åˆ¶å¹³é¢è‡ªåŠ¨ç­¾ç½²æ­¤CSRè¯·æ±‚ã€‚</p></li><li><p>æœ€åï¼Œkubeadmå°†æœ¬åœ°kubeleté…ç½®ä¸ºä½¿ç”¨åˆ†é…ç»™èŠ‚ç‚¹çš„æœ€ç»ˆæ ‡è¯†è¿æ¥åˆ°APIæœåŠ¡å™¨ã€‚</p></li></ol><p>å¯¹äºæ§åˆ¶å¹³é¢èŠ‚ç‚¹ï¼Œè¿˜è¦æ‰§è¡Œé¢å¤–çš„æ­¥éª¤:</p><ol><li>ä»é›†ç¾¤ä¸­ä¸‹è½½æ§åˆ¶å¹³é¢èŠ‚ç‚¹ä¹‹é—´å…±äº«çš„è¯ä¹¦(å¦‚æœç”¨æˆ·æ˜¾å¼åœ°è¯·æ±‚)ã€‚</li><li>ç”Ÿæˆæ§åˆ¶å¹³é¢ç»„ä»¶æ¸…å•ã€è¯ä¹¦å’Œkubeconfigã€‚</li><li>æ·»åŠ æ–°çš„æœ¬åœ°etcdæˆå‘˜ã€‚</li><li>å°†æ­¤èŠ‚ç‚¹æ·»åŠ åˆ°kubeadmé›†ç¾¤çš„ClusterStatusä¸­ã€‚</li></ol><h3 id="ä½¿ç”¨kubeadmçš„åŠ å…¥é˜¶æ®µ" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨kubeadmçš„åŠ å…¥é˜¶æ®µ" aria-hidden="true">#</a> ä½¿ç”¨kubeadmçš„åŠ å…¥é˜¶æ®µ</h3><p>Kubeadmå…è®¸ä½ åˆ†é˜¶æ®µå°†èŠ‚ç‚¹åŠ å…¥åˆ°é›†ç¾¤ã€‚<code>kubeadm join phase</code>å‘½ä»¤æ˜¯åœ¨v1.14.0ä¸­æ·»åŠ çš„ã€‚</p><p>è¦æŸ¥çœ‹é˜¶æ®µçš„æœ‰åºåˆ—è¡¨å’Œå­é˜¶æ®µåˆ—è¡¨ï¼Œå¯ä»¥è°ƒç”¨<code>kubeadm join --help</code>ã€‚åˆ—è¡¨å°†ä½äºå¸®åŠ©çš„é¡¶éƒ¨ï¼Œæ¯ä¸ªé˜¶æ®µæ—è¾¹éƒ½æœ‰ä¸€ä¸ªæè¿°ã€‚æ³¨æ„ï¼Œé€šè¿‡è°ƒç”¨<code>kubeadm join</code>ï¼Œæ‰€æœ‰é˜¶æ®µå’Œå­é˜¶æ®µéƒ½å°†æŒ‰ç…§è¿™ä¸ªé¡ºåºæ‰§è¡Œã€‚</p><p>æœ‰äº›é˜¶æ®µæœ‰ç‹¬ç‰¹çš„é€‰é¡¹ï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³æŸ¥çœ‹å¯ç”¨çš„é€‰é¡¹åˆ—è¡¨ï¼Œè¯·æ·»åŠ <code>--help</code>ï¼Œä¾‹å¦‚:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubeadm <span class="token function">join</span> phase kubelet-start <span class="token parameter variable">--help</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_init_phase.html" target="_blank" rel="noopener noreferrer"><code>kubeadm init phase</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>å‘½ä»¤ç±»ä¼¼ï¼Œ<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_join_phase.html" target="_blank" rel="noopener noreferrer"><code>kubadm join phase</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>å…è®¸ä½ ä½¿ç”¨<code>--skip-phase</code>é€‰é¡¹è·³è¿‡æŸäº›é˜¶æ®µã€‚</p><p>ä¾‹å¦‚ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> kubeadm <span class="token function">join</span> --skip-phases<span class="token operator">=</span>preflight <span class="token parameter variable">--config</span><span class="token operator">=</span>config.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="kubeadm-upgrade" tabindex="-1"><a class="header-anchor" href="#kubeadm-upgrade" aria-hidden="true">#</a> kubeadm upgrade</h2><p><code>kubeadm upgrade</code>æ˜¯ä¸€ä¸ªç”¨æˆ·å‹å¥½çš„å‘½ä»¤ï¼Œå®ƒå°†å¤æ‚çš„å‡çº§é€»è¾‘å°è£…åœ¨ä¸€ä¸ªå‘½ä»¤åé¢ï¼Œæ”¯æŒè®¡åˆ’å‡çº§å’Œå®é™…æ‰§è¡Œå‡çº§ã€‚</p><p>å¦‚æœéœ€è¦ï¼Œ<code>kubeadm upgrade</code>è¿˜å¯ä»¥ç”¨äºé™çº§é›†ç¾¤ã€‚</p><p>æ£€æŸ¥å¯ä»¥å‡çº§åˆ°å“ªäº›ç‰ˆæœ¬ï¼Œå¹¶éªŒè¯å½“å‰é›†ç¾¤æ˜¯å¦å¯ä»¥å‡çº§ã€‚è¦è·³è¿‡internetæ£€æŸ¥ï¼Œè¯·ä¼ å…¥å¯é€‰<code>[version]</code>å‚æ•°ã€‚</p><div class="language-css ext-css line-numbers-mode"><pre class="language-css"><code>â¯ ./kubeadm upgrade
Upgrade your cluster smoothly to a newer version with this command

<span class="token property">Usage</span><span class="token punctuation">:</span>
  kubeadm upgrade [flags]
  kubeadm upgrade [command]

Available <span class="token property">Commands</span><span class="token punctuation">:</span>
  apply       Upgrade your Kubernetes cluster to the specified version
  diff        Show what differences would be applied to existing static pod manifests. See <span class="token property">also</span><span class="token punctuation">:</span> kubeadm upgrade apply --dry-run
  node        Upgrade commands for a node in the cluster
  plan        Check which versions are available to upgrade to and validate whether your current cluster is upgradeable. To skip the internet check<span class="token punctuation">,</span> pass in the optional [version] parameter
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="kubeadm-config" tabindex="-1"><a class="header-anchor" href="#kubeadm-config" aria-hidden="true">#</a> kubeadm config</h2><p>ä»v1.8.0å¼€å§‹ï¼Œkubeadmå°†é›†ç¾¤çš„é…ç½®ä¸Šä¼ åˆ°<code>kube-system</code>åç§°ç©ºé—´ä¸­åä¸º<code>kubeadm-config</code>çš„ConfigMapï¼Œç„¶ååœ¨å‡çº§æ—¶è¯»å–ConfigMapã€‚è¿™æ”¯æŒæ­£ç¡®é…ç½®ç³»ç»Ÿç»„ä»¶ï¼Œå¹¶æä¾›äº†æ— ç¼çš„ç”¨æˆ·ä½“éªŒã€‚</p><p>ä½ å¯ä»¥æ‰§è¡Œ<code>kubeadm config view</code>æ¥æŸ¥çœ‹ConfigMapã€‚å¦‚æœä½¿ç”¨kubeadm v1.7åˆå§‹åŒ–é›†ç¾¤ã€‚åœ¨ä½¿ç”¨<code>kubeadm upgrade</code>ä¹‹å‰ï¼Œå¿…é¡»ä½¿ç”¨<code>kubeadm config upload</code>åˆ›å»ºConfigMapã€‚</p><p>åœ¨Kubernetes v1.11.0ä¸­ï¼Œæ·»åŠ äº†ä¸€äº›æ–°å‘½ä»¤ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>kubeadm config print-default</code> æ¥æ‰“å°é»˜è®¤é…ç½®ï¼Œè€Œ<code>kubeadm config migrate</code> å¯ä»¥å°†æ—§çš„é…ç½®æ–‡ä»¶è½¬æ¢ä¸ºæ–°ç‰ˆæœ¬ã€‚<code>kubeadm config images list</code> å’Œ<code>kubeadm config images pull</code> å¯ç”¨äºåˆ—å‡ºå’Œæ‹‰å–kubeadmæ‰€éœ€çš„é•œåƒã€‚</p><p>åœ¨ <code>Kubernetes v1.13.0</code> ä»¥åŠä»¥åçš„ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœè¦åˆ—å‡º/æ‹‰å‡ºçš„æ˜¯kube-dnsé•œåƒï¼Œè€Œä¸æ˜¯CoreDNSé•œåƒï¼Œåˆ™å¿…é¡»ä½¿ç”¨è¿™é‡Œæè¿°çš„<code>--config</code> æ–¹å¼ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>â¯ kubeadm config upload <span class="token parameter variable">--help</span>

There is a ConfigMap <span class="token keyword">in</span> the kube-system namespace called <span class="token string">&quot;kubeadm-config&quot;</span> that kubeadm uses to store internal configuration about the
cluster. kubeadm CLI v1.8.0+ automatically creates this ConfigMap with the config used with <span class="token string">&#39;kubeadm init&#39;</span>, but <span class="token keyword">if</span> you
initialized your cluster using kubeadm v1.7.x or lower, you must use the <span class="token string">&#39;config upload&#39;</span> <span class="token builtin class-name">command</span> to create this
ConfigMap. This is required so that <span class="token string">&#39;kubeadm upgrade&#39;</span> can configure your upgraded cluster correctly.

Usage:
  kubeadm config <span class="token punctuation">[</span>flags<span class="token punctuation">]</span>
  kubeadm config <span class="token punctuation">[</span>command<span class="token punctuation">]</span>

Available Commands:
  images      Interact with container images used by kubeadm
  migrate     Read an older version of the kubeadm configuration API types from a file, and output the similar config object <span class="token keyword">for</span> the newer version
  print       Print configuration

Flags:
  -h, <span class="token parameter variable">--help</span>                <span class="token builtin class-name">help</span> <span class="token keyword">for</span> config
      <span class="token parameter variable">--kubeconfig</span> string   The kubeconfig <span class="token function">file</span> to use when talking to the cluster. If the flag is not set, a <span class="token builtin class-name">set</span> of standard locations can be searched <span class="token keyword">for</span> an existing kubeconfig file. <span class="token punctuation">(</span>default <span class="token string">&quot;/etc/kubernetes/admin.conf&quot;</span><span class="token punctuation">)</span>

Global Flags:
      --add-dir-header           If true, adds the <span class="token function">file</span> directory to the header of the log messages
      --log-file string          If non-empty, use this log <span class="token function">file</span>
      --log-file-max-size uint   Defines the maximum size a log <span class="token function">file</span> can grow to. Unit is megabytes. If the value is <span class="token number">0</span>, the maximum <span class="token function">file</span> size is unlimited. <span class="token punctuation">(</span>default <span class="token number">1800</span><span class="token punctuation">)</span>
      --one-output               If true, only <span class="token function">write</span> logs to their native severity level <span class="token punctuation">(</span>vs also writing to each lower severity level<span class="token punctuation">)</span>
      <span class="token parameter variable">--rootfs</span> string            <span class="token punctuation">[</span>EXPERIMENTAL<span class="token punctuation">]</span> The path to the <span class="token string">&#39;real&#39;</span> <span class="token function">host</span> root filesystem.
      --skip-headers             If true, avoid header prefixes <span class="token keyword">in</span> the log messages
      --skip-log-headers         If true, avoid headers when opening log files
  -v, <span class="token parameter variable">--v</span> Level                  number <span class="token keyword">for</span> the log level verbosity
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="kubeadm-config-upload-from-file" tabindex="-1"><a class="header-anchor" href="#kubeadm-config-upload-from-file" aria-hidden="true">#</a> kubeadm config upload from-file</h3><p>ä¸Šä¼ ä¸€ä¸ªé…ç½®æ–‡ä»¶åˆ°é›†ç¾¤å†…çš„ConfigMapï¼Œç”¨äºkubeadmé…ç½®ã€‚</p><p>ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œä½ å¯ä»¥ä½¿ç”¨æä¾›ç»™<code>kubeadm init</code>çš„ç›¸åŒé…ç½®æ–‡ä»¶å°†é…ç½®ä¸Šä¼ åˆ°é›†ç¾¤ä¸­çš„ConfigMapã€‚å¦‚æœä½¿ç”¨v1.7åˆå§‹åŒ–é›†ç¾¤ã€‚åœ¨ä½¿ç”¨<code>kubeadm upgrade</code>å‡çº§åˆ°v1.8ä¹‹å‰ï¼Œä½ éœ€è¦ä½¿ç”¨ç›¸åŒçš„é…ç½®æ–‡ä»¶è¿è¡Œè¿™ä¸ªå‘½ä»¤ã€‚</p><p>é…ç½®ä½äº<code>kube-system</code>å‘½åç©ºé—´ä¸­çš„<code>kubeadm-config</code> ConfigMapä¸­ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubeadm config upload from-file <span class="token punctuation">[</span>flags<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p><code>kubeadm config upload from-file --help </code> æŸ¥çœ‹æ”¯æŒçš„ flages</p></blockquote><h3 id="kubeadm-config-view" tabindex="-1"><a class="header-anchor" href="#kubeadm-config-view" aria-hidden="true">#</a> kubeadm config view</h3><p>ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œä½ å¯ä»¥åœ¨kubeadmé…ç½®æ‰€åœ¨çš„é›†ç¾¤ä¸­æŸ¥çœ‹ConfigMapã€‚</p><p>é…ç½®ä½äº<code>kube-system</code>å‘½åç©ºé—´ä¸­çš„<code>kubeadm-config</code> ConfigMapä¸­ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubeadm config view <span class="token punctuation">[</span>flags<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="kubeadm-reset" tabindex="-1"><a class="header-anchor" href="#kubeadm-reset" aria-hidden="true">#</a> kubeadm reset</h2><p>æ­¤å‘½ä»¤å°†è¿˜åŸ<code>kubeadm init</code>å’Œ<code>kubeadm join</code>æ‰€åšçš„ä»»ä½•æ›´æ”¹ã€‚</p><p>è¿è¡Œæ­¤å‘½ä»¤ï¼Œä»¥æ¢å¤<code> kubeadm init</code>å’Œ <code>kubeadm join</code>å¯¹è¯¥ä¸»æœºæ‰€åšçš„ä»»ä½•æ›´æ”¹ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubeadm reset
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="æ¸…ç†å¤–éƒ¨etcd" tabindex="-1"><a class="header-anchor" href="#æ¸…ç†å¤–éƒ¨etcd" aria-hidden="true">#</a> æ¸…ç†å¤–éƒ¨etcd</h3><p>å¦‚æœä½¿ç”¨å¤–éƒ¨etcdï¼Œ <code>kubeadm reset</code>ä¸ä¼šåˆ é™¤ä»»ä½•etcdæ•°æ®ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœå†æ¬¡ä½¿ç”¨ç›¸åŒçš„etcdç«¯ç‚¹è¿è¡Œ<code>kubeadm init</code>ï¼Œæ‚¨å°†çœ‹åˆ°ä»¥å‰é›†ç¾¤çš„çŠ¶æ€ã€‚</p><p>è¦æ“¦é™¤etcdæ•°æ®ï¼Œå»ºè®®ä½¿ç”¨etcdctlè¿™æ ·çš„å®¢æˆ·ç«¯ï¼Œä¾‹å¦‚:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>etcdctl del <span class="token string">&quot;&quot;</span> <span class="token parameter variable">--prefix</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="kubeadm-token" tabindex="-1"><a class="header-anchor" href="#kubeadm-token" aria-hidden="true">#</a> kubeadm token</h2><p>å¼•å¯¼ä»¤ç‰Œç”¨äºåœ¨è¿æ¥é›†ç¾¤çš„èŠ‚ç‚¹å’Œæ§åˆ¶å¹³é¢èŠ‚ç‚¹ä¹‹é—´å»ºç«‹åŒå‘ä¿¡ä»»ï¼Œå¦‚<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/accessing_api/authenticating_with_bootstrap_tokens.html" target="_blank" rel="noopener noreferrer">ä½¿ç”¨å¼•å¯¼ä»¤ç‰Œè¿›è¡Œè®¤è¯<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ä¸­æ‰€è¿°ã€‚</p><p><code>kubeadm init</code>ä½¿ç”¨24å°æ—¶TTLåˆ›å»ºåˆå§‹ä»¤ç‰Œã€‚ä¸‹é¢çš„å‘½ä»¤å¯ä»¥ç®¡ç†è¯¥ä»¤ç‰Œï¼Œå¹¶åˆ›å»ºå’Œç®¡ç†æ–°çš„ä»¤ç‰Œã€‚</p><h3 id="kubeadm-token-create" tabindex="-1"><a class="header-anchor" href="#kubeadm-token-create" aria-hidden="true">#</a> kubeadm token create</h3><p>åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºå¼•å¯¼ä»¤ç‰Œã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubeadm token create <span class="token punctuation">[</span>token<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ªå‘½ä»¤å°†ä¸ºæ‚¨åˆ›å»ºä¸€ä¸ª <strong>å¼•å¯¼ä»¤ç‰Œ</strong>ã€‚ä½ å¯ä»¥æŒ‡å®šæ­¤ä»¤ç‰Œçš„ç”¨æ³•ã€â€œç”Ÿå­˜æ—¶é—´â€å’Œå¯é€‰çš„äººæ€§åŒ–æè¿°ã€‚</p><p><code>[token]</code>æ˜¯è¦å†™çš„å®é™…ä»¤ç‰Œã€‚è¿™åº”è¯¥æ˜¯ä¸€ä¸ªå®‰å…¨ç”Ÿæˆçš„éšæœºä»¤ç‰Œå½¢å¼<code>[a-z0-9]{6}.[a-z0-9]{16}</code>ã€‚å¦‚æœæ²¡æœ‰ç»™å‡º<code>[token]</code>ï¼Œåˆ™kubeadmå°†ç”Ÿæˆä¸€ä¸ªéšæœºä»¤ç‰Œã€‚</p><blockquote><p>æ‰€ä»¥æ‰€ å¼•å¯¼ä»¤ç‰Œæ˜¯å’Œ kueadme å¯¹åº”çš„ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>â¯ kubeadm token create
qg8u0m.g31qk96l34ns9gz4

â¯ kubectl get secrets -A | grep -i qg8u0m
kube-system       bootstrap-token-qg8u0m                           bootstrap.kubernetes.io/token         6      2m10s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h3 id="kubeadm-token-delete" tabindex="-1"><a class="header-anchor" href="#kubeadm-token-delete" aria-hidden="true">#</a> kubeadm token delete</h3><p>åˆ é™¤æœåŠ¡å™¨ä¸Šçš„å¼•å¯¼ä»¤ç‰Œã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubeadm token delete <span class="token punctuation">[</span>token-value<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¾‹å¦‚ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>â¯ kubeadm token delete qg8u0m
bootstrap token <span class="token string">&quot;qg8u0m&quot;</span> deleted
â¯ kubeadm token list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="kubeadm-token-generate" tabindex="-1"><a class="header-anchor" href="#kubeadm-token-generate" aria-hidden="true">#</a> kubeadm token generate</h3><p>ç”Ÿæˆå¹¶æ‰“å°å¼•å¯¼ä»¤ç‰Œï¼Œä½†ä¸è¦åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºå®ƒã€‚</p><p>è¿™ä¸ªå‘½ä»¤å°†è¾“å‡ºä¸€ä¸ªéšæœºç”Ÿæˆçš„å¼•å¯¼ä»¤ç‰Œï¼Œå¯ä»¥ä¸<code>init</code>å’Œ<code>join</code>å‘½ä»¤ä¸€èµ·ä½¿ç”¨ã€‚</p><p>ä½ ä¸å¿…ä½¿ç”¨æ­¤å‘½ä»¤æ¥ç”Ÿæˆä»¤ç‰Œã€‚åªè¦æ ¼å¼æ˜¯<code>[a-z0-9]{6}.[a-z0-9]{16}</code>ï¼Œä½ å‡ºå¯ä»¥è‡ªå·±ç”Ÿæˆã€‚æä¾›æ­¤å‘½ä»¤æ˜¯ä¸ºäº†æ–¹ä¾¿ä»¥ç»™å®šæ ¼å¼ç”Ÿæˆä»¤ç‰Œã€‚</p><p>ä½ è¿˜å¯ä»¥ä½¿ç”¨<code>kubeadm init</code>è€Œæ— éœ€æŒ‡å®šä»¤ç‰Œï¼Œå®ƒå°†ä¸ºä½ ç”Ÿæˆå¹¶æ‰“å°ä¸€ä¸ªä»¤ç‰Œã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubeadm token generate <span class="token punctuation">[</span>flags<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="kubeadm-token-list" tabindex="-1"><a class="header-anchor" href="#kubeadm-token-list" aria-hidden="true">#</a> kubeadm token list</h3><p>åˆ—å‡ºæœåŠ¡å™¨ä¸Šçš„å¼•å¯¼ä»¤ç‰Œã€‚</p><h2 id="kubeadm-version" tabindex="-1"><a class="header-anchor" href="#kubeadm-version" aria-hidden="true">#</a> kubeadm version</h2><p>è¿™ä¸ªå‘½ä»¤æ‰“å°kubeadmçš„ç‰ˆæœ¬ã€‚</p><h2 id="kubeadm-alpha" tabindex="-1"><a class="header-anchor" href="#kubeadm-alpha" aria-hidden="true">#</a> kubeadm alpha</h2><p>Kubeadm alphaå‘½ä»¤æ˜¯Kubeadmå·¥å…·ä¸­çš„ä¸€ä¸ªå®éªŒæ€§åŠŸèƒ½ï¼Œç”¨äºå¯ç”¨Kubernetesé›†ç¾¤çš„æŸäº›é«˜çº§åŠŸèƒ½ã€‚åœ¨Kubeadm alphaå‘½ä»¤ä¸­ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨å„ç§å‚æ•°å’Œæ ‡å¿—æ¥é…ç½®æ‰€éœ€çš„åŠŸèƒ½å¹¶å¯åŠ¨Kubernetesé›†ç¾¤ã€‚</p><h3 id="kubeadm-alpha-certs-renew" tabindex="-1"><a class="header-anchor" href="#kubeadm-alpha-certs-renew" aria-hidden="true">#</a> kubeadm alpha certs renew</h3><p>ä½ å¯ä»¥ä½¿ç”¨<code>all</code>å­å‘½ä»¤æ›´æ–°æ‰€æœ‰Kubernetesè¯ä¹¦ï¼Œæˆ–è€…æœ‰é€‰æ‹©åœ°æ›´æ–°å®ƒä»¬ã€‚</p><h3 id="renew" tabindex="-1"><a class="header-anchor" href="#renew" aria-hidden="true">#</a> renew</h3><p>æ›´æ–°Kubernetesé›†ç¾¤çš„è¯ä¹¦ã€‚</p><h3 id="all" tabindex="-1"><a class="header-anchor" href="#all" aria-hidden="true">#</a> all</h3><p>æ›´æ–°æ‰€æœ‰å¯ç”¨è¯ä¹¦ã€‚</p><p>æ›´æ–°è¿è¡Œæ§åˆ¶å¹³é¢æ‰€éœ€çš„æ‰€æœ‰å·²çŸ¥è¯ä¹¦ã€‚æ— è®ºè¿‡æœŸæ—¥æœŸå¦‚ä½•ï¼Œéƒ½ä¼šæ— æ¡ä»¶åœ°è¿è¡Œç»­è®¢ã€‚ä¸ºäº†è·å¾—æ›´å¤šçš„æ§åˆ¶ï¼Œè¿˜å¯ä»¥å•ç‹¬è¿è¡Œç»­è®¢ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubeadm alpha certs renew all <span class="token punctuation">[</span>flags<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="kubeadm-alpha-kubeconfig-user" tabindex="-1"><a class="header-anchor" href="#kubeadm-alpha-kubeconfig-user" aria-hidden="true">#</a> kubeadm alpha kubeconfig user</h3><p><code>user</code>å­å‘½ä»¤å¯ç”¨äºä¸ºå…¶ä»–ç”¨æˆ·åˆ›å»ºkubeconfigæ–‡ä»¶ã€‚</p><h2 id="kubeadm-init-phase" tabindex="-1"><a class="header-anchor" href="#kubeadm-init-phase" aria-hidden="true">#</a> kubeadm init phase</h2><p>åœ¨v1.8.0ä¸­ï¼Œkubeadmå¼•å…¥äº†<code>kubeadm alpha phase</code>å‘½ä»¤ï¼Œç›®çš„æ˜¯ä½¿kubeadmæ›´åŠ æ¨¡å—åŒ–ã€‚åœ¨v1.13.0ä¸­ï¼Œè¿™ä¸ªå‘½ä»¤é€æ¸è¿‡æ¸¡åˆ°<code>kubeadm init phase</code>ã€‚è¿™ç§æ¨¡å—åŒ–ä½¿ä½ èƒ½å¤Ÿè°ƒç”¨å¼•å¯¼è¿‡ç¨‹çš„åŸå­å­æ­¥éª¤ã€‚å› æ­¤ï¼Œä½ å¯ä»¥è®©kubeadmå®ŒæˆæŸäº›éƒ¨åˆ†ï¼Œå¹¶åœ¨éœ€è¦è‡ªå®šä¹‰çš„åœ°æ–¹è¿›è¡Œå¡«å……ã€‚</p><p><code>kubeadm init phase</code>ä¸<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_init.html#chushihualiucheng" target="_blank" rel="noopener noreferrer"><code>kubeadm init</code>å·¥ä½œæµç¨‹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æ˜¯ä¸€è‡´çš„ï¼Œå¹¶ä¸”ä¸¤è€…éƒ½ä½¿ç”¨ç›¸åŒçš„ä»£ç ã€‚</p><h2 id="kubeadm-join-phase" tabindex="-1"><a class="header-anchor" href="#kubeadm-join-phase" aria-hidden="true">#</a> kubeadm join phase</h2><p>åœ¨v1.14.0ä¸­ï¼Œkubeadmå¼•å…¥äº†<code>kubeadm join phase</code>å‘½ä»¤ï¼Œç›®çš„æ˜¯ä½¿kubeadmæ›´åŠ æ¨¡å—åŒ–ã€‚è¿™ç§æ¨¡å—åŒ–ä½¿ä½ èƒ½å¤Ÿè°ƒç”¨åŠ å…¥ï¼ˆjoinï¼‰è¿‡ç¨‹çš„åŸå­å­æ­¥éª¤ã€‚å› æ­¤ï¼Œä½ å¯ä»¥è®©kubeadmå®ŒæˆæŸäº›éƒ¨åˆ†ï¼Œå¹¶åœ¨éœ€è¦è‡ªå®šä¹‰çš„åœ°æ–¹è¿›è¡Œå¡«å……ã€‚</p><p><code>kubeadm join phase</code>ä¸<code>kubeadm join</code>å·¥ä½œæµç¨‹æ˜¯ä¸€è‡´çš„ï¼Œå¹¶ä¸”åœ¨åå°ä¸¤è€…éƒ½ä½¿ç”¨ç›¸åŒçš„ä»£ç ã€‚</p><h2 id="ç»†èŠ‚" tabindex="-1"><a class="header-anchor" href="#ç»†èŠ‚" aria-hidden="true">#</a> ç»†èŠ‚</h2><p>kubeadm å›´ç»•ç€ init å’Œ join ä¸ºä¸»ä½“å¼€å±•çš„ã€‚</p><p><code>kubeadm init</code>å’Œ<code>kubeadm join</code>æ‰€å»ºç«‹çš„é›†ç¾¤åº”è¯¥æ˜¯:</p><ul><li><p>å®‰å…¨çš„ï¼š</p><p>å®ƒåº”è¯¥é‡‡ç”¨æœ€æ–°çš„æœ€ä½³å®è·µï¼Œå¦‚:</p><ul><li>å¼ºåˆ¶æ‰§è¡ŒRBAC</li><li>ä½¿ç”¨èŠ‚ç‚¹æˆæƒå™¨</li><li>ä½¿ç”¨æ§åˆ¶å¹³é¢ç»„ä»¶ä¹‹é—´çš„å®‰å…¨é€šä¿¡</li><li>ä½¿ç”¨APIæœåŠ¡å™¨å’Œkubeletä¹‹é—´çš„å®‰å…¨é€šä¿¡</li><li>é”å®škubelet API</li><li>é”å®šå¯¹kube-proxyå’ŒCoreDNSç­‰ç³»ç»Ÿç»„ä»¶çš„APIè®¿é—®</li><li>é”å®šå¼•å¯¼ä»¤ç‰Œå¯ä»¥è®¿é—®çš„å†…å®¹</li><li>ç­‰å¾…</li></ul></li><li><p>æ˜“ç”¨çš„ï¼š</p><p>ç”¨æˆ·è¿è¡Œçš„ä¸¤ä¸ªå‘½ä»¤ä¸åº”è¯¥è¶…ä¸¤ä¸ª:</p><ul><li><code>kubeadm init</code></li><li><code>export KUBECONFIG=/etc/kubernetes/admin.conf</code></li><li><code>kubectl apply -f &lt;network-of-choice.yaml&gt;</code></li><li><code>kubeadm join --token &lt;token&gt; &lt;master-ip&gt;:&lt;master-port&gt;</code></li></ul></li><li><p>å¯æ‰©å±•çš„ï¼š</p><ul><li>ä¾‹å¦‚ï¼Œå®ƒåº”è¯¥ä¸æ”¯æŒæ‰€æœ‰ç½‘ç»œæä¾›è€…ï¼Œç›¸åï¼Œé…ç½®ç½‘ç»œå·²è¶…å‡ºäº†èŒƒå›´</li><li>åº”è¯¥æä¾›ä½¿ç”¨é…ç½®æ–‡ä»¶å®šåˆ¶å„ç§å‚æ•°çš„å¯èƒ½æ€§</li></ul></li></ul><h3 id="å¸¸é‡å’Œè‘—åçš„å€¼ä¸è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#å¸¸é‡å’Œè‘—åçš„å€¼ä¸è·¯å¾„" aria-hidden="true">#</a> å¸¸é‡å’Œè‘—åçš„å€¼ä¸è·¯å¾„</h3><p>ä¸ºäº†é™ä½å¤æ‚æ€§å¹¶ç®€åŒ–åŸºäºkubeadmå®ç°çš„éƒ¨ç½²è§£å†³æ–¹æ¡ˆçš„å¼€å‘ï¼Œkubeadmä¸ºä¼—æ‰€å‘¨çŸ¥çš„è·¯å¾„å’Œæ–‡ä»¶åä½¿ç”¨ä¸€ç»„æœ‰é™çš„å¸¸é‡å€¼ã€‚</p><p>Kubernetesç›®å½•<code>/etc/kubernetes</code>åœ¨åº”ç”¨ç¨‹åºä¸­æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œå› ä¸ºå®ƒåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯ç»™å®šçš„è·¯å¾„ï¼Œå¹¶ä¸”æ˜¯æœ€ç›´è§‚çš„ä½ç½®ï¼›å…¶ä»–å¸¸é‡è·¯å¾„å’Œæ–‡ä»¶åä¸º:</p><ul><li><strong><code>/etc/kubernetes/manifests</code> ä½œä¸ºkubeletåº”è¯¥å¯»æ‰¾é™æ€Podæ¸…å•çš„è·¯å¾„ã€‚é™æ€podçš„æ¸…å•æœ‰:</strong><ul><li><code>etcd.yaml</code></li><li><code>kube-apiserver.yaml</code></li><li><code>kube-controller-manager.yaml</code></li><li><code>kube-scheduler.yaml</code></li></ul></li><li><strong><code>/etc/kubernetes/</code> ä½œä¸ºå­˜å‚¨å…·æœ‰æ§åˆ¶å¹³é¢ç»„ä»¶æ ‡è¯†ç¬¦çš„kubeconfigæ–‡ä»¶çš„è·¯å¾„ã€‚kubeconfigæ–‡ä»¶çš„åç§°æœ‰:</strong><ul><li><code>kubelet.conf</code> (<code>bootstrap-kubelet.conf</code> åœ¨TLSå¼•å¯¼æœŸé—´)</li><li><code>controller-manager.conf</code></li><li><code>scheduler.conf</code></li><li><code>admin.conf</code> ç”¨äºé›†ç¾¤ç®¡ç†å‘˜å’Œkubeadmè‡ªå·±</li></ul></li><li><strong>è¯ä¹¦å’Œå¯†é’¥æ–‡ä»¶åç§°:</strong><ul><li><code>ca.crt</code>ã€ <code>ca.key</code> ç”¨äºKubernetesè¯ä¹¦æˆæƒ</li><li><code>apiserver.crt</code>ã€ <code>apiserver.key</code> ç”¨äºAPIæœåŠ¡å™¨è¯ä¹¦</li><li><code>apiserver-kubelet-client.crt</code>ã€ <code>apiserver-kubelet-client.key</code> ä½œä¸ºAPIæœåŠ¡å™¨çš„å®¢æˆ·ç«¯è¯ä¹¦ç”¨äºè¿æ¥å®‰å…¨åœ°è¿æ¥kubelet</li><li><code>sa.pub</code>ã€ <code>sa.key</code> åœ¨ç­¾å<code>ServiceAccount</code>æ—¶ï¼Œä½œä¸ºæ§åˆ¶å™¨ç®¡ç†å™¨çš„å¯†é’¥</li><li><code>front-proxy-ca.crt</code>ã€ <code>front-proxy-ca.key</code> ç”¨äºå‰ç«¯ä»£ç†è¯ä¹¦æˆæƒ</li><li><code>front-proxy-client.crt</code>ã€ <code>front-proxy-client.key</code> ç”¨äºå‰ç«¯ä»£ç†å®¢æˆ·ç«¯</li></ul></li></ul><h3 id="kubeadmåˆå§‹åŒ–æµç¨‹çš„å†…éƒ¨è®¾è®¡" tabindex="-1"><a class="header-anchor" href="#kubeadmåˆå§‹åŒ–æµç¨‹çš„å†…éƒ¨è®¾è®¡" aria-hidden="true">#</a> kubeadmåˆå§‹åŒ–æµç¨‹çš„å†…éƒ¨è®¾è®¡</h3><p><code>kubeadm init</code>å†…éƒ¨æµç¨‹ï¼ˆç¬¬äºŒä¸ªæ®µè½æ ‡é¢˜ï¼‰ç”±ä¸€ç³»åˆ—è¦æ‰§è¡Œçš„åŸå­å·¥ä½œä»»åŠ¡ç»„æˆï¼Œå¦‚<code>kubeadm init</code>ä¸­æ‰€è¿°ã€‚</p><p><code>kubeadm init phase</code>å‘½ä»¤å…è®¸ç”¨æˆ·åˆ†åˆ«è°ƒç”¨æ¯ä¸ªä»»åŠ¡ï¼Œå¹¶æœ€ç»ˆæä¾›ä¸€ä¸ªå¯é‡ç”¨å’Œå¯ç»„åˆçš„API/å·¥å…·ç®±ï¼Œå…¶ä»–Kuberneteså¼•å¯¼å·¥å…·ã€ä»»ä½•ITè‡ªåŠ¨åŒ–å·¥å…·æˆ–é«˜çº§ç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨è¯¥API/å·¥å…·ç®±åˆ›å»ºè‡ªå®šä¹‰é›†ç¾¤ã€‚</p><h3 id="é¢„æ£€æŸ¥-preflight" tabindex="-1"><a class="header-anchor" href="#é¢„æ£€æŸ¥-preflight" aria-hidden="true">#</a> é¢„æ£€æŸ¥ï¼ˆpreflight)</h3><p>Kubeadmåœ¨å¯åŠ¨ init ä¹‹å‰æ‰§è¡Œä¸€ç»„é¢„å…ˆæ£€æŸ¥ï¼Œç›®çš„æ˜¯éªŒè¯å…ˆå†³æ¡ä»¶å¹¶é¿å…å¸¸è§çš„é›†ç¾¤å¯åŠ¨é—®é¢˜ã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨<code>--ignore-preflight-errors</code> é€‰é¡¹è·³è¿‡ç‰¹å®šçš„é¢„å…ˆæ£€æŸ¥ï¼ˆæˆ–è€…æœ€ç»ˆè·³è¿‡æ‰€æœ‰çš„é¢„å…ˆæ£€æŸ¥ï¼‰ã€‚</p><ul><li>[è­¦å‘Š]å¦‚æœè¦ä½¿ç”¨çš„Kubernetesç‰ˆæœ¬ï¼ˆä½¿ç”¨ <code>--kubernetes-version</code>é€‰é¡¹æŒ‡å®šï¼‰è‡³å°‘æ¯”kubeadm CLIç‰ˆæœ¬é«˜ä¸€ä¸ªæ¬¡è¦ç‰ˆæœ¬ã€‚</li><li>Kubernetesç³»ç»Ÿè¦æ±‚: <ul><li>å¦‚æœè¿è¡Œåœ¨linuxä¸Š: <ul><li>[é”™è¯¯]å¦‚æœä¸æ˜¯æ‹¥æœ‰ç‰¹å®šKernelSpecçš„å†…æ ¸3.10+æˆ–4</li><li>[é”™è¯¯]å¦‚æœéœ€è¦çš„cgroupså­ç³»ç»Ÿæ²¡æœ‰å»ºç«‹</li></ul></li><li>å¦‚æœä½¿ç”¨dockerï¼š <ul><li>[è­¦å‘Š/é”™è¯¯]å¦‚æœDockeræœåŠ¡ä¸å­˜åœ¨ï¼Œå¦‚æœå®ƒè¢«ç¦ç”¨ï¼Œå¦‚æœå®ƒä¸æ˜¯æ´»åŠ¨çš„ã€‚</li><li>[é”™è¯¯]å¦‚æœDockerç«¯ç‚¹ä¸å­˜åœ¨æˆ–ä¸å·¥ä½œ</li><li>[è­¦å‘Š]å¦‚æœdockerç‰ˆæœ¬&gt;17.03</li></ul></li><li>å¦‚æœä½¿ç”¨å…¶å®ƒCRIå¼•æ“ï¼š <ul><li>[é”™è¯¯]å¦‚æœcrictlå¥—æ¥å­—æ²¡æœ‰åº”ç­”</li></ul></li></ul></li><li>[é”™è¯¯]å¦‚æœç”¨æˆ·ä¸æ˜¯root</li><li>[é”™è¯¯]å¦‚æœæœºå™¨ä¸»æœºåä¸æ˜¯æœ‰æ•ˆçš„DNSå­åŸŸå</li><li>[è­¦å‘Š]å¦‚æœæ— æ³•é€šè¿‡ç½‘ç»œæŸ¥æ‰¾è®¿é—®ä¸»æœºå</li><li>[é”™è¯¯]å¦‚æœkubeletç‰ˆæœ¬ä½äºkubeadmæ”¯æŒçš„æœ€å°kubeletç‰ˆæœ¬ï¼ˆå½“å‰æ¬¡è¦ç‰ˆæœ¬ - 1ï¼‰</li><li>[é”™è¯¯]å¦‚æœkubeletç‰ˆæœ¬æ¯”æ‰€éœ€çš„æ§åˆ¶å¹³é¢ç‰ˆæœ¬ï¼ˆä¸æ”¯æŒçš„ç‰ˆæœ¬å€¾æ–œï¼‰é«˜è‡³å°‘ä¸€ä¸ªæ¬¡è¦ç‰ˆæœ¬</li><li>[è­¦å‘Š]å¦‚æœkubeletæœåŠ¡ä¸å­˜åœ¨æˆ–è¢«ç¦ç”¨</li><li>[è­¦å‘Š]å¦‚æœfirewalldæ˜¯æ´»åŠ¨çš„</li><li>[é”™è¯¯]å¦‚æœAPIæœåŠ¡å™¨bindPortæˆ–ç«¯å£ä½¿ç”¨çš„æ˜¯<code>10250/10251/10252</code></li><li>[é”™è¯¯]å¦‚æœ<code>/etc/kubernetes/manifest</code>æ–‡ä»¶å¤¹å·²ç»å­˜åœ¨ä¸”ä¸æ˜¯ç©ºçš„</li><li>[é”™è¯¯]å¦‚æœ<code>/proc/sys/net/bridge/bridge-nf-call-iptables</code>æ–‡ä»¶ä¸å­˜åœ¨æˆ–ä¸åŒ…å«1</li><li>[é”™è¯¯]å¦‚æœadvertiseåœ°å€æ˜¯ipv6ï¼Œ <code>/proc/sys/net/bridge/bridge-nf-call-ip6tables</code>ä¸å­˜åœ¨æˆ–ä¸åŒ…å«1ã€‚</li><li>[é”™è¯¯]å¦‚æœswapæ˜¯æ‰“å¼€çš„</li><li>[é”™è¯¯]å¦‚æœå‘½ä»¤è·¯å¾„ä¸­ä¸å­˜åœ¨<code>ip</code>ã€<code>iptables</code>ã€<code>mount</code>ã€<code>nsenter</code>å‘½ä»¤</li><li>[è­¦å‘Š]å¦‚æœå‘½ä»¤è·¯å¾„ä¸­æ²¡æœ‰<code>ebtables</code>ã€<code>ethtool</code>ã€<code>socat</code>ã€<code>tc</code>ã€<code>touch</code>ã€<code>crictl</code>å‘½ä»¤</li><li>[è­¦å‘Š]å¦‚æœAPIæœåŠ¡å™¨ã€æ§åˆ¶å™¨ç®¡ç†å™¨ã€è°ƒåº¦å™¨çš„é¢å¤–å‚æ•°åŒ…å«ä¸€äº›æ— æ•ˆé€‰é¡¹</li><li>[è­¦å‘Š]å¦‚æœé€šè¿‡ä»£ç†è¿æ¥åˆ°<a href="https://api.advertiseaddress:API.BindPort/" target="_blank" rel="noopener noreferrer">https://API.AdvertiseAddress:API.BindPort<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>[è­¦å‘Š]å¦‚æœé€šè¿‡ä»£ç†è¿æ¥åˆ°æœåŠ¡å­ç½‘ï¼ˆä»…é€‰ä¸­ç¬¬ä¸€ä¸ªåœ°å€ï¼‰</li><li>[è­¦å‘Š]å¦‚æœé€šè¿‡ä»£ç†è¿æ¥åˆ°Podå­ç½‘ï¼ˆä»…é€‰ä¸­ç¬¬ä¸€ä¸ªåœ°å€ï¼‰</li><li>å¦‚æœæä¾›å¤–éƒ¨etcd: <ul><li>[é”™è¯¯]å¦‚æœetcdç‰ˆæœ¬å°äº3.0.14</li><li>[é”™è¯¯]å¦‚æœæŒ‡å®šetcdè¯ä¹¦æˆ–å¯†é’¥ï¼Œä½†æ²¡æœ‰æä¾›</li></ul></li><li>å¦‚æœæ²¡æœ‰æä¾›å¤–éƒ¨etcdï¼ˆå› æ­¤å°†å®‰è£…æœ¬åœ°etcdï¼‰: <ul><li>[é”™è¯¯]å¦‚æœ2379ç«¯å£è¢«å ç”¨</li><li>[é”™è¯¯]å¦‚æœ Etcd.DataDiræ–‡ä»¶å¤¹å·²ç»å­˜åœ¨å¹¶ä¸”ä¸ä¸ºç©º</li></ul></li><li>å¦‚æœæˆæƒæ¨¡å¼ä¸ºABAC: <ul><li>[é”™è¯¯]å¦‚æœ<code>abac_policy.json</code>æ–‡ä»¶ä¸å­˜åœ¨</li></ul></li><li>å¦‚æœæˆæƒæ¨¡å¼æ˜¯WebHookï¼š <ul><li>[é”™è¯¯]å¦‚æœ<code>webhook_authz .conf</code>æ–‡ä»¶ä¸å­˜åœ¨</li></ul></li></ul><p>è¯·æ³¨æ„ï¼š</p><ol><li>å¯ä»¥ä½¿ç”¨ <code>kubeadm init phase preflight</code>å‘½ä»¤å•ç‹¬æ‰§è¡Œé¢„å…ˆæ£€æŸ¥</li></ol><h3 id="ç”Ÿæˆå¿…è¦çš„è¯ä¹¦" tabindex="-1"><a class="header-anchor" href="#ç”Ÿæˆå¿…è¦çš„è¯ä¹¦" aria-hidden="true">#</a> ç”Ÿæˆå¿…è¦çš„è¯ä¹¦</h3><p>Kubeadmç”Ÿæˆç”¨äºä¸åŒç›®çš„çš„è¯ä¹¦å’Œç§é’¥å¯¹:</p><ul><li><p>ä¸€ä¸ªç”¨äºKubernetesé›†ç¾¤çš„è‡ªç­¾åè¯ä¹¦é¢å‘æœºæ„ï¼Œä¿å­˜åœ¨<code>ca.crt</code>æ–‡ä»¶å’Œ<code>ca.key</code>ç§é’¥æ–‡ä»¶ä¸­</p></li><li><p>APIæœåŠ¡å™¨çš„æœåŠ¡è¯ä¹¦ï¼Œä½¿ç”¨</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ca.crt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä½œä¸ºCAç”Ÿæˆï¼Œå¹¶ä¿å­˜åˆ°</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>apiserver.crt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ–‡ä»¶åŠå…¶ç§é’¥</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>apiserver.key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ã€‚æ­¤è¯ä¹¦åº”åŒ…å«ä»¥ä¸‹å¯é€‰åç§°:</p><ul><li>KubernetesæœåŠ¡çš„å†…éƒ¨é›†ç¾¤IPï¼ˆæœåŠ¡CIDRä¸­çš„ç¬¬ä¸€ä¸ªåœ°å€ï¼Œä¾‹å¦‚ï¼šå¦‚æœæœåŠ¡å­ç½‘æ˜¯<code>10.96.0.0/12</code>ï¼Œåˆ™é›†ç¾¤IPä¸º<code>10.96.0.1</code>ï¼‰</li><li>Kubernetes DNSåç§°ï¼›ä¾‹å¦‚ï¼šå¦‚æœæŒ‡å®š<code>--service-dns-domain</code> ä¸º <code>cluster.local</code>ï¼Œåˆ™DNSåç§°ä¸º<code>kubernetes.default.svc.cluster.local</code> ï¼ŒåŠ ä¸Šé»˜è®¤DNSåç§°ï¼š <code>kubernetes.default.svc</code>ã€<code>kubernetes.default</code>ã€ <code>kubernetes</code></li><li>èŠ‚ç‚¹åç§°</li><li><code>--apiserver-advertise-address</code></li><li>ç”±ç”¨æˆ·æŒ‡å®šçš„å…¶ä»–æ›¿ä»£åç§°</li></ul></li><li><p>ç”¨äºAPIæœåŠ¡å™¨å®‰å…¨åœ°è¿æ¥åˆ°kubeletçš„å®¢æˆ·ç«¯è¯ä¹¦ï¼Œä½¿ç”¨<code>ca.crt</code>ä½œä¸ºCAç”Ÿæˆï¼Œå¹¶ä¿å­˜åˆ°<code>apiserver-kubelet-client.crt</code>æ–‡ä»¶ä¸­åŠå…¶ç§é’¥<code>apiserver-kubelet-client.key</code>ã€‚è¿™ä¸ªè¯ä¹¦åº”è¯¥åœ¨ <code>system:masters</code>ç»„ç»‡ä¸­</p></li><li><p>ç”¨äºç­¾åæœåŠ¡è´¦æˆ·ä»¤ç‰Œçš„ç§é’¥ï¼Œå¹¶ä¿å­˜è‡³ <code>sa.key</code> æ–‡ä»¶åŠå…¶å…¬é’¥æ–‡ä»¶ <code>sa.pub</code></p></li><li><p>ç”¨äºå‰ç«¯ä»£ç†æˆæƒçš„è¯ä¹¦ï¼Œå¹¶ä¿å­˜è‡³ <code>front-proxy-ca.crt</code>æ–‡ä»¶åŠå…¶å¯†é’¥æ–‡ä»¶y<code>front-proxy-ca.key</code></p></li><li><p>ç”¨äºå‰ç«¯ä»£ç†å®¢æˆ·ç«¯çš„å®¢æˆ·ç«¯è¯ä¹¦ï¼Œä½¿ç”¨ <code>front-proxy-ca.crt</code>ä½œä¸ºCAç”Ÿæˆï¼Œå¹¶ä¿å­˜è‡³ <code>front-proxy-client.crt</code> æ–‡ä»¶åŠå…¶ç§é’¥<code>front-proxy-client.key</code></p></li></ul><p>è¯ä¹¦é»˜è®¤å­˜å‚¨åœ¨<code>/etc/kubernetes/pki</code>ä¸­ï¼Œä½†æ˜¯è¿™ä¸ªç›®å½•å¯ä»¥ä½¿ç”¨<code>--cert-dir</code>é€‰é¡¹è¿›è¡Œé…ç½®ã€‚</p><p><strong>è¯·æ³¨æ„ï¼š</strong></p><ol><li>å¦‚æœä¸€ä¸ªç»™å®šçš„è¯ä¹¦å’Œç§é’¥å¯¹éƒ½å­˜åœ¨ï¼Œå¹¶ä¸”å®ƒçš„å†…å®¹ç¬¦åˆä¸Šé¢çš„è§„èŒƒï¼Œé‚£ä¹ˆå°†ä½¿ç”¨ç°æœ‰çš„æ–‡ä»¶ï¼Œå¹¶ä¸”è·³è¿‡ç»™å®šè¯ä¹¦çš„ç”Ÿæˆé˜¶æ®µã€‚ä¾‹å¦‚ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·å¯ä»¥å°†ç°æœ‰CAå¤åˆ¶åˆ°<code>/etc/kubernetes/pki/ca.{crt,key}</code>ï¼Œç„¶åkubeadmå°†ä½¿ç”¨è¿™äº›æ–‡ä»¶æ¥ç­¾ç½²å…¶ä½™çš„è¯ä¹¦ã€‚</li><li>ä»…å¯¹äºCAï¼Œå¯ä»¥åªæä¾›<code>ca.crt</code>æ–‡ä»¶è€Œä¸æä¾›<code>ca.key</code>æ–‡ä»¶ï¼Œå¦‚æœæ‰€æœ‰å…¶ä»–è¯ä¹¦å’Œkubeconfigæ–‡ä»¶å·²ç»åˆ°ä½ï¼Œkubeadmè¯†åˆ«è¿™ç§æƒ…å†µå¹¶æ¿€æ´»å¤–éƒ¨CAæ¨¡å¼ï¼Œè¿™ä¹Ÿæ„å‘³ç€åœ¨æ§åˆ¶å™¨ç®¡ç†å™¨çš„<code>csrsigner</code>æ§åˆ¶å™¨ä¸ä¼šå¯åŠ¨ã€‚</li><li>å¦‚æœkubeadmåœ¨<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_init.html#waibucamoshi" target="_blank" rel="noopener noreferrer">å¤–éƒ¨CAæ¨¡å¼<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ä¸‹è¿è¡Œï¼›æ‰€æœ‰è¯ä¹¦éƒ½å¿…é¡»ç”±ç”¨æˆ·æä¾›ï¼Œå› ä¸ºkubeadmä¸èƒ½è‡ªå·±ç”Ÿæˆè¯ä¹¦ã€‚</li><li>åœ¨kubeadmä»¥<code>--dry-run</code>æ¨¡å¼æ‰§è¡Œæ—¶ï¼Œè¯ä¹¦æ–‡ä»¶è¢«å†™å…¥ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¤¹ã€‚</li><li>å¯ä»¥ä½¿ç”¨<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_init_phase.html#kubeadm-init-phase-certs" target="_blank" rel="noopener noreferrer"><code>kubeadm init phase certs all</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å‘½ä»¤å•ç‹¬è°ƒç”¨è¯ä¹¦ç”Ÿæˆã€‚</li></ol><h3 id="ä¸ºæ§åˆ¶å¹³é¢ç»„ä»¶ç”Ÿæˆkubeconfigæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#ä¸ºæ§åˆ¶å¹³é¢ç»„ä»¶ç”Ÿæˆkubeconfigæ–‡ä»¶" aria-hidden="true">#</a> ä¸ºæ§åˆ¶å¹³é¢ç»„ä»¶ç”Ÿæˆkubeconfigæ–‡ä»¶</h3><p>å¸¦æœ‰æ§åˆ¶å¹³é¢ç»„ä»¶æ ‡è¯†çš„Kubeadm kubeconfigæ–‡ä»¶:</p><ul><li><p>ä¸€ä¸ªkubeconfigæ–‡ä»¶ï¼Œä¾›kubeletä½¿ç”¨ï¼Œ</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/etc/kubernetes/kubelet.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ï¼›åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­åµŒå…¥äº†ä¸€ä¸ªå¸¦æœ‰kubeletæ ‡è¯†çš„å®¢æˆ·ç«¯è¯ä¹¦ã€‚æ­¤å®¢æˆ·è¯ä¹¦åº”è¯¥ï¼š</p><ul><li>åœ¨ <code>system:nodes</code>ç»„ç»‡ä¸­ï¼Œæ ¹æ®<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/accessing_api/using_node_authorization.html" target="_blank" rel="noopener noreferrer">èŠ‚ç‚¹æˆæƒ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æ¨¡å—çš„è¦æ±‚</li><li>CNä¸º <code>system:node:&lt;hostname-lowercased&gt;</code></li></ul></li><li><p>ä¸€ä¸ªkubeconfigæ–‡ä»¶ï¼Œä¾›æ§åˆ¶å™¨ç®¡ç†å™¨ä½¿ç”¨ï¼Œ<code>/etc/kubernetes/controller-manager.conf</code>ï¼›åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­åµŒå…¥äº†ä¸€ä¸ªå¸¦æœ‰æ§åˆ¶å™¨ç®¡ç†å™¨æ ‡è¯†çš„å®¢æˆ·ç«¯è¯ä¹¦ã€‚è¿™ä¸ªå®¢æˆ·ç«¯è¯ä¹¦çš„CNåº”è¯¥ä¸º <code>system:kube-controller-manager</code>ï¼Œè¿™æ˜¯ç”±é»˜è®¤çš„<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/accessing_api/using_rbac_authorization.html#hexinzujianjiaose" target="_blank" rel="noopener noreferrer">RBACæ ¸å¿ƒç»„ä»¶è§’è‰²<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>å®šä¹‰çš„</p></li><li><p>ä¸€ä¸ªkubeconfigæ–‡ä»¶ï¼Œä¾›è°ƒåº¦å™¨ä½¿ç”¨ï¼Œ<code>/etc/kubernetes/scheduler.conf</code>ï¼›åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­åµŒå…¥äº†ä¸€ä¸ªå¸¦æœ‰è°ƒåº¦å™¨æ ‡è¯†çš„å®¢æˆ·ç«¯è¯ä¹¦ã€‚è¿™ä¸ªå®¢æˆ·ç«¯è¯ä¹¦CNåº”è¯¥ä¸º<code>system:kube-scheduler</code>ï¼Œè¿™æ˜¯ç”±é»˜è®¤çš„<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/accessing_api/using_rbac_authorization.html#hexinzujianjiaose-1" target="_blank" rel="noopener noreferrer">RBACæ ¸å¿ƒç»„ä»¶è§’è‰²<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>å®šä¹‰çš„</p></li></ul><p>æ­¤å¤–ï¼Œè¿˜ç”Ÿæˆä¸€ä¸ªkubeadmè‡ªèº«å’Œç®¡ç†å‘˜ä½¿ç”¨çš„kubeconfigæ–‡ä»¶ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ°<code>/etc/kubernetes/admin.conf</code>æ–‡ä»¶ä¸­ã€‚è¿™é‡Œçš„<code>admin</code>å®šä¹‰äº†ç®¡ç†é›†ç¾¤å¹¶å¸Œæœ›å®Œå…¨æ§åˆ¶ï¼ˆrootï¼‰é›†ç¾¤çš„å®é™…äººå‘˜ã€‚ç”¨äº<code>admin</code>çš„åµŒå…¥å¼å®¢æˆ·ç«¯è¯ä¹¦åº”è¯¥ï¼š</p><ul><li>åœ¨<code>system:masters</code>ç»„ç»‡ä¸­ï¼Œå¦‚é»˜è®¤çš„<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/accessing_api/using_rbac_authorization.html#mianxiangyonghudejiaose" target="_blank" rel="noopener noreferrer">RBACç”¨æˆ·é¢å‘è§’è‰²ç»‘å®š<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æ‰€å®šä¹‰çš„é‚£æ ·</li><li>åŒ…å«ä¸€ä¸ªCNï¼Œä½†å®ƒå¯ä»¥æ˜¯ä»»ä½•å€¼ã€‚Kubeadmä½¿ç”¨CN <code>kubernetes-admin</code></li></ul><p>è¯·æ³¨æ„ï¼š</p><ol><li><code>ca.crt</code>è¯ä¹¦è¢«åµŒå…¥åˆ°æ‰€æœ‰kubeconfigæ–‡ä»¶ä¸­ã€‚</li><li>å¦‚æœå­˜åœ¨ä¸€ä¸ªç»™å®šçš„kubeconfigæ–‡ä»¶ï¼Œå¹¶ä¸”å®ƒçš„å†…å®¹ç¬¦åˆä¸Šé¢çš„è§„èŒƒï¼Œé‚£ä¹ˆå°†ä½¿ç”¨ç°æœ‰çš„æ–‡ä»¶ï¼Œå¹¶ä¸”è·³è¿‡ç»™å®škubeconfigçš„ç”Ÿæˆé˜¶æ®µã€‚</li><li>å¦‚æœkubeadmåœ¨å¤–éƒ¨CAæ¨¡å¼ä¸‹è¿è¡Œï¼Œé‚£ä¹ˆç”¨æˆ·è¿˜å¿…é¡»æä¾›æ‰€æœ‰å¿…éœ€çš„kubeconfigï¼Œå› ä¸ºkubeadmæœ¬èº«ä¸èƒ½ç”Ÿæˆä»»ä½•kubeonfig</li><li>åœ¨kubeadmä»¥<code>--dry-run</code>æ¨¡å¼æ—¶ï¼Œkubeconfigæ–‡ä»¶è¢«å†™å…¥ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¤¹ã€‚</li><li>å¯ä»¥ä½¿ç”¨<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_init_phase.html#kubeadm-init-phase-kubeconfig" target="_blank" rel="noopener noreferrer"><code>kubeadm init phase kubeconfig all</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å‘½ä»¤å•ç‹¬è°ƒç”¨Kubeconfigæ–‡ä»¶ç”Ÿæˆã€‚</li></ol><h3 id="ä¸ºæ§åˆ¶å¹³é¢ç»„ä»¶ç”ŸæˆpodåŠèˆ±æ¸…å•" tabindex="-1"><a class="header-anchor" href="#ä¸ºæ§åˆ¶å¹³é¢ç»„ä»¶ç”ŸæˆpodåŠèˆ±æ¸…å•" aria-hidden="true">#</a> ä¸ºæ§åˆ¶å¹³é¢ç»„ä»¶ç”ŸæˆpodåŠèˆ±æ¸…å•</h3><p>Kubeadmå°†æ§åˆ¶å¹³é¢ç»„ä»¶çš„é™æ€Podæ¸…å•æ–‡ä»¶å†™å…¥<code>/etc/kubernetes/manifests</code>ï¼›kubeletç›‘æ§è¿™ä¸ªç›®å½•ï¼Œä»¥ä¾¿åœ¨å¯åŠ¨æ—¶åˆ›å»ºpodã€‚</p><p>é™æ€Podæ¸…å•å…±äº«ä¸€ç»„å…¬å…±å±æ€§:</p><ul><li><p>æ‰€æœ‰é™æ€podéƒ½éƒ¨ç½²åœ¨<code>kube-system</code>å‘½åç©ºé—´ä¸­</p></li><li><p>æ‰€æœ‰é™æ€podéƒ½æœ‰ <code>tier:control-plane</code> å’Œ<code>component:{component-name}</code> æ ‡ç­¾</p></li><li><p>æ‰€æœ‰é™æ€podéƒ½æœ‰ <code>scheduler.alpha.kubernetes.io/critical-pod</code>æ³¨è§£ï¼ˆè¿™å°†è½¬ç§»åˆ°é€‚å½“çš„è§£å†³æ–¹æ¡ˆï¼Œå³åœ¨å°±ç»ªæ—¶ä½¿ç”¨Podä¼˜å…ˆçº§å’ŒæŠ¢å ï¼‰</p></li><li><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>hostNetwork: true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è®¾ç½®åœ¨æ‰€æœ‰é™æ€podä¸Šï¼Œå…è®¸åœ¨é…ç½®ç½‘ç»œä¹‹å‰å¯åŠ¨æ§åˆ¶å¹³é¢ï¼›ç»“æœ:</p><ul><li>æ§åˆ¶å™¨ç®¡ç†å™¨å’Œè°ƒåº¦å™¨ç”¨æ¥å¼•ç”¨APIæœåŠ¡å™¨çš„<code>address</code>æ˜¯<code>127.0.0.1</code></li><li>å¦‚æœä½¿ç”¨æœ¬åœ°etcdæœåŠ¡å™¨ï¼Œ<code>etcd-servers</code>åœ°å€å°†è¢«è®¾ç½®ä¸º<code>127.0.0.1:2379</code></li></ul></li><li><p>æ§åˆ¶å™¨ç®¡ç†å™¨å’Œè°ƒåº¦å™¨éƒ½å¯ç”¨äº†é€‰ä¸»åŠŸèƒ½</p></li><li><p>æ§åˆ¶å™¨ç®¡ç†å™¨å’Œè°ƒåº¦å™¨å°†ä½¿ç”¨å„è‡ªçš„æƒŸä¸€æ ‡è¯†å¼•ç”¨kubeconfigæ–‡ä»¶</p></li><li><p>æ‰€æœ‰é™æ€podè·å–ç”¨æˆ·æŒ‡å®šçš„æ‰€æœ‰é¢å¤–é€‰é¡¹ï¼Œå¦‚<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_init.html#xiangkongzhipingmianchuandizidingyixuanxiang" target="_blank" rel="noopener noreferrer">å‘æ§åˆ¶å¹³é¢ä¼ é€’è‡ªå®šä¹‰é€‰é¡¹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ä¸­æ‰€è¿°</p></li><li><p>æ‰€æœ‰é™æ€podè·å–ç”¨æˆ·ï¼ˆ<code>hostPath</code>ï¼‰æŒ‡å®šçš„æ‰€æœ‰é¢å¤–å·</p></li></ul><p>è¯·æ³¨æ„ï¼š</p><ol><li>æ‰€æœ‰çš„é•œåƒï¼Œå¯¹äº <code>--kubernetes-version</code>æˆ–å½“å‰æ¶æ„ï¼Œå°†ä»<code>k8s.gcr.io</code>æ‹‰å–ã€‚å¦‚æœæŒ‡å®šäº†æ›¿ä»£é•œåƒä»“åº“æˆ–CIé•œåƒä»“åº“ï¼Œåˆ™ä½¿ç”¨æ­¤ä»“åº“ï¼›å¦‚æœæ‰€æœ‰æ§åˆ¶å¹³é¢ç»„ä»¶éƒ½åº”è¯¥ä½¿ç”¨ç‰¹å®šçš„å®¹å™¨é•œåƒï¼Œåˆ™å°†ä½¿ç”¨æ­¤é•œåƒã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_init.html#shiyongzidingyijingxiang" target="_blank" rel="noopener noreferrer">ä½¿ç”¨è‡ªå®šä¹‰é•œåƒ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>åœ¨kubeadmä»¥<code>--dry-run</code>æ¨¡å¼æ‰§è¡Œæ—¶ï¼Œé™æ€Podæ–‡ä»¶è¢«å†™å…¥ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¤¹</li><li>å¯ä»¥ä½¿ç”¨ <a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_init_phase.html#kubeadm-init-phase-control-plane" target="_blank" rel="noopener noreferrer"><code>kubeadm init phase control-plane all</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>å‘½ä»¤å•ç‹¬è°ƒç”¨ä¸»ç»„ä»¶çš„é™æ€Podæ¸…å•ç”Ÿæˆ</li></ol><h4 id="apiæœåŠ¡å™¨" tabindex="-1"><a class="header-anchor" href="#apiæœåŠ¡å™¨" aria-hidden="true">#</a> APIæœåŠ¡å™¨</h4><p>APIæœåŠ¡å™¨çš„é™æ€Podæ¸…å•å—ç”¨æˆ·æä¾›çš„å‚æ•°å½±å“:</p><ul><li>è¦ç»‘å®šçš„<code>apiserver-advertise-address</code> å’Œ<code>apiserver-bind-port</code> ï¼›å¦‚æœæ²¡æœ‰æä¾›ï¼Œè¿™äº›å€¼é»˜è®¤ä¸ºæœºå™¨ä¸Šé»˜è®¤ç½‘ç»œæ¥å£çš„IPåœ°å€å’Œ6443ç«¯å£</li><li>ç”¨äºæœåŠ¡çš„<code>service-cluster-ip-range</code></li><li>å¦‚æœæŒ‡å®šäº†å¤–éƒ¨etcdæœåŠ¡å™¨ï¼Œåˆ™æŒ‡å®š <code>etcd-servers</code> åœ°å€å’Œç›¸å…³TLSè®¾ç½®ï¼ˆ<code>etcd-cafile</code>ã€<code>etcd-certfile</code>ã€<code>etcd-keyfile</code>ï¼‰ï¼›å¦‚æœä¸æä¾›å¤–éƒ¨etcdæœåŠ¡å™¨ï¼Œåˆ™ä½¿ç”¨æœ¬åœ°etcdï¼ˆé€šè¿‡ä¸»æœºç½‘ç»œï¼‰</li><li>å¦‚æœæŒ‡å®šäº†äº‘æä¾›å•†ï¼Œåˆ™é…ç½®ç›¸åº”çš„ <code>--cloud-provider</code>ï¼Œå¦‚æœå­˜åœ¨ <code>--cloud-config</code>è·¯å¾„ï¼ˆè¿™æ˜¯å®éªŒæ€§çš„ã€alphaçº§åˆ«ï¼Œå°†åœ¨æœªæ¥ç‰ˆæœ¬ä¸­åˆ é™¤ï¼‰</li></ul><p>å…¶ä»–æ— æ¡ä»¶è®¾ç½®çš„APIæœåŠ¡å™¨é€‰é¡¹æœ‰ï¼š</p><ul><li><p><code>--insecure-port=0</code> é¿å…ä¸APIæœåŠ¡å™¨çš„ä¸å®‰å…¨è¿æ¥</p></li><li><p><code>--enable-bootstrap-token-auth=true</code> å¯ç”¨ <code>BootstrapTokenAuthenticator</code> è®¤è¯æ¨¡å—ã€‚æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/command_line_tools_reference/tls_bootstrapping.html" target="_blank" rel="noopener noreferrer">TLSå¼•å¯¼<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p><code>--allow-privileged</code> ä¸º<code>true</code> ï¼ˆå¿…é¡»ï¼Œä¾‹å¦‚ï¼škube-proxyï¼‰</p></li><li><p><code>--requestheader-client-ca-file</code> ä¸º<code>front-proxy-ca.crt</code></p></li><li><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>--enable-admission-plugins
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸ºï¼š</p><ul><li><a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/accessing_api/using_admission_controllers.html#namespacelifecycle" target="_blank" rel="noopener noreferrer"><code>NamespaceLifecycle</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> é¿å…åˆ é™¤ç³»ç»Ÿä¿ç•™çš„å‘½åç©ºé—´</li><li><a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/accessing_api/using_admission_controllers.html#limitranger" target="_blank" rel="noopener noreferrer"><code>LimitRanger</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å’Œ<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/accessing_api/using_admission_controllers.html#resourcequota" target="_blank" rel="noopener noreferrer"><code>ResourceQuota</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ‰§è¡Œå‘½åç©ºé—´é™åˆ¶</li><li><a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/accessing_api/using_admission_controllers.html#serviceaccount" target="_blank" rel="noopener noreferrer"><code>ServiceAccount</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ‰§è¡ŒæœåŠ¡è´¦æˆ·è‡ªåŠ¨åŒ–</li><li><a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/accessing_api/using_admission_controllers.html#persistentvolumelabel" target="_blank" rel="noopener noreferrer"><code>PersistentVolumeLabel</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å°†åœ°åŒºï¼ˆregionï¼‰æˆ–åŒºåŸŸï¼ˆzoneï¼‰æ ‡ç­¾é™„åŠ åˆ°äº‘æä¾›å•†å®šä¹‰çš„æŒä¹…å·ä¸Šï¼ˆä¸æ¨èä½¿ç”¨æ­¤å‡†å…¥æ§åˆ¶å™¨ï¼Œå¹¶å°†åœ¨å°†æ¥çš„ç‰ˆæœ¬ä¸­åˆ é™¤ï¼‰ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä¸æ˜ç¡®é€‰æ‹©ä½¿ç”¨<code>gce</code>æˆ–<code>aws</code>ä½œä¸ºäº‘æä¾›å•†æ—¶ï¼Œåœ¨v1.9ä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼Œkubeadmä¸ä¼šéƒ¨ç½²æ­¤å‡†å…¥æ§åˆ¶å™¨ï¼‰</li><li><a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/accessing_api/using_admission_controllers.html#defaultstorageclass" target="_blank" rel="noopener noreferrer"><code>DefaultStorageClass</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> åœ¨ <code>PersistentVolumeClaim</code>å¯¹è±¡ä¸Šå¼ºåˆ¶æ‰§è¡Œé»˜è®¤å­˜å‚¨ç±»ã€</li><li><a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/accessing_api/using_admission_controllers.html#defaulttolerationseconds" target="_blank" rel="noopener noreferrer"><code>DefaultTolerationSeconds</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/accessing_api/using_admission_controllers.html#noderestriction" target="_blank" rel="noopener noreferrer"><code>NodeRestriction</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> é™åˆ¶kubeletå¯ä»¥ä¿®æ”¹çš„å†…å®¹ï¼ˆä¾‹å¦‚ï¼Œåªæœ‰è¿™ä¸ªèŠ‚ç‚¹ä¸Šçš„podï¼‰</li></ul></li><li><p><code>--kubelet-preferred-address-types</code> ä¸º<code>InternalIP,ExternalIP,Hostname;</code> è¿™ä½¿å¾—<code>kubectl logs</code>å’Œå…¶ä»–APIæœåŠ¡å™¨ä¸kubeletçš„é€šä¿¡å¯ä»¥åœ¨èŠ‚ç‚¹çš„ä¸»æœºåæ— æ³•è§£æçš„ç¯å¢ƒä¸­å·¥ä½œ</p></li><li><p>ä½¿ç”¨å‰é¢æ­¥éª¤ç”Ÿæˆçš„è¯ä¹¦çš„é€‰é¡¹:</p><ul><li><code>--client-ca-file</code> ä¸º<code>ca.crt</code></li><li><code>--tls-cert-file</code> ä¸º<code>apiserver.crt</code></li><li><code>--tls-private-key-file</code> ä¸º<code>apiserver.key</code></li><li><code>--kubelet-client-certificate</code> ä¸º<code>apiserver-kubelet-client.crt</code></li><li><code>--kubelet-client-key</code> ä¸º<code>apiserver-kubelet-client.key</code></li><li><code>--service-account-key-file</code> ä¸º<code>sa.pub</code></li><li><code>--requestheader-client-ca-file</code> ä¸º-proxy-ca.crt`</li><li><code>--proxy-client-cert-file</code> ä¸º<code>front-proxy-client.crt</code></li><li><code>--proxy-client-key-file</code> ä¸º<code>front-proxy-client.key</code></li></ul></li><li><p>ç”¨äºä¿æŠ¤å‰ç«¯ä»£ç†ï¼ˆ</p><p>APIèšåˆ</p><p>ï¼‰é€šä¿¡çš„å…¶ä»–é€‰é¡¹ï¼š</p><ul><li><code>--requestheader-username-headers=X-Remote-User</code></li><li><code>--requestheader-group-headers=X-Remote-Group</code></li><li>``--requestheader-extra-headers-prefix=X-Remote-Extra-`</li><li><code>--requestheader-allowed-names=front-proxy-client</code></li></ul></li></ul><h4 id="æ§åˆ¶å™¨ç®¡ç†å™¨" tabindex="-1"><a class="header-anchor" href="#æ§åˆ¶å™¨ç®¡ç†å™¨" aria-hidden="true">#</a> æ§åˆ¶å™¨ç®¡ç†å™¨</h4><p>APIæœåŠ¡å™¨çš„é™æ€Podæ¸…å•å—ç”¨æˆ·æä¾›çš„å‚æ•°å½±å“:</p><ul><li><p>å¦‚æœè°ƒç”¨kubeadmæ—¶æŒ‡å®šäº†</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>--pod-network-cidr
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ï¼Œåˆ™é€šè¿‡è®¾ç½®ä»¥ä¸‹é€‰é¡¹å¯ä»¥å¯ç”¨æŸäº›CNIç½‘ç»œæ’ä»¶æ‰€éœ€çš„å­ç½‘ç®¡ç†å™¨ç‰¹æ€§:</p><ul><li><code>--allocate-node-cidrs=true</code></li><li><code>--cluster-cidr</code> å’Œ<code>--node-cidr-mask-size</code> é€‰é¡¹ï¼ˆæ ¹æ®æŒ‡å®šçš„CIDRï¼‰</li><li>å¦‚æœæŒ‡å®šäº†äº‘æä¾›å•†ï¼Œåˆ™é…ç½®ç›¸åº”çš„ <code>--cloud-provider</code>ï¼Œå¦‚æœå­˜åœ¨ <code>--cloud-config</code>è·¯å¾„ï¼ˆè¿™æ˜¯å®éªŒæ€§çš„ã€alphaçº§åˆ«ï¼Œå°†åœ¨æœªæ¥ç‰ˆæœ¬ä¸­åˆ é™¤ï¼‰</li></ul></li></ul><p>å…¶ä»–æ— æ¡ä»¶è®¾ç½®çš„é€‰é¡¹æœ‰:</p><ul><li><code>--controllers</code> ä¸ºTLSå¼•å¯¼å¯ç”¨æ‰€æœ‰é»˜è®¤æ§åˆ¶å™¨ä»¥åŠ<code>BootstrapSigner</code>å’Œ<code>TokenCleaner</code>æ§åˆ¶å™¨ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/command_line_tools_reference/tls_bootstrapping.html" target="_blank" rel="noopener noreferrer">TLSå¼•å¯¼<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><code>--use-service-account-credentials</code> ä¸º<code>true</code></li><li>ä½¿ç”¨å‰é¢æ­¥éª¤ç”Ÿæˆçš„è¯ä¹¦çš„é€‰é¡¹: <ul><li><code>--root-ca-file</code> ä¸º<code>ca.crt</code></li><li><code>--cluster-signing-cert-file</code> ä¸º<code>ca.crt</code>ï¼Œå¦‚æœç¦ç”¨äº†å¤–éƒ¨CAæ¨¡å¼ï¼Œåˆ™è®¾ç½®ä¸º<code>&quot;&quot;</code></li><li><code>--cluster-signing-key-file</code> ä¸º<code>ca.key</code>ï¼Œå¦‚æœç¦ç”¨äº†å¤–éƒ¨CAæ¨¡å¼ï¼Œåˆ™è®¾ç½®ä¸º<code>&quot;&quot;</code></li><li><code>--service-account-private-key-file</code> ä¸º<code>sa.key</code></li></ul></li></ul><h4 id="è°ƒåº¦å™¨" tabindex="-1"><a class="header-anchor" href="#è°ƒåº¦å™¨" aria-hidden="true">#</a> è°ƒåº¦å™¨</h4><p>è°ƒåº¦å™¨çš„é™æ€Podæ¸…å•ä¸å—ç”¨æˆ·æä¾›çš„å‚æ•°çš„å½±å“ã€‚</p><h3 id="ä¸ºæœ¬åœ°etcdç”Ÿæˆé™æ€podæ¸…å•" tabindex="-1"><a class="header-anchor" href="#ä¸ºæœ¬åœ°etcdç”Ÿæˆé™æ€podæ¸…å•" aria-hidden="true">#</a> ä¸ºæœ¬åœ°etcdç”Ÿæˆé™æ€Podæ¸…å•</h3><p>å¦‚æœç”¨æˆ·æŒ‡å®šäº†ä¸€ä¸ªå¤–éƒ¨etcdï¼Œåˆ™è·³è¿‡æ­¤æ­¥éª¤ï¼Œå¦åˆ™kubeadmå°†ç”Ÿæˆä¸€ä¸ªé™æ€Podæ¸…å•æ–‡ä»¶ï¼Œç”¨äºåˆ›å»ºåœ¨Podä¸­è¿è¡Œçš„æœ¬åœ°etcdå®ä¾‹ï¼Œè¯¥å®ä¾‹å…·æœ‰ä»¥ä¸‹å±æ€§:</p><ul><li>åœ¨ <code>localhost:2379</code> ä¸Šè¿›è¡Œç›‘å¬å¹¶ä½¿ç”¨ <code>HostNetwork=true</code></li><li>å°† <code>hostPath</code>ä»<code>dataDir</code>æŒ‚è½½åˆ°ä¸»æœºçš„æ–‡ä»¶ç³»ç»Ÿ</li><li>ç”¨æˆ·æŒ‡å®šçš„ä»»ä½•é¢å¤–é€‰é¡¹</li></ul><p>è¯·æ³¨æ„ï¼š</p><ol><li>etcdé•œåƒå°†ä»<code>k8.gcr.io</code>ä¸­æ‹‰å–ã€‚å¦‚æœæŒ‡å®šäº†å¦ä¸€ä¸ªé•œåƒä»“åº“ï¼Œåˆ™ä½¿ç”¨æ­¤é•œåƒä»“åº“ï¼›å¦‚æœæŒ‡å®šäº†å…¶ä»–é•œåƒåç§°ï¼Œåˆ™å°†ä½¿ç”¨æ­¤é•œåƒåç§°ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_init.html#shiyongzidingyijingxiang-1" target="_blank" rel="noopener noreferrer">ä½¿ç”¨è‡ªå®šä¹‰é•œåƒ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>åœ¨kubeadmä»¥<code>--dry-run</code>æ¨¡å¼æ‰§è¡Œæ—¶ï¼Œé™æ€Podæ–‡ä»¶è¢«å†™å…¥ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¤¹</li><li>æœ¬åœ°etcdçš„é™æ€Podæ¸…å•ç”Ÿæˆå¯ä»¥ä½¿ç”¨<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_init_phase.html#kubeadm-init-phase-etcd" target="_blank" rel="noopener noreferrer"><code>kubeadm init phase etcd local</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å‘½ä»¤å•ç‹¬è°ƒç”¨</li></ol><h3 id="å¯é€‰çš„åŠ¨æ€kubleté…ç½®" tabindex="-1"><a class="header-anchor" href="#å¯é€‰çš„åŠ¨æ€kubleté…ç½®" aria-hidden="true">#</a> å¯é€‰çš„åŠ¨æ€Kubleté…ç½®</h3><p>è¦ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œè¯·è°ƒç”¨ <code>kubeadm alpha kubelet config enable-dynamic</code>ã€‚å®ƒå°†kubeletåˆå§‹åŒ–é…ç½®å†™å…¥ <code>/var/lib/kubelet/config/init/kubelet</code>æ–‡ä»¶ã€‚</p><p>åˆå§‹åŒ–é…ç½®ç”¨äºåœ¨æ­¤ç‰¹å®šèŠ‚ç‚¹ä¸Šå¯åŠ¨kubeletï¼Œä¸ºkubeletçš„drop-inæ–‡ä»¶æä¾›äº†å¦ä¸€ç§é€‰æ‹©ï¼›è¿™äº›é…ç½®å°†è¢«kubeletåŸºæœ¬é…ç½®æ‰€æ›¿ä»£ï¼Œå¦‚ä¸‹é¢çš„æ­¥éª¤æ‰€è¿°ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/tasks/administer_cluster/set_kubelet_parameters_via_a_config_file.html" target="_blank" rel="noopener noreferrer">é€šè¿‡é…ç½®æ–‡ä»¶è®¾ç½®Kubeletå‚æ•°<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><p>è¯·æ³¨æ„ï¼š</p><ul><li>è¦ä½¿åŠ¨æ€kubeleté…ç½®å·¥ä½œï¼Œ<code>--dynamic-config-dir=/var/lib/kubelet/config/dynamic</code> åº”è¯¥åœ¨ <code>/etc/systemd/system/kubelet.service.d/10-kubeadm.conf</code>ä¸­æŒ‡å®š</li><li>ä½¿ç”¨é…ç½®æ–‡ä»¶<code>--config some-file.yaml</code>å‘<code>kubeadm init</code> æˆ–<code>kubeadm join</code> ä¼ é€’ä¸€ä¸ª <code>KubeletConfiguration</code>å¯¹è±¡ï¼Œå¯ä»¥æ›´æ”¹kubeleté…ç½®ã€‚å¯ä»¥ä½¿ç”¨<code>---</code>åˆ†éš”ç¬¦å°†<code>KubeletConfiguration</code>å¯¹è±¡ä¸å…¶ä»–å¯¹è±¡ï¼ˆå¦‚<code>InitConfiguration</code>ï¼‰åˆ†éš”å¼€ã€‚æœ‰å…³æ›´å¤šç»†èŠ‚ï¼Œè¯·æŸ¥çœ‹ <code>kubeadm config print-default</code>å‘½ä»¤ã€‚</li></ul><h3 id="ç­‰å¾…æ§åˆ¶å¹³é¢å¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#ç­‰å¾…æ§åˆ¶å¹³é¢å¯åŠ¨" aria-hidden="true">#</a> ç­‰å¾…æ§åˆ¶å¹³é¢å¯åŠ¨</h3><p>è¿™æ˜¯kubeadmé›†ç¾¤çš„å…³é”®æ—¶åˆ»ã€‚kubeadmå°†ç­‰å¾…<code>localhost:6443/healthz</code>è¿”å›<code>ok</code>ï¼Œä½†æ˜¯ä¸ºäº†æ£€æµ‹æ­»é”æ¡ä»¶ï¼Œå¦‚æœ<code>localhost:10255/healthz</code> ï¼ˆkubeletå­˜æ´»ï¼‰æˆ–<code>localhost:10255/healthz/syncloop</code> ï¼ˆkubeletå°±ç»ªï¼‰åœ¨40ç§’å’Œ60ç§’åéƒ½æ²¡æœ‰è¿”å›<code>ok</code>ï¼Œåˆ™kubeadmå°†å¿«é€Ÿå¤±è´¥ã€‚</p><p>kubeadmä¾èµ–äºkubeletæ¥æ‹‰å–æ§åˆ¶å¹³é¢é•œåƒï¼Œå¹¶å°†å…¶ä½œä¸ºé™æ€podæ­£å¸¸è¿è¡Œã€‚æ§åˆ¶å¹³é¢å¯åŠ¨åï¼Œkubeadmå°†å®Œæˆä»¥å¦‚ä¸‹æ®µè½ä¸­æè¿°çš„ä»»åŠ¡ã€‚</p><h3 id="åœ¨v1-9ä¸­ä¸ºå¯é€‰çš„alphaçº§åˆ«-å†™å…¥kubeletåŸºæœ¬é…ç½®" tabindex="-1"><a class="header-anchor" href="#åœ¨v1-9ä¸­ä¸ºå¯é€‰çš„alphaçº§åˆ«-å†™å…¥kubeletåŸºæœ¬é…ç½®" aria-hidden="true">#</a> ï¼ˆåœ¨v1.9ä¸­ä¸ºå¯é€‰çš„alphaçº§åˆ«ï¼‰å†™å…¥kubeletåŸºæœ¬é…ç½®</h3><p>å¦‚æœä½¿ç”¨ <code>--feature-gates=DynamicKubeletConfig</code>è°ƒç”¨kubeadmï¼š</p><ul><li>å°†kubeletåŸºæœ¬é…ç½®å†™å…¥<code>kube-system</code>å‘½åç©ºé—´ä¸­çš„<code>kubelet-base-config-v1.9</code> ConfigMap</li><li>åˆ›å»ºRBACè§„åˆ™ï¼Œæˆäºˆå¯¹æ‰€æœ‰å¼•å¯¼ä»¤ç‰Œå’Œæ‰€æœ‰kubeletå®ä¾‹(å³ <code>system:bootstrappers:kubeadm:default-node-token</code> å’Œ<code>system:nodes</code>ç»„)çš„ConfigMapçš„è¯»è®¿é—®æƒ</li><li>é€šè¿‡ <code>Node.spec.configSource</code>æŒ‡å‘æ–°åˆ›å»ºçš„ConfigMapï¼Œä¸ºåˆå§‹æ§åˆ¶å¹³é¢èŠ‚ç‚¹å¯ç”¨åŠ¨æ€kubeleté…ç½®ç‰¹æ€§ã€‚</li></ul><h3 id="å°†kubeadmé›†ç¾¤é…ç½®ä¿å­˜åœ¨configmapä¸­-ä¾›ä»¥åä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#å°†kubeadmé›†ç¾¤é…ç½®ä¿å­˜åœ¨configmapä¸­-ä¾›ä»¥åä½¿ç”¨" aria-hidden="true">#</a> å°†kubeadmé›†ç¾¤é…ç½®ä¿å­˜åœ¨ConfigMapä¸­ï¼Œä¾›ä»¥åä½¿ç”¨</h3><p>kubeadmå°†é€šè¿‡é€‰é¡¹æˆ–é…ç½®æ–‡ä»¶ä¼ é€’ç»™<code>kubeadm init</code>çš„é…ç½®ä¿å­˜åœ¨<code>kube-system</code>å‘½åç©ºé—´ä¸­åä¸º<code>kubeadm-config</code>çš„ConfigMapä¸­ã€‚</p><p>è¿™å°†ç¡®ä¿å°†æ¥æ‰§è¡Œkubeadmæ“ä½œï¼ˆå¦‚ï¼š<code>kubeadm upgrade</code>ï¼‰å°†èƒ½å¤Ÿç¡®å®šå®é™…/å½“å‰é›†ç¾¤çŠ¶æ€ï¼Œå¹¶åŸºäºè¯¥æ•°æ®åšå‡ºæ–°çš„å†³ç­–ã€‚</p><p>è¯·æ³¨æ„ï¼š</p><ol><li>åœ¨ä¸Šä¼ ä¹‹å‰ï¼Œæ•æ„Ÿä¿¡æ¯ï¼Œä¾‹å¦‚ä»¤ç‰Œï¼Œå°†ä»é…ç½®ä¸­åˆ é™¤</li><li>å¯ä»¥ä½¿ç”¨<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_init_phase.html#kubeadm-init-phase-upload-config" target="_blank" rel="noopener noreferrer"><code>kubeadm init phase upload-config</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å‘½ä»¤å•ç‹¬è°ƒç”¨ä¸»èŠ‚ç‚¹é…ç½®çš„ä¸Šä¼ </li><li>å¦‚æœä½¿ç”¨kubeadm v1.7åˆå§‹åŒ–é›†ç¾¤ã€‚åœ¨å‡çº§åˆ°v1.8ä¹‹å‰ï¼Œä½ å¿…é¡»æ‰‹åŠ¨åˆ›å»ºä¸»èŠ‚ç‚¹é…ç½®ConfigMapã€‚ä¸ºäº†ç®€åŒ–è¿™ä¸€ä»»åŠ¡ï¼Œå®ç°äº† <a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_config.html" target="_blank" rel="noopener noreferrer"><code>kubeadm config upload (from-flags|from-file)</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ol><h3 id="æ ‡è®°ä¸»èŠ‚ç‚¹" tabindex="-1"><a class="header-anchor" href="#æ ‡è®°ä¸»èŠ‚ç‚¹" aria-hidden="true">#</a> æ ‡è®°ä¸»èŠ‚ç‚¹</h3><p>ä¸€æ—¦æ§åˆ¶å¹³é¢å¯ç”¨ï¼Œkubeadmå°±ä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œ:</p><ul><li>ä¸ºä¸»èŠ‚ç‚¹æ·»åŠ  <code>node-role.kubernetes.io/master=&quot;&quot;</code>æ ‡ç­¾</li><li>ä¸ºä¸»èŠ‚ç‚¹æ·»åŠ  <code>node-role.kubernetes.io/master:NoSchedule</code>æ±¡æŸ“</li></ul><p>è¯·æ³¨æ„ï¼š</p><ul><li>å¯ä»¥ä½¿ç”¨<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_init_phase.html#kubeadm-init-phase-mark-control-plane" target="_blank" rel="noopener noreferrer"><code>kubeadm init phase mark-control-plane</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å‘½ä»¤å•ç‹¬è°ƒç”¨æ ‡è®°æ§åˆ¶å¹³é¢é˜¶æ®µ</li></ul><h3 id="é…ç½®tlså¼•å¯¼ç”¨äºèŠ‚ç‚¹åŠ å…¥é›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#é…ç½®tlså¼•å¯¼ç”¨äºèŠ‚ç‚¹åŠ å…¥é›†ç¾¤" aria-hidden="true">#</a> é…ç½®TLSå¼•å¯¼ç”¨äºèŠ‚ç‚¹åŠ å…¥é›†ç¾¤</h3><p>Kubeadm<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/accessing_api/authenticating_with_bootstrap_tokens.html" target="_blank" rel="noopener noreferrer">ä½¿ç”¨å¼•å¯¼ä»¤ç‰Œè¿›è¡Œè®¤è¯<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œå°†æ–°èŠ‚ç‚¹è¿æ¥åˆ°ç°æœ‰é›†ç¾¤ï¼›æœ‰å…³æ›´å¤šç»†èŠ‚ï¼Œè¯·å‚è§<a href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/cluster-lifecycle/bootstrap-discovery.md" target="_blank" rel="noopener noreferrer">è®¾è®¡ææ¡ˆ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><p><code>kubeadm init</code>ç¡®ä¿ä¸ºè¯¥è¿›ç¨‹æ­£ç¡®é…ç½®äº†æ‰€æœ‰å†…å®¹ï¼Œè¿™åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ä»¥åŠè®¾ç½®APIæœåŠ¡å™¨å’Œæ§åˆ¶å™¨é€‰é¡¹ï¼ˆå¦‚å‰é¢å„æ®µè½ä¸­æ‰€è¿°ï¼‰ã€‚è¯·æ³¨æ„ï¼š</p><ul><li>å¯ä»¥ä½¿ç”¨<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_init_phase.html#kubeadm-init-phase-bootstrap-token" target="_blank" rel="noopener noreferrer"><code>kubeadm init phase bootstrap-token</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> å‘½ä»¤é…ç½®èŠ‚ç‚¹çš„TLSå¼•å¯¼ï¼Œæ‰§è¡Œå¦‚ä¸‹å„æ®µè½æè¿°çš„æ‰€æœ‰é…ç½®æ­¥éª¤ï¼›æˆ–è€…ï¼Œæ¯ä¸ªæ­¥éª¤éƒ½å¯ä»¥å•ç‹¬è°ƒç”¨</li></ul><h4 id="åˆ›å»ºå¼•å¯¼ä»¤ç‰Œ" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå¼•å¯¼ä»¤ç‰Œ" aria-hidden="true">#</a> åˆ›å»ºå¼•å¯¼ä»¤ç‰Œ</h4><p><code>kubeadm init</code>åˆ›å»ºç¬¬ä¸€ä¸ªå¼•å¯¼ä»¤ç‰Œï¼Œè¯¥ä»¤ç‰Œå¯ä»¥è‡ªåŠ¨ç”Ÿæˆï¼Œä¹Ÿå¯ä»¥ç”±ç”¨æˆ·ä½¿ç”¨ <code>--token</code>ç®•æä¾›ï¼›æ­£å¦‚å¼•å¯¼ä»¤ç‰Œè§„èŒƒä¸­æ‰€è®°å½•çš„é‚£æ ·ï¼Œä»¤ç‰Œåº”è¯¥ä»¥åç§° <code>bootstrap-token-&lt;token-id&gt;</code> ä½œä¸ºSecretä¿å­˜åœ¨<code>kube-system</code>å‘½åç©ºé—´ä¸­ã€‚è¯·æ³¨æ„:</p><ol><li>ç”±<code>kubeadm init</code>åˆ›å»ºçš„ç¼ºçœä»¤ç‰Œå°†ç”¨äºéªŒè¯TLSå¼•å¯¼è¿‡ç¨‹ä¸­çš„ä¸´æ—¶ç”¨æˆ·ï¼›è¿™äº›ç”¨æˆ·å°†æ˜¯<code>system:bootstrappers:kubeadm:default-node-token</code> ç»„çš„æˆå‘˜</li><li>ä»¤ç‰Œçš„æœ‰æ•ˆæ€§æœ‰é™ï¼Œé»˜è®¤ä¸º24å°æ—¶ï¼ˆé—´éš”å¯ä»¥ä½¿ç”¨<code>â€”token-ttl</code> é€‰é¡¹æ›´æ”¹ï¼‰</li><li>å¯ä»¥ä½¿ç”¨<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_token.html" target="_blank" rel="noopener noreferrer"><code>kubeadm token</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>å‘½ä»¤åˆ›å»ºå…¶ä»–ä»¤ç‰Œï¼Œè¯¥å‘½ä»¤ä¸ºä»¤ç‰Œç®¡ç†æä¾›äº†å…¶ä»–æœ‰ç”¨çš„åŠŸèƒ½</li></ol><h4 id="å…è®¸è¦åŠ å…¥çš„èŠ‚ç‚¹è°ƒç”¨csr-api" tabindex="-1"><a class="header-anchor" href="#å…è®¸è¦åŠ å…¥çš„èŠ‚ç‚¹è°ƒç”¨csr-api" aria-hidden="true">#</a> å…è®¸è¦åŠ å…¥çš„èŠ‚ç‚¹è°ƒç”¨CSR API</h4><p>Kubeadmç¡®ä¿ <code>system:bootstrappers:kubeadm:default-node-token</code>ç»„ä¸­çš„ç”¨æˆ·èƒ½å¤Ÿè®¿é—®è¯ä¹¦ç­¾åAPIã€‚</p><p>è¿™æ˜¯é€šè¿‡åœ¨ä¸Šé¢çš„ç»„å’Œé»˜è®¤RBACè§’è‰² <code>system:node-bootstrapper</code>ä¹‹é—´åˆ›å»ºä¸€ä¸ªåä¸º <code>kubeadm:kubelet-bootstrap</code>çš„é›†ç¾¤è§’è‰²ç»‘å®šæ¥å®ç°çš„ã€‚</p><h4 id="ä¸ºæ–°çš„å¼•å¯¼ä»¤ç‰Œè®¾ç½®è‡ªåŠ¨æ‰¹å‡†" tabindex="-1"><a class="header-anchor" href="#ä¸ºæ–°çš„å¼•å¯¼ä»¤ç‰Œè®¾ç½®è‡ªåŠ¨æ‰¹å‡†" aria-hidden="true">#</a> ä¸ºæ–°çš„å¼•å¯¼ä»¤ç‰Œè®¾ç½®è‡ªåŠ¨æ‰¹å‡†</h4><p>Kubeadmç¡®ä¿å¼•å¯¼ä»¤ç‰Œå°†ç”±<code>csrapprover</code>æ§åˆ¶å™¨è‡ªåŠ¨æ‰¹å‡†å…¶CSRè¯·æ±‚ã€‚</p><p>è¿™æ˜¯é€šè¿‡åœ¨<code>system:bootstrappers:kubeadm:default-node-token</code> ç»„å’Œé»˜è®¤è§’è‰² <code>system:certificates.k8s.io:certificatesigningrequests:nodeclient</code>ä¹‹é—´åˆ›å»ºä¸€ä¸ªåä¸º <code>kubeadm:node-autoapprove-bootstrap</code> çš„é›†ç¾¤è§’è‰²ç»‘å®šæ¥å®ç°çš„ã€‚</p><p>åº”è¯¥ä¹Ÿåˆ›å»ºäº† <code>system:certificates.k8s.io:certificatesigningrequests:nodeclient</code>è§’è‰²ï¼Œè¯¥è§’è‰²è¢«æˆäºˆäº†å¯¹<code>/apis/certificates.k8s.io/certificatesigningrequests/nodeclient</code>çš„POSTæƒé™ã€‚</p><h4 id="ä¸ºèŠ‚ç‚¹è¯ä¹¦æ—‹è½¬è®¾ç½®è‡ªåŠ¨æ‰¹å‡†" tabindex="-1"><a class="header-anchor" href="#ä¸ºèŠ‚ç‚¹è¯ä¹¦æ—‹è½¬è®¾ç½®è‡ªåŠ¨æ‰¹å‡†" aria-hidden="true">#</a> ä¸ºèŠ‚ç‚¹è¯ä¹¦æ—‹è½¬è®¾ç½®è‡ªåŠ¨æ‰¹å‡†</h4><p>Kubeadmç¡®ä¿ä¸ºèŠ‚ç‚¹å¯ç”¨è¯ä¹¦æ—‹è½¬ï¼ŒèŠ‚ç‚¹çš„æ–°è¯ä¹¦è¯·æ±‚å°†ç”±<code>csrapprover</code>æ§åˆ¶å™¨è‡ªåŠ¨æ‰¹å‡†å…¶CSRè¯·æ±‚ã€‚</p><p>è¿™æ˜¯é€šè¿‡åœ¨<code>system:nodes</code> ç»„å’Œé»˜è®¤è§’è‰² <code>system:certificates.k8s.io:certificatesigningrequests:selfnodeclient</code>ä¹‹é—´åˆ›å»ºä¸€ä¸ªåä¸º <code>kubeadm:node-autoapprove-certificate-rotation</code> çš„é›†ç¾¤è§’è‰²ç»‘å®šæ¥å®ç°çš„ã€‚</p><h4 id="åˆ›å»ºå…¬å…±cluster-info-configmap" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå…¬å…±cluster-info-configmap" aria-hidden="true">#</a> åˆ›å»ºå…¬å…±cluster-info ConfigMap</h4><p>è¿™ä¸ªé˜¶æ®µåœ¨<code>kube-public</code>å‘½åç©ºé—´ä¸­åˆ›å»º<code>cluster-info</code> ConfigMapã€‚</p><p>æ­¤å¤–ï¼Œå®ƒè¿˜åˆ›å»ºäº†ä¸€ä¸ªè§’è‰²å’Œä¸€ä¸ªè§’è‰²ç»‘å®šï¼Œæˆäºˆæœªç»è®¤è¯çš„ç”¨æˆ·ï¼ˆå³ <code>system:unauthenticated</code>ç»„ä¸­çš„ç”¨æˆ·ï¼‰è®¿é—®è¯¥ConfigMapçš„æƒé™ã€‚</p><p>è¯·æ³¨æ„ï¼š</p><ol><li>å¯¹<code>cluster-info</code> ConfigMapçš„è®¿é—®ä¸å—é€Ÿç‡é™åˆ¶ã€‚å¦‚æœä½ æŠŠä½ çš„ä¸»èŠ‚ç‚¹æš´éœ²åœ¨äº’è”ç½‘ä¸Šï¼Œè¿™å¯èƒ½æ˜¯ä¸ªé—®é¢˜ï¼Œä¹Ÿå¯èƒ½ä¸æ˜¯ï¼›æœ€åçš„æƒ…å†µæ˜¯DoSæ”»å‡»ï¼Œæ”»å‡»è€…ä½¿ç”¨APIæœåŠ¡å™¨èƒ½å¤Ÿå¤„ç†çš„æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„è¯·æ±‚æ¥è®¿é—®<code>cluster-info</code> ConfigMapã€‚</li></ol><h3 id="å®‰è£…æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#å®‰è£…æ’ä»¶" aria-hidden="true">#</a> å®‰è£…æ’ä»¶</h3><p>Kubeadmé€šè¿‡APIæœåŠ¡å™¨å®‰è£…å†…éƒ¨DNSæœåŠ¡å™¨å’Œkube-proxyæ’ä»¶ç»„ä»¶ã€‚è¯·æ³¨æ„:</p><ol><li>æ­¤é˜¶æ®µå¯ä»¥ä½¿ç”¨ <a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_init_phase.html#kubeadm-init-phase-addon" target="_blank" rel="noopener noreferrer"><code>kubeadm init phase addon all</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>å‘½ä»¤å•ç‹¬è°ƒç”¨ã€‚</li></ol><h4 id="proxy" tabindex="-1"><a class="header-anchor" href="#proxy" aria-hidden="true">#</a> proxy</h4><p>åœ¨ <code>kube-system</code> å‘½åç©ºé—´ä¸­åˆ›å»ºä¸€ä¸ªç”¨äº<code>kube-proxy</code>çš„ServiceAccountï¼›ç„¶å<code>kube-proxy</code>ä½œä¸ºDaemonSetéƒ¨ç½²:</p><ul><li>åˆ°ä¸»èŠ‚ç‚¹çš„å‡­æ®ï¼ˆ<code>ca.crt</code>å’Œ<code>token</code>ï¼‰æ¥è‡ªServiceAccount</li><li>ä¸»èŠ‚ç‚¹çš„ä½ç½®æ¥è‡ªConfigMap</li><li><code>kube-proxy</code> ServiceAccountç»‘å®šåˆ° <code>system:node-proxier</code> ClusterRoleä¸­çš„ç‰¹æƒ</li></ul><h4 id="dns" tabindex="-1"><a class="header-anchor" href="#dns" aria-hidden="true">#</a> DNS</h4><p>è¯·æ³¨æ„ï¼š</p><ul><li>CoreDNSæœåŠ¡è¢«å‘½åä¸º<code>kube-dns</code>ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†é˜²æ­¢å½“ç”¨æˆ·å°†é›†ç¾¤DNSä»kube-dnsåˆ‡æ¢åˆ°CoreDNSï¼ˆåä¹‹äº¦ç„¶ï¼‰æ—¶æœåŠ¡ä¸­çš„ä»»ä½•ä¸­æ–­</li><li>åœ¨Kubernetes v1.10æˆ–æ›´æ—©çš„ç‰ˆæœ¬ä¸­ï¼Œå¿…é¡»ä½¿ç”¨ <code>--feature-gates=CoreDNS=true</code>å¯ç”¨CoreDNS</li><li>åœ¨Kubernetes v1.11å’Œv1.12ç‰ˆæœ¬ä¸­ï¼ŒCoreDNSæ˜¯é»˜è®¤çš„DNSæœåŠ¡å™¨ï¼Œå¿…é¡»ä½¿ç”¨ <code>--feature-gates=CoreDNS=false</code>è°ƒç”¨kubeadmæ¥å®‰è£…kube-dns</li><li>åœ¨Kubernetes v1.13åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼ŒCoreDNSç‰¹æ€§å¼€å…³ä¸å†å¯ç”¨ï¼Œå¯ä»¥ä½¿ç”¨è¿™é‡Œæè¿°çš„<code>--config</code>æ–¹æ³•å®‰è£…kube-dns</li></ul><p>åœ¨<code>kube-system</code>å‘½åç©ºé—´ä¸­åˆ›å»ºäº†ä¸€ä¸ªç”¨äºCoreDNSæˆ–kube-dnsçš„ServiceAccountã€‚</p><p>éƒ¨ç½²<code>kube-dns</code>éƒ¨ç½²å’ŒæœåŠ¡:</p><ul><li>è¿™æ˜¯ç›¸å¯¹æœªç»ä¿®æ”¹çš„ä¸Šæ¸¸æ ¸å¿ƒéƒ¨ç½²</li><li><code>kube-dns</code>æœåŠ¡å¸æˆ·ç»‘å®šåˆ° <code>system:kube-dns</code> ClusterRoleçš„ç‰¹æƒ</li></ul><h3 id="å¯é€‰çš„è‡ªæ‰˜ç®¡" tabindex="-1"><a class="header-anchor" href="#å¯é€‰çš„è‡ªæ‰˜ç®¡" aria-hidden="true">#</a> å¯é€‰çš„è‡ªæ‰˜ç®¡</h3><p>è¦åœ¨ç°æœ‰çš„é™æ€Podæ§åˆ¶å¹³é¢ä¸Šå¯ç”¨è‡ªæ‰˜ç®¡ï¼Œè¯·ä½¿ç”¨<code>kubeadm alpha selfhosting pivot</code>ã€‚</p><p>è‡ªæ‰˜ç®¡åŸºæœ¬ä¸Šç”¨DaemonSetæ›¿æ¢äº†ç”¨äºæ§åˆ¶å¹³é¢ç»„ä»¶çš„podåŠèˆ±ï¼›è¿™æ˜¯é€šè¿‡å¯¹APIæœåŠ¡å™¨ã€è°ƒåº¦å™¨å’Œæ§åˆ¶å™¨ç®¡ç†å™¨é™æ€åŠèˆ±æ‰§è¡Œä»¥ä¸‹æ­¥éª¤å®ç°çš„:</p><ul><li>ä»ç£ç›˜åŠ è½½é™æ€Podè§„çº¦</li><li>ä»é™æ€Podæ¸…å•æ–‡ä»¶ä¸­æå–PodSpec</li><li>ä¿®æ”¹PodSpecä½¿ä¹‹ä¸è‡ªæ‰˜ç®¡å…¼å®¹ï¼Œæ›´å¤šç»†èŠ‚: <ul><li>æ·»åŠ èŠ‚ç‚¹é€‰æ‹©å™¨å±æ€§ï¼Œå®šå‘è‡³æ‹¥æœ‰<code>node-role.kubernetes.io/master=&quot;&quot;</code> æ ‡ç­¾çš„èŠ‚ç‚¹</li><li>æ·»åŠ  <code>node-role.kubernetes.io/master:NoSchedule</code> æ±¡æŸ“çš„å®¹å¿</li><li>å°† <code>spec.DNSPolicy</code> è®¾ç½®ä¸º<code>ClusterFirstWithHostNet</code></li></ul></li><li>ä½¿ç”¨ä¸Šé¢æåˆ°çš„PodSpecï¼Œä¸ºè‡ªæ‰˜ç®¡ç»„ä»¶æ„å»ºä¸€ä¸ªæ–°çš„DaemonSetå¯¹è±¡ã€‚</li><li>åœ¨<code>kube-system</code>å‘½åç©ºé—´ä¸­åˆ›å»ºDaemonSetèµ„æºï¼Œå¹¶ç­‰å¾…podå¼€å§‹è¿è¡Œã€‚</li><li>åˆ é™¤é™æ€Podæ¸…å•æ–‡ä»¶ã€‚kubeletå°†åœæ­¢åŸæ¥è¿è¡Œçš„é™æ€podæ‰˜ç®¡ç»„ä»¶</li></ul><p>è¯·æ³¨æ„ï¼Œè‡ªæ‰˜ç®¡å°šæœªæ¢å¤åˆ°èŠ‚ç‚¹é‡å¯ï¼›è¿™å¯ä»¥é€šè¿‡å¤–éƒ¨æ£€æŸ¥ç‚¹æˆ–æ§åˆ¶å¹³é¢podçš„kubeletæ£€æŸ¥ç‚¹æ¥ä¿®å¤ã€‚æœ‰å…³æ›´å¤šç»†èŠ‚ï¼Œè¯·å‚è§<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_init.html#zituoguan" target="_blank" rel="noopener noreferrer">è‡ªæ‰˜ç®¡<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><h3 id="kubeadm-join-phaseçš„å†…éƒ¨è®¾è®¡" tabindex="-1"><a class="header-anchor" href="#kubeadm-join-phaseçš„å†…éƒ¨è®¾è®¡" aria-hidden="true">#</a> kubeadm join phaseçš„å†…éƒ¨è®¾è®¡</h3><p>ä¸<code>kubeadm init</code>ç±»ä¼¼ï¼Œ<code>kubeadm join</code>å†…éƒ¨å·¥ä½œæµç¨‹ä¹Ÿç”±ä¸€ç³»åˆ—è¦æ‰§è¡Œçš„åŸå­å·¥ä½œä»»åŠ¡ç»„æˆã€‚</p><p>è¿™åˆ†ä¸ºå‘ç°ï¼ˆè®©èŠ‚ç‚¹ä¿¡ä»»Kubernetesä¸»èŠ‚ç‚¹ï¼‰å’ŒTLSå¼•å¯¼ï¼ˆè®©Kubernetesä¸»èŠ‚ç‚¹ä¿¡ä»»è¯¥èŠ‚ç‚¹ï¼‰ã€‚</p><p>å‚è§<a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/accessing_api/authenticating_with_bootstrap_tokens.html" target="_blank" rel="noopener noreferrer">ä½¿ç”¨å¼•å¯¼ä»¤ç‰Œè¿›è¡Œè®¤è¯<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æˆ–ç›¸åº”çš„<a href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/cluster-lifecycle/bootstrap-discovery.md" target="_blank" rel="noopener noreferrer">è®¾è®¡ææ¡ˆ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><h3 id="é¢„å…ˆ-preflight-æ£€æŸ¥" tabindex="-1"><a class="header-anchor" href="#é¢„å…ˆ-preflight-æ£€æŸ¥" aria-hidden="true">#</a> é¢„å…ˆï¼ˆpreflightï¼‰æ£€æŸ¥</h3><p><code>kubeadm</code>åœ¨å¯åŠ¨åŠ å…¥é›†ç¾¤ä¹‹å‰æ‰§è¡Œä¸€ç»„é¢„å…ˆæ£€æŸ¥ï¼Œç›®çš„æ˜¯éªŒè¯å…ˆå†³æ¡ä»¶å¹¶é¿å…å¸¸è§çš„é›†ç¾¤å¯åŠ¨é—®é¢˜ã€‚</p><p>è¯·æ³¨æ„ï¼š</p><ol><li><code>kubeadm join</code>é¢„å…ˆæ£€æŸ¥åŸºæœ¬ä¸Šæ˜¯<code>kubeadm init</code>é¢„å…ˆæ£€æŸ¥çš„å­é›†</li><li>ä»v1.9å¼€å§‹ï¼Œkubeadmä¸ºCRI-genericåŠŸèƒ½æä¾›äº†æ›´å¥½çš„æ”¯æŒï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºcrictlè·³è¿‡æˆ–æ›¿æ¢dockerç‰¹å®šçš„æ§ä»¶ã€‚</li><li>ä»v1.9å¼€å§‹ï¼Œkubeadmæ”¯æŒè¿è¡Œåœ¨Windowsä¸Šçš„èŠ‚ç‚¹åŠ å…¥é›†ç¾¤ï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†è·³è¿‡linuxç‰¹å®šçš„æ§ä»¶ã€‚</li><li>åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨<code>--ignore-preflight-errors</code> é€‰é¡¹è·³è¿‡ç‰¹å®šçš„é¢„å…ˆæ£€æŸ¥ï¼ˆæˆ–è€…æœ€ç»ˆè·³è¿‡æ‰€æœ‰çš„é¢„å…ˆæ£€æŸ¥ï¼‰ã€‚</li></ol><h3 id="å‘ç°cluster-info" tabindex="-1"><a class="header-anchor" href="#å‘ç°cluster-info" aria-hidden="true">#</a> å‘ç°cluster-info</h3><p>æœ‰ä¸¤ç§ä¸»è¦çš„å‘ç°æ–¹æ¡ˆã€‚ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å…±äº«ä»¤ç‰Œå’ŒAPIæœåŠ¡å™¨çš„IPåœ°å€ã€‚ç¬¬äºŒç§æ–¹æ³•æ˜¯æä¾›ä¸€ä¸ªæ–‡ä»¶ï¼ˆå®ƒæ˜¯æ ‡å‡†kubeconfigæ–‡ä»¶çš„å­é›†ï¼‰ã€‚</p><h4 id="å…±äº«ä»¤ç‰Œå‘ç°" tabindex="-1"><a class="header-anchor" href="#å…±äº«ä»¤ç‰Œå‘ç°" aria-hidden="true">#</a> å…±äº«ä»¤ç‰Œå‘ç°</h4><p>å¦‚æœä½¿ç”¨<code>--discovery-token</code>è°ƒç”¨<code>kubeadm join</code>ï¼Œåˆ™ä½¿ç”¨ä»¤ç‰Œå‘ç°ï¼›åœ¨æœ¬ä¾‹ä¸­ï¼ŒèŠ‚ç‚¹åŸºæœ¬ä¸Šä»<code>kube-public</code>å‘½åç©ºé—´ä¸­çš„<code>cluster-info</code> ConfigMapä¸­æ£€ç´¢é›†ç¾¤CAè¯ä¹¦ã€‚</p><p>ä¸ºäº†é˜²æ­¢â€œä¸­é—´äººâ€çš„æ”»å‡»ï¼Œæˆ‘ä»¬é‡‡å–äº†ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤:</p><ul><li>é¦–å…ˆï¼Œé€šè¿‡ä¸å®‰å…¨çš„è¿æ¥æ£€ç´¢CAè¯ä¹¦ï¼ˆè¿™æ˜¯å¯èƒ½çš„ï¼Œå› ä¸º<code>kubeadm init</code>ä¸º<code>system:unauthenticated</code>æˆäºˆäº†å¯¹ <code>cluster-info</code> ç”¨æˆ·çš„è®¿é—®æƒé™ï¼‰</li><li>ç„¶åCAè¯ä¹¦ç»è¿‡ä»¥ä¸‹éªŒè¯æ­¥éª¤: <ul><li>åŸºæœ¬éªŒè¯ï¼šå¯¹JWTç­¾åä½¿ç”¨ä»¤ç‰ŒID</li><li>å…¬é’¥éªŒè¯ï¼šä½¿ç”¨æä¾›çš„ <code>--discovery-token-ca-cert-hash</code>ã€‚è¿™ä¸ªå€¼åœ¨<code>kubeadm init</code>çš„è¾“å‡ºä¸­å¯ç”¨ï¼Œæˆ–è€…å¯ä»¥ä½¿ç”¨æ ‡å‡†å·¥å…·è®¡ç®—ï¼ˆå“ˆå¸Œæ˜¯é€šè¿‡Subject Public Key Info (SPKI)å¯¹è±¡çš„å­—èŠ‚è®¡ç®—çš„ï¼Œå¦‚RFC7469ä¸­æ‰€ç¤ºï¼‰ã€‚<code>--discovery-token-ca-cert-hash flag</code> é€‰é¡¹å¯ä»¥é‡å¤å¤šæ¬¡ï¼Œä»¥å…è®¸å¤šä¸ªå…¬é’¥ã€‚</li><li>ä½œä¸ºé™„åŠ éªŒè¯ï¼ŒCAè¯ä¹¦é€šè¿‡å®‰å…¨è¿æ¥æ£€ç´¢ï¼Œç„¶åä¸æœ€åˆæ£€ç´¢çš„CAè¿›è¡Œæ¯”è¾ƒ</li></ul></li></ul><p>è¯·æ³¨è§£ï¼š</p><ol><li>é€šè¿‡ä¼ é€’<code>--discovery-token-unsafe-skip-ca-verification</code> é€‰é¡¹ï¼Œå¯ä»¥è·¯è¿‡å…¬é’¥éªŒè¯ï¼›è¿™å‰Šå¼±äº†kubeadmå®‰å…¨æ¨¡å‹ï¼Œå› ä¸ºå…¶ä»–äººå¯èƒ½å†’å……Kubernetesä¸»èŠ‚ç‚¹ã€‚</li></ol><h4 id="æ–‡ä»¶æˆ–httpså‘ç°" tabindex="-1"><a class="header-anchor" href="#æ–‡ä»¶æˆ–httpså‘ç°" aria-hidden="true">#</a> æ–‡ä»¶æˆ–HTTPSå‘ç°</h4><p>å¦‚æœä½¿ç”¨<code>--discovery-file</code>è°ƒç”¨<code>kubeadm join</code>ï¼Œåˆ™ä½¿ç”¨æ–‡ä»¶å‘ç°ï¼›è¯¥æ–‡ä»¶å¯ä»¥æ˜¯æœ¬åœ°æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡HTTPS URLä¸‹è½½ï¼›å¯¹äºHTTPSï¼Œä½¿ç”¨å·²å®‰è£…çš„ä¸»èŠ‚ç‚¹CA åŒ…éªŒè¯èŠ‚ç‚¹åŠ å…¥é›†ç¾¤ã€‚</p><p>é€šè¿‡æ–‡ä»¶å‘ç°ï¼Œé›†ç¾¤CAè¯ä¹¦è¢«æ·»åŠ åœ¨æ–‡ä»¶æœ¬èº«ä¸­ï¼›äº‹å®ä¸Šï¼Œå‘ç°æ–‡ä»¶æ˜¯ä¸€ä¸ªkubeconfigæ–‡ä»¶ï¼Œåªè®¾ç½®äº† <code>server</code>å’Œ <code>certificate-authority-data</code>å±æ€§ï¼Œå¦‚ <a href="https://www.coderdocument.com/docs/kubernetes/v1.14/reference/setup_tools_reference/kubeadm/kubeadm_join.html" target="_blank" rel="noopener noreferrer"><code>kubeadm join</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>å‚è€ƒæ–‡æ¡£ä¸­æ‰€è¿°ï¼›å½“ä¸é›†ç¾¤å»ºç«‹è¿æ¥æ—¶ï¼Œkubeadmå°è¯•è®¿é—®<code>cluster-info</code> ConfigMapï¼Œå¦‚æœå¯ç”¨ï¼Œåˆ™ä½¿ç”¨å®ƒã€‚</p><h3 id="tlså¼•å¯¼" tabindex="-1"><a class="header-anchor" href="#tlså¼•å¯¼" aria-hidden="true">#</a> TLSå¼•å¯¼</h3><p>ä¸€æ—¦çŸ¥é“é›†ç¾¤ä¿¡æ¯ï¼Œå°±ä¼šå†™å…¥<code>bootstrap-kubelet.conf</code>æ–‡ä»¶ï¼Œä»è€Œå…è®¸kubeletæ‰§è¡ŒTLSå¼•å¯¼ï¼ˆç›¸åï¼Œç›´åˆ°v.1.7 TLSå¼•å¯¼æ‰ç”±kubeadmç®¡ç†ï¼‰ã€‚</p><p>TLSå¼•å¯¼æœºåˆ¶ä½¿ç”¨å…±äº«ä»¤ç‰Œä¸Kubernetesä¸»èŠ‚ç‚¹è¿›è¡Œä¸´æ—¶è®¤è¯ï¼Œä¸ºæœ¬åœ°åˆ›å»ºçš„å¯†é’¥å¯¹æäº¤è¯ä¹¦ç­¾åè¯·æ±‚(CSR)ã€‚</p><p>ç„¶åè‡ªåŠ¨æ‰¹å‡†è¯·æ±‚ï¼Œä¿å­˜<code>ca.crt</code>æ–‡ä»¶å’Œ<code>kubelet.conf</code>æ–‡ä»¶ï¼Œkubeletå°†ä½¿ç”¨è¯¥æ–‡ä»¶åŠ å…¥é›†ç¾¤ï¼ŒåŒæ—¶åˆ é™¤<code>bootstrap-kubelet.conf</code>ã€‚</p><p>è¯·æ³¨æ„ï¼š</p><ul><li>ä¸´æ—¶è®¤è¯æ˜¯æ ¹æ®<code>kubeadm init</code>æµç¨‹ä¸­ä¿å­˜çš„ä»¤ç‰Œè¿›è¡ŒéªŒè¯çš„ï¼ˆæˆ–è€…ä½¿ç”¨<code>kubeadm token</code>åˆ›å»ºçš„å…¶ä»–ä»¤ç‰Œï¼‰</li><li>ä¸´æ—¶è®¤è¯è§£æä¸º<code>system:bootstrappers:kubeadm:default-node-token</code> ç»„çš„ç”¨æˆ·æˆå‘˜ï¼Œè¯¥ç”¨æˆ·ç»„åœ¨<code>kubeadm init</code>æµç¨‹ä¸­è¢«æˆäºˆè®¿é—®CSR APIçš„æƒé™</li><li>è‡ªåŠ¨CSRæ‰¹å‡†ç”±<code>csrapprover</code>æ§åˆ¶å™¨æ ¹æ®<code>kubeadm init</code>æµç¨‹çš„é…ç½®è¿›è¡Œç®¡ç†</li></ul><h4 id="åœ¨v1-9ä¸­ä¸ºå¯é€‰çš„alphaçº§åˆ«-å†™å…¥kubeletåˆå§‹åŒ–é…ç½®" tabindex="-1"><a class="header-anchor" href="#åœ¨v1-9ä¸­ä¸ºå¯é€‰çš„alphaçº§åˆ«-å†™å…¥kubeletåˆå§‹åŒ–é…ç½®" aria-hidden="true">#</a> ï¼ˆåœ¨v1.9ä¸­ä¸ºå¯é€‰çš„alphaçº§åˆ«ï¼‰å†™å…¥kubeletåˆå§‹åŒ–é…ç½®</h4><p>å¦‚æœä½¿ç”¨ <code>--feature-gates=DynamicKubeletConfig</code>è°ƒç”¨<code>kubeadm</code>ï¼š</p><ul><li>ä½¿ç”¨å¼•å¯¼ä»¤ç‰Œå‡­è¯å°†kubeletåŸºæœ¬é…ç½®å†™å…¥<code>kube-system</code>å‘½åç©ºé—´ä¸­çš„<code>kubelet-base-config-v1.9</code> ConfigMapï¼Œå¹¶å°†å…¶ä½œä¸º kubeletåˆå§‹åŒ–æ–‡ä»¶ <code>/var/lib/kubelet/config/init/kubelet</code> å†™å…¥ç£ç›˜ã€‚</li><li>ä¸€æ—¦kubeletå¼€å§‹ä½¿ç”¨èŠ‚ç‚¹è‡ªå·±çš„å‡­æ®ï¼ˆ<code>/etc/kubernetes/kubelet.conf</code>ï¼‰ï¼Œæ›´æ–°å½“å‰èŠ‚ç‚¹é…ç½®ï¼ŒæŒ‡å®šçš„èŠ‚ç‚¹æˆ–kubeletå’Œé…ç½®æ¥æºäºä¸Šè¿°ConfigMapã€‚</li></ul><p>è¯·æ³¨æ„ï¼š</p><ol><li>è¦ä½¿åŠ¨æ€kubeleté…ç½®å·¥ä½œï¼Œéœ€è¦åœ¨<code>/etc/systemd/system/kubelet.service.d/10-kubeadm.conf</code>ä¸­è®¾ç½®<code>--dynamic-config-dir=/var/lib/kubelet/config/dynamic</code>é€‰é¡¹ã€‚</li></ol><h2 id="end-é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#end-é“¾æ¥" aria-hidden="true">#</a> END é“¾æ¥</h2><ul><li><div><a href="63.md" style="float:left;">â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”— </a><a href="65.md" style="float:right;"> ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul><ul><li><p><a href="/" class="">â“‚ï¸å›åˆ°ç›®å½•ğŸ </a></p></li><li><p><a href="https://nsddd.top/archives/contributors" target="_blank" rel="noopener noreferrer"><strong>ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–</strong><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</p></li><li><p>âœ´ï¸ç‰ˆæƒå£°æ˜ Â© ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª<a href="http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="noopener noreferrer">CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰Â©<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li></ul></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/3293172751/awesome-docker/edit/master/docs/Cloud-Native-k8s/64.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨GitHubä¸Šè´¡çŒ®æ­¤é¡µé¢"><!--[--><!--]--> åœ¨GitHubä¸Šè´¡çŒ®æ­¤é¡µé¢ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">ä¸Šæ¬¡æ›´æ–°: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">è´¡çŒ®è€…: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 3293172751nss@gmail.com">Xinwei Xiong</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 3293172751nss@gmail.com">xiongxinwei</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/Cloud-Native-k8s/63.html" class="" aria-label="ç¬¬63èŠ‚ Prometheus å’Œ Grafana æ—¥å¿—æ”¶é›†æ–¹æ¡ˆ"><!--[--><!--]--> ç¬¬63èŠ‚ Prometheus å’Œ Grafana æ—¥å¿—æ”¶é›†æ–¹æ¡ˆ <!--[--><!--]--></a></span><span class="next"><a href="/Cloud-Native-k8s/65.html" class="" aria-label="ç¬¬65èŠ‚ eBPF åˆ¨æä»¥åŠæºç å­¦ä¹ "><!--[--><!--]--> ç¬¬65èŠ‚ eBPF åˆ¨æä»¥åŠæºç å­¦ä¹  <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.bc2ec9df.js" defer></script>
  </body>
</html>
