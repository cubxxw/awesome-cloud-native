<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/img/1.jpg"><title>ç¬¬89èŠ‚ GitOps å®è·µç†è®ºï¼ˆä¸Šéƒ¨åˆ†ï¼‰ | ä½ å¥½</title><meta name="description" content="é“¾å­¦ç¤¾è‡´åŠ›äºæ‰“é€ å‡ºåŒºå—é“¾å»ä¸­å¿ƒåŒ–çš„å­¦ä¹ å¹³å°">
    <link rel="modulepreload" href="/assets/app.9f14a191.js"><link rel="modulepreload" href="/assets/89.html.929f0838.js"><link rel="modulepreload" href="/assets/89.html.ceeff7a8.js"><link rel="prefetch" href="/assets/index.html.1956b97c.js"><link rel="prefetch" href="/assets/1.html.25516abe.js"><link rel="prefetch" href="/assets/10.html.f664515e.js"><link rel="prefetch" href="/assets/100.html.d91fa955.js"><link rel="prefetch" href="/assets/101.html.0827ed20.js"><link rel="prefetch" href="/assets/102.html.92251e2c.js"><link rel="prefetch" href="/assets/103.html.21f01311.js"><link rel="prefetch" href="/assets/104.html.ce436ae9.js"><link rel="prefetch" href="/assets/105.html.b3e84f3f.js"><link rel="prefetch" href="/assets/106.html.0864d0a7.js"><link rel="prefetch" href="/assets/107.html.18919f4a.js"><link rel="prefetch" href="/assets/108.html.016a995b.js"><link rel="prefetch" href="/assets/109.html.506b0acd.js"><link rel="prefetch" href="/assets/11.html.894534ee.js"><link rel="prefetch" href="/assets/110.html.18039dac.js"><link rel="prefetch" href="/assets/111.html.fc11ae54.js"><link rel="prefetch" href="/assets/112.html.3f66712f.js"><link rel="prefetch" href="/assets/113.html.49d40b01.js"><link rel="prefetch" href="/assets/114.html.a1c53e4b.js"><link rel="prefetch" href="/assets/115.html.247f4fdb.js"><link rel="prefetch" href="/assets/116.html.83570ed6.js"><link rel="prefetch" href="/assets/117.html.6caf23db.js"><link rel="prefetch" href="/assets/118.html.badeca1d.js"><link rel="prefetch" href="/assets/119.html.4f83c8c1.js"><link rel="prefetch" href="/assets/12.html.7be36974.js"><link rel="prefetch" href="/assets/120.html.c3e82987.js"><link rel="prefetch" href="/assets/121.html.96bb0e57.js"><link rel="prefetch" href="/assets/122.html.9c503d68.js"><link rel="prefetch" href="/assets/123.html.d7fdea37.js"><link rel="prefetch" href="/assets/124.html.6cb13eda.js"><link rel="prefetch" href="/assets/125.html.dc321324.js"><link rel="prefetch" href="/assets/126.html.2ee61369.js"><link rel="prefetch" href="/assets/127.html.bd0edfed.js"><link rel="prefetch" href="/assets/128.html.c4ca0214.js"><link rel="prefetch" href="/assets/129.html.0e221455.js"><link rel="prefetch" href="/assets/13.html.63f1e7e4.js"><link rel="prefetch" href="/assets/130.html.de417f83.js"><link rel="prefetch" href="/assets/131.html.97872bc2.js"><link rel="prefetch" href="/assets/132.html.6f35a662.js"><link rel="prefetch" href="/assets/133.html.40af0903.js"><link rel="prefetch" href="/assets/134.html.494ffeb1.js"><link rel="prefetch" href="/assets/135.html.961ce0ed.js"><link rel="prefetch" href="/assets/136.html.9346fc93.js"><link rel="prefetch" href="/assets/137.html.3e4e93e3.js"><link rel="prefetch" href="/assets/138.html.05c4d9ab.js"><link rel="prefetch" href="/assets/139.html.57cea99e.js"><link rel="prefetch" href="/assets/14.html.89138f20.js"><link rel="prefetch" href="/assets/140.html.b056f390.js"><link rel="prefetch" href="/assets/141.html.7c68796d.js"><link rel="prefetch" href="/assets/142.html.8f683ee9.js"><link rel="prefetch" href="/assets/143.html.f742bc56.js"><link rel="prefetch" href="/assets/144.html.e34e5114.js"><link rel="prefetch" href="/assets/145.html.1c93999c.js"><link rel="prefetch" href="/assets/146.html.df8e7417.js"><link rel="prefetch" href="/assets/147.html.0d09305b.js"><link rel="prefetch" href="/assets/148.html.6a347379.js"><link rel="prefetch" href="/assets/149.html.540f72c7.js"><link rel="prefetch" href="/assets/15.html.455305e3.js"><link rel="prefetch" href="/assets/150.html.a4bf8e89.js"><link rel="prefetch" href="/assets/151.html.e740f5d7.js"><link rel="prefetch" href="/assets/152.html.de060bf7.js"><link rel="prefetch" href="/assets/153.html.06b99f98.js"><link rel="prefetch" href="/assets/154.html.ce3bcc02.js"><link rel="prefetch" href="/assets/156.html.fae98003.js"><link rel="prefetch" href="/assets/157.html.e9f50ed5.js"><link rel="prefetch" href="/assets/158.html.d8e9a23c.js"><link rel="prefetch" href="/assets/159.html.a80b2fff.js"><link rel="prefetch" href="/assets/16.html.b53d8f21.js"><link rel="prefetch" href="/assets/160.html.e5707325.js"><link rel="prefetch" href="/assets/161.html.a2127f8f.js"><link rel="prefetch" href="/assets/162.html.0b044264.js"><link rel="prefetch" href="/assets/163.html.3c5b427b.js"><link rel="prefetch" href="/assets/164.html.c749acaa.js"><link rel="prefetch" href="/assets/165.html.47aad8ae.js"><link rel="prefetch" href="/assets/166.html.52456fd4.js"><link rel="prefetch" href="/assets/167.html.dd60baff.js"><link rel="prefetch" href="/assets/17.html.40724eb8.js"><link rel="prefetch" href="/assets/18.html.0c25012b.js"><link rel="prefetch" href="/assets/19.html.3ce29682.js"><link rel="prefetch" href="/assets/2.html.f4300b24.js"><link rel="prefetch" href="/assets/20.html.8858a4e9.js"><link rel="prefetch" href="/assets/21.html.e5b16c89.js"><link rel="prefetch" href="/assets/22.html.a91eab06.js"><link rel="prefetch" href="/assets/23.html.8928dd88.js"><link rel="prefetch" href="/assets/24.html.e5bb064a.js"><link rel="prefetch" href="/assets/25.html.8e5080fc.js"><link rel="prefetch" href="/assets/26.html.dcc6bb0c.js"><link rel="prefetch" href="/assets/27.html.7aea7424.js"><link rel="prefetch" href="/assets/28.html.9b4f492d.js"><link rel="prefetch" href="/assets/29.html.4cd69ba4.js"><link rel="prefetch" href="/assets/3.html.7aea9b7f.js"><link rel="prefetch" href="/assets/30.html.a46a758d.js"><link rel="prefetch" href="/assets/31.html.d7390509.js"><link rel="prefetch" href="/assets/32.html.c433c11f.js"><link rel="prefetch" href="/assets/33.html.30375b0f.js"><link rel="prefetch" href="/assets/34.html.201cfeb6.js"><link rel="prefetch" href="/assets/35.html.9cf0191c.js"><link rel="prefetch" href="/assets/36.html.75b9800c.js"><link rel="prefetch" href="/assets/37.html.a93f8c48.js"><link rel="prefetch" href="/assets/38.html.8b270f20.js"><link rel="prefetch" href="/assets/39.html.72220720.js"><link rel="prefetch" href="/assets/4.html.d75f7d0e.js"><link rel="prefetch" href="/assets/40.html.0c25b56b.js"><link rel="prefetch" href="/assets/41.html.ebde12e4.js"><link rel="prefetch" href="/assets/42.html.98b0929d.js"><link rel="prefetch" href="/assets/43.html.a362dcd0.js"><link rel="prefetch" href="/assets/44.html.3fcc9a07.js"><link rel="prefetch" href="/assets/45.html.d280487f.js"><link rel="prefetch" href="/assets/46.html.e311282b.js"><link rel="prefetch" href="/assets/47.html.613325c9.js"><link rel="prefetch" href="/assets/48.html.4a4db7ad.js"><link rel="prefetch" href="/assets/49.html.315a743e.js"><link rel="prefetch" href="/assets/5.html.32bda1b0.js"><link rel="prefetch" href="/assets/50.html.efaabdc8.js"><link rel="prefetch" href="/assets/51.html.8edafd7d.js"><link rel="prefetch" href="/assets/52.html.d226f9fd.js"><link rel="prefetch" href="/assets/53.html.d1c693c4.js"><link rel="prefetch" href="/assets/54.html.37a1eff3.js"><link rel="prefetch" href="/assets/55.html.dde3ab2d.js"><link rel="prefetch" href="/assets/56.html.2ac52495.js"><link rel="prefetch" href="/assets/57.html.4f1d670d.js"><link rel="prefetch" href="/assets/58.html.4505d1c9.js"><link rel="prefetch" href="/assets/59.html.b34e6550.js"><link rel="prefetch" href="/assets/6.html.43677f4a.js"><link rel="prefetch" href="/assets/60.html.b4109b9c.js"><link rel="prefetch" href="/assets/61.html.b523b5ff.js"><link rel="prefetch" href="/assets/62.html.ae7dc90f.js"><link rel="prefetch" href="/assets/63.html.303f1ec3.js"><link rel="prefetch" href="/assets/64.html.9a893b61.js"><link rel="prefetch" href="/assets/65.html.03e77126.js"><link rel="prefetch" href="/assets/66.html.88143b69.js"><link rel="prefetch" href="/assets/67.html.b0109f9a.js"><link rel="prefetch" href="/assets/68.html.324487cb.js"><link rel="prefetch" href="/assets/69.html.99b484cd.js"><link rel="prefetch" href="/assets/7.html.cb20d1a2.js"><link rel="prefetch" href="/assets/70.html.14b1357f.js"><link rel="prefetch" href="/assets/71.html.42f6cf02.js"><link rel="prefetch" href="/assets/72.html.3b1418fa.js"><link rel="prefetch" href="/assets/73.html.79edfdbb.js"><link rel="prefetch" href="/assets/74.html.5f200340.js"><link rel="prefetch" href="/assets/75.html.5d301838.js"><link rel="prefetch" href="/assets/76.html.56d11c6b.js"><link rel="prefetch" href="/assets/77.html.18d5f1e4.js"><link rel="prefetch" href="/assets/78.html.4d034086.js"><link rel="prefetch" href="/assets/79.html.c673549a.js"><link rel="prefetch" href="/assets/8.html.cd541b09.js"><link rel="prefetch" href="/assets/80.html.a782884f.js"><link rel="prefetch" href="/assets/81.html.b1bfdba1.js"><link rel="prefetch" href="/assets/82.html.36f6de9f.js"><link rel="prefetch" href="/assets/83.html.bf5a849d.js"><link rel="prefetch" href="/assets/84.html.22c74165.js"><link rel="prefetch" href="/assets/85.html.afba3d9e.js"><link rel="prefetch" href="/assets/86.html.ecf0b504.js"><link rel="prefetch" href="/assets/87.html.161bfab0.js"><link rel="prefetch" href="/assets/88.html.830d34cf.js"><link rel="prefetch" href="/assets/89.html.24c28856.js"><link rel="prefetch" href="/assets/9.html.21fb1ee7.js"><link rel="prefetch" href="/assets/90.html.ad5c88a9.js"><link rel="prefetch" href="/assets/91.html.f2c0e9d2.js"><link rel="prefetch" href="/assets/92.html.fc810e4b.js"><link rel="prefetch" href="/assets/93.html.d9daca73.js"><link rel="prefetch" href="/assets/94.html.cf611e9c.js"><link rel="prefetch" href="/assets/95.html.9e0da40c.js"><link rel="prefetch" href="/assets/96.html.f08f2dd2.js"><link rel="prefetch" href="/assets/97.html.3b7ec990.js"><link rel="prefetch" href="/assets/98.html.f899e973.js"><link rel="prefetch" href="/assets/99.html.0208c4bd.js"><link rel="prefetch" href="/assets/index.html.dc8ab598.js"><link rel="prefetch" href="/assets/TODO.html.830317c3.js"><link rel="prefetch" href="/assets/1.html.b0d7e311.js"><link rel="prefetch" href="/assets/10.html.74bfa8d5.js"><link rel="prefetch" href="/assets/11.html.a0ee6e27.js"><link rel="prefetch" href="/assets/12.html.c7e95b78.js"><link rel="prefetch" href="/assets/13.html.21fe8d41.js"><link rel="prefetch" href="/assets/14.html.2bc4842f.js"><link rel="prefetch" href="/assets/15.html.273aab40.js"><link rel="prefetch" href="/assets/16.html.cff5ccdd.js"><link rel="prefetch" href="/assets/17.html.61d6478a.js"><link rel="prefetch" href="/assets/18.html.b5af5a3c.js"><link rel="prefetch" href="/assets/19.html.8dd80505.js"><link rel="prefetch" href="/assets/2.html.c38b309c.js"><link rel="prefetch" href="/assets/20.html.7423c3ab.js"><link rel="prefetch" href="/assets/21.html.4f66bd46.js"><link rel="prefetch" href="/assets/22.html.a59e5010.js"><link rel="prefetch" href="/assets/23.html.1548e8fe.js"><link rel="prefetch" href="/assets/24.html.4fa654f7.js"><link rel="prefetch" href="/assets/25.html.c2065edd.js"><link rel="prefetch" href="/assets/26.html.a1050e08.js"><link rel="prefetch" href="/assets/27.html.d6d251ce.js"><link rel="prefetch" href="/assets/28.html.50e90924.js"><link rel="prefetch" href="/assets/29.html.5e4331f5.js"><link rel="prefetch" href="/assets/3.html.6b85bcb4.js"><link rel="prefetch" href="/assets/30.html.54824bc2.js"><link rel="prefetch" href="/assets/31.html.df4f90ad.js"><link rel="prefetch" href="/assets/32.html.ee8fa45f.js"><link rel="prefetch" href="/assets/33.html.ce4b5b50.js"><link rel="prefetch" href="/assets/34.html.6692d866.js"><link rel="prefetch" href="/assets/35.html.113be7d0.js"><link rel="prefetch" href="/assets/36.html.c5f9162c.js"><link rel="prefetch" href="/assets/37.html.e6401841.js"><link rel="prefetch" href="/assets/38.html.e648e6c2.js"><link rel="prefetch" href="/assets/39.html.1107f344.js"><link rel="prefetch" href="/assets/4.html.2ba64301.js"><link rel="prefetch" href="/assets/40.html.8da7b155.js"><link rel="prefetch" href="/assets/41.html.2a8a63fa.js"><link rel="prefetch" href="/assets/42.html.129390e0.js"><link rel="prefetch" href="/assets/43.html.da0927d8.js"><link rel="prefetch" href="/assets/44.html.36225633.js"><link rel="prefetch" href="/assets/45.html.72187430.js"><link rel="prefetch" href="/assets/46.html.202f463b.js"><link rel="prefetch" href="/assets/47.html.170cb5f2.js"><link rel="prefetch" href="/assets/48.html.f7a22b63.js"><link rel="prefetch" href="/assets/49.html.99c718b4.js"><link rel="prefetch" href="/assets/5.html.9a93b5bd.js"><link rel="prefetch" href="/assets/6.html.6a0cab53.js"><link rel="prefetch" href="/assets/7.html.4ecafecd.js"><link rel="prefetch" href="/assets/8.html.f3e71fb5.js"><link rel="prefetch" href="/assets/9.html.0f94f747.js"><link rel="prefetch" href="/assets/1.html.908ee66a.js"><link rel="prefetch" href="/assets/10.html.e77e0455.js"><link rel="prefetch" href="/assets/11.html.7e785902.js"><link rel="prefetch" href="/assets/12.html.1599a54d.js"><link rel="prefetch" href="/assets/13.html.70628749.js"><link rel="prefetch" href="/assets/14.html.b96100ab.js"><link rel="prefetch" href="/assets/15.html.01b26225.js"><link rel="prefetch" href="/assets/16.html.55d56ea8.js"><link rel="prefetch" href="/assets/17.html.6874d49f.js"><link rel="prefetch" href="/assets/18.html.65b90de4.js"><link rel="prefetch" href="/assets/19.html.dde6b661.js"><link rel="prefetch" href="/assets/2.html.e1274803.js"><link rel="prefetch" href="/assets/20.html.0fe80452.js"><link rel="prefetch" href="/assets/21.html.f85d8468.js"><link rel="prefetch" href="/assets/22.html.0afb63ed.js"><link rel="prefetch" href="/assets/23.html.acd56ad8.js"><link rel="prefetch" href="/assets/24.html.f874b480.js"><link rel="prefetch" href="/assets/25.html.e020387b.js"><link rel="prefetch" href="/assets/26.html.ccbed0cc.js"><link rel="prefetch" href="/assets/27.html.148446d1.js"><link rel="prefetch" href="/assets/28.html.a94af5c0.js"><link rel="prefetch" href="/assets/29.html.aa33eff4.js"><link rel="prefetch" href="/assets/3.html.cac76b28.js"><link rel="prefetch" href="/assets/30.html.6c68425a.js"><link rel="prefetch" href="/assets/31.html.9b16aa42.js"><link rel="prefetch" href="/assets/32.html.6d1882b9.js"><link rel="prefetch" href="/assets/33.html.450fcdf8.js"><link rel="prefetch" href="/assets/34.html.b2875ca6.js"><link rel="prefetch" href="/assets/35.html.b9867f79.js"><link rel="prefetch" href="/assets/36.html.614ee854.js"><link rel="prefetch" href="/assets/37.html.2d010e5c.js"><link rel="prefetch" href="/assets/38.html.db03c609.js"><link rel="prefetch" href="/assets/39.html.dae7a11d.js"><link rel="prefetch" href="/assets/4.html.d793bb26.js"><link rel="prefetch" href="/assets/40.html.10816553.js"><link rel="prefetch" href="/assets/41.html.f71f97a0.js"><link rel="prefetch" href="/assets/42.html.8af2270a.js"><link rel="prefetch" href="/assets/43.html.aeab5555.js"><link rel="prefetch" href="/assets/44.html.ca417de8.js"><link rel="prefetch" href="/assets/45.html.26989a52.js"><link rel="prefetch" href="/assets/46.html.c5988adc.js"><link rel="prefetch" href="/assets/47.html.3e47ee65.js"><link rel="prefetch" href="/assets/48.html.d08a8b7f.js"><link rel="prefetch" href="/assets/49.html.906f0479.js"><link rel="prefetch" href="/assets/5.html.f58f6203.js"><link rel="prefetch" href="/assets/50.html.581cdfdd.js"><link rel="prefetch" href="/assets/51.html.143c32e9.js"><link rel="prefetch" href="/assets/52.html.7488aa3f.js"><link rel="prefetch" href="/assets/53.html.df9bfd27.js"><link rel="prefetch" href="/assets/54.html.97e0befc.js"><link rel="prefetch" href="/assets/55.html.9f2e0fc4.js"><link rel="prefetch" href="/assets/56.html.832dc435.js"><link rel="prefetch" href="/assets/57.html.55b5f82f.js"><link rel="prefetch" href="/assets/58.html.e6043ac3.js"><link rel="prefetch" href="/assets/59.html.c2454b9d.js"><link rel="prefetch" href="/assets/6.html.11b7a45c.js"><link rel="prefetch" href="/assets/60.html.5867f9c4.js"><link rel="prefetch" href="/assets/61.html.1e8bbff2.js"><link rel="prefetch" href="/assets/62.html.02e6d999.js"><link rel="prefetch" href="/assets/63.html.b668ae9a.js"><link rel="prefetch" href="/assets/64.html.875cd724.js"><link rel="prefetch" href="/assets/65.html.a1adf110.js"><link rel="prefetch" href="/assets/66.html.a502d8c9.js"><link rel="prefetch" href="/assets/67.html.7d2e39ec.js"><link rel="prefetch" href="/assets/68.html.4430bebd.js"><link rel="prefetch" href="/assets/69.html.bf5ab228.js"><link rel="prefetch" href="/assets/7.html.44323637.js"><link rel="prefetch" href="/assets/70.html.670b967e.js"><link rel="prefetch" href="/assets/71.html.79429747.js"><link rel="prefetch" href="/assets/72.html.3cc0ac5a.js"><link rel="prefetch" href="/assets/73.html.5b7c24e3.js"><link rel="prefetch" href="/assets/74.html.75ce999b.js"><link rel="prefetch" href="/assets/75.html.d7a0a9a9.js"><link rel="prefetch" href="/assets/76.html.29ac42d1.js"><link rel="prefetch" href="/assets/77.html.a01bad0f.js"><link rel="prefetch" href="/assets/78.html.9490aa1a.js"><link rel="prefetch" href="/assets/79.html.c3c24177.js"><link rel="prefetch" href="/assets/8.html.632ad3b0.js"><link rel="prefetch" href="/assets/80.html.4fd3d2b5.js"><link rel="prefetch" href="/assets/81.html.fdcd9515.js"><link rel="prefetch" href="/assets/82.html.5ade8f4b.js"><link rel="prefetch" href="/assets/83.html.86323a55.js"><link rel="prefetch" href="/assets/84.html.b6f2257a.js"><link rel="prefetch" href="/assets/85.html.80c3be1d.js"><link rel="prefetch" href="/assets/86.html.af8ec80f.js"><link rel="prefetch" href="/assets/87.html.d9c28bbb.js"><link rel="prefetch" href="/assets/88.html.8ae0bf80.js"><link rel="prefetch" href="/assets/9.html.7b18c04d.js"><link rel="prefetch" href="/assets/90.html.119ea32b.js"><link rel="prefetch" href="/assets/91.html.c66a99bd.js"><link rel="prefetch" href="/assets/92.html.3662bc0c.js"><link rel="prefetch" href="/assets/93.html.680a881a.js"><link rel="prefetch" href="/assets/94.html.02d9e407.js"><link rel="prefetch" href="/assets/95.html.10a9639a.js"><link rel="prefetch" href="/assets/96.html.62960ce9.js"><link rel="prefetch" href="/assets/97.html.d0ab9bbe.js"><link rel="prefetch" href="/assets/98.html.89ca1b0b.js"><link rel="prefetch" href="/assets/99.html.5143f23b.js"><link rel="prefetch" href="/assets/index.html.b4c0dc45.js"><link rel="prefetch" href="/assets/1.html.fefabf1f.js"><link rel="prefetch" href="/assets/10.html.6bfcc64a.js"><link rel="prefetch" href="/assets/11.html.f0c58879.js"><link rel="prefetch" href="/assets/12.html.6174ec90.js"><link rel="prefetch" href="/assets/13.html.4adeed5e.js"><link rel="prefetch" href="/assets/14.html.7b106669.js"><link rel="prefetch" href="/assets/15.html.c0e4acaa.js"><link rel="prefetch" href="/assets/16.html.7a3ba1ea.js"><link rel="prefetch" href="/assets/17.html.7a0b131d.js"><link rel="prefetch" href="/assets/18.html.a9e5ae4a.js"><link rel="prefetch" href="/assets/19.html.f9a1dad0.js"><link rel="prefetch" href="/assets/2.html.47656e60.js"><link rel="prefetch" href="/assets/20.html.7990e495.js"><link rel="prefetch" href="/assets/21.html.10de0a75.js"><link rel="prefetch" href="/assets/22.html.ccdeb6c4.js"><link rel="prefetch" href="/assets/23.html.371d6681.js"><link rel="prefetch" href="/assets/24.html.d05a05ea.js"><link rel="prefetch" href="/assets/25.html.ce330676.js"><link rel="prefetch" href="/assets/26.html.d044406f.js"><link rel="prefetch" href="/assets/27.html.ccc926f6.js"><link rel="prefetch" href="/assets/28.html.49f5cbc7.js"><link rel="prefetch" href="/assets/29.html.f44fb171.js"><link rel="prefetch" href="/assets/3.html.2a02bb13.js"><link rel="prefetch" href="/assets/30.html.71962bb9.js"><link rel="prefetch" href="/assets/31.html.05d73e5f.js"><link rel="prefetch" href="/assets/32.html.e98a73d9.js"><link rel="prefetch" href="/assets/33.html.55b3c6fb.js"><link rel="prefetch" href="/assets/34.html.5146048c.js"><link rel="prefetch" href="/assets/35.html.51cb1df4.js"><link rel="prefetch" href="/assets/36.html.83f23602.js"><link rel="prefetch" href="/assets/37.html.4987df3a.js"><link rel="prefetch" href="/assets/38.html.94359779.js"><link rel="prefetch" href="/assets/39.html.e9fb19b6.js"><link rel="prefetch" href="/assets/4.html.72833ac9.js"><link rel="prefetch" href="/assets/40.html.12ce2063.js"><link rel="prefetch" href="/assets/41.html.17b39dbf.js"><link rel="prefetch" href="/assets/42.html.79e5be5b.js"><link rel="prefetch" href="/assets/43.html.45353e16.js"><link rel="prefetch" href="/assets/44.html.461dd21b.js"><link rel="prefetch" href="/assets/45.html.f89e3252.js"><link rel="prefetch" href="/assets/46.html.0c1c3d86.js"><link rel="prefetch" href="/assets/47.html.3008b583.js"><link rel="prefetch" href="/assets/48.html.876530ae.js"><link rel="prefetch" href="/assets/49.html.93195ef1.js"><link rel="prefetch" href="/assets/5.html.d52a2513.js"><link rel="prefetch" href="/assets/50.html.ae771c42.js"><link rel="prefetch" href="/assets/6.html.6207e399.js"><link rel="prefetch" href="/assets/7.html.60b74bd7.js"><link rel="prefetch" href="/assets/8.html.4ebadc89.js"><link rel="prefetch" href="/assets/9.html.38305fea.js"><link rel="prefetch" href="/assets/k8s_011.html.a02b632d.js"><link rel="prefetch" href="/assets/k8s_012.html.43d51b72.js"><link rel="prefetch" href="/assets/k8s_013.html.ec5b47f7.js"><link rel="prefetch" href="/assets/k8s_014.html.f6d97c90.js"><link rel="prefetch" href="/assets/k8s_015.html.e0a1919b.js"><link rel="prefetch" href="/assets/k8s_016.html.3974eb6c.js"><link rel="prefetch" href="/assets/k8s_017.html.75871624.js"><link rel="prefetch" href="/assets/k8s_018.html.12099bf7.js"><link rel="prefetch" href="/assets/k8s_019.html.056e3a37.js"><link rel="prefetch" href="/assets/k8s_020.html.81fc58d1.js"><link rel="prefetch" href="/assets/k8s_021.html.28a3099b.js"><link rel="prefetch" href="/assets/k8s_022.html.bd4c9467.js"><link rel="prefetch" href="/assets/k8s_023.html.ffd7194a.js"><link rel="prefetch" href="/assets/k8s_024.html.3422943c.js"><link rel="prefetch" href="/assets/k8s_025.html.29b4b1e1.js"><link rel="prefetch" href="/assets/k8s_026.html.37a39c28.js"><link rel="prefetch" href="/assets/k8s_027.html.ffb2e25f.js"><link rel="prefetch" href="/assets/k8s_028.html.d98c6ad6.js"><link rel="prefetch" href="/assets/k8s_029.html.ca41febf.js"><link rel="prefetch" href="/assets/k8s_030.html.9902d045.js"><link rel="prefetch" href="/assets/README (copy).html.813a2fda.js"><link rel="prefetch" href="/assets/index.html.3fd59935.js"><link rel="prefetch" href="/assets/404.html.c3e557d0.js"><link rel="prefetch" href="/assets/index.html.e8347680.js"><link rel="prefetch" href="/assets/1.html.864804ee.js"><link rel="prefetch" href="/assets/10.html.7386f5e9.js"><link rel="prefetch" href="/assets/100.html.ccbc6bbd.js"><link rel="prefetch" href="/assets/101.html.2afde08c.js"><link rel="prefetch" href="/assets/102.html.bc6a8e98.js"><link rel="prefetch" href="/assets/103.html.a93d0801.js"><link rel="prefetch" href="/assets/104.html.692e0d1f.js"><link rel="prefetch" href="/assets/105.html.4c44d86a.js"><link rel="prefetch" href="/assets/106.html.546937c1.js"><link rel="prefetch" href="/assets/107.html.fd965b97.js"><link rel="prefetch" href="/assets/108.html.2f5a3d40.js"><link rel="prefetch" href="/assets/109.html.69964d0d.js"><link rel="prefetch" href="/assets/11.html.f1b3abdc.js"><link rel="prefetch" href="/assets/110.html.d1b84d39.js"><link rel="prefetch" href="/assets/111.html.55528a3f.js"><link rel="prefetch" href="/assets/112.html.1301d918.js"><link rel="prefetch" href="/assets/113.html.5ce6e6af.js"><link rel="prefetch" href="/assets/114.html.aca19e79.js"><link rel="prefetch" href="/assets/115.html.98faf33b.js"><link rel="prefetch" href="/assets/116.html.287c2b12.js"><link rel="prefetch" href="/assets/117.html.affff80e.js"><link rel="prefetch" href="/assets/118.html.738a4869.js"><link rel="prefetch" href="/assets/119.html.01dc5e0c.js"><link rel="prefetch" href="/assets/12.html.1a39c9ff.js"><link rel="prefetch" href="/assets/120.html.d1f46b16.js"><link rel="prefetch" href="/assets/121.html.fc446346.js"><link rel="prefetch" href="/assets/122.html.985b7d39.js"><link rel="prefetch" href="/assets/123.html.7d3f5e45.js"><link rel="prefetch" href="/assets/124.html.90e07fb1.js"><link rel="prefetch" href="/assets/125.html.eca8f27c.js"><link rel="prefetch" href="/assets/126.html.30e47dc0.js"><link rel="prefetch" href="/assets/127.html.5b46f5ee.js"><link rel="prefetch" href="/assets/128.html.0180c4ff.js"><link rel="prefetch" href="/assets/129.html.996e13da.js"><link rel="prefetch" href="/assets/13.html.a96d83f0.js"><link rel="prefetch" href="/assets/130.html.ff9141de.js"><link rel="prefetch" href="/assets/131.html.9e06b373.js"><link rel="prefetch" href="/assets/132.html.7d2dd369.js"><link rel="prefetch" href="/assets/133.html.a6b391ae.js"><link rel="prefetch" href="/assets/134.html.443bc58f.js"><link rel="prefetch" href="/assets/135.html.620406fe.js"><link rel="prefetch" href="/assets/136.html.14c34374.js"><link rel="prefetch" href="/assets/137.html.859742ad.js"><link rel="prefetch" href="/assets/138.html.7337528b.js"><link rel="prefetch" href="/assets/139.html.ab8cb9f6.js"><link rel="prefetch" href="/assets/14.html.8ac0948b.js"><link rel="prefetch" href="/assets/140.html.48b001f2.js"><link rel="prefetch" href="/assets/141.html.35479b0b.js"><link rel="prefetch" href="/assets/142.html.46d05114.js"><link rel="prefetch" href="/assets/143.html.eb676bd6.js"><link rel="prefetch" href="/assets/144.html.aad95f71.js"><link rel="prefetch" href="/assets/145.html.ba85e23e.js"><link rel="prefetch" href="/assets/146.html.b40bf975.js"><link rel="prefetch" href="/assets/147.html.92833675.js"><link rel="prefetch" href="/assets/148.html.3a218805.js"><link rel="prefetch" href="/assets/149.html.adb1a8b6.js"><link rel="prefetch" href="/assets/15.html.be6b650d.js"><link rel="prefetch" href="/assets/150.html.56e83de3.js"><link rel="prefetch" href="/assets/151.html.0f4d1cbb.js"><link rel="prefetch" href="/assets/152.html.bac9100e.js"><link rel="prefetch" href="/assets/153.html.bdf5c5fd.js"><link rel="prefetch" href="/assets/154.html.4e4fc985.js"><link rel="prefetch" href="/assets/156.html.340efd32.js"><link rel="prefetch" href="/assets/157.html.bcb460f3.js"><link rel="prefetch" href="/assets/158.html.3df1a37d.js"><link rel="prefetch" href="/assets/159.html.573467f1.js"><link rel="prefetch" href="/assets/16.html.ca88d175.js"><link rel="prefetch" href="/assets/160.html.44a1a21d.js"><link rel="prefetch" href="/assets/161.html.af195227.js"><link rel="prefetch" href="/assets/162.html.045916fe.js"><link rel="prefetch" href="/assets/163.html.1ffb322a.js"><link rel="prefetch" href="/assets/164.html.4ae1edbe.js"><link rel="prefetch" href="/assets/165.html.3a381592.js"><link rel="prefetch" href="/assets/166.html.bf66fe3b.js"><link rel="prefetch" href="/assets/167.html.778c3e77.js"><link rel="prefetch" href="/assets/17.html.ee4e9d98.js"><link rel="prefetch" href="/assets/18.html.453d4f0e.js"><link rel="prefetch" href="/assets/19.html.17d1bd69.js"><link rel="prefetch" href="/assets/2.html.3e06a3ce.js"><link rel="prefetch" href="/assets/20.html.fc44f067.js"><link rel="prefetch" href="/assets/21.html.c54d1eb6.js"><link rel="prefetch" href="/assets/22.html.1683b86e.js"><link rel="prefetch" href="/assets/23.html.235daf4d.js"><link rel="prefetch" href="/assets/24.html.3ef9fd31.js"><link rel="prefetch" href="/assets/25.html.f5448d7c.js"><link rel="prefetch" href="/assets/26.html.1ad6a028.js"><link rel="prefetch" href="/assets/27.html.1a538308.js"><link rel="prefetch" href="/assets/28.html.13f6702a.js"><link rel="prefetch" href="/assets/29.html.2be30c9c.js"><link rel="prefetch" href="/assets/3.html.aa946bfa.js"><link rel="prefetch" href="/assets/30.html.fccac8dc.js"><link rel="prefetch" href="/assets/31.html.0650256d.js"><link rel="prefetch" href="/assets/32.html.edcc2903.js"><link rel="prefetch" href="/assets/33.html.b29859e4.js"><link rel="prefetch" href="/assets/34.html.d30ff835.js"><link rel="prefetch" href="/assets/35.html.c6c0c451.js"><link rel="prefetch" href="/assets/36.html.53838af2.js"><link rel="prefetch" href="/assets/37.html.979d92df.js"><link rel="prefetch" href="/assets/38.html.e247f39b.js"><link rel="prefetch" href="/assets/39.html.bfb17787.js"><link rel="prefetch" href="/assets/4.html.a7e1f216.js"><link rel="prefetch" href="/assets/40.html.334e5576.js"><link rel="prefetch" href="/assets/41.html.5a23aea6.js"><link rel="prefetch" href="/assets/42.html.f79e3ee4.js"><link rel="prefetch" href="/assets/43.html.7aa31fe2.js"><link rel="prefetch" href="/assets/44.html.81910155.js"><link rel="prefetch" href="/assets/45.html.7c31ca12.js"><link rel="prefetch" href="/assets/46.html.03e8b6f1.js"><link rel="prefetch" href="/assets/47.html.de46e4db.js"><link rel="prefetch" href="/assets/48.html.92754e09.js"><link rel="prefetch" href="/assets/49.html.0ee043a1.js"><link rel="prefetch" href="/assets/5.html.ed3053c4.js"><link rel="prefetch" href="/assets/50.html.dd131eef.js"><link rel="prefetch" href="/assets/51.html.205dd2a7.js"><link rel="prefetch" href="/assets/52.html.f7a43ec7.js"><link rel="prefetch" href="/assets/53.html.67f5a807.js"><link rel="prefetch" href="/assets/54.html.e08b4539.js"><link rel="prefetch" href="/assets/55.html.38a4eae8.js"><link rel="prefetch" href="/assets/56.html.8bc06ec6.js"><link rel="prefetch" href="/assets/57.html.0b42c440.js"><link rel="prefetch" href="/assets/58.html.0df13116.js"><link rel="prefetch" href="/assets/59.html.fdc5a059.js"><link rel="prefetch" href="/assets/6.html.e51846f3.js"><link rel="prefetch" href="/assets/60.html.cf5067f9.js"><link rel="prefetch" href="/assets/61.html.49955107.js"><link rel="prefetch" href="/assets/62.html.5280af6e.js"><link rel="prefetch" href="/assets/63.html.abdd5d7a.js"><link rel="prefetch" href="/assets/64.html.878f3dbe.js"><link rel="prefetch" href="/assets/65.html.ceeba78d.js"><link rel="prefetch" href="/assets/66.html.48e72790.js"><link rel="prefetch" href="/assets/67.html.7ee05f7b.js"><link rel="prefetch" href="/assets/68.html.0086219d.js"><link rel="prefetch" href="/assets/69.html.8e0848be.js"><link rel="prefetch" href="/assets/7.html.8754f1b4.js"><link rel="prefetch" href="/assets/70.html.aa08c2f1.js"><link rel="prefetch" href="/assets/71.html.f1ea2eca.js"><link rel="prefetch" href="/assets/72.html.a7cb104f.js"><link rel="prefetch" href="/assets/73.html.c2c88283.js"><link rel="prefetch" href="/assets/74.html.c840bba2.js"><link rel="prefetch" href="/assets/75.html.69d90c0a.js"><link rel="prefetch" href="/assets/76.html.75703f12.js"><link rel="prefetch" href="/assets/77.html.1a6104be.js"><link rel="prefetch" href="/assets/78.html.49a57200.js"><link rel="prefetch" href="/assets/79.html.e03fe6a5.js"><link rel="prefetch" href="/assets/8.html.f5289368.js"><link rel="prefetch" href="/assets/80.html.5f7c9e82.js"><link rel="prefetch" href="/assets/81.html.a9f5bdda.js"><link rel="prefetch" href="/assets/82.html.793461f3.js"><link rel="prefetch" href="/assets/83.html.0f4bb6fc.js"><link rel="prefetch" href="/assets/84.html.368ad6e0.js"><link rel="prefetch" href="/assets/85.html.03e3f2b5.js"><link rel="prefetch" href="/assets/86.html.2a4510e5.js"><link rel="prefetch" href="/assets/87.html.116b93f3.js"><link rel="prefetch" href="/assets/88.html.30c7b91e.js"><link rel="prefetch" href="/assets/89.html.12511848.js"><link rel="prefetch" href="/assets/9.html.30cd4196.js"><link rel="prefetch" href="/assets/90.html.1e4a1dc7.js"><link rel="prefetch" href="/assets/91.html.e10be110.js"><link rel="prefetch" href="/assets/92.html.e194be46.js"><link rel="prefetch" href="/assets/93.html.6182c45a.js"><link rel="prefetch" href="/assets/94.html.5f82cdd7.js"><link rel="prefetch" href="/assets/95.html.b5426673.js"><link rel="prefetch" href="/assets/96.html.ad835b1d.js"><link rel="prefetch" href="/assets/97.html.66ac2ac6.js"><link rel="prefetch" href="/assets/98.html.6dd80499.js"><link rel="prefetch" href="/assets/99.html.e9856c36.js"><link rel="prefetch" href="/assets/index.html.e84ad76b.js"><link rel="prefetch" href="/assets/TODO.html.c0480320.js"><link rel="prefetch" href="/assets/1.html.60fc39e3.js"><link rel="prefetch" href="/assets/10.html.ba22f7b2.js"><link rel="prefetch" href="/assets/11.html.13872630.js"><link rel="prefetch" href="/assets/12.html.388308ab.js"><link rel="prefetch" href="/assets/13.html.50869333.js"><link rel="prefetch" href="/assets/14.html.70854813.js"><link rel="prefetch" href="/assets/15.html.fa62e082.js"><link rel="prefetch" href="/assets/16.html.61449e4b.js"><link rel="prefetch" href="/assets/17.html.d4ce4e73.js"><link rel="prefetch" href="/assets/18.html.203d5ef9.js"><link rel="prefetch" href="/assets/19.html.1560c798.js"><link rel="prefetch" href="/assets/2.html.df927094.js"><link rel="prefetch" href="/assets/20.html.65e7fa97.js"><link rel="prefetch" href="/assets/21.html.d11ba3c5.js"><link rel="prefetch" href="/assets/22.html.fcdc2bd4.js"><link rel="prefetch" href="/assets/23.html.129572ac.js"><link rel="prefetch" href="/assets/24.html.e9fe94b4.js"><link rel="prefetch" href="/assets/25.html.a83e41fa.js"><link rel="prefetch" href="/assets/26.html.a07295d6.js"><link rel="prefetch" href="/assets/27.html.74c7cfd1.js"><link rel="prefetch" href="/assets/28.html.5e4f2636.js"><link rel="prefetch" href="/assets/29.html.198607e5.js"><link rel="prefetch" href="/assets/3.html.03b7d0a7.js"><link rel="prefetch" href="/assets/30.html.6ce0fe34.js"><link rel="prefetch" href="/assets/31.html.30e4cb1f.js"><link rel="prefetch" href="/assets/32.html.623a14b3.js"><link rel="prefetch" href="/assets/33.html.6345318a.js"><link rel="prefetch" href="/assets/34.html.100b2625.js"><link rel="prefetch" href="/assets/35.html.1b8a808b.js"><link rel="prefetch" href="/assets/36.html.f5f1af7a.js"><link rel="prefetch" href="/assets/37.html.6395fd80.js"><link rel="prefetch" href="/assets/38.html.b53a92d1.js"><link rel="prefetch" href="/assets/39.html.1a76bc38.js"><link rel="prefetch" href="/assets/4.html.cf83f21b.js"><link rel="prefetch" href="/assets/40.html.59f03225.js"><link rel="prefetch" href="/assets/41.html.da5161a0.js"><link rel="prefetch" href="/assets/42.html.4a47d151.js"><link rel="prefetch" href="/assets/43.html.3defe028.js"><link rel="prefetch" href="/assets/44.html.7d68a964.js"><link rel="prefetch" href="/assets/45.html.460324ee.js"><link rel="prefetch" href="/assets/46.html.720b34c0.js"><link rel="prefetch" href="/assets/47.html.a633c6a9.js"><link rel="prefetch" href="/assets/48.html.456e85c4.js"><link rel="prefetch" href="/assets/49.html.873063f6.js"><link rel="prefetch" href="/assets/5.html.f8ebdd9d.js"><link rel="prefetch" href="/assets/6.html.4f3fb478.js"><link rel="prefetch" href="/assets/7.html.6991551a.js"><link rel="prefetch" href="/assets/8.html.91f119a7.js"><link rel="prefetch" href="/assets/9.html.7e516ba9.js"><link rel="prefetch" href="/assets/1.html.4b06dcbe.js"><link rel="prefetch" href="/assets/10.html.f41a5e88.js"><link rel="prefetch" href="/assets/11.html.9563daed.js"><link rel="prefetch" href="/assets/12.html.0f3b52f6.js"><link rel="prefetch" href="/assets/13.html.6a7e3d03.js"><link rel="prefetch" href="/assets/14.html.6d2f1c65.js"><link rel="prefetch" href="/assets/15.html.2c64b723.js"><link rel="prefetch" href="/assets/16.html.d1138dbc.js"><link rel="prefetch" href="/assets/17.html.5cddf741.js"><link rel="prefetch" href="/assets/18.html.9af7ea22.js"><link rel="prefetch" href="/assets/19.html.66156f9b.js"><link rel="prefetch" href="/assets/2.html.aad3bb83.js"><link rel="prefetch" href="/assets/20.html.1e6bb60a.js"><link rel="prefetch" href="/assets/21.html.f627d0a2.js"><link rel="prefetch" href="/assets/22.html.ccf5cdfd.js"><link rel="prefetch" href="/assets/23.html.1cf57840.js"><link rel="prefetch" href="/assets/24.html.bb9ac40e.js"><link rel="prefetch" href="/assets/25.html.43b0ceae.js"><link rel="prefetch" href="/assets/26.html.b0ed3fa1.js"><link rel="prefetch" href="/assets/27.html.2e7caa99.js"><link rel="prefetch" href="/assets/28.html.89308c20.js"><link rel="prefetch" href="/assets/29.html.aff636ed.js"><link rel="prefetch" href="/assets/3.html.30e22e4f.js"><link rel="prefetch" href="/assets/30.html.3fb3b87c.js"><link rel="prefetch" href="/assets/31.html.9145f830.js"><link rel="prefetch" href="/assets/32.html.c82abcbc.js"><link rel="prefetch" href="/assets/33.html.af79741c.js"><link rel="prefetch" href="/assets/34.html.cb5076d8.js"><link rel="prefetch" href="/assets/35.html.9f09e777.js"><link rel="prefetch" href="/assets/36.html.a3463b92.js"><link rel="prefetch" href="/assets/37.html.e7aeb65a.js"><link rel="prefetch" href="/assets/38.html.efeec40a.js"><link rel="prefetch" href="/assets/39.html.7a902016.js"><link rel="prefetch" href="/assets/4.html.1368ebcb.js"><link rel="prefetch" href="/assets/40.html.7c3bb7c4.js"><link rel="prefetch" href="/assets/41.html.ef548929.js"><link rel="prefetch" href="/assets/42.html.5ca20701.js"><link rel="prefetch" href="/assets/43.html.0f219e33.js"><link rel="prefetch" href="/assets/44.html.f8335570.js"><link rel="prefetch" href="/assets/45.html.699b48da.js"><link rel="prefetch" href="/assets/46.html.bfbc2965.js"><link rel="prefetch" href="/assets/47.html.b30637e4.js"><link rel="prefetch" href="/assets/48.html.df75eae4.js"><link rel="prefetch" href="/assets/49.html.cd9cf614.js"><link rel="prefetch" href="/assets/5.html.3b5768cf.js"><link rel="prefetch" href="/assets/50.html.2ede7974.js"><link rel="prefetch" href="/assets/51.html.f3a290c9.js"><link rel="prefetch" href="/assets/52.html.73618eae.js"><link rel="prefetch" href="/assets/53.html.268b3d4b.js"><link rel="prefetch" href="/assets/54.html.e5ea208f.js"><link rel="prefetch" href="/assets/55.html.39f9febe.js"><link rel="prefetch" href="/assets/56.html.31821c93.js"><link rel="prefetch" href="/assets/57.html.81605968.js"><link rel="prefetch" href="/assets/58.html.534f1f46.js"><link rel="prefetch" href="/assets/59.html.4d78ef55.js"><link rel="prefetch" href="/assets/6.html.7de4d66c.js"><link rel="prefetch" href="/assets/60.html.32d2316d.js"><link rel="prefetch" href="/assets/61.html.80b1bd5f.js"><link rel="prefetch" href="/assets/62.html.f3f9a80f.js"><link rel="prefetch" href="/assets/63.html.677925c6.js"><link rel="prefetch" href="/assets/64.html.f2ed2545.js"><link rel="prefetch" href="/assets/65.html.a630c88a.js"><link rel="prefetch" href="/assets/66.html.6016d805.js"><link rel="prefetch" href="/assets/67.html.7ef16242.js"><link rel="prefetch" href="/assets/68.html.1221d554.js"><link rel="prefetch" href="/assets/69.html.93ba1aa1.js"><link rel="prefetch" href="/assets/7.html.91a1ce85.js"><link rel="prefetch" href="/assets/70.html.a7214621.js"><link rel="prefetch" href="/assets/71.html.113ec245.js"><link rel="prefetch" href="/assets/72.html.c2689b92.js"><link rel="prefetch" href="/assets/73.html.a4ab7686.js"><link rel="prefetch" href="/assets/74.html.b7fd60a3.js"><link rel="prefetch" href="/assets/75.html.961237b3.js"><link rel="prefetch" href="/assets/76.html.108a12cb.js"><link rel="prefetch" href="/assets/77.html.2e46e24b.js"><link rel="prefetch" href="/assets/78.html.a71777d4.js"><link rel="prefetch" href="/assets/79.html.7af8beb4.js"><link rel="prefetch" href="/assets/8.html.c0f9c4f4.js"><link rel="prefetch" href="/assets/80.html.076150e8.js"><link rel="prefetch" href="/assets/81.html.856e5706.js"><link rel="prefetch" href="/assets/82.html.bde2626a.js"><link rel="prefetch" href="/assets/83.html.8ca4150d.js"><link rel="prefetch" href="/assets/84.html.1f8ff05a.js"><link rel="prefetch" href="/assets/85.html.2889d559.js"><link rel="prefetch" href="/assets/86.html.ef769261.js"><link rel="prefetch" href="/assets/87.html.2bb2dc40.js"><link rel="prefetch" href="/assets/88.html.34ac6f70.js"><link rel="prefetch" href="/assets/9.html.14c3d70d.js"><link rel="prefetch" href="/assets/90.html.a3a860b1.js"><link rel="prefetch" href="/assets/91.html.782f1dc7.js"><link rel="prefetch" href="/assets/92.html.9f94150c.js"><link rel="prefetch" href="/assets/93.html.ba6d545c.js"><link rel="prefetch" href="/assets/94.html.022b31a0.js"><link rel="prefetch" href="/assets/95.html.cb24e934.js"><link rel="prefetch" href="/assets/96.html.e58e06d5.js"><link rel="prefetch" href="/assets/97.html.eeb9f1b6.js"><link rel="prefetch" href="/assets/98.html.ba11a3c7.js"><link rel="prefetch" href="/assets/99.html.77e2ddfd.js"><link rel="prefetch" href="/assets/index.html.ec2d2dce.js"><link rel="prefetch" href="/assets/1.html.f4b5cbb1.js"><link rel="prefetch" href="/assets/10.html.09f61a43.js"><link rel="prefetch" href="/assets/11.html.a1a03a4e.js"><link rel="prefetch" href="/assets/12.html.856db51b.js"><link rel="prefetch" href="/assets/13.html.49551140.js"><link rel="prefetch" href="/assets/14.html.34b8c88a.js"><link rel="prefetch" href="/assets/15.html.37afc7f1.js"><link rel="prefetch" href="/assets/16.html.046c2894.js"><link rel="prefetch" href="/assets/17.html.07148a0b.js"><link rel="prefetch" href="/assets/18.html.700a84ff.js"><link rel="prefetch" href="/assets/19.html.3b3810a5.js"><link rel="prefetch" href="/assets/2.html.b743b75e.js"><link rel="prefetch" href="/assets/20.html.0f91560b.js"><link rel="prefetch" href="/assets/21.html.1efe80f1.js"><link rel="prefetch" href="/assets/22.html.eab076b1.js"><link rel="prefetch" href="/assets/23.html.fbe2a2e7.js"><link rel="prefetch" href="/assets/24.html.b5aff6da.js"><link rel="prefetch" href="/assets/25.html.f3d4e88b.js"><link rel="prefetch" href="/assets/26.html.d87ddad7.js"><link rel="prefetch" href="/assets/27.html.74defce3.js"><link rel="prefetch" href="/assets/28.html.e6895558.js"><link rel="prefetch" href="/assets/29.html.14406564.js"><link rel="prefetch" href="/assets/3.html.20e95e05.js"><link rel="prefetch" href="/assets/30.html.d16aaeb6.js"><link rel="prefetch" href="/assets/31.html.cf73a053.js"><link rel="prefetch" href="/assets/32.html.3375ff43.js"><link rel="prefetch" href="/assets/33.html.51a48a2c.js"><link rel="prefetch" href="/assets/34.html.20f243ba.js"><link rel="prefetch" href="/assets/35.html.f49fb129.js"><link rel="prefetch" href="/assets/36.html.801dc352.js"><link rel="prefetch" href="/assets/37.html.65b6e43e.js"><link rel="prefetch" href="/assets/38.html.9c269190.js"><link rel="prefetch" href="/assets/39.html.952ae085.js"><link rel="prefetch" href="/assets/4.html.820d871a.js"><link rel="prefetch" href="/assets/40.html.fd2bec8c.js"><link rel="prefetch" href="/assets/41.html.89654440.js"><link rel="prefetch" href="/assets/42.html.39db3e45.js"><link rel="prefetch" href="/assets/43.html.51e76623.js"><link rel="prefetch" href="/assets/44.html.ac9cbb7e.js"><link rel="prefetch" href="/assets/45.html.2afcb2cc.js"><link rel="prefetch" href="/assets/46.html.9b9e102e.js"><link rel="prefetch" href="/assets/47.html.645cc34f.js"><link rel="prefetch" href="/assets/48.html.f63d891f.js"><link rel="prefetch" href="/assets/49.html.828479c1.js"><link rel="prefetch" href="/assets/5.html.34a9e78c.js"><link rel="prefetch" href="/assets/50.html.dcc3c73f.js"><link rel="prefetch" href="/assets/6.html.2aed17a7.js"><link rel="prefetch" href="/assets/7.html.333945c1.js"><link rel="prefetch" href="/assets/8.html.97bfe906.js"><link rel="prefetch" href="/assets/9.html.ce6660fe.js"><link rel="prefetch" href="/assets/k8s_011.html.e0e50ceb.js"><link rel="prefetch" href="/assets/k8s_012.html.2f34a9b5.js"><link rel="prefetch" href="/assets/k8s_013.html.12981f30.js"><link rel="prefetch" href="/assets/k8s_014.html.bceee247.js"><link rel="prefetch" href="/assets/k8s_015.html.75ad15eb.js"><link rel="prefetch" href="/assets/k8s_016.html.28a8a376.js"><link rel="prefetch" href="/assets/k8s_017.html.efbd1410.js"><link rel="prefetch" href="/assets/k8s_018.html.af2cfdba.js"><link rel="prefetch" href="/assets/k8s_019.html.bfa57aa5.js"><link rel="prefetch" href="/assets/k8s_020.html.138dd764.js"><link rel="prefetch" href="/assets/k8s_021.html.a137f8fd.js"><link rel="prefetch" href="/assets/k8s_022.html.3d428fa2.js"><link rel="prefetch" href="/assets/k8s_023.html.a5f7f8e1.js"><link rel="prefetch" href="/assets/k8s_024.html.50a96936.js"><link rel="prefetch" href="/assets/k8s_025.html.904e6f4e.js"><link rel="prefetch" href="/assets/k8s_026.html.e9a54920.js"><link rel="prefetch" href="/assets/k8s_027.html.4838a87a.js"><link rel="prefetch" href="/assets/k8s_028.html.2b42e295.js"><link rel="prefetch" href="/assets/k8s_029.html.83205b09.js"><link rel="prefetch" href="/assets/k8s_030.html.f5583cff.js"><link rel="prefetch" href="/assets/README (copy).html.2eb377c3.js"><link rel="prefetch" href="/assets/index.html.816135f9.js"><link rel="prefetch" href="/assets/404.html.5f6851fe.js">
    <link rel="stylesheet" href="/assets/style.03848e77.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="åˆ‡æ¢ä¾§è¾¹æ " aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">ä½ å¥½</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¤µå…³äºæˆ‘"><span class="title">ğŸ¤µå…³äºæˆ‘</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¤µå…³äºæˆ‘"><span class="title">ğŸ¤µå…³äºæˆ‘</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/cubxxw/awesome-cs-cloudnative-blockchain" target="_self" aria-label="Githubä»“åº“"><!--[--><!--]--> Githubä»“åº“ <!----><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="http://nsddd.top" target="_self" aria-label="æˆ‘çš„åšå®¢"><!--[--><!--]--> æˆ‘çš„åšå®¢ <!----><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://www.zhihu.com/people/3293172751" rel="noopener noreferrer" target="_blank" aria-label="çŸ¥ä¹"><!--[--><!--]--> çŸ¥ä¹ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/kubecub/" rel="noopener noreferrer" target="_blank" aria-label="â›“ï¸é“¾å­¦ç¤¾ç»„ç»‡"><!--[--><!--]--> â›“ï¸é“¾å­¦ç¤¾ç»„ç»‡ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/" class="" aria-label="ğŸ é¦–é¡µ"><!--[--><!--]--> ğŸ é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://go.nsddd.top" rel="noopener noreferrer" target="_blank" aria-label="ğŸ“šGoè¯­è¨€å­¦ä¹ "><!--[--><!--]--> ğŸ“šGoè¯­è¨€å­¦ä¹  <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/Cloud-Native-k8s/" class="router-link-active" aria-label="âš¡ k8så­¦ä¹ ç¯‡"><!--[--><!--]--> âš¡ k8så­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/markdown/" class="" aria-label="âš¡ dockerå­¦ä¹ ç¯‡"><!--[--><!--]--> âš¡ dockerå­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/Cloud-Native/" class="" aria-label="ğŸ„â€â™‚ï¸ äº‘åŸç”Ÿå­¦ä¹ ç¯‡"><!--[--><!--]--> ğŸ„â€â™‚ï¸ äº‘åŸç”Ÿå­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/3293172751/awesome-docker" rel="noopener noreferrer" target="_blank" aria-label="æŸ¥çœ‹æºç "><!--[--><!--]--> æŸ¥çœ‹æºç  <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="åˆ‡æ¢é¢œè‰²æ¨¡å¼"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¤µå…³äºæˆ‘"><span class="title">ğŸ¤µå…³äºæˆ‘</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¤µå…³äºæˆ‘"><span class="title">ğŸ¤µå…³äºæˆ‘</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/cubxxw/awesome-cs-cloudnative-blockchain" target="_self" aria-label="Githubä»“åº“"><!--[--><!--]--> Githubä»“åº“ <!----><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="http://nsddd.top" target="_self" aria-label="æˆ‘çš„åšå®¢"><!--[--><!--]--> æˆ‘çš„åšå®¢ <!----><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://www.zhihu.com/people/3293172751" rel="noopener noreferrer" target="_blank" aria-label="çŸ¥ä¹"><!--[--><!--]--> çŸ¥ä¹ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/kubecub/" rel="noopener noreferrer" target="_blank" aria-label="â›“ï¸é“¾å­¦ç¤¾ç»„ç»‡"><!--[--><!--]--> â›“ï¸é“¾å­¦ç¤¾ç»„ç»‡ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/" class="" aria-label="ğŸ é¦–é¡µ"><!--[--><!--]--> ğŸ é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://go.nsddd.top" rel="noopener noreferrer" target="_blank" aria-label="ğŸ“šGoè¯­è¨€å­¦ä¹ "><!--[--><!--]--> ğŸ“šGoè¯­è¨€å­¦ä¹  <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/Cloud-Native-k8s/" class="router-link-active" aria-label="âš¡ k8så­¦ä¹ ç¯‡"><!--[--><!--]--> âš¡ k8så­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/markdown/" class="" aria-label="âš¡ dockerå­¦ä¹ ç¯‡"><!--[--><!--]--> âš¡ dockerå­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/Cloud-Native/" class="" aria-label="ğŸ„â€â™‚ï¸ äº‘åŸç”Ÿå­¦ä¹ ç¯‡"><!--[--><!--]--> ğŸ„â€â™‚ï¸ äº‘åŸç”Ÿå­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/3293172751/awesome-docker" rel="noopener noreferrer" target="_blank" aria-label="æŸ¥çœ‹æºç "><!--[--><!--]--> æŸ¥çœ‹æºç  <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/" class="sidebar-item sidebar-heading" aria-label="ğŸ å›åˆ°ä¸»é¡µ"><!--[--><!--]--> ğŸ å›åˆ°ä¸»é¡µ <!--[--><!--]--></a><!----></li><li><a class="external-link sidebar-item sidebar-heading" href="https://xxw.nsddd.top/s/wRSz" rel="noopener noreferrer" target="_blank" aria-label="ğŸ’±ä¸ªäººäº‘ç›˜åœ°å€"><!--[--><!--]--> ğŸ’±ä¸ªäººäº‘ç›˜åœ°å€ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">âš¡ k8säº‘åŸç”Ÿå­¦ä¹ ç¯‡ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/Cloud-Native-k8s/1.html" class="sidebar-item" aria-label="ç¬¬1èŠ‚ äº‘å¹³å°"><!--[--><!--]--> ç¬¬1èŠ‚ äº‘å¹³å° <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/2.html" class="sidebar-item" aria-label="ç¬¬2èŠ‚ dockerå®ç”¨æ“ä½œ"><!--[--><!--]--> ç¬¬2èŠ‚ dockerå®ç”¨æ“ä½œ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/3.html" class="sidebar-item" aria-label="ç¬¬3èŠ‚ dockerä¸‰é©¾é©¬è½¦"><!--[--><!--]--> ç¬¬3èŠ‚ dockerä¸‰é©¾é©¬è½¦ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/4.html" class="sidebar-item" aria-label="ç¬¬4èŠ‚ kubernetes(k8s)æ•™ç¨‹"><!--[--><!--]--> ç¬¬4èŠ‚ kubernetes(k8s)æ•™ç¨‹ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/5.html" class="sidebar-item" aria-label="ç¬¬5èŠ‚ é›†ç¾¤æ­å»º"><!--[--><!--]--> ç¬¬5èŠ‚ é›†ç¾¤æ­å»º <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/6.html" class="sidebar-item" aria-label="ç¬¬6èŠ‚ sealosæ­å»ºk8s"><!--[--><!--]--> ç¬¬6èŠ‚ sealosæ­å»ºk8s <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/7.html" class="sidebar-item" aria-label="ç¬¬7èŠ‚ k8såœ¨çº¿å®éªŒå­¦ä¹ å¹³å°"><!--[--><!--]--> ç¬¬7èŠ‚ k8såœ¨çº¿å®éªŒå­¦ä¹ å¹³å° <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/8.html" class="sidebar-item" aria-label="ç¬¬8èŠ‚ å›¾å½¢ç•Œé¢å’Œå‘½åç©ºé—´"><!--[--><!--]--> ç¬¬8èŠ‚ å›¾å½¢ç•Œé¢å’Œå‘½åç©ºé—´ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/9.html" class="sidebar-item" aria-label="ç¬¬9èŠ‚ Pod"><!--[--><!--]--> ç¬¬9èŠ‚ Pod <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/10.html" class="sidebar-item" aria-label="ç¬¬10èŠ‚ Deployment"><!--[--><!--]--> ç¬¬10èŠ‚ Deployment <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/11.html" class="sidebar-item" aria-label="ç¬¬11èŠ‚ service"><!--[--><!--]--> ç¬¬11èŠ‚ service <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/12.html" class="sidebar-item" aria-label="ç¬¬12èŠ‚ Ingress"><!--[--><!--]--> ç¬¬12èŠ‚ Ingress <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/13.html" class="sidebar-item" aria-label="ç¬¬13èŠ‚ å­˜å‚¨æŠ½è±¡"><!--[--><!--]--> ç¬¬13èŠ‚ å­˜å‚¨æŠ½è±¡ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/14.html" class="sidebar-item" aria-label="ç¬¬14èŠ‚ k3s"><!--[--><!--]--> ç¬¬14èŠ‚ k3s <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/15.html" class="sidebar-item" aria-label="ç¬¬15èŠ‚ k3s è¡¥å……"><!--[--><!--]--> ç¬¬15èŠ‚ k3s è¡¥å…… <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/16.html" class="sidebar-item" aria-label="Treafik LB"><!--[--><!--]--> Treafik LB <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/17.html" class="sidebar-item" aria-label="ç¬¬17èŠ‚ Service LB"><!--[--><!--]--> ç¬¬17èŠ‚ Service LB <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/18.html" class="sidebar-item" aria-label="ç¬¬18èŠ‚kubernetes API è®¿é—®æ§åˆ¶"><!--[--><!--]--> ç¬¬18èŠ‚kubernetes API è®¿é—®æ§åˆ¶ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/19.html" class="sidebar-item" aria-label="ç¬¬19èŠ‚  StatefulSet"><!--[--><!--]--> ç¬¬19èŠ‚  StatefulSet <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/20.html" class="sidebar-item" aria-label="ç¬¬19èŠ‚  StatefulSet"><!--[--><!--]--> ç¬¬19èŠ‚  StatefulSet <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/21.html" class="sidebar-item" aria-label="ç¬¬21èŠ‚ Minikube å’Œ Kind"><!--[--><!--]--> ç¬¬21èŠ‚ Minikube å’Œ Kind <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/22.html" class="sidebar-item" aria-label="ç¬¬22èŠ‚ è¿è¡Œæœ‰çŠ¶æ€åº”ç”¨"><!--[--><!--]--> ç¬¬22èŠ‚ è¿è¡Œæœ‰çŠ¶æ€åº”ç”¨ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/23.html" class="sidebar-item" aria-label="ç¬¬23èŠ‚ Kubeconfig &amp;&amp; token"><!--[--><!--]--> ç¬¬23èŠ‚ Kubeconfig &amp;&amp; token <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/24.html" class="sidebar-item" aria-label="ç¬¬24èŠ‚ ETCD"><!--[--><!--]--> ç¬¬24èŠ‚ ETCD <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/25.html" class="sidebar-item" aria-label="ç¬¬25èŠ‚ raft ç®—æ³•"><!--[--><!--]--> ç¬¬25èŠ‚ raft ç®—æ³• <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/26.html" class="sidebar-item" aria-label="ç¬¬26èŠ‚ helm æ•™ç¨‹"><!--[--><!--]--> ç¬¬26èŠ‚ helm æ•™ç¨‹ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/27.html" class="sidebar-item" aria-label="ç¬¬27èŠ‚ k3s è¡¥å……ï¼ˆé«˜çº§ï¼‰"><!--[--><!--]--> ç¬¬27èŠ‚ k3s è¡¥å……ï¼ˆé«˜çº§ï¼‰ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/28.html" class="sidebar-item" aria-label="ç¬¬28èŠ‚ Linuxç³»ç»Ÿç§»æ¤ï¼Œåˆ†åŒºï¼Œrootfs"><!--[--><!--]--> ç¬¬28èŠ‚ Linuxç³»ç»Ÿç§»æ¤ï¼Œåˆ†åŒºï¼Œrootfs <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/29.html" class="sidebar-item" aria-label="ç¬¬29èŠ‚ CloudNative / Kubernetes å­¦ä¹ èµ„æºæ•´ç†"><!--[--><!--]--> ç¬¬29èŠ‚ CloudNative / Kubernetes å­¦ä¹ èµ„æºæ•´ç† <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/30.html" class="sidebar-item" aria-label="ç¬¬30èŠ‚ K8s å¼€å‘ç¯å¢ƒæ­å»º"><!--[--><!--]--> ç¬¬30èŠ‚ K8s å¼€å‘ç¯å¢ƒæ­å»º <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/31.html" class="sidebar-item" aria-label="ç¬¬31èŠ‚ kubernetes çš„ç¼–è¯‘å’Œè°ƒè¯•"><!--[--><!--]--> ç¬¬31èŠ‚ kubernetes çš„ç¼–è¯‘å’Œè°ƒè¯• <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/32.html" class="sidebar-item" aria-label="ç¬¬32èŠ‚ kubernetes ç›®å½•ç»“æ„"><!--[--><!--]--> ç¬¬32èŠ‚ kubernetes ç›®å½•ç»“æ„ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/33.html" class="sidebar-item" aria-label="ç¬¬33èŠ‚ Postmanè¯·æ±‚Server"><!--[--><!--]--> ç¬¬33èŠ‚ Postmanè¯·æ±‚Server <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/34.html" class="sidebar-item" aria-label="ç¬¬34èŠ‚ API Server"><!--[--><!--]--> ç¬¬34èŠ‚ API Server <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/35.html" class="sidebar-item" aria-label="ç¬¬35èŠ‚ client-go å†™ k8s æ§åˆ¶å™¨"><!--[--><!--]--> ç¬¬35èŠ‚ client-go å†™ k8s æ§åˆ¶å™¨ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/36.html" class="sidebar-item" aria-label="ç¬¬ 36 èŠ‚ ä¸€äº›ç–‘é—®"><!--[--><!--]--> ç¬¬ 36 èŠ‚ ä¸€äº›ç–‘é—® <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/37.html" class="sidebar-item" aria-label="ç¬¬ 37 èŠ‚ ä¸€äº›ç–‘é—®å’Œè§£ç­” 2"><!--[--><!--]--> ç¬¬ 37 èŠ‚ ä¸€äº›ç–‘é—®å’Œè§£ç­” 2 <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/38.html" class="sidebar-item" aria-label="ç¬¬38èŠ‚ ä¸€äº›ç–‘é—®å’Œè§£ç­”3"><!--[--><!--]--> ç¬¬38èŠ‚ ä¸€äº›ç–‘é—®å’Œè§£ç­”3 <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/39.html" class="sidebar-item" aria-label="ç¬¬ 39 èŠ‚ å…³äº Kubernetes çš„ä¸€äº›ç–‘é—® 4"><!--[--><!--]--> ç¬¬ 39 èŠ‚ å…³äº Kubernetes çš„ä¸€äº›ç–‘é—® 4 <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/40.html" class="sidebar-item" aria-label="ç¬¬40èŠ‚ Istio"><!--[--><!--]--> ç¬¬40èŠ‚ Istio <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/41.html" class="sidebar-item" aria-label="ç¬¬41èŠ‚ ä»£ç ç”Ÿæˆ"><!--[--><!--]--> ç¬¬41èŠ‚ ä»£ç ç”Ÿæˆ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/42.html" class="sidebar-item" aria-label="ç¬¬ 42 èŠ‚ Kubernetes çš„å¤šç§Ÿæˆ·"><!--[--><!--]--> ç¬¬ 42 èŠ‚ Kubernetes çš„å¤šç§Ÿæˆ· <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/43.html" class="sidebar-item" aria-label="ç¬¬43èŠ‚ kubernetes çš„è´¡çŒ®å­¦ä¹ "><!--[--><!--]--> ç¬¬43èŠ‚ kubernetes çš„è´¡çŒ®å­¦ä¹  <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/44.html" class="sidebar-item" aria-label="ç¬¬44èŠ‚ kubernetes èµ„æºå†…éƒ¨ç‰ˆæœ¬å’Œå¤–éƒ¨ç‰ˆæœ¬"><!--[--><!--]--> ç¬¬44èŠ‚ kubernetes èµ„æºå†…éƒ¨ç‰ˆæœ¬å’Œå¤–éƒ¨ç‰ˆæœ¬ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/45.html" class="sidebar-item" aria-label="ç¬¬45èŠ‚ namespace é€šä¿¡é—®é¢˜"><!--[--><!--]--> ç¬¬45èŠ‚ namespace é€šä¿¡é—®é¢˜ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/46.html" class="sidebar-item" aria-label="ç¬¬46èŠ‚ æ·±æŒ–å®¹å™¨åº•å±‚æŠ€æœ¯"><!--[--><!--]--> ç¬¬46èŠ‚ æ·±æŒ–å®¹å™¨åº•å±‚æŠ€æœ¯ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/47.html" class="sidebar-item" aria-label="ç¬¬47èŠ‚ Kubernetes æ¦‚å¿µä»¥åŠæ¶æ„"><!--[--><!--]--> ç¬¬47èŠ‚ Kubernetes æ¦‚å¿µä»¥åŠæ¶æ„ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/48.html" class="sidebar-item" aria-label="ç¬¬48èŠ‚ æ·±å…¥ç†è§£Kubernetesæ§åˆ¶å¹³é¢ç»„ä»¶ï¼šETCD"><!--[--><!--]--> ç¬¬48èŠ‚ æ·±å…¥ç†è§£Kubernetesæ§åˆ¶å¹³é¢ç»„ä»¶ï¼šETCD <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/49.html" class="sidebar-item" aria-label="ç¬¬49èŠ‚ æ·±å…¥ç†è§£ Kube-APIServer"><!--[--><!--]--> ç¬¬49èŠ‚ æ·±å…¥ç†è§£ Kube-APIServer <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/50.html" class="sidebar-item" aria-label="ç¬¬50èŠ‚ Kubernetes æ§åˆ¶å¹³é¢ï¼šè°ƒåº¦å™¨"><!--[--><!--]--> ç¬¬50èŠ‚ Kubernetes æ§åˆ¶å¹³é¢ï¼šè°ƒåº¦å™¨ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/51.html" class="sidebar-item" aria-label="ç¬¬51èŠ‚  Controller Manager"><!--[--><!--]--> ç¬¬51èŠ‚  Controller Manager <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/52.html" class="sidebar-item" aria-label="ç¬¬52èŠ‚ kubectl"><!--[--><!--]--> ç¬¬52èŠ‚ kubectl <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/53.html" class="sidebar-item" aria-label="ç¬¬53èŠ‚ CRIã€CNIã€CSI åº•å±‚åˆ¨æ"><!--[--><!--]--> ç¬¬53èŠ‚ CRIã€CNIã€CSI åº•å±‚åˆ¨æ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/54.html" class="sidebar-item" aria-label="ç¬¬54èŠ‚ Kubernetes ç”Ÿå‘½å‘¨æœŸç®¡ç†å’ŒæœåŠ¡å‘ç°"><!--[--><!--]--> ç¬¬54èŠ‚ Kubernetes ç”Ÿå‘½å‘¨æœŸç®¡ç†å’ŒæœåŠ¡å‘ç° <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/55.html" class="sidebar-item" aria-label="ç¬¬55èŠ‚ æœåŠ¡å‘ç°"><!--[--><!--]--> ç¬¬55èŠ‚ æœåŠ¡å‘ç° <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/56.html" class="sidebar-item" aria-label="ç¬¬56èŠ‚ service"><!--[--><!--]--> ç¬¬56èŠ‚ service <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/57.html" class="sidebar-item" aria-label="ç¬¬57èŠ‚ kube-proxy"><!--[--><!--]--> ç¬¬57èŠ‚ kube-proxy <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/58.html" class="sidebar-item" aria-label="ç¬¬58èŠ‚ Kubernetes ç½‘ç»œ"><!--[--><!--]--> ç¬¬58èŠ‚ Kubernetes ç½‘ç»œ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/59.html" class="sidebar-item" aria-label="ç¬¬59èŠ‚ CoreDNS å’Œ Ingress"><!--[--><!--]--> ç¬¬59èŠ‚ CoreDNS å’Œ Ingress <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/60.html" class="sidebar-item" aria-label="ç¬¬60èŠ‚ ç”Ÿäº§åŒ–é›†ç¾¤çš„ç®¡ç†"><!--[--><!--]--> ç¬¬60èŠ‚ ç”Ÿäº§åŒ–é›†ç¾¤çš„ç®¡ç† <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/61.html" class="sidebar-item" aria-label="ç¬¬61èŠ‚ èŠ‚ç‚¹èµ„æºç®¡ç†ã€å¼‚å¸¸æ£€æµ‹ä»¥åŠå¸¸è§é—®é¢˜æ’æŸ¥"><!--[--><!--]--> ç¬¬61èŠ‚ èŠ‚ç‚¹èµ„æºç®¡ç†ã€å¼‚å¸¸æ£€æµ‹ä»¥åŠå¸¸è§é—®é¢˜æ’æŸ¥ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/62.html" class="sidebar-item" aria-label="ç¬¬62èŠ‚ Istio é«˜çº§æµé‡ç®¡ç†"><!--[--><!--]--> ç¬¬62èŠ‚ Istio é«˜çº§æµé‡ç®¡ç† <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/63.html" class="sidebar-item" aria-label="ç¬¬63èŠ‚ Prometheus å’Œ Grafana æ—¥å¿—æ”¶é›†æ–¹æ¡ˆ"><!--[--><!--]--> ç¬¬63èŠ‚ Prometheus å’Œ Grafana æ—¥å¿—æ”¶é›†æ–¹æ¡ˆ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/64.html" class="sidebar-item" aria-label="ç¬¬64èŠ‚ kubeadmæ¦‚è¿°ã€åŸç†ã€ä»¥åŠéƒ¨åˆ†æºç é˜…è¯»"><!--[--><!--]--> ç¬¬64èŠ‚ kubeadmæ¦‚è¿°ã€åŸç†ã€ä»¥åŠéƒ¨åˆ†æºç é˜…è¯» <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/65.html" class="sidebar-item" aria-label="ç¬¬65èŠ‚ eBPF åˆ¨æä»¥åŠæºç å­¦ä¹ "><!--[--><!--]--> ç¬¬65èŠ‚ eBPF åˆ¨æä»¥åŠæºç å­¦ä¹  <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/66.html" class="sidebar-item" aria-label="ç¬¬66èŠ‚ Kubernetes äºŒæ¬¡å¼€å‘ CRD å­¦ä¹ "><!--[--><!--]--> ç¬¬66èŠ‚ Kubernetes äºŒæ¬¡å¼€å‘ CRD å­¦ä¹  <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/67.html" class="sidebar-item" aria-label="ç¬¬67èŠ‚ K8s æ·±å…¥ç†è§£ Operator-client è¯¦è§£"><!--[--><!--]--> ç¬¬67èŠ‚ K8s æ·±å…¥ç†è§£ Operator-client è¯¦è§£ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/68.html" class="sidebar-item" aria-label="ç¬¬68èŠ‚ Reflector åŸç†"><!--[--><!--]--> ç¬¬68èŠ‚ Reflector åŸç† <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/69.html" class="sidebar-item" aria-label="ç¬¬69èŠ‚  DeltaFIFO åŸç†"><!--[--><!--]--> ç¬¬69èŠ‚  DeltaFIFO åŸç† <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/70.html" class="sidebar-item" aria-label="ç¬¬70èŠ‚ Kubernetes ç¤¾åŒºè§„èŒƒ"><!--[--><!--]--> ç¬¬70èŠ‚ Kubernetes ç¤¾åŒºè§„èŒƒ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/71.html" class="sidebar-item" aria-label="ç¬¬71èŠ‚ ProwåŠå…¶ç”Ÿæ€ç³»ç»Ÿ"><!--[--><!--]--> ç¬¬71èŠ‚ ProwåŠå…¶ç”Ÿæ€ç³»ç»Ÿ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/72.html" class="sidebar-item" aria-label="ç¬¬72èŠ‚ Prow çš„éƒ¨ç½²æ–¹æ¡ˆ"><!--[--><!--]--> ç¬¬72èŠ‚ Prow çš„éƒ¨ç½²æ–¹æ¡ˆ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/73.html" class="sidebar-item" aria-label="ç¬¬73èŠ‚ å¾®æœåŠ¡ä¸æ²»ç†ç¯‡"><!--[--><!--]--> ç¬¬73èŠ‚ å¾®æœåŠ¡ä¸æ²»ç†ç¯‡ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/74.html" class="sidebar-item" aria-label="ç¬¬74èŠ‚ Prow Bot"><!--[--><!--]--> ç¬¬74èŠ‚ Prow Bot <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/75.html" class="sidebar-item" aria-label="ç¬¬75èŠ‚ Kubernetes çš„æ–¹æ¡ˆ Review ä»¥åŠ Comment"><!--[--><!--]--> ç¬¬75èŠ‚ Kubernetes çš„æ–¹æ¡ˆ Review ä»¥åŠ Comment <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/76.html" class="sidebar-item" aria-label="ç¬¬76èŠ‚ å¼€æºçš„æ™ºèƒ½çš„ AI å®¢æœè§£å†³æ–¹æ¡ˆ"><!--[--><!--]--> ç¬¬76èŠ‚ å¼€æºçš„æ™ºèƒ½çš„ AI å®¢æœè§£å†³æ–¹æ¡ˆ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/77.html" class="sidebar-item" aria-label="ç¬¬77èŠ‚ ç®¡ç†é›†ç¾¤ä¸­çš„ TLS è®¤è¯"><!--[--><!--]--> ç¬¬77èŠ‚ ç®¡ç†é›†ç¾¤ä¸­çš„ TLS è®¤è¯ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/78.html" class="sidebar-item" aria-label="ç¬¬78èŠ‚ Kubernetes çš„ kustomize å­¦ä¹ "><!--[--><!--]--> ç¬¬78èŠ‚ Kubernetes çš„ kustomize å­¦ä¹  <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/79.html" class="sidebar-item" aria-label="ç¬¬79èŠ‚ OpenIM ä½¿ç”¨ Harbor æ­å»ºä¼ä¸šçº§é•œåƒä»“åº“"><!--[--><!--]--> ç¬¬79èŠ‚ OpenIM ä½¿ç”¨ Harbor æ­å»ºä¼ä¸šçº§é•œåƒä»“åº“ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/80.html" class="sidebar-item" aria-label="ç¬¬80èŠ‚ OpenIM Helm Charts è®¾è®¡"><!--[--><!--]--> ç¬¬80èŠ‚ OpenIM Helm Charts è®¾è®¡ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/81.html" class="sidebar-item" aria-label="ç¬¬81èŠ‚ OpenIM çš„ GitOps çš„è®¾è®¡"><!--[--><!--]--> ç¬¬81èŠ‚ OpenIM çš„ GitOps çš„è®¾è®¡ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/82.html" class="sidebar-item" aria-label="ç¬¬82èŠ‚ OpenIM Application Containerization Deployment Guide"><!--[--><!--]--> ç¬¬82èŠ‚ OpenIM Application Containerization Deployment Guide <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/83.html" class="sidebar-item" aria-label="ç¬¬83èŠ‚ Jenkins X"><!--[--><!--]--> ç¬¬83èŠ‚ Jenkins X <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/84.html" class="sidebar-item" aria-label="ç¬¬84èŠ‚ ä½¿ç”¨Dockeræˆ–Docker Composeå®‰è£…Loki"><!--[--><!--]--> ç¬¬84èŠ‚ ä½¿ç”¨Dockeræˆ–Docker Composeå®‰è£…Loki <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/85.html" class="sidebar-item" aria-label="ç¬¬85èŠ‚ ArgoCD vs FluxCD vs Jenkins Xï¼šå“ªä¸ªGitOpså®ç°å·¥å…·æœ€é€‚åˆä½ ï¼Ÿ"><!--[--><!--]--> ç¬¬85èŠ‚ ArgoCD vs FluxCD vs Jenkins Xï¼šå“ªä¸ªGitOpså®ç°å·¥å…·æœ€é€‚åˆä½ ï¼Ÿ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/86.html" class="sidebar-item" aria-label="ç¬¬86èŠ‚ OpenIM éƒ¨ç½²æŒ‡å—"><!--[--><!--]--> ç¬¬86èŠ‚ OpenIM éƒ¨ç½²æŒ‡å— <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/87.html" class="sidebar-item" aria-label="ç¬¬87èŠ‚ OpenIM ä½¿ç”¨ ArgoCD ç”Ÿäº§çº§éƒ¨ç½²"><!--[--><!--]--> ç¬¬87èŠ‚ OpenIM ä½¿ç”¨ ArgoCD ç”Ÿäº§çº§éƒ¨ç½² <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/88.html" class="sidebar-item" aria-label="ç¬¬88èŠ‚ å¹³å°å·¥ç¨‹çš„å­¦ä¹ "><!--[--><!--]--> ç¬¬88èŠ‚ å¹³å°å·¥ç¨‹çš„å­¦ä¹  <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/89.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="ç¬¬89èŠ‚ GitOps å®è·µç†è®ºï¼ˆä¸Šéƒ¨åˆ†ï¼‰"><!--[--><!--]--> ç¬¬89èŠ‚ GitOps å®è·µç†è®ºï¼ˆä¸Šéƒ¨åˆ†ï¼‰ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Cloud-Native-k8s/89.html#å‘½ä»¤ä»‹ç»" class="router-link-active router-link-exact-active sidebar-item" aria-label="å‘½ä»¤ä»‹ç»"><!--[--><!--]--> å‘½ä»¤ä»‹ç» <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/89.html#operator" class="router-link-active router-link-exact-active sidebar-item" aria-label="Operator"><!--[--><!--]--> Operator <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/89.html#ç®€å•çš„-cicd-å…¥é—¨" class="router-link-active router-link-exact-active sidebar-item" aria-label="ç®€å•çš„ CICD å…¥é—¨"><!--[--><!--]--> ç®€å•çš„ CICD å…¥é—¨ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/89.html#ç¯å¢ƒç®¡ç†" class="router-link-active router-link-exact-active sidebar-item" aria-label="ç¯å¢ƒç®¡ç†"><!--[--><!--]--> ç¯å¢ƒç®¡ç† <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/89.html#æµæ°´çº¿" class="router-link-active router-link-exact-active sidebar-item" aria-label="æµæ°´çº¿"><!--[--><!--]--> æµæ°´çº¿ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/89.html#éƒ¨ç½²ç­–ç•¥" class="router-link-active router-link-exact-active sidebar-item" aria-label="éƒ¨ç½²ç­–ç•¥"><!--[--><!--]--> éƒ¨ç½²ç­–ç•¥ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/89.html#é‡‘ä¸é›€éƒ¨ç½²" class="router-link-active router-link-exact-active sidebar-item" aria-label="é‡‘ä¸é›€éƒ¨ç½²"><!--[--><!--]--> é‡‘ä¸é›€éƒ¨ç½² <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/89.html#end-é“¾æ¥" class="router-link-active router-link-exact-active sidebar-item" aria-label="END é“¾æ¥"><!--[--><!--]--> END é“¾æ¥ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/Cloud-Native-k8s/90.html" class="sidebar-item" aria-label="ç¬¬90èŠ‚ GitOps è¿›é˜¶ç†è®º"><!--[--><!--]--> ç¬¬90èŠ‚ GitOps è¿›é˜¶ç†è®º <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/91.html" class="sidebar-item" aria-label="ç¬¬91èŠ‚ GitOps å®è·µç†è®º"><!--[--><!--]--> ç¬¬91èŠ‚ GitOps å®è·µç†è®º <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/92.html" class="sidebar-item" aria-label="ç¬¬92èŠ‚"><!--[--><!--]--> ç¬¬92èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/93.html" class="sidebar-item" aria-label="ç¬¬93èŠ‚"><!--[--><!--]--> ç¬¬93èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/94.html" class="sidebar-item" aria-label="ç¬¬94èŠ‚"><!--[--><!--]--> ç¬¬94èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/95.html" class="sidebar-item" aria-label="ç¬¬95èŠ‚"><!--[--><!--]--> ç¬¬95èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/96.html" class="sidebar-item" aria-label="ç¬¬96èŠ‚"><!--[--><!--]--> ç¬¬96èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/97.html" class="sidebar-item" aria-label="ç¬¬97èŠ‚"><!--[--><!--]--> ç¬¬97èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/98.html" class="sidebar-item" aria-label="ç¬¬98èŠ‚"><!--[--><!--]--> ç¬¬98èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/99.html" class="sidebar-item" aria-label="ç¬¬99èŠ‚"><!--[--><!--]--> ç¬¬99èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/100.md" class="sidebar-item" aria-label="100.md"><!--[--><!--]--> 100.md <!--[--><!--]--></a><!----></li><li><a class="external-link sidebar-item" href="https://nsddd.top/archives/contributors" rel="noopener noreferrer" target="_blank" aria-label="ğŸ’å¦‚ä½•å‚ä¸è´¡çŒ®ï¼Ÿ"><!--[--><!--]--> ğŸ’å¦‚ä½•å‚ä¸è´¡çŒ®ï¼Ÿ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><ul><li><a href="http://nsddd.top" target="_blank" rel="noopener noreferrer">author<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h1 id="ç¬¬89èŠ‚-gitops-å®è·µç†è®º-ä¸Šéƒ¨åˆ†" tabindex="-1"><a class="header-anchor" href="#ç¬¬89èŠ‚-gitops-å®è·µç†è®º-ä¸Šéƒ¨åˆ†" aria-hidden="true">#</a> ç¬¬89èŠ‚ GitOps å®è·µç†è®ºï¼ˆä¸Šéƒ¨åˆ†ï¼‰</h1><div><a href="88.md" style="float:left;">â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”— </a><a href="90.md" style="float:right;"> â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div><br><blockquote><p>â¤ï¸ğŸ’•ğŸ’•æ–°æ—¶ä»£æ‹¥æŠ±äº‘åŸç”Ÿï¼Œäº‘åŸç”Ÿå…·æœ‰ç¯å¢ƒç»Ÿä¸€ã€æŒ‰éœ€ä»˜è´¹ã€å³å¼€å³ç”¨ã€ç¨³å®šæ€§å¼ºç‰¹ç‚¹ã€‚Myblog:<a href="http://nsddd.top/" target="_blank" rel="noopener noreferrer">http://nsddd.top<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><hr><p>[TOC]</p><p>ä»Šå¤©æˆ‘ä»¬æ¥çœ‹çœ‹ kubernetes å’Œ gitops çš„ç†è®ºå®è·µ</p><h2 id="å‘½ä»¤ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#å‘½ä»¤ä»‹ç»" aria-hidden="true">#</a> å‘½ä»¤ä»‹ç»</h2><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹ kubectl æ”¯æŒçš„å­å‘½åï¼Œæ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ï¼š</p><ol><li><strong><code>kubectl apply</code></strong> - åº”ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºçš„å®šä¹‰ã€‚é€šå¸¸ç”¨äºéƒ¨ç½²åº”ç”¨ç¨‹åºæˆ–æ›´æ–°èµ„æºã€‚</li><li><strong><code>kubectl get</code></strong> - æ˜¾ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºçš„ä¿¡æ¯ã€‚è¿™æ˜¯æŸ¥çœ‹ Kubernetes é›†ç¾¤ä¸­èµ„æºçŠ¶æ€çš„å¸¸ç”¨å‘½ä»¤ã€‚</li><li><strong><code>kubectl describe</code></strong> - æ˜¾ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚äº‹ä»¶ã€çŠ¶æ€å’Œé…ç½®ã€‚</li><li><strong><code>kubectl delete</code></strong> - åˆ é™¤ Kubernetes é›†ç¾¤ä¸­çš„èµ„æºã€‚</li><li><strong><code>kubectl exec</code></strong> - åœ¨é›†ç¾¤ä¸­çš„å®¹å™¨é‡Œæ‰§è¡Œå‘½ä»¤ã€‚</li><li><strong><code>kubectl logs</code></strong> - æ‰“å°å®¹å™¨çš„æ—¥å¿—ã€‚</li><li><strong><code>kubectl create</code></strong> - ä»æ–‡ä»¶æˆ–æ ‡å‡†è¾“å…¥ä¸­åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºã€‚</li><li><strong><code>kubectl edit</code></strong> - ç¼–è¾‘é›†ç¾¤ä¸­çš„èµ„æºã€‚è¿™å°†æ‰“å¼€ä¸€ä¸ªç¼–è¾‘å™¨æ¥ä¿®æ”¹èµ„æºçš„é…ç½®ã€‚</li><li><strong><code>kubectl port-forward</code></strong> - å°†æœ¬åœ°ç«¯å£è½¬å‘åˆ°é›†ç¾¤ä¸­çš„ Podã€‚</li><li><strong><code>kubectl run</code></strong> - åœ¨é›†ç¾¤ä¸­è¿è¡Œä¸€ä¸ªæŒ‡å®šçš„é•œåƒã€‚</li><li><strong><code>kubectl scale</code></strong> - è°ƒæ•´èµ„æºï¼ˆå¦‚ Deploymentã€ReplicaSetï¼‰çš„å‰¯æœ¬æ•°é‡ã€‚</li><li><strong><code>kubectl rollout</code></strong> - ç®¡ç†èµ„æºçš„éƒ¨ç½²ï¼Œå¦‚æŸ¥çœ‹çŠ¶æ€ã€æš‚åœã€æ¢å¤æˆ–å›æ»šæ›´æ–°ã€‚</li></ol><p><strong>é™¤äº†ä¸Šé¢çš„å‘½ä»¤ï¼ŒKubernetes ä¸­çš„ kubectl è¿˜æ”¯æŒæ³¨è§£ï¼š</strong></p><p><code>kubectl annotate</code> å‘½ä»¤ç”¨äºç»™ Kubernetes é›†ç¾¤ä¸­çš„èµ„æºæ·»åŠ æˆ–æ›´æ–°æ³¨è§£ï¼ˆannotationsï¼‰ã€‚æ³¨è§£æ˜¯ä¸€ç§é™„åŠ ä¿¡æ¯ï¼Œå¯ä»¥ç”¨äºå­˜å‚¨éè¯†åˆ«æ€§çš„å…ƒæ•°æ®ã€‚å®ƒä»¬é€šå¸¸ç”¨äºç®¡ç†å·¥å…·ã€åº“å’Œå®¢æˆ·ç«¯ä»¥å­˜å‚¨è¾…åŠ©ä¿¡æ¯ï¼Œä¾‹å¦‚æè¿°ã€ç‰ˆæœ¬ä¿¡æ¯ç­‰ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubectl annotate <span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span>value<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="operator" tabindex="-1"><a class="header-anchor" href="#operator" aria-hidden="true">#</a> Operator</h2><p>optrator å’Œ controller æ˜¯ç»å¸¸æ··æ·†çš„ä¸¤ä¸ªæœ¯è¯­ï¼Œkubernetes operator æ˜¯ä¸€ä¸ªåº”ç”¨ç‰¹å®šçš„æ§åˆ¶å™¨ï¼Œå®ƒæ‰©å±• Kubernetes API æ¥ä»£è¡¨ Kubernetes çš„å®é™…ç”¨æˆ·å»åˆ›å»ºã€é…ç½®å’Œç®¡ç†å¤æ‚çš„æœ‰çŠ¶æ€åº”ç”¨å®ä¾‹ï¼Œå®ƒåœ¨åŸºç¡€çš„ Kubernetes èµ„æºå’Œæ§åˆ¶å™¨æ¦‚å¿µä¸Šå»å»ºç«‹çš„ã€‚</p><p><strong>æ‰€æœ‰çš„ Operator éƒ½ä½¿ç”¨ Controller çš„æ¨¡å¼ï¼Œä½†å¹¶éæ‰€æœ‰çš„ Controller éƒ½æ˜¯ Operatorã€‚</strong></p><p>é¦–å…ˆï¼Œ<strong>Controller</strong> æ˜¯ Kubernetes ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µã€‚å®ƒæ˜¯ä¸€ä¸ªå¾ªç¯ï¼Œä¸æ–­ç›‘è§†é›†ç¾¤çš„çŠ¶æ€ï¼Œå¹¶åœ¨å¿…è¦æ—¶é‡‡å–è¡ŒåŠ¨ä»¥å°†å½“å‰çŠ¶æ€è½¬å˜ä¸ºæ‰€éœ€çŠ¶æ€ã€‚Controller é€šè¿‡ä¸ Kubernetes API äº¤äº’æ¥å®ç°è¿™ä¸€ç‚¹ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª Deployment Controller è´Ÿè´£ç¡®ä¿æŒ‡å®šæ•°é‡çš„ Pod å‰¯æœ¬æ­£åœ¨è¿è¡Œã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<strong>Operator</strong> æ˜¯ä¸€ç§æ›´ç‰¹å®šçš„æ§åˆ¶å™¨ç±»å‹ã€‚Kubernetes Operator æ˜¯ä¸ºäº†ç®¡ç†å¤æ‚ã€æœ‰çŠ¶æ€çš„åº”ç”¨ç¨‹åºè€Œè®¾è®¡çš„ã€‚å®ƒä¸ä»…åŒ…å«æ ‡å‡†çš„æ§åˆ¶å™¨åŠŸèƒ½ï¼Œè¿˜æ‰©å±•äº† Kubernetes APIï¼Œä»¥ä¾¿æ›´å¥½åœ°ç®¡ç†ç‰¹å®šåº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ•°æ®åº“ Operator å¯ä»¥è´Ÿè´£éƒ¨ç½²æ•°æ®åº“ã€å¤‡ä»½æ•°æ®ã€æ¢å¤æ•°æ®ç­‰ã€‚</p><p>å…³é”®åŒºåˆ«åœ¨äºï¼š</p><ul><li><strong>Controller</strong> é€šå¸¸æ˜¯æ›´é€šç”¨çš„ï¼Œè´Ÿè´£ç®¡ç† Kubernetes ä¸­çš„æ ‡å‡†èµ„æºï¼Œå¦‚ Podsã€Deployments ç­‰ã€‚</li><li><strong>Operator</strong> æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„ Controllerï¼Œä¸“é—¨ç”¨äºç®¡ç†ç‰¹å®šçš„ã€é€šå¸¸æ˜¯å¤æ‚çš„åº”ç”¨ç¨‹åºã€‚å®ƒä»¬ä½¿ç”¨è‡ªå®šä¹‰èµ„æºï¼ˆCustom Resourcesï¼‰æ¥è¡¨ç¤ºåº”ç”¨ç¨‹åºçš„çŠ¶æ€ï¼Œå¹¶å®ç°ç‰¹å®šäºè¯¥åº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ã€‚</li></ul><p>å› æ­¤ï¼Œ<strong>æ‰€æœ‰çš„ Operator éƒ½ä½¿ç”¨ Controller çš„æ¨¡å¼ï¼Œä½†å¹¶éæ‰€æœ‰çš„ Controller éƒ½æ˜¯ Operator</strong>ã€‚è¿™æ˜¯å› ä¸ºæ‰€æœ‰ Operator éƒ½æ˜¯æ„å»ºåœ¨æ§åˆ¶å™¨æ¨¡å¼ä¹‹ä¸Šçš„ï¼Œä½†æ§åˆ¶å™¨ä¸ä¸€å®šéœ€è¦å…·æœ‰ç®¡ç†ç‰¹å®šåº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸçš„å¤æ‚é€»è¾‘å’Œæ‰©å±• API çš„èƒ½åŠ›ï¼Œè¿™æ˜¯ Operator ç‰¹æœ‰çš„ã€‚</p><h3 id="å®ç°ä¸€ä¸ª-operator" tabindex="-1"><a class="header-anchor" href="#å®ç°ä¸€ä¸ª-operator" aria-hidden="true">#</a> å®ç°ä¸€ä¸ª Operator</h3><p>æˆ‘ä»¬äº†è§£äº† Controller çš„åŸºç¡€çŸ¥è¯†ä»¥åŠ Controller å’Œ Operator ä¹‹é—´çš„åŒºåˆ«ä¹‹åï¼Œæˆ‘ä»¬å‡†å¤‡å®ç°ä¸€ä¸ª Operator ã€‚ç¤ºä¾‹ Operator å°†è§£å†³å®é™…ç¯å¢ƒä¸­çš„ä»»åŠ¡ï¼šç®¡ç†ä¸€ç»„å¸¦æœ‰é¢„é…ç½®é™æ€èµ„æºå†…å®¹çš„ Nginx æœåŠ¡å™¨ã€‚æ”¹ Operator æ”¯æŒ ç”¨æˆ· æŒ‡å®š Nginx æœåŠ¡å™¨åˆ—è¡¨ï¼Œå¹¶ä¸”é…ç½®å®‰è£…åœ¨æ¯ä¸€ä¸ªæœåŠ¡ä¸Šçš„é™æ€æ–‡ä»¶ã€‚</p><p>å¾ˆå®¹æ˜“æƒ³åˆ°çš„æ˜¯ï¼ŒConfigMap æ˜¯æˆ‘ä»¬ç”¨æ¥åšç¯å¢ƒå˜é‡ï¼Œå‘½ä»¤è¡Œå‚æ•°æˆ–è€…å·è½´çš„é…ç½®ä½¿ç”¨çš„ã€‚</p><p>Kubernetes çš„æ§åˆ¶å™¨æ˜¯å¯ä»¥ä½¿ç”¨ä»»ä½•ä¸€ç§è¯­è¨€æ¥å®ç°çš„ï¼Œæˆ‘ä»¬ç”¨ bash æ¥ç®€å•ä»‹ç»ä¸€ä¸‹</p><p>åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„ Kubernetes Operator æ¡ˆä¾‹ï¼Œå°¤å…¶æ˜¯æ¶‰åŠåˆ° Nginx æœåŠ¡å™¨ç®¡ç†çš„ Operatorï¼Œå¯ä»¥åˆ†ä¸ºå‡ ä¸ªä¸»è¦éƒ¨åˆ†ï¼šå®šä¹‰ CRDï¼ˆCustom Resource Definitionï¼‰ï¼Œç¼–å†™ Operator æ§åˆ¶å™¨ä»£ç ï¼Œä»¥åŠéƒ¨ç½²å’Œæµ‹è¯• Operatorã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ä¸€ç§æ›´å¸¸ç”¨çš„è¯­è¨€å¦‚ Goï¼Œå› ä¸ºå®ƒæä¾›äº†æ›´å¼ºå¤§çš„å·¥å…·å’Œåº“æ¥ä¸ Kubernetes API äº¤äº’ã€‚æˆ‘ä»¬å°†é€šè¿‡ä»¥ä¸‹æ­¥éª¤åˆ›å»ºä¸€ä¸ªç®€å•çš„ Operatorï¼š</p><h3 id="å®šä¹‰-crd" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰-crd" aria-hidden="true">#</a> å®šä¹‰ CRD</h3><p>é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ª CRD æ¥è¡¨ç¤º Nginx çš„é…ç½®ã€‚è¿™ä¸ª CRD å°†æè¿° Nginx å®ä¾‹çš„å±æ€§ï¼Œå¦‚ç‰ˆæœ¬ã€é…ç½®æ–‡ä»¶å†…å®¹å’Œç›¸å…³çš„é™æ€èµ„æºã€‚</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apiextensions.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> CustomResourceDefinition
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginxconfigs.example.com
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">group</span><span class="token punctuation">:</span> example.com
  <span class="token key atrule">versions</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> v1
      <span class="token key atrule">served</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">storage</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">scope</span><span class="token punctuation">:</span> Namespaced
  <span class="token key atrule">names</span><span class="token punctuation">:</span>
    <span class="token key atrule">plural</span><span class="token punctuation">:</span> nginxconfigs
    <span class="token key atrule">singular</span><span class="token punctuation">:</span> nginxconfig
    <span class="token key atrule">kind</span><span class="token punctuation">:</span> NginxConfig
    <span class="token key atrule">shortNames</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ngxconf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-ç¼–å†™-operator-æ§åˆ¶å™¨" tabindex="-1"><a class="header-anchor" href="#_2-ç¼–å†™-operator-æ§åˆ¶å™¨" aria-hidden="true">#</a> 2. ç¼–å†™ Operator æ§åˆ¶å™¨</h3><p>ä½¿ç”¨ Go è¯­è¨€ç¼–å†™ Operator æ§åˆ¶å™¨ã€‚Operator æ§åˆ¶å™¨å°†ç›‘å¬ NginxConfig èµ„æºçš„åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤äº‹ä»¶ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token comment">// å¼•å…¥å¿…è¦çš„åº“</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆå§‹åŒ–å®¢æˆ·ç«¯ã€ç›‘å¬ NginxConfig èµ„æºçš„å˜åŒ–</span>
    <span class="token comment">// å®ç°ä¸šåŠ¡é€»è¾‘ï¼šåˆ›å»º/æ›´æ–°/åˆ é™¤ Nginx å®ä¾‹</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-å¤„ç†-nginx-å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#_3-å¤„ç†-nginx-å®ä¾‹" aria-hidden="true">#</a> 3. å¤„ç† Nginx å®ä¾‹</h3><p>åœ¨æ§åˆ¶å™¨ä¸­ï¼Œå¤„ç† Nginx å®ä¾‹çš„åˆ›å»ºå’Œæ›´æ–°ã€‚å½“ä¸€ä¸ª NginxConfig èµ„æºè¢«åˆ›å»ºæˆ–æ›´æ–°æ—¶ï¼Œæ§åˆ¶å™¨ä¼šæ ¹æ®å®šä¹‰çš„è§„æ ¼æ¥è®¾ç½® Nginx Podï¼ŒåŒ…æ‹¬æ‰€éœ€çš„é…ç½®å’Œé™æ€æ–‡ä»¶ã€‚</p><h3 id="_4-åˆ›å»º-docker-é•œåƒå’Œéƒ¨ç½²-operator" tabindex="-1"><a class="header-anchor" href="#_4-åˆ›å»º-docker-é•œåƒå’Œéƒ¨ç½²-operator" aria-hidden="true">#</a> 4. åˆ›å»º Docker é•œåƒå’Œéƒ¨ç½² Operator</h3><p>å°† Operator æ‰“åŒ…æˆ Docker é•œåƒï¼Œç„¶ååœ¨ Kubernetes é›†ç¾¤ä¸­éƒ¨ç½²è¿™ä¸ªé•œåƒã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># ä½¿ç”¨åˆé€‚çš„åŸºç¡€é•œåƒ</span>
FROM golang:1.15

<span class="token comment"># æ·»åŠ  Operator ä»£ç </span>
ADD <span class="token builtin class-name">.</span> /operator
WORKDIR /operator

<span class="token comment"># ç¼–è¯‘ Operator</span>
RUN go build <span class="token parameter variable">-o</span> operator <span class="token builtin class-name">.</span>

<span class="token comment"># è®¾ç½®å¯åŠ¨å‘½ä»¤</span>
CMD <span class="token punctuation">[</span><span class="token string">&quot;./operator&quot;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>éƒ¨ç½²åˆ° Kubernetesï¼š</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>operator
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>operator
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>operator
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> operator
        <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>operator<span class="token punctuation">:</span>latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-æµ‹è¯•-operator" tabindex="-1"><a class="header-anchor" href="#_5-æµ‹è¯•-operator" aria-hidden="true">#</a> 5. æµ‹è¯• Operator</h3><p>åˆ›å»ºä¸€ä¸ª NginxConfig å®ä¾‹æ¥æµ‹è¯• Operatorï¼š</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token string">&quot;example.com/v1&quot;</span>
<span class="token key atrule">kind</span><span class="token punctuation">:</span> NginxConfig
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>nginx
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;latest&quot;</span>
  <span class="token key atrule">staticContent</span><span class="token punctuation">:</span> <span class="token string">&quot;Welcome to Nginx!&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›‘è§† Kubernetes é›†ç¾¤ï¼Œç¡®ä¿ Operator æ­£ç¡®å“åº”äº†è¿™ä¸ª NginxConfig å®ä¾‹çš„åˆ›å»ºã€‚</p><h3 id="æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹" aria-hidden="true">#</a> æ³¨æ„äº‹é¡¹</h3><ul><li><strong>é”™è¯¯å¤„ç†å’Œèµ„æºæ¸…ç†</strong>ï¼šç¡®ä¿ Operator èƒ½å¤Ÿä¼˜é›…åœ°å¤„ç†é”™è¯¯å’Œèµ„æºçš„ç”Ÿå‘½å‘¨æœŸã€‚</li><li><strong>æƒé™å’Œå®‰å…¨</strong>ï¼šç¡®ä¿ Operator æœ‰é€‚å½“çš„æƒé™æ¥ç®¡ç† Kubernetes èµ„æºï¼Œå¹¶è€ƒè™‘å®‰å…¨æ€§ã€‚</li><li><strong>æµ‹è¯•å’ŒéªŒè¯</strong>ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰ï¼Œå……åˆ†æµ‹è¯• Operator çš„è¡Œä¸ºã€‚</li></ul><h2 id="ç®€å•çš„-cicd-å…¥é—¨" tabindex="-1"><a class="header-anchor" href="#ç®€å•çš„-cicd-å…¥é—¨" aria-hidden="true">#</a> ç®€å•çš„ CICD å…¥é—¨</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ª GitOps Operator æ¥é©±åŠ¨æŒç»­äº¤ä»˜ã€‚</p><p>GitOps æ˜¯ä¸€ç§ç”¨äºæŒç»­éƒ¨ç½²çš„å®è·µï¼Œå®ƒå°† Git ä½œä¸ºçœŸå®çŠ¶æ€çš„æºã€‚åœ¨ GitOps æ¨¡å‹ä¸­ï¼Œæ‰€æœ‰çš„éƒ¨ç½²å’Œç¯å¢ƒé…ç½®éƒ½å­˜å‚¨åœ¨ Git ä»“åº“ä¸­ï¼Œè¿™æ ·åšå¯ä»¥æä¾›ç‰ˆæœ¬æ§åˆ¶ã€å®¡è®¡è·Ÿè¸ªå’Œå›æ»šèƒ½åŠ›ã€‚ä¸ºäº†å®ç° GitOpsï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª GitOps Operatorï¼Œå®ƒå°†è‡ªåŠ¨åŒ–ä» Git ä»“åº“åˆ° Kubernetes é›†ç¾¤çš„éƒ¨ç½²è¿‡ç¨‹ã€‚</p><h3 id="åˆ›å»º-gitops-operator-çš„æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#åˆ›å»º-gitops-operator-çš„æ­¥éª¤" aria-hidden="true">#</a> åˆ›å»º GitOps Operator çš„æ­¥éª¤</h3><ol><li><strong>å®šä¹‰ GitOps Operator çš„èŒè´£</strong>ï¼š <ul><li>ç›‘å¬ Git ä»“åº“çš„å˜åŒ–ã€‚</li><li>å½“ä»“åº“ä¸­çš„å®šä¹‰ï¼ˆå¦‚ Kubernetes éƒ¨ç½²æ–‡ä»¶ï¼‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè‡ªåŠ¨åº”ç”¨è¿™äº›å˜åŒ–åˆ° Kubernetes é›†ç¾¤ã€‚</li><li>ç¡®ä¿é›†ç¾¤çŠ¶æ€ä¸ Git ä»“åº“ä¸­å®šä¹‰çš„çŠ¶æ€ä¿æŒä¸€è‡´ã€‚</li></ul></li><li><strong>é€‰æ‹©å·¥å…·å’Œæ¡†æ¶</strong>ï¼š <ul><li>ä½¿ç”¨å¦‚ Operator SDK æˆ– Kubebuilder ç­‰å·¥å…·å¯ä»¥ç®€åŒ– Operator çš„åˆ›å»ºå’Œç®¡ç†è¿‡ç¨‹ã€‚</li><li>å¯¹äº Git äº¤äº’ï¼Œå¯ä»¥ä½¿ç”¨ Git å®¢æˆ·ç«¯åº“ï¼Œä¾‹å¦‚ Go-gitï¼ˆå¯¹äº Go è¯­è¨€ï¼‰ã€‚</li></ul></li><li><strong>å®ç° GitOps Operator</strong>ï¼š <ul><li>ä½¿ç”¨ CRD å®šä¹‰ GitOps é…ç½®ï¼ŒåŒ…æ‹¬ Git ä»“åº“çš„ URLã€åˆ†æ”¯ã€è·¯å¾„ç­‰ã€‚</li><li>ç¼–å†™ Operator æ§åˆ¶å™¨é€»è¾‘æ¥å¤„ç†è¿™äº›è‡ªå®šä¹‰èµ„æºï¼ŒåŒ…æ‹¬ä» Git ä»“åº“å…‹éš†ä»£ç ã€è§£æ Kubernetes é…ç½®æ–‡ä»¶ï¼Œå¹¶å°†å…¶åº”ç”¨åˆ°é›†ç¾¤ä¸­ã€‚</li></ul></li><li><strong>éƒ¨ç½²å’Œæµ‹è¯• Operator</strong>ï¼š <ul><li>å°† Operator å®¹å™¨åŒ–ï¼Œéƒ¨ç½²åˆ° Kubernetes é›†ç¾¤ã€‚</li><li>åˆ›å»º GitOps é…ç½®èµ„æºæ¥æµ‹è¯• Operatorï¼Œç¡®ä¿å®ƒèƒ½æ­£ç¡®åœ°ä» Git ä»“åº“æ‹‰å–å’Œéƒ¨ç½²é…ç½®ã€‚</li></ul></li><li><strong>æ•´åˆæŒç»­é›†æˆæµç¨‹</strong>ï¼š <ul><li>å°† GitOps Operator é›†æˆåˆ° CI æµç¨‹ä¸­ï¼Œä»¥è‡ªåŠ¨è§¦å‘é›†ç¾¤çš„æ›´æ–°ã€‚</li><li>åœ¨ä»£ç æäº¤åˆ° Git ä»“åº“åï¼ŒCI å·¥å…·ï¼ˆå¦‚ Jenkinsã€GitLab CI æˆ– GitHub Actionsï¼‰å¯ä»¥è¿è¡Œæµ‹è¯•ï¼Œåˆå¹¶ä»£ç ï¼Œè§¦å‘ Operator åº”ç”¨æ›´æ–°ã€‚</li></ul></li></ol><h3 id="å®ç°-gitops-operator" tabindex="-1"><a class="header-anchor" href="#å®ç°-gitops-operator" aria-hidden="true">#</a> å®ç° GitOps Operator</h3><ol><li><p><strong>å®šä¹‰ GitOps CRD</strong>ï¼š</p><ul><li>åˆ›å»ºä¸€ä¸ª Custom Resource Definitionï¼ˆCRDï¼‰ï¼Œç”¨äºè¡¨ç¤º GitOps é…ç½®ã€‚è¿™ä¸ª CRD åº”è¯¥åŒ…æ‹¬ Git ä»“åº“çš„åœ°å€ã€åˆ†æ”¯ã€ä»¥åŠè·¯å¾„ã€‚</li></ul><div class="language-yanl ext-yanl line-numbers-mode"><pre class="language-yanl"><code>apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: gitopsconfigs.gitops.example.com
spec:
  group: gitops.example.com
  versions:
    - name: v1
      served: true
      storage: true
  scope: Namespaced
  names:
    plural: gitopsconfigs
    singular: gitopsconfig
    kind: GitOpsConfig
    shortNames:
    - goc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>ç¼–å†™ Operator æ§åˆ¶å™¨</strong>ï¼š</p><ul><li>ä½¿ç”¨ Goã€Python æˆ–å…¶ä»–ç¼–ç¨‹è¯­è¨€ç¼–å†™ Operator æ§åˆ¶å™¨ã€‚</li><li>æ§åˆ¶å™¨åº”å½“ç›‘å¬ GitOpsConfig èµ„æºçš„å˜åŒ–ï¼Œå¹¶æ ¹æ®å…¶å®šä¹‰çš„ Git ä»“åº“ä¿¡æ¯åŒæ­¥é…ç½®ã€‚</li><li>æ§åˆ¶å™¨åº”å½“èƒ½å¤Ÿä» Git ä»“åº“å…‹éš†é…ç½®æ–‡ä»¶ï¼Œè§£æ Kubernetes éƒ¨ç½²æ–‡ä»¶ï¼Œå¹¶å°†å…¶åº”ç”¨åˆ°é›†ç¾¤ä¸­ã€‚</li></ul></li><li><p><strong>æ„å»ºå’Œéƒ¨ç½² Operator</strong>ï¼š</p><ul><li>åˆ›å»º Docker é•œåƒå¹¶å°† Operator éƒ¨ç½²åˆ° Kubernetes é›†ç¾¤ã€‚</li></ul></li><li><p><strong>æµ‹è¯• Operator</strong>ï¼š</p><ul><li>åœ¨ Git ä»“åº“ä¸­æ›´æ–° Nginx çš„é…ç½®æˆ–ç‰ˆæœ¬ã€‚</li><li>è§‚å¯Ÿ Operator æ˜¯å¦è‡ªåŠ¨å°†æ›´æ–°åº”ç”¨åˆ° Kubernetes é›†ç¾¤ã€‚</li></ul></li></ol><h3 id="æŒç»­é›†æˆ-ci-é›†æˆ" tabindex="-1"><a class="header-anchor" href="#æŒç»­é›†æˆ-ci-é›†æˆ" aria-hidden="true">#</a> æŒç»­é›†æˆ (CI) é›†æˆ</h3><ol><li><strong>è®¾ç½® CI å·¥å…·</strong>ï¼š <ul><li>é€‰æ‹©ä¸€ä¸ª CI å·¥å…·ï¼ˆå¦‚ Jenkinsã€Travis CIã€GitHub Actionsï¼‰ã€‚</li><li>åœ¨ Git ä»“åº“ä¸­è®¾ç½® CI æµç¨‹ï¼Œä»¥åœ¨ä»£ç æäº¤æ—¶è¿è¡Œæµ‹è¯•ã€‚</li></ul></li><li><strong>è‡ªåŠ¨åŒ–è§¦å‘</strong>ï¼š <ul><li>é…ç½® CI å·¥å…·åœ¨ä»£ç å˜æ›´è¢«åˆå¹¶åˆ°ä¸»åˆ†æ”¯åè‡ªåŠ¨é€šçŸ¥ Kubernetes é›†ç¾¤ï¼Œè§¦å‘ GitOps Operator åº”ç”¨æ›´æ–°ã€‚</li></ul></li></ol><h3 id="å®Œæ•´çš„-gitops-æµç¨‹" tabindex="-1"><a class="header-anchor" href="#å®Œæ•´çš„-gitops-æµç¨‹" aria-hidden="true">#</a> å®Œæ•´çš„ GitOps æµç¨‹</h3><ul><li>å¼€å‘äººå‘˜æäº¤ä»£ç åˆ° Git ä»“åº“ã€‚</li><li>CI å·¥å…·åœ¨ä»£ç åˆå¹¶åˆ°ä¸»åˆ†æ”¯æ—¶è¿è¡Œæµ‹è¯•ã€‚</li><li>GitOps Operator ç›‘å¬åˆ° Git ä»“åº“çš„å˜åŒ–ï¼Œè‡ªåŠ¨åŒæ­¥æ›´æ–°åˆ° Kubernetes é›†ç¾¤ã€‚</li></ul><h2 id="ç¯å¢ƒç®¡ç†" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒç®¡ç†" aria-hidden="true">#</a> ç¯å¢ƒç®¡ç†</h2><p>ä¸åŒçš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œä»¥åŠ Kubernetes å‘½åç©ºé—´æ˜¯å¦‚ä½•å®šä¹‰ç¯å¢ƒè¾¹ç•Œçš„ã€‚</p><p>ä¸€ä¸ªç¯å¢ƒæ˜¯ç”±ä¸‰ä¸ªåŒæ ·é‡è¦çš„éƒ¨åˆ†ç»„æˆçš„ï¼š</p><ul><li>ä»£ç </li><li>æ»¡è¶³å…ˆå†³æ¡ä»¶çš„è¿è¡Œæ—¶</li><li>é…ç½®</li></ul><p><strong>ä»£ç ï¼š</strong></p><p>ä»£ç æ˜¯åº”ç”¨ç¨‹åºæ‰§è¡Œç‰¹å®šä»»åŠ¡çš„æœºå™¨æŒ‡ä»¤ã€‚è¦æ‰§è¡Œä»£ç ï¼Œå¯èƒ½è¿˜éœ€è¦è¿è¡Œæ—¶ä¾èµ–é¡¹ã€‚ä¾‹å¦‚ï¼ŒNode.jsä»£ç éœ€è¦Node.jsäºŒè¿›åˆ¶åŒ…å’Œå…¶ä»–NPMåŒ…æ‰èƒ½æˆåŠŸåœ°æ‰§è¡Œã€‚å¯¹äºKubernetesï¼Œæ‰€æœ‰è¿è¡Œæ—¶ä¾èµ–é¡¹å’Œä»£ç éƒ½æ‰“åŒ…ä¸ºä¸€ä¸ªå¯éƒ¨ç½²å•å…ƒï¼ˆåˆåDockeræ˜ åƒï¼‰ï¼Œå¹¶é€šè¿‡Dockerå®ˆæŠ¤è¿›ç¨‹è¿›è¡Œç¼–æ’ã€‚åº”ç”¨ç¨‹åºçš„Dockeræ˜ åƒå¯ä»¥æ”¾å¿ƒåœ°åœ¨ä»»ä½•ç¯å¢ƒä¸­è¿è¡Œï¼Œä»å¼€å‘äººå‘˜çš„ç¬”è®°æœ¬ç”µè„‘åˆ°åœ¨äº‘ä¸­è¿è¡Œçš„ç”Ÿäº§é›†ç¾¤ï¼Œå› ä¸ºæ˜ åƒå°è£…äº†ä»£ç å’Œæ‰€æœ‰ä¾èµ–å…³ç³»ï¼Œæ¶ˆé™¤äº†ç¯å¢ƒä¹‹é—´æ½œåœ¨çš„ä¸å…¼å®¹æ€§ã€‚</p><p>åœ¨è½¯ä»¶éƒ¨ç½²ä¸­ï¼Œç¯å¢ƒæ˜¯éƒ¨ç½²å’Œæ‰§è¡Œä»£ç çš„åœ°æ–¹ã€‚åœ¨è½¯ä»¶å¼€å‘çš„ç”Ÿå­˜å‘¨æœŸä¸­ï¼Œä¸åŒçš„ç¯å¢ƒæœåŠ¡äºä¸åŒçš„ç›®çš„ã€‚ä¾‹å¦‚ï¼Œæœ¬åœ°å¼€å‘ç¯å¢ƒï¼ˆåˆåç¬”è®°æœ¬ç”µè„‘ï¼‰æ˜¯å·¥ç¨‹å¸ˆå¯ä»¥åˆ›å»ºã€æµ‹è¯•å’Œè°ƒè¯•æ–°ä»£ç ç‰ˆæœ¬çš„åœ°æ–¹ã€‚åœ¨å·¥ç¨‹å¸ˆå®Œæˆä»£ç å¼€å‘åï¼Œä¸‹ä¸€æ­¥æ˜¯å°†æ›´æ”¹æäº¤åˆ°Gitï¼Œå¹¶å¼€å§‹éƒ¨ç½²åˆ°ä¸åŒçš„ç¯å¢ƒä¸­è¿›è¡Œé›†æˆæµ‹è¯•å’Œæœ€ç»ˆçš„äº§å“å‘å¸ƒã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºæŒç»­é›†æˆ/æŒç»­éƒ¨ç½²ï¼ˆCI/CDï¼‰ï¼Œé€šå¸¸ç”±ä»¥ä¸‹ç¯å¢ƒç»„æˆï¼š</p><ul><li>QA</li><li>E2E</li><li>é˜¶æ®µå’Œäº§å“</li></ul><p>åœ¨QAç¯å¢ƒä¸­ï¼Œæ–°ä»£ç å°†æ ¹æ®ç¡¬ä»¶ã€æ•°æ®å’Œå…¶ä»–ç±»ä¼¼äºç”Ÿäº§çš„ä¾èµ–é¡¹è¿›è¡Œæµ‹è¯•ï¼Œä»¥ç¡®ä¿æœåŠ¡çš„æ­£ç¡®æ€§ã€‚å¦‚æœæ‰€æœ‰çš„æµ‹è¯•éƒ½é€šè¿‡äº†QAï¼Œæ–°çš„ä»£ç å°†è¢«æå‡åˆ°E2Eç¯å¢ƒï¼Œä½œä¸ºå…¶ä»–é¢„å‘å¸ƒæœåŠ¡æµ‹è¯•/é›†æˆçš„ç¨³å®šç¯å¢ƒã€‚QAå’ŒE2Eç¯å¢ƒä¹Ÿç§°ä¸ºé¢„ç”Ÿäº§ï¼ˆpreprodï¼‰ç¯å¢ƒï¼Œå› ä¸ºå®ƒä»¬ä¸æ‰¿è½½ç”Ÿäº§æµé‡æˆ–ä½¿ç”¨ç”Ÿäº§æ•°æ®ã€‚å½“ä¸€ä¸ªæ–°ç‰ˆæœ¬çš„ä»£ç å‡†å¤‡å¥½ç”¨äºç”Ÿäº§å‘å¸ƒæ—¶ï¼Œä»£ç é€šå¸¸ä¼šé¦–å…ˆéƒ¨ç½²åœ¨Stageç¯å¢ƒä¸­ï¼ˆå®ƒå¯ä»¥è®¿é—®å®é™…çš„ç”Ÿäº§ä¾èµ–ï¼‰ï¼Œä»¥ç¡®ä¿åœ¨ä»£ç è¿›å…¥Prodç¯å¢ƒä¹‹å‰ï¼Œæ‰€æœ‰çš„ç”Ÿäº§ä¾èµ–éƒ½å·²åˆ°ä½ã€‚ä¾‹å¦‚ï¼Œæ–°ä»£ç å¯èƒ½éœ€è¦ä¸€ä¸ªæ–°çš„æ•°æ®åº“æ¨¡å¼æ›´æ–°ï¼Œè€ŒStageç¯å¢ƒå¯ä»¥ç”¨æ¥éªŒè¯æ–°æ¨¡å¼æ˜¯å¦æ­£ç¡®ã€‚é…ç½®åªå°†æµ‹è¯•æµé‡å®šå‘åˆ°Stageç¯å¢ƒï¼Œè¿™æ ·æ–°ä»£ç å¼•å…¥çš„ä»»ä½•é—®é¢˜éƒ½ä¸ä¼šå½±å“å®é™…å®¢æˆ·ã€‚ä½†æ˜¯ï¼ŒStageç¯å¢ƒé€šå¸¸é…ç½®ä¸ºä½¿ç”¨â€œçœŸå®çš„â€ç”Ÿäº§æ•°æ®åº“æ“ä½œã€‚åœ¨Stageç¯å¢ƒä¸­è¿›è¡Œçš„æµ‹è¯•å¿…é¡»ç»è¿‡ä»”ç»†çš„å®¡æŸ¥ï¼Œä»¥ç¡®ä¿å®ƒä»¬åœ¨ç”Ÿäº§ä¸­æ˜¯å®‰å…¨çš„ã€‚æ‰€æœ‰æµ‹è¯•åœ¨Stageä¸­é€šè¿‡åï¼Œæ–°ä»£ç å°†æœ€ç»ˆéƒ¨ç½²åˆ°Prodä¸­ï¼Œç”¨äºå®æ—¶ç”Ÿäº§æµé‡ã€‚å› ä¸ºStageå’ŒProdéƒ½å¯ä»¥è®¿é—®ç”Ÿäº§æ•°æ®ï¼Œæ‰€ä»¥å®ƒä»¬éƒ½è¢«è®¤ä¸ºæ˜¯ç”Ÿäº§ç¯å¢ƒã€‚</p><p><strong>å‘½åç©ºé—´ç®¡ç†</strong></p><p>å‘½åç©ºé—´æ˜¯Kubernetesä¸­æ”¯æŒç¯å¢ƒçš„è‡ªç„¶æ„é€ ã€‚å®ƒä»¬å…è®¸åœ¨å¤šä¸ªå›¢é˜Ÿæˆ–é¡¹ç›®ä¹‹é—´åˆ’åˆ†ç¾¤é›†èµ„æºã€‚å‘½åç©ºé—´ä¸ºå”¯ä¸€èµ„æºå‘½åã€èµ„æºé…é¢ã€RBACã€ç¡¬ä»¶éš”ç¦»å’Œç½‘ç»œé…ç½®æä¾›äº†èŒƒå›´ï¼š</p><p><code>Kubernetes å‘½åç©ºé—´~=ç¯å¢ƒ</code></p><p>åœ¨æ¯ä¸ªå‘½åç©ºé—´ä¸­ï¼Œåº”ç”¨ç¨‹åºå®ä¾‹ï¼ˆåˆåPodï¼‰æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªDockerå®¹å™¨ï¼Œåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­æ³¨å…¥äº†ç¯å¢ƒç‰¹å®šçš„åº”ç”¨ç¨‹åºå±æ€§ã€‚è¿™äº›åº”ç”¨ç¨‹åºå±æ€§å®šä¹‰äº†ç¯å¢ƒåº”è¯¥å¦‚ä½•è¿è¡Œï¼ˆæ¯”å¦‚feature flagï¼‰ä»¥åŠåº”è¯¥ä½¿ç”¨å“ªäº›å¤–éƒ¨ä¾èµ–ï¼ˆæ¯”å¦‚æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ï¼‰ã€‚é™¤äº†åº”ç”¨ç¨‹åºPodä¹‹å¤–ï¼ŒNamespaceè¿˜å¯ä»¥åŒ…å«æä¾›ç¯å¢ƒæ‰€éœ€çš„é™„åŠ åŠŸèƒ½çš„å…¶ä»–Podã€‚</p><p>Namespaceç›¸å½“äºKubernetesä¸­çš„ç¯å¢ƒã€‚å‘½åç©ºé—´å¯ä»¥ç”±Podsï¼ˆåº”ç”¨ç¨‹åºå®ä¾‹ï¼‰ã€ç½‘ç»œç­–ç•¥ï¼ˆå…¥å£/å‡ºå£ï¼‰å’ŒRBACï¼ˆè®¿é—®æ§åˆ¶ï¼‰ï¼Œä»¥åŠåœ¨å•ç‹¬çš„Podä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºä¾èµ–ã€‚</p><p>RBACæ˜¯ä¸€ç§æ ¹æ®ä¼ä¸šå†…å„ä¸ªç”¨æˆ·çš„è§’è‰²æ¥ç®¡ç†å¯¹è®¡ç®—æœºæˆ–ç½‘ç»œèµ„æºçš„è®¿é—®çš„æ–¹æ³•ã€‚åœ¨Kubernetesä¸­ï¼Œè§’è‰²åŒ…å«è¡¨ç¤ºä¸€ç»„æƒé™çš„è§„åˆ™ã€‚æƒé™çº¯ç²¹æ˜¯åŠ æ€§çš„ï¼ˆæ²¡æœ‰å¦å®šè§„åˆ™ï¼‰ã€‚è§’è‰²å¯ä»¥ä½¿ç”¨è§’è‰²åœ¨å‘½åç©ºé—´ä¸­å®šä¹‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Cluster Roleåœ¨é›†ç¾¤èŒƒå›´å†…å®šä¹‰ã€‚å‘½åç©ºé—´è¿˜å¯ä»¥å…·æœ‰ä¸“ç”¨çš„ç¡¬ä»¶å’Œç½‘ç»œç­–ç•¥ï¼Œä»¥ä¾¿æ ¹æ®åº”ç”¨ç¨‹åºéœ€æ±‚å¯¹å…¶é…ç½®è¿›è¡Œä¼˜åŒ–ã€‚ä¾‹å¦‚ï¼ŒCPUå¯†é›†å‹åº”ç”¨ç¨‹åºå¯ä»¥éƒ¨ç½²åœ¨å…·æœ‰ä¸“ç”¨å¤šæ ¸ç¡¬ä»¶çš„å‘½åç©ºé—´ä¸­ã€‚å¦ä¸€ä¸ªéœ€è¦é‡ç£ç›˜çš„æœåŠ¡æˆ‘/Oå¯ä»¥éƒ¨ç½²åœ¨å…·æœ‰é«˜é€ŸSSDçš„å•ç‹¬å‘½åç©ºé—´ä¸­ã€‚æ¯ä¸ªåç§°ç©ºé—´è¿˜å¯ä»¥å®šä¹‰è‡ªå·±çš„ç½‘ç»œç­–ç•¥ï¼ˆå…¥å£/å‡ºå£ï¼‰ï¼Œä»¥é™åˆ¶è·¨åç§°ç©ºé—´æµé‡æˆ–ä½¿ç”¨éé™å®šDNSåç§°è®¿é—®é›†ç¾¤ä¸­çš„å…¶ä»–åç§°ç©ºé—´ã€‚</p><h3 id="ç¯å¢ƒæ¨¡æ‹Ÿ" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒæ¨¡æ‹Ÿ" aria-hidden="true">#</a> ç¯å¢ƒæ¨¡æ‹Ÿ</h3><p>æ¨¡æ‹Ÿä¸¤ä¸ªç¯å¢ƒï¼Œåˆ†åˆ«æ˜¯ æµ‹è¯•ç¯å¢ƒï¼ˆqa) ä»¥åŠéç”Ÿäº§ e2e ç¯å¢ƒï¼ˆe2e)</p><p>é¦–å…ˆï¼Œä¸ºæ‚¨çš„æ¯ä¸ªæ¥å®¾ç°¿ç¯å¢ƒåˆ›å»ºguestbook-qaå’Œguestbook-e2eå‘½åç©ºé—´:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl create namespace guestbook-qa
$ kubectl create namespace guestbook-e2
$ kubectl get namespaces
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†ç•™è¨€ç°¿åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°ç•™è¨€ç°¿-qaç¯å¢ƒ:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">K8S_GUESTBOOK_URL</span><span class="token operator">=</span>https://raw.githubusercontent.com/kubernetes/website/main/content/zh-cn/examples/application/guestbook/redis-leader-deployment.yaml
$ kubectl apply <span class="token parameter variable">-n</span> guestbook-qa <span class="token parameter variable">-f</span> <span class="token variable">${K8S_GUESTBOOK_URL}</span>/redis-master-deployment.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥è¯¢ Pod åˆ—è¡¨ä»¥éªŒè¯ Redis Pod æ˜¯å¦æ­£åœ¨è¿è¡Œï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl get pods <span class="token parameter variable">-n</span> guestbook-qa
NAME                            READY   STATUS    RESTARTS   AGE
redis-leader-5596fc7b68-wxjvp   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          77s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ Redis Deployment ä¸­çš„æ—¥å¿—ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl logs <span class="token parameter variable">-f</span> deployment/redis-leader <span class="token parameter variable">-n</span> guestbook-qa 
<span class="token number">1</span>:C <span class="token number">26</span> Nov <span class="token number">2023</span> 05:57:07.309 <span class="token comment"># oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo</span>
<span class="token number">1</span>:C <span class="token number">26</span> Nov <span class="token number">2023</span> 05:57:07.309 <span class="token comment"># Redis version=6.0.5, bits=64, commit=00000000, modified=0, pid=1, just started</span>
<span class="token number">1</span>:C <span class="token number">26</span> Nov <span class="token number">2023</span> 05:57:07.309 <span class="token comment"># Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf</span>
<span class="token number">1</span>:M <span class="token number">26</span> Nov <span class="token number">2023</span> 05:57:07.311 * Running <span class="token assign-left variable">mode</span><span class="token operator">=</span>standalone, <span class="token assign-left variable">port</span><span class="token operator">=</span><span class="token number">6379</span>.
<span class="token number">1</span>:M <span class="token number">26</span> Nov <span class="token number">2023</span> 05:57:07.311 <span class="token comment"># Server initialized</span>
<span class="token number">1</span>:M <span class="token number">26</span> Nov <span class="token number">2023</span> 05:57:07.311 <span class="token comment"># WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command &#39;echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled&#39; as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.</span>
<span class="token number">1</span>:M <span class="token number">26</span> Nov <span class="token number">2023</span> 05:57:07.311 * Ready to accept connections
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åˆ›å»º-redis-é¢†å¯¼è€…æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#åˆ›å»º-redis-é¢†å¯¼è€…æœåŠ¡" aria-hidden="true">#</a> åˆ›å»º Redis é¢†å¯¼è€…æœåŠ¡</h3><p>ç•™è¨€æ¿åº”ç”¨éœ€è¦å¾€ Redis ä¸­å†™æ•°æ®ã€‚å› æ­¤ï¼Œéœ€è¦åˆ›å»º <a href="https://kubernetes.io/zh-cn/docs/concepts/services-networking/service/" target="_blank" rel="noopener noreferrer">Service<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ¥è½¬å‘ Redis Pod çš„æµé‡ã€‚Service å®šä¹‰äº†è®¿é—® Pod çš„ç­–ç•¥ã€‚</p><p>ç•™è¨€æ¿åº”ç”¨éœ€è¦å¾€ Redis ä¸­å†™æ•°æ®ã€‚å› æ­¤ï¼Œéœ€è¦åˆ›å»º <a href="https://kubernetes.io/zh-cn/docs/concepts/services-networking/service/" target="_blank" rel="noopener noreferrer">Service<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æ¥è½¬å‘ Redis Pod çš„æµé‡ã€‚Service å®šä¹‰äº†è®¿é—® Pod çš„ç­–ç•¥ã€‚</p><p><a href="https://raw.githubusercontent.com/kubernetes/website/main/content/zh-cn/examples/application/guestbook/redis-leader-service.yaml" target="_blank" rel="noopener noreferrer"><code>application/guestbook/redis-leader-service.yaml</code><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># æ¥æºï¼šhttps://cloud.google.com/kubernetes-engine/docs/tutorials/guestbook</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>leader
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">role</span><span class="token punctuation">:</span> leader
    <span class="token key atrule">tier</span><span class="token punctuation">:</span> backend
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">6379</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">role</span><span class="token punctuation">:</span> leader
    <span class="token key atrule">tier</span><span class="token punctuation">:</span> backend
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p>ä½¿ç”¨ä¸‹é¢çš„ <code>redis-leader-service.yaml</code> æ–‡ä»¶åˆ›å»º Redis çš„æœåŠ¡ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl apply <span class="token parameter variable">-f</span> ./guestbook/redis-leader-service.yaml  <span class="token parameter variable">-n</span> guestbook-qa
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>æŸ¥è¯¢æœåŠ¡åˆ—è¡¨éªŒè¯ Redis æœåŠ¡æ˜¯å¦æ­£åœ¨è¿è¡Œï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl get <span class="token parameter variable">-n</span> guestbook-qa <span class="token function">service</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å“åº”åº”è¯¥ä¸æ­¤ç±»ä¼¼ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>NAME           TYPE        CLUSTER-IP    EXTERNAL-IP   PORT(S)    AGE
redis-leader   ClusterIP   10.68.10.77   &lt;none&gt;        6379/TCP   3s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p><strong>è¯´æ˜ï¼š</strong></p><p>è¿™ä¸ªæ¸…å•æ–‡ä»¶åˆ›å»ºäº†ä¸€ä¸ªåä¸º <code>redis-leader</code> çš„ Serviceï¼Œ å…¶ä¸­åŒ…å«ä¸€ç»„ä¸å‰é¢å®šä¹‰çš„æ ‡ç­¾åŒ¹é…çš„æ ‡ç­¾ï¼Œå› æ­¤æœåŠ¡å°†ç½‘ç»œæµé‡è·¯ç”±åˆ° Redis Pod ä¸Šã€‚</p><h3 id="è®¾ç½®-redis-è·Ÿéšè€…" tabindex="-1"><a class="header-anchor" href="#è®¾ç½®-redis-è·Ÿéšè€…" aria-hidden="true">#</a> è®¾ç½® Redis è·Ÿéšè€…</h3><p>å°½ç®¡ Redis é¢†å¯¼è€…åªæœ‰ä¸€ä¸ª Podï¼Œä½ å¯ä»¥é€šè¿‡æ·»åŠ è‹¥å¹² Redis è·Ÿéšè€…æ¥å°†å…¶é…ç½®ä¸ºé«˜å¯ç”¨çŠ¶æ€ï¼Œ ä»¥æ»¡è¶³æµé‡éœ€æ±‚ã€‚</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># æ¥æºï¼šhttps://cloud.google.com/kubernetes-engine/docs/tutorials/guestbook</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>follower
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">role</span><span class="token punctuation">:</span> follower
    <span class="token key atrule">tier</span><span class="token punctuation">:</span> backend
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> redis
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> redis
        <span class="token key atrule">role</span><span class="token punctuation">:</span> follower
        <span class="token key atrule">tier</span><span class="token punctuation">:</span> backend
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> follower
        <span class="token key atrule">image</span><span class="token punctuation">:</span> gcr.io/google_samples/gb<span class="token punctuation">-</span>redis<span class="token punctuation">-</span>follower<span class="token punctuation">:</span>v2
        <span class="token key atrule">resources</span><span class="token punctuation">:</span>
          <span class="token key atrule">requests</span><span class="token punctuation">:</span>
            <span class="token key atrule">cpu</span><span class="token punctuation">:</span> 100m
            <span class="token key atrule">memory</span><span class="token punctuation">:</span> 100Mi
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">6379</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p>åº”ç”¨ä¸‹é¢çš„ <code>redis-follower-deployment.yaml</code> æ–‡ä»¶åˆ›å»º Redis Deploymentï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl apply <span class="token parameter variable">-f</span> ./guestbook/redis-follower-deployment.yaml <span class="token parameter variable">-n</span> guestbook-qa
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>é€šè¿‡æŸ¥è¯¢ Pods åˆ—è¡¨ï¼ŒéªŒè¯ä¸¤ä¸ª Redis è·Ÿéšè€…å‰¯æœ¬åœ¨è¿è¡Œï¼š</p></li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl get  <span class="token parameter variable">-n</span> guestbook-qa pods
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ¥ä¸‹æ¥åŒæ ·ä¹Ÿæ˜¯æµ‹è¯• guestbook-qa çš„ç¯å¢ƒæ˜¯å¦æ˜¯ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸã€‚</p><p>ç„¶ååŒæ ·æ˜¯å§ guestbook-qa æ™‹çº§åˆ° guestbook-e2e ç¯å¢ƒï¼Œ</p><p>ç„¶ååŒæ ·çš„æµ‹è¯• guestbook-e2e ç¯å¢ƒæ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p><h3 id="ç½‘ç»œéš”ç¦»" tabindex="-1"><a class="header-anchor" href="#ç½‘ç»œéš”ç¦»" aria-hidden="true">#</a> ç½‘ç»œéš”ç¦»</h3><p>å®šä¹‰éƒ¨ç½²åº”ç”¨ç¨‹åºçš„ç¯å¢ƒçš„ä¸€ä¸ªå…³é”®æ–¹é¢æ˜¯ç¡®ä¿åªæœ‰ç›®æ ‡å®¢æˆ·ç«¯å¯ä»¥è®¿é—®ç‰¹å®šçš„ç¯å¢ƒã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å‘½åç©ºé—´éƒ½å¯ä»¥è¿æ¥åˆ°åœ¨æ‰€æœ‰å…¶ä»–å‘½åç©ºé—´ä¸­è¿è¡Œçš„æœåŠ¡ã€‚ä½†æ˜¯å¯¹äºä¸¤ä¸ªä¸åŒçš„ç¯å¢ƒï¼Œæ¯”å¦‚QAå’ŒProdï¼Œæ‚¨ä¸å¸Œæœ›è¿™äº›ç¯å¢ƒä¹‹é—´å‘ç”Ÿä¸²æ‰°ã€‚å¹¸è¿çš„æ˜¯ï¼Œå¯ä»¥åº”ç”¨å‘½åç©ºé—´ç½‘ç»œç­–ç•¥æ¥é™åˆ¶å‘½åç©ºé—´ä¹‹é—´çš„ç½‘ç»œé€šä¿¡ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°ä¸¤ä¸ªä¸åŒçš„åç§°ç©ºé—´ï¼Œå¹¶ä½¿ç”¨ç½‘ç»œç­–ç•¥æ§åˆ¶è®¿é—®ã€‚æˆ‘ä»¬å°†ä»‹ç»åœ¨ä¸¤ä¸ªä¸åŒçš„å‘½åç©ºé—´ä¸­éƒ¨ç½²æœåŠ¡çš„æ­¥éª¤ã€‚æ‚¨è¿˜å°†ä¿®æ”¹ç½‘ç»œç­–ç•¥å¹¶è§‚å¯Ÿå…¶æ•ˆæœã€‚</p><blockquote><p>Egress traffic is network traffic that begins inside a network and pro-EGRESSceeds through its routers to a destination somewhere outside the network.</p></blockquote><p>å‡ºå£æµé‡æ˜¯ä»ç½‘ç»œå†…éƒ¨å¼€å§‹ï¼Œç»è¿‡è·¯ç”±å™¨åˆ°è¾¾ç½‘ç»œå¤–éƒ¨æŸä¸ªç›®çš„åœ°çš„ç½‘ç»œæµé‡ã€‚</p><blockquote><p>Ingress traffic is composed of all the data communications and net-INGRESSwork traffic originating from external networks.</p></blockquote><p>å…¥å£æµé‡ç”±æ¥è‡ªå¤–éƒ¨ç½‘ç»œçš„æ‰€æœ‰æ•°æ®é€šä¿¡å’Œç½‘ç»œ-INGRESSå·¥ä½œæµé‡ç»„æˆã€‚</p><blockquote><p>Before you begin, verify thatVERIFY KUBERNETES CLUSTER CONNECTIONyou have correctly configured your KUBECONFIG environment variable topoint to the desired Kubernetes cluster. Please refer to appendix A for more information.</p></blockquote><p>å¼€å§‹ä¹‹å‰ï¼Œè¯·éªŒè¯æ‚¨æ˜¯å¦å·²æ­£ç¡®é…ç½®KUBERNETES CLUSTER CONNECTIONç¯å¢ƒå˜é‡ä»¥æŒ‡å‘æ‰€éœ€çš„Kubernetesç¾¤é›†ã€‚è¯¦æƒ…è¯·å‚é˜…é™„å½•Aã€‚</p><p>å¹¶ä¸”é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ä¸€ä¸ªå‘½åç©ºé—´ä¸­è¿è¡Œçš„ Pod å¯ä»¥å¾€ä¸åŒçš„å‘½åç©ºé—´ä¸­è¿è¡Œçš„å…¶ä»– Pod å‘é€ç½‘ç»œæµé‡ï¼Œæˆ‘ä»¬ä¸‹é¢é€šè¿‡ä» qa å‘½åç©ºé—´çš„ Pod åˆ° prod å‘½åç©ºé—´çš„ Nginx pod æ‰§è¡Œä¸€æ¡ url å‘½ä»¤æ¥è¯æ˜è¿™ä¸€ç‚¹ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl describe pod web <span class="token parameter variable">-n</span> prod <span class="token operator">|</span> <span class="token function">grep</span> IPz
$ kubectl <span class="token parameter variable">-n</span> qa <span class="token builtin class-name">exec</span> curl-pod -- <span class="token function">curl</span> <span class="token parameter variable">-I</span> http://<span class="token operator">&lt;</span>web pod ip<span class="token operator">&gt;</span>
$ kubectl <span class="token parameter variable">-n</span> prod <span class="token builtin class-name">exec</span> curl-pod -- <span class="token function">curl</span> <span class="token parameter variable">-I</span> http://<span class="token operator">&lt;</span>web pod ip<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šå¸¸ï¼Œæ‚¨æ°¸è¿œä¸å¸Œæœ›qaå’Œprodç¯å¢ƒä¹‹é—´å­˜åœ¨ç›¸äº’ä¾èµ–æ€§ã€‚å¦‚æœåº”ç”¨ç¨‹åºçš„ä¸¤ä¸ªå®ä¾‹éƒ½è¢«æ­£ç¡®é…ç½®ï¼Œé‚£ä¹ˆqaå’Œprodä¹‹é—´å°±ä¸ä¼šæœ‰ä¾èµ–å…³ç³»ï¼Œä½†æ˜¯å¦‚æœqaçš„é…ç½®ä¸­æœ‰ä¸€ä¸ªbugï¼Œå®ƒæ„å¤–åœ°å‘prodå‘é€äº†æµé‡ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæ‚¨å¯èƒ½ä¼šæŸåç”Ÿäº§æ•°æ®ã€‚ç”šè‡³åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¦‚æœä¸€ä¸ªç¯å¢ƒæ‰¿è½½æ‚¨çš„è¥é”€ç«™ç‚¹ï¼Œè€Œå¦ä¸€ä¸ªç¯å¢ƒæ‰¿è½½åŒ…å«æ•æ„Ÿæ•°æ®çš„HRåº”ç”¨ç¨‹åºï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿåœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œé˜»æ­¢åç§°ç©ºé—´ä¹‹é—´çš„ç½‘ç»œæµé‡æˆ–è€…åªå…è®¸ç‰¹å®šåç§°ç©ºé—´ä¹‹é—´çš„æµé‡å¯èƒ½æ˜¯åˆé€‚çš„ã€‚è¿™å¯ä»¥é€šè¿‡å‘åç§°ç©ºé—´æ·»åŠ ç½‘ç»œç­–ç•¥æ¥å®Œæˆã€‚è®©æˆ‘ä»¬åœ¨æ¯ä¸ªåç§°ç©ºé—´ä¸­ä¸ºæˆ‘ä»¬çš„Podsæ·»åŠ ä¸€ä¸ªç½‘ç»œç­–ç•¥:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl apply <span class="token parameter variable">-f</span> block-other-namespace.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="git-ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#git-ç­–ç•¥" aria-hidden="true">#</a> Git ç­–ç•¥</h3><p>GitOps ä¸­é’ˆå¯¹ Git çš„ä¸‰ç§æƒ…å†µï¼Œåˆ†åˆ«æ˜¯å•åˆ†æ”¯ï¼ˆå¤šç›®å½•ï¼‰ï¼Œå¤šåˆ†æ”¯ï¼Œå¤šä»£ç åº“ä¸å•ä¸€ä»£ç åº“</p><ol><li><strong>å•åˆ†æ”¯ï¼ˆå¤šç›®å½•ï¼‰ç­–ç•¥</strong>ï¼šè¿™ç§ç­–ç•¥ä½¿ç”¨å•ä¸€çš„Gitåˆ†æ”¯æ¥ç®¡ç†æ‰€æœ‰çš„é…ç½®æ–‡ä»¶ï¼Œä½†å°†ä¸åŒçš„ç¯å¢ƒï¼ˆå¦‚å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ï¼‰çš„é…ç½®æ”¾ç½®åœ¨ä¸åŒçš„ç›®å½•ä¸­ã€‚è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ç®€å•æ˜“ç®¡ç†ï¼Œå› ä¸ºæ‰€æœ‰ç¯å¢ƒçš„é…ç½®éƒ½åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚ä½†ç¼ºç‚¹æ˜¯å¯èƒ½ä¼šå› ä¸ºé…ç½®çš„ç´§å¯†è€¦åˆè€Œå¯¼è‡´é—®é¢˜çš„ä¼ æ’­ï¼Œä¾‹å¦‚ï¼Œé”™è¯¯çš„é…ç½®å¯èƒ½ä¼šå½±å“åˆ°å¤šä¸ªç¯å¢ƒã€‚</li><li><strong>å¤šåˆ†æ”¯ç­–ç•¥</strong>ï¼šåœ¨è¿™ç§ç­–ç•¥ä¸­ï¼Œä¸ºä¸åŒçš„ç¯å¢ƒï¼ˆå¦‚å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ï¼‰åˆ›å»ºä¸åŒçš„Gitåˆ†æ”¯ã€‚è¿™æ ·åšçš„ä¼˜ç‚¹æ˜¯å¯ä»¥æ›´å¥½åœ°éš”ç¦»ä¸åŒç¯å¢ƒçš„é…ç½®ï¼Œå‡å°‘é”™è¯¯é…ç½®å¯¹å…¶ä»–ç¯å¢ƒçš„å½±å“ã€‚ç¼ºç‚¹æ˜¯éœ€è¦æ›´å¤šçš„åˆ†æ”¯ç®¡ç†å·¥ä½œï¼Œå¹¶ä¸”åœ¨åˆ†æ”¯ä¹‹é—´åŒæ­¥æ›´æ”¹å¯èƒ½ä¼šå˜å¾—å¤æ‚ã€‚</li><li><strong>å¤šä»£ç åº“ä¸å•ä¸€ä»£ç åº“</strong>ï¼šè¿™é‡Œçš„åŒºåˆ«åœ¨äºæ˜¯å°†æ‰€æœ‰çš„é…ç½®é›†ä¸­å­˜å‚¨åœ¨ä¸€ä¸ªä»£ç åº“ä¸­ï¼Œè¿˜æ˜¯å°†å®ƒä»¬åˆ†æ•£åœ¨å¤šä¸ªä»£ç åº“ä¸­ã€‚å•ä¸€ä»£ç åº“çš„ä¼˜ç‚¹æ˜¯é›†ä¸­ç®¡ç†å’Œä¸€è‡´æ€§ï¼Œè€Œå¤šä»£ç åº“çš„ä¼˜ç‚¹åˆ™æ˜¯æä¾›äº†æ›´é«˜çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹æˆ–å¤æ‚çš„é¡¹ç›®ä¸­ã€‚</li></ol><p>æ¯ç§ç­–ç•¥éƒ½æœ‰å…¶ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Œé€‰æ‹©å“ªä¸€ç§å–å†³äºç»„ç»‡çš„éœ€æ±‚ã€å›¢é˜Ÿçš„å¤§å°ã€é¡¹ç›®çš„å¤æ‚æ€§ä»¥åŠå¯¹é£é™©ç®¡ç†çš„æ€åº¦ã€‚é€šå¸¸ï¼Œè¿™äº›ç­–ç•¥å¯èƒ½ä¼šç»“åˆä½¿ç”¨ï¼Œä»¥é€‚åº”ä¸åŒçš„é¡¹ç›®å’Œç»„ç»‡ç»“æ„ã€‚</p><h3 id="é…ç½®ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#é…ç½®ç®¡ç†" aria-hidden="true">#</a> é…ç½®ç®¡ç†</h3><p>ç¯å¢ƒçš„é…ç½®ç®¡ç†å¯ä»¥åˆ°æ¯ä¸€ä¸ªç¯å¢ƒä¸­åˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰çš„åº”è¯¥éƒ¨ç½²çš„èµ„æºçš„ YAML æ¸…å•ï¼Œè¿™äº› YAML æ¸…å•ä¸­æ‰€æœ‰å€¼éƒ½å¯ä»¥ç¡¬ç¼–ç ä¸ºè¯¥ç¯å¢ƒæ‰€éœ€çš„ç‰¹å®šå€¼ã€‚</p><p>éœ€è¦è¿›è¡Œéƒ¨ç½²ï¼Œé‚£ä¹ˆè¿è¡Œï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ kubectl apply <span class="token operator">&lt;</span>directory<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸€ä¸ª SaaS çš„åº”ç”¨ç¨‹åºå¼€å‘è€…å°†å…¶å®šåˆ¶çš„åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°ä¸€ä¸ªæˆ–è€…å¤šä¸ªç¯å¢ƒï¼ˆdev, test)</p><p>è¿™äº›ç¯å¢ƒå¯èƒ½åˆ†å¸ƒåœ¨ä¸åŒçš„è´¦æˆ·ï¼Œé›†ç¾¤æˆ–è€…å‘½åç©ºé—´ã€‚å®ƒä»¬ä¹‹é—´æœ‰ç»†å¾®çš„åŒºåˆ«ï¼Œå› æ­¤é…ç½®é‡ç”¨æ˜¯æœ€é‡è¦çš„ã€‚</p><h3 id="helm" tabindex="-1"><a class="header-anchor" href="#helm" aria-hidden="true">#</a> helm</h3><p>helm ä½œä¸ºå‡ºåœºçš„ç¬¬ä¸€ä¸ªé…ç½®å·¥å…·ï¼Œæ˜¯ Kubernetes ç”Ÿæ€ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚</p><p>ä»¥ä¸‹æ˜¯Helmçš„ä¸»è¦ç‰¹ç‚¹å’Œå®ƒåœ¨Kubernetesç”Ÿæ€ä¸­çš„ä½œç”¨ï¼š</p><ol><li><strong>åº”ç”¨ç¨‹åºåŒ…ç®¡ç†</strong>ï¼šHelmå¯ä»¥è¢«çœ‹ä½œæ˜¯Kubernetesçš„åŒ…ç®¡ç†å™¨ã€‚å®ƒå…è®¸å¼€å‘è€…å’Œè¿ç»´äººå‘˜å°†åº”ç”¨ç¨‹åºåŠå…¶ä¾èµ–é¡¹æ‰“åŒ…æˆä¸€ä¸ªç§°ä¸º&quot;chart&quot;çš„å•å…ƒã€‚è¿™äº›chartæ˜¯é¢„é…ç½®çš„Kubernetesèµ„æºé›†åˆï¼Œå¯ä»¥åœ¨Kubernetesé›†ç¾¤ä¸Šè½»æ¾éƒ¨ç½²å’Œç®¡ç†ã€‚</li><li><strong>ç®€åŒ–å¤æ‚éƒ¨ç½²</strong>ï¼šHelmä½¿å¾—éƒ¨ç½²å¤æ‚çš„åº”ç”¨ç¨‹åºå˜å¾—ç®€å•ã€‚å®ƒå¯ä»¥ç®¡ç†å¤æ‚çš„ä¾èµ–å…³ç³»ï¼Œå¹¶ç¡®ä¿æ‰€æœ‰Kubernetesç»„ä»¶ä»¥æ­£ç¡®çš„é¡ºåºå’Œé…ç½®éƒ¨ç½²ã€‚è¿™å¯¹äºé‚£äº›éœ€è¦å¤šä¸ªæœåŠ¡å’Œé…ç½®çš„å¤§å‹åº”ç”¨ç¨‹åºæ¥è¯´å°¤å…¶é‡è¦ã€‚</li><li><strong>æ˜“äºç‰ˆæœ¬æ§åˆ¶å’Œå›æ»š</strong>ï¼šHelm chartsæ˜“äºç‰ˆæœ¬æ§åˆ¶ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥è¿½è¸ªåˆ°æ¯æ¬¡éƒ¨ç½²çš„å˜åŒ–ï¼Œå¹¶åœ¨éœ€è¦æ—¶è½»æ¾åœ°å›æ»šåˆ°æ—§ç‰ˆæœ¬ã€‚</li><li><strong>å…±äº«å’Œé‡ç”¨</strong>ï¼šé€šè¿‡Helmä»“åº“ï¼Œç”¨æˆ·å¯ä»¥å…±äº«ä»–ä»¬çš„chartsï¼Œä½¿å¾—é‡ç”¨é…ç½®å˜å¾—ç®€å•ã€‚è¿™ä¿ƒè¿›äº†æœ€ä½³å®è·µçš„å…±äº«å’Œç¤¾åŒºåä½œã€‚</li><li><strong>é…ç½®çµæ´»æ€§</strong>ï¼šHelmå…è®¸ç”¨æˆ·è‡ªå®šä¹‰chartçš„é…ç½®ï¼Œä»¥é€‚åº”ä¸åŒçš„ç¯å¢ƒå’Œéœ€æ±‚ã€‚è¿™ç§çµæ´»æ€§æ˜¯é€šè¿‡ä½¿ç”¨æ¨¡æ¿å’Œé…ç½®æ–‡ä»¶å®ç°çš„ï¼Œè¿™äº›æ–‡ä»¶å¯ä»¥åœ¨éƒ¨ç½²æ—¶ä¿®æ”¹ã€‚</li><li><strong>é›†æˆå’Œæ‰©å±•æ€§</strong>ï¼šHelmå¯ä»¥ä¸å…¶ä»–Kuberneteså·¥å…·å’Œæ’ä»¶æ— ç¼é›†æˆï¼Œå¢åŠ äº†å®ƒçš„æ‰©å±•æ€§ã€‚è¿™ä½¿å¾—å®ƒå¯ä»¥é€‚åº”å„ç§ä¸åŒçš„éƒ¨ç½²éœ€æ±‚å’Œç¯å¢ƒã€‚</li></ol><h3 id="jsonnet" tabindex="-1"><a class="header-anchor" href="#jsonnet" aria-hidden="true">#</a> Jsonnet</h3><p>Jsonnetï¼Œä½œä¸ºä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼Œä¸»è¦è¢«è®¾è®¡æ¥å¢å¼ºå’Œç®€åŒ–JSONæ•°æ®çš„å£°æ˜å’Œå¤„ç†ã€‚è™½ç„¶å®ƒå¹¶éä¸“é—¨ä¸ºKubernetesè®¾è®¡ï¼Œä½†åœ¨Kubernetesç¤¾åŒºä¸­ç¡®å®è·å¾—äº†å¹¿æ³›çš„åº”ç”¨å’Œæ™®åŠã€‚ä»¥ä¸‹æ˜¯Jsonnetçš„å…³é”®ç‰¹æ€§å’Œå®ƒåœ¨æ•°æ®å¤„ç†ä¸­çš„ä½œç”¨ï¼š</p><ol><li><strong>å¢å¼ºçš„JSON</strong>ï¼šJsonnetå¯ä»¥è¢«çœ‹ä½œæ˜¯JSONçš„ä¸€ä¸ªè¶…é›†ï¼Œå®ƒåœ¨JSONçš„åŸºç¡€ä¸Šæ·»åŠ äº†å˜é‡ã€æ¡ä»¶è¡¨è¾¾å¼ã€å‡½æ•°ã€ç®—æœ¯è¿ç®—å’Œå…¶ä»–ç¼–ç¨‹è¯­è¨€çš„ç‰¹æ€§ã€‚è¿™äº›æ‰©å±•ä½¿å¾—Jsonnetéå¸¸é€‚åˆå¤„ç†å¤æ‚çš„æ•°æ®æè¿°å’Œé…ç½®æ–‡ä»¶ã€‚</li><li><strong>æ¨¡æ¿å’ŒæŠ½è±¡</strong>ï¼šJsonnetæ”¯æŒé«˜çº§åˆ«çš„æŠ½è±¡å’Œæ¨¡æ¿åŒ–ï¼Œè¿™å¯¹äºç®¡ç†å¤§é‡çš„ã€ç»“æ„ç›¸ä¼¼çš„æ•°æ®ç‰¹åˆ«æœ‰ç”¨ã€‚ç”¨æˆ·å¯ä»¥å®šä¹‰é€šç”¨çš„æ¨¡å¼å’Œç»“æ„ï¼Œç„¶ååœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­é‡å¤ä½¿ç”¨å®ƒä»¬ï¼Œå‡å°‘é‡å¤å’Œé”™è¯¯ã€‚</li><li><strong>çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§</strong>ï¼šé€šè¿‡æä¾›å˜é‡å’Œå‡½æ•°ï¼ŒJsonnetä½¿å¾—æ•°æ®æ–‡ä»¶çš„ç»´æŠ¤å˜å¾—æ›´åŠ çµæ´»å’Œæ˜“äºç®¡ç†ã€‚è¿™å¯¹äºéœ€è¦é¢‘ç¹æ›´æ–°æˆ–ä¿®æ”¹çš„é…ç½®å°¤å…¶é‡è¦ã€‚</li><li><strong>æ¸…æ™°çš„é€»è¾‘ç»“æ„</strong>ï¼šJsonnetçš„ç¼–ç¨‹è¯­è¨€ç‰¹æ€§å…è®¸ç”¨æˆ·ä»¥æ›´æ¸…æ™°ã€é€»è¾‘åŒ–çš„æ–¹å¼ç¼–å†™å’Œç†è§£å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œè¿™å¯¹äºå¤æ‚çš„é…ç½®ç®¡ç†æ¥è¯´æ˜¯ä¸€ä¸ªå·¨å¤§çš„ä¼˜åŠ¿ã€‚</li><li><strong>åœ¨Kubernetesä¸­çš„åº”ç”¨</strong>ï¼šè™½ç„¶Jsonnetå¹¶éä¸“é—¨ä¸ºKubernetesè®¾è®¡ï¼Œä½†å®ƒåœ¨ç®¡ç†Kubernetesçš„é…ç½®æ–‡ä»¶æ–¹é¢æ˜¾ç¤ºå‡ºäº†å·¨å¤§çš„æ½œåŠ›ã€‚å®ƒå¯ä»¥ç”Ÿæˆå¤æ‚çš„Kubernetesèµ„æºå®šä¹‰ï¼Œå¦‚éƒ¨ç½²ã€æœåŠ¡å’Œpodé…ç½®ï¼Œå¹¶æ”¯æŒé«˜çº§çš„é…ç½®æ¨¡å¼ã€‚</li><li><strong>ç¤¾åŒºæ”¯æŒå’Œå·¥å…·é›†æˆ</strong>ï¼šç”±äºJsonnetåœ¨Kubernetesç¤¾åŒºä¸­çš„æµè¡Œï¼Œè®¸å¤šå·¥å…·å’Œåº“å·²ç»å¼€å‘å‡ºæ¥æ”¯æŒJsonnetæ–‡ä»¶çš„ç”Ÿæˆå’Œç®¡ç†ã€‚è¿™è¿›ä¸€æ­¥å¢å¼ºäº†å®ƒåœ¨ç°ä»£äº‘åŸç”Ÿæ¶æ„ä¸­çš„åº”ç”¨ã€‚</li></ol><h2 id="æµæ°´çº¿" tabindex="-1"><a class="header-anchor" href="#æµæ°´çº¿" aria-hidden="true">#</a> æµæ°´çº¿</h2><p>CICD æµæ°´çº¿ä¸­çš„é˜¶æ®µ</p><p>æŒç»­é›†æˆ ï¼ˆCIï¼‰æ˜¯ä¸€ç§è½¯ä»¶å¼€å‘çš„å®è·µï¼Œåœ¨è¿™ç§å®è·µä¸­ï¼Œæ‰€æœ‰çš„å¼€å‘äººå‘˜éƒ½ä¼šåœ¨ä¸€ä¸ªä¸­å¤®ä»“åº“ï¼ˆGITï¼‰ä¸­åˆå¹¶å˜æ›´ï¼Œé€šè¿‡ CI ï¼Œæ¯ä¸€æ¬¡ä»£ç å˜æ›´ï¼ˆæäº¤ï¼‰éƒ½ä¼šè§¦å‘ç»™å®šä»“åº“çš„è‡ªåŠ¨æ„å»ºå’Œæµ‹è¯•é˜¶æ®µï¼Œå¹¶å‘åšå‡ºå˜æ›´çš„å¼€å‘è€…æä¾›åé¦ˆã€‚ä¸ä¼ ç»Ÿçš„ CI ç›¸æ¯”ï¼ŒGitOps çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œåœ¨æ„å»ºå’Œæµ‹è¯•é˜¶æ®µæˆåŠŸå®Œæˆåï¼ŒCI æµæ°´çº¿è¿˜ä¼šåœ¨åº”ç”¨ç¨‹åºæ¸…å•ä¸­æ›´æ–°æ–°çš„é•œåƒç‰ˆæœ¬ã€‚</p><p>æŒç»­äº¤ä»˜ï¼ˆCDï¼‰ æ˜¯å°†æ•´ä¸ªè½¯ä»¶å‘å¸ƒè¿‡ç¨‹è‡ªåŠ¨åŒ–ã€‚</p><p>ä¸ä¼ ç»Ÿçš„ CICD ä¸åŒï¼Œä½¿ç”¨ GitOps Operator æ¥ç›‘æ§æ¸…å•çš„å˜åŒ–å¹¶åè°ƒéƒ¨ç½²ï¼Œåªè¦ CI æ„å»ºå®Œæˆï¼Œå¹¶ä¸”æ¸…å•æ›´æ–°ï¼ŒGitOps Operator å°±ä¼š</p><h3 id="æŒç»­é›†æˆ" tabindex="-1"><a class="header-anchor" href="#æŒç»­é›†æˆ" aria-hidden="true">#</a> æŒç»­é›†æˆ</h3><p><strong>æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p><p>æµç¨‹å°†ä»â€œæ‹‰å–è¯·æ±‚â€å¼€å§‹ï¼Œç»è¿‡å¤šä¸ªé˜¶æ®µï¼Œå¦‚â€œä»£ç å®¡æ ¸â€ã€â€œæ¼æ´æ‰«æâ€ã€â€œä»£ç åˆ†æâ€ã€â€œæ„å»ºâ€ã€â€œå•å…ƒæµ‹è¯•â€ã€â€œä»£ç è¦†ç›–â€ã€â€œDockeræ„å»ºâ€ã€â€œDockeræ¨é€â€ã€â€œGitå…‹éš†é…ç½®ä»“åº“â€ã€â€œæ›´æ–°é…ç½®æ¸…å•â€ã€â€œGitæäº¤å’Œæ¨é€â€ã€â€œå‘å¸ƒCIæŒ‡æ ‡â€ï¼Œæœ€ååˆ°è¾¾â€œæ„å»ºé€šçŸ¥â€ã€‚</p><p><img src="http://sm.nsddd.top/sm202311261925321.webp" alt="544991a1-6499-4de0-acef-bb43af85fdb3"></p><p>é›†æˆ Go è¯­è¨€å’Œå…¶ä»–çš„ä¸€äº›å·¥å…·ï¼š</p><ol><li><strong>GitHub Actions é›†æˆ</strong>ï¼šåœ¨æµç¨‹å›¾ä¸­çš„å„ä¸ªé˜¶æ®µï¼Œå¦‚â€œä»£ç å®¡æ ¸â€ã€â€œæ¼æ´æ‰«æâ€ã€â€œä»£ç åˆ†æâ€ç­‰ï¼Œå¯ä»¥é€šè¿‡ GitHub Actions è‡ªåŠ¨åŒ–æ‰§è¡Œã€‚è¿™æ„å‘³ç€æ¯ä¸ªæ­¥éª¤å¯ä»¥è¢«é…ç½®ä¸º GitHub Actions çš„ä¸€ä¸ªå·¥ä½œæµï¼Œä»è€Œå®ç°è‡ªåŠ¨åŒ–å’Œæµç¨‹æ§åˆ¶ã€‚</li><li><strong>Go è¯­è¨€ç›¸å…³å·¥å…·</strong>ï¼š <ul><li><strong>ä»£ç å®¡æ ¸</strong>ï¼šé›†æˆå¦‚ <code>golint</code> æˆ– <code>gometalinter</code> çš„ Go è¯­è¨€ä»£ç å®¡æŸ¥å·¥å…·ã€‚</li><li><strong>æ¼æ´æ‰«æ</strong>ï¼šä½¿ç”¨é’ˆå¯¹ Go è¯­è¨€çš„æ¼æ´æ‰«æå·¥å…·ï¼Œå¦‚ <code>gosec</code>ã€‚</li><li><strong>ä»£ç åˆ†æ</strong>ï¼šåº”ç”¨å¦‚ <code>staticcheck</code> çš„é™æ€åˆ†æå·¥å…·ã€‚</li><li><strong>å•å…ƒæµ‹è¯•</strong>ï¼šåˆ©ç”¨ Go è‡ªå¸¦çš„æµ‹è¯•æ¡†æ¶å’Œ <code>go test</code> å‘½ä»¤ã€‚</li><li><strong>ä»£ç è¦†ç›–</strong>ï¼šä½¿ç”¨ Go çš„ <code>cover</code> å·¥å…·æ¥æ£€æŸ¥æµ‹è¯•è¦†ç›–ç‡ã€‚</li></ul></li><li><strong>Docker ä¸ Go</strong>ï¼šåœ¨ Docker æ„å»ºé˜¶æ®µï¼Œå¯ä»¥ä½¿ç”¨é’ˆå¯¹ Go åº”ç”¨çš„ Dockerfileï¼Œç¡®ä¿åº”ç”¨è¢«æ­£ç¡®æ‰“åŒ…ã€‚</li><li><strong>é…ç½®ç®¡ç†</strong>ï¼šå¯¹äºâ€œGit å…‹éš†é…ç½®ä»“åº“â€å’Œâ€œæ›´æ–°é…ç½®æ¸…å•â€é˜¶æ®µï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å¦‚ <code>Viper</code> æˆ– <code>Consul</code> ç­‰ Go è¯­è¨€é…ç½®ç®¡ç†å·¥å…·ï¼Œä»¥ä¾¿æ›´å¥½åœ°ç®¡ç†å’Œç»´æŠ¤é…ç½®ã€‚</li></ol><p><img src="http://sm.nsddd.top/sm202311261938086.png" alt="chatp"></p><h3 id="æŒç»­äº¤ä»˜" tabindex="-1"><a class="header-anchor" href="#æŒç»­äº¤ä»˜" aria-hidden="true">#</a> æŒç»­äº¤ä»˜</h3><p>æŒç»­é›†æˆåï¼Œå°±è¿›å…¥åˆ°æŒç»­äº¤ä»˜çš„ç¯èŠ‚äº†ï¼Œ</p><p>å»ºç«‹åœ¨ GitOps CICD åŸºç¡€ä¸Šçš„å®Œæ•´çš„ CD æµæ°´çº¿</p><ol><li><strong>Git å…‹éš†é…ç½®ä»“åº“</strong>ï¼šè¿™ä¸€æ­¥éª¤ä¿æŒä¸å˜ï¼Œä½œä¸ºé…ç½®ç®¡ç†çš„ä¸€éƒ¨åˆ†ã€‚</li><li><strong>å‘ç°æ¸…å•</strong>ï¼šè¿™å¯èƒ½æ¶‰åŠè‡ªåŠ¨åŒ–è„šæœ¬æˆ–å·¥å…·ï¼Œç”¨äºæ£€æµ‹å’Œæ•´ç†åº”ç”¨çš„é…ç½®é¡¹å’Œä¾èµ–ã€‚</li><li><strong>kubectl apply</strong>ï¼šåœ¨ Kubernetes ç¯å¢ƒä¸­åº”ç”¨é…ç½®æ›´æ”¹æˆ–éƒ¨ç½²æ–°çš„æœåŠ¡ã€‚</li><li><strong>åŠŸèƒ½æµ‹è¯•</strong>ï¼šæ‰§è¡Œè‡ªåŠ¨åŒ–çš„åŠŸèƒ½æµ‹è¯•ï¼Œä»¥éªŒè¯åº”ç”¨çš„åŠŸèƒ½å’Œæ€§èƒ½ã€‚</li><li><strong>è¿è¡Œæ—¶æ¼æ´æ‰«æ</strong>ï¼šä½¿ç”¨é€‚åˆ Kubernetes ç¯å¢ƒçš„å·¥å…·æ¥æ£€æµ‹è¿è¡Œæ—¶çš„å®‰å…¨æ¼æ´ã€‚</li><li><strong>å‘å¸ƒ CD æŒ‡æ ‡</strong>ï¼šæ”¶é›†å’Œå‘å¸ƒéƒ¨ç½²ç›¸å…³çš„æŒ‡æ ‡ï¼Œå¯èƒ½é€šè¿‡é›†æˆçš„ç›‘æ§å·¥å…·æˆ–å®šåˆ¶è„šæœ¬å®ç°ã€‚</li></ol><p><img src="http://sm.nsddd.top/sm202311261945127.webp" alt="50629a41-bded-4f36-abfe-b3dfadd7c9d3"></p><h3 id="æ¨åŠ¨æ™‹çº§å·¥ä½œ" tabindex="-1"><a class="header-anchor" href="#æ¨åŠ¨æ™‹çº§å·¥ä½œ" aria-hidden="true">#</a> æ¨åŠ¨æ™‹çº§å·¥ä½œ</h3><p>æˆ‘ä»¬çŸ¥é“ï¼ŒKubernetes æ¸…å•å’Œä»£ç ä¸€èˆ¬ä¸æ”¾åœ¨åŒä¸€ä¸ªä»“åº“ï¼Œè¿™æ ·å¯ä»¥è·å–åˆ°æ›´çµæ´»çš„éƒ¨ç½²é€‰æ‹©ï¼Œæ›´å¥½çš„è®¿é—®æ§åˆ¶å’Œå®¡è®¡èƒ½åŠ›ã€‚é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥åœ¨å“ªé‡Œç»´æŠ¤ç‰¹å®šçš„ç¯å¢ƒä¾èµ–çš„åº”ç”¨é…ç½®ï¼Œå¦‚æ•°æ®åº“é“¾æ¥å’Œåˆ†å¸ƒå¼ç¼“å­˜ã€‚</p><ol><li><strong>å•ç‹¬çš„é…ç½®ä»“åº“</strong>ï¼šåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä»“åº“æ¥å­˜å‚¨ç¯å¢ƒç‰¹å®šçš„é…ç½®æ–‡ä»¶ã€‚è¿™ç§æ–¹æ³•å¯ä»¥æä¾›æ¸…æ™°çš„åˆ†ç¦»ï¼Œç¡®ä¿ä»£ç å’Œé…ç½®çš„ç‹¬ç«‹ç®¡ç†ï¼ŒåŒæ—¶ä¾¿äºè¿½è¸ªå’Œå®¡è®¡ã€‚</li><li><strong>é…ç½®ç®¡ç†å·¥å…·</strong>ï¼šä½¿ç”¨é…ç½®ç®¡ç†å·¥å…·ï¼Œå¦‚ Helmã€Kustomize æˆ– Terraformï¼Œæ¥ç®¡ç†å’Œåº”ç”¨ä¸åŒç¯å¢ƒçš„é…ç½®ã€‚è¿™äº›å·¥å…·å¯ä»¥å¸®åŠ©ä½ æ ¹æ®ç¯å¢ƒå·®å¼‚ï¼ˆå¦‚å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰è°ƒæ•´é…ç½®ã€‚</li><li><strong>ç§˜å¯†ç®¡ç†</strong>ï¼šå¯¹äºæ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚æ•°æ®åº“å¯†ç å’Œè®¿é—®å¯†é’¥ï¼‰ï¼Œä½¿ç”¨ Kubernetes çš„ç§˜å¯†ï¼ˆSecretsï¼‰ç®¡ç†åŠŸèƒ½æ¥å­˜å‚¨ã€‚è¿™äº›ç§˜å¯†å¯ä»¥åœ¨éƒ¨ç½²æ—¶åŠ¨æ€æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚</li><li><strong>é…ç½®æ˜ å°„ï¼ˆConfigMapsï¼‰</strong>ï¼šå¯¹äºéæ•æ„Ÿçš„é…ç½®ä¿¡æ¯ï¼Œå¦‚æ•°æ®åº“é“¾æ¥å’Œåº”ç”¨å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ Kubernetes çš„ ConfigMap æ¥å­˜å‚¨ã€‚ConfigMap å¯ä»¥åœ¨å®¹å™¨å¯åŠ¨æ—¶ä½œä¸ºç¯å¢ƒå˜é‡æˆ–æŒ‚è½½çš„å·æä¾›ç»™åº”ç”¨ç¨‹åºã€‚</li><li><strong>ç¯å¢ƒå˜é‡</strong>ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç›´æ¥åœ¨ Kubernetes çš„éƒ¨ç½²é…ç½®ä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥ä¼ é€’é…ç½®ä¿¡æ¯æ˜¯æœ‰ç”¨çš„ã€‚è¿™ç§æ–¹æ³•é€‚ç”¨äºä¸éœ€è¦é¢‘ç¹æ›´æ”¹çš„ç®€å•é…ç½®ã€‚</li><li><strong>GitOps å®è·µ</strong>ï¼šé‡‡ç”¨ GitOps çš„æ–¹å¼æ¥ç®¡ç† Kubernetes é…ç½®ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰é…ç½®æ›´æ”¹éƒ½é€šè¿‡ Git ä»“åº“æ¥è¿›è¡Œï¼Œé€šè¿‡è‡ªåŠ¨åŒ–æµç¨‹åº”ç”¨åˆ° Kubernetes ç¯å¢ƒä¸­ã€‚è¿™æœ‰åŠ©äºç¡®ä¿é…ç½®çš„ä¸€è‡´æ€§å’Œå¯è¿½æº¯æ€§ã€‚</li></ol><p>åœ¨ GitOps å®è·µä¸­ï¼Œ<code>git reset</code> å’Œ <code>git revert</code> æ˜¯ä¸¤ä¸ªé‡è¦çš„ Git å‘½ä»¤ï¼Œå®ƒä»¬ç”¨äºå¤„ç†é…ç½®å˜æ›´å’Œç»´æŠ¤å†å²è®°å½•ã€‚ç†è§£è¿™ä¸¤ä¸ªå‘½ä»¤çš„å·®å¼‚å’Œé€‚ç”¨åœºæ™¯å¯¹äºæœ‰æ•ˆåœ°ç®¡ç† Kubernetes é…ç½®è‡³å…³é‡è¦ã€‚</p><ol><li><strong>git reset</strong>ï¼š <ul><li><code>git reset</code> å‘½ä»¤ç”¨äºæ’¤é”€æŸäº›æäº¤ï¼Œå®ƒå¯ä»¥å°† HEAD æŒ‡é’ˆç§»åŠ¨åˆ°æŒ‡å®šçš„æäº¤ã€‚</li><li>åœ¨ GitOps ä¸­ï¼Œå¦‚æœä½ éœ€è¦æ’¤é”€ä¸€ç³»åˆ—æœ€è¿‘çš„æäº¤ï¼Œå¹¶å°†ä»“åº“çŠ¶æ€å›æ»šåˆ°ä»¥å‰çš„æŸä¸ªç‰¹å®šæäº¤ï¼Œå¯ä»¥ä½¿ç”¨ <code>git reset</code>ã€‚</li><li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>git reset</code> ä¼šæ›´æ”¹å†å²è®°å½•ï¼Œè¿™åœ¨å…±äº«ä»“åº“ä¸­å¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚å…¶ä»–å¼€å‘è€…éœ€è¦ç”¨ <code>git pull --force</code> æ¥åŒæ­¥æ›´æ”¹ï¼Œè¿™å¯èƒ½å¯¼è‡´æ··ä¹±ã€‚</li></ul></li><li><strong>git revert</strong>ï¼š <ul><li><code>git revert</code> å‘½ä»¤ç”¨äºæ’¤é”€æŸä¸ªç‰¹å®šçš„æäº¤ï¼Œä½†å®ƒä¸ä¼šæ”¹å˜å†å²è®°å½•ã€‚ç›¸åï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤ï¼Œè¿™ä¸ªæ–°æäº¤çš„çŠ¶æ€ä¸è¦æ’¤é”€çš„æäº¤ç›¸åã€‚</li><li>åœ¨ GitOps ä¸­ï¼Œå¦‚æœéœ€è¦æ’¤é”€ä¸€ä¸ªç‰¹å®šçš„æ›´æ”¹ï¼ŒåŒæ—¶ä¿ç•™åç»­çš„æ›´æ”¹ï¼Œå¹¶ä¸”ä¸æƒ³ä¿®æ”¹å†å²è®°å½•ï¼Œ<code>git revert</code> æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚</li><li><code>git revert</code> æ›´é€‚åˆå…¬å…±ä»“åº“æˆ–å›¢é˜Ÿç¯å¢ƒï¼Œå› ä¸ºå®ƒä¸ä¼šå½±å“å…¶ä»–å¼€å‘è€…çš„å†å²è®°å½•ã€‚</li></ul></li></ol><blockquote><p>æˆ‘çš„ä¸ªäººå¼€å‘ç»éªŒæ€»ç»“å‡ºæ¥çš„æ˜¯ï¼Œä¸ªäººä¸ä½¿ç”¨ <code>revert</code>ï¼Œè€Œæ˜¯ä½¿ç”¨ <code>reset</code> åœ¨æœ¬åœ°ï¼Œå‰ææ˜¯è‡ªå·±å¯¹è‡ªå·±æäº¤çš„æ ‘çŠ¶å›¾å¾ˆæ¸…æ™°ï¼Œä¸è¿‡ç”Ÿäº§ä¸­è¿˜æ˜¯ä½¿ç”¨ <code>revert</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸ä¿é™©å’Œå®‰è£…çš„åšæ³•ã€‚</p></blockquote><p>è¿™å’Œ git rebase å’Œ git merge çš„ç†è§£ä¸€æ ·çš„ã€‚</p><p><strong>merge å’Œ rebase</strong> merge æ˜¯åˆå¹¶çš„æ„æ€ï¼Œrebaseæ˜¯å¤ä½åŸºåº•çš„æ„æ€ã€‚ ç°åœ¨æˆ‘ä»¬æœ‰è¿™æ ·çš„ä¸¤ä¸ªåˆ†æ”¯,testå’Œmasterï¼Œæäº¤å¦‚ä¸‹ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>     D---E test
    /
A---B---C---F master
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨masteræ‰§è¡Œ<code>git merge test</code>ç„¶åä¼šå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>     D--------E
    /          \
A---B---C---F---G    test , master
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨masteræ‰§è¡Œ<code>git rebase test</code>,ç„¶åå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> A---C---D---E---C `---F` test , master
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°mergeæ“ä½œä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œä¹‹å‰æäº¤åˆ†å¼€æ˜¾ç¤ºã€‚è€Œrebaseæ“ä½œä¸ä¼šç”Ÿæˆæ–°çš„èŠ‚ç‚¹ï¼Œæ˜¯å°†ä¸¤ä¸ªåˆ†æ”¯èåˆæˆä¸€ä¸ªçº¿æ€§çš„æ“ä½œã€‚</p><h2 id="éƒ¨ç½²ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#éƒ¨ç½²ç­–ç•¥" aria-hidden="true">#</a> éƒ¨ç½²ç­–ç•¥</h2><p>åœ¨ Kubernetes ä¸­ï¼Œä½ å¯ä»¥åªç”¨å¸¦æœ‰ PodSpec çš„æ¸…å•æ¥éƒ¨ç½²ä¸€ä¸ª Podï¼Œå¹¶ä¸”ä¿è¯å…¶å¯ç”¨æ€§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰ ReplocaSet æ¸…å•ï¼Œä»¥ä¿æŒåœ¨ä»»ä½•ç‰¹å®šæ—¶é—´è¿è¡Œä¸€ç»„ç¨³å®šçš„ Pod å‰¯æœ¬é›†åˆã€‚ReplicaSet æ˜¯é€šè¿‡æŒ‡å®šç”¨äºè¯†åˆ« Pod çš„é€‰æ‹©å™¨ã€‚</p><p>ReplicaSet ä¸æ˜¯å£°æ˜å¼çš„ï¼Œå› æ­¤ä¸é€‚åˆ GitOps</p><p>æˆ‘æ²¡çŸ¥é“ Deployment æ˜¯ä¸€ä¸ªæ›´é«˜å±‚çš„æŠ½è±¡ï¼Œè™½ç„¶å¯ä»¥ä½¿ç”¨å¸¦æœ‰ <code>PodSpec</code> çš„æ¸…å•ç›´æ¥éƒ¨ç½²å•ä¸ª Podï¼Œä½†è¿™ç§æ–¹å¼é€šå¸¸ä¸é€‚ç”¨äºä¿è¯ Pod çš„å¯ç”¨æ€§å’Œå¯ç®¡ç†æ€§ã€‚</p><h3 id="replicaset" tabindex="-1"><a class="header-anchor" href="#replicaset" aria-hidden="true">#</a> ReplicaSet</h3><ul><li><strong>ä½œç”¨</strong>ï¼š<code>ReplicaSet</code> çš„ä¸»è¦ç›®çš„æ˜¯ç¡®ä¿åœ¨ä»»ä½•æ—¶å€™éƒ½æœ‰æŒ‡å®šæ•°é‡çš„ Pod å‰¯æœ¬æ­£åœ¨è¿è¡Œã€‚</li><li><strong>é€‰æ‹©å™¨</strong>ï¼šå®ƒé€šè¿‡ä½¿ç”¨æ ‡ç­¾é€‰æ‹©å™¨æ¥è¯†åˆ«è¦ç®¡ç†çš„ Podã€‚è¿™äº›æ ‡ç­¾åœ¨ Pod çš„å®šä¹‰ä¸­æŒ‡å®šã€‚</li><li><strong>ç¼ºç‚¹</strong>ï¼šå°½ç®¡ <code>ReplicaSet</code> å¯ä»¥ç¡®ä¿æŒ‡å®šæ•°é‡çš„ Pod å®ä¾‹å§‹ç»ˆè¿è¡Œï¼Œä½†å®ƒæœ¬èº«å¹¶ä¸æ”¯æŒæ»šåŠ¨æ›´æ–°ã€‚å¦‚æœä½ éœ€è¦æ›´æ–° Pod çš„å®šä¹‰ï¼ˆä¾‹å¦‚ï¼Œæ›´æ–°ä½¿ç”¨çš„å®¹å™¨é•œåƒï¼‰ï¼Œå°±éœ€è¦æ‰‹åŠ¨æ›´æ–° <code>ReplicaSet</code>ï¼Œæˆ–è€…åˆ é™¤å¹¶é‡æ–°åˆ›å»ºå®ƒã€‚</li></ul><h3 id="deployment" tabindex="-1"><a class="header-anchor" href="#deployment" aria-hidden="true">#</a> Deployment</h3><ul><li><strong>æ›´é«˜çº§çš„æŠ½è±¡</strong>ï¼š<code>Deployment</code> æ˜¯ä¸€ä¸ªæ›´é«˜çº§åˆ«çš„æŠ½è±¡ï¼Œå®ƒåœ¨ <code>ReplicaSet</code> çš„åŸºç¡€ä¸Šæä¾›äº†æ›´å¤šåŠŸèƒ½ã€‚å®ƒä¸ä»…ç¡®ä¿ Pod æ•°é‡ï¼Œè¿˜æ”¯æŒå£°æ˜å¼åœ°æ›´æ–° Pod å’Œ <code>ReplicaSet</code>ã€‚</li><li><strong>æ»šåŠ¨æ›´æ–°</strong>ï¼š<code>Deployment</code> æ”¯æŒæ»šåŠ¨æ›´æ–°ï¼Œå…è®¸ä½ é€æ¸æ›¿æ¢æ—§ç‰ˆæœ¬çš„ Pod ä¸ºæ–°ç‰ˆæœ¬ï¼Œè€Œä¸ä¼šå¯¼è‡´åœæœºã€‚</li><li><strong>é€‚ç”¨äº GitOps</strong>ï¼šç”±äºå…¶å£°æ˜å¼çš„ç‰¹æ€§ï¼Œ<code>Deployment</code> éå¸¸é€‚åˆ GitOps çš„å·¥ä½œæµã€‚ä½ å¯ä»¥åœ¨ Git ä»“åº“ä¸­å£°æ˜åº”ç”¨çš„æœŸæœ›çŠ¶æ€ï¼Œç„¶åä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·ï¼ˆå¦‚ Argocd æˆ– Fluxï¼‰æ¥ç›‘è§†ä»“åº“å¹¶å°†æ›´æ”¹åº”ç”¨åˆ° Kubernetes é›†ç¾¤ã€‚</li></ul><p><img src="http://sm.nsddd.top/sm202311262010756.png" alt="gitops-deployment-replicaset"></p><h3 id="æµé‡è·¯ç”±-traffic-routing" tabindex="-1"><a class="header-anchor" href="#æµé‡è·¯ç”±-traffic-routing" aria-hidden="true">#</a> æµé‡è·¯ç”± Traffic Routing</h3><p>åœ¨Kubernetesä¸­ï¼ŒService æ˜¯ä¸€ç§æŠ½è±¡ï¼Œå®ƒå®šä¹‰äº†ä¸€ç»„é€»è¾‘çš„Podså’Œè®¿é—®å®ƒä»¬çš„ç­–ç•¥ã€‚æœåŠ¡æ‰€é’ˆå¯¹çš„è±† Pod targetedç”±ä»¥ä¸‹é€‰æ‹©å™¨ç¡®å®š</p><p>Service minifest ä¸­çš„å­—æ®µã€‚ç„¶åï¼ŒæœåŠ¡å°†æµé‡è½¬å‘åˆ°å¸¦æœ‰é€‰æ‹©å™¨æŒ‡å®šçš„åŒ¹é…æ ‡ç­¾çš„Podsã€‚å¦‚æœåº•å±‚çš„Podsæ˜¯æ— çŠ¶æ€å’Œå‘åå…¼å®¹çš„ï¼Œé‚£ä¹ˆServiceå¯ä»¥è¿›è¡Œå¾ªç¯è´Ÿè½½å¹³è¡¡ï¼Œå¹¶ä¸”éå¸¸é€‚åˆæ»šåŠ¨æ›´æ–°ã€‚å¦‚æœéœ€è¦ä¸ºéƒ¨ç½²å®šåˆ¶è´Ÿè½½å¹³è¡¡ï¼Œåˆ™éœ€è¦æ¢ç´¢å…¶ä»–è·¯ç”±æ›¿ä»£æ–¹æ¡ˆã€‚</p><p>å½“Serviceæ”¶åˆ°æµé‡æ—¶ï¼Œå®ƒä¼šæ ¹æ®å®šä¹‰çš„é€‰æ‹©å™¨å°†æµé‡è½¬å‘åˆ°æ‹¥æœ‰ç›¸åº”åŒ¹é…æ ‡ç­¾çš„Podsã€‚ä¾‹å¦‚ï¼Œå¦‚æœServiceçš„é€‰æ‹©å™¨è¢«è®¾ç½®ä¸ºåŒ¹é…æ ‡ç­¾â€œcolor: blueâ€ï¼Œé‚£ä¹ˆæ‰€æœ‰å¸¦æœ‰æ­¤æ ‡ç­¾çš„Podså°†æ¥æ”¶åˆ°ç”±è¯¥Serviceè½¬å‘çš„æµé‡ã€‚è¿™ç§æ–¹æ³•ä½¿å¾—æµé‡ç®¡ç†æ—¢çµæ´»åˆé«˜æ•ˆã€‚</p><h4 id="æ— çŠ¶æ€podså’Œè´Ÿè½½å¹³è¡¡" tabindex="-1"><a class="header-anchor" href="#æ— çŠ¶æ€podså’Œè´Ÿè½½å¹³è¡¡" aria-hidden="true">#</a> æ— çŠ¶æ€Podså’Œè´Ÿè½½å¹³è¡¡</h4><p>å¦‚æœåº•å±‚çš„Podsæ˜¯æ— çŠ¶æ€çš„ï¼ˆStatelessï¼‰å¹¶ä¸”ä¿æŒå‘åå…¼å®¹æ€§ï¼Œé‚£ä¹ˆServiceå¯ä»¥å®ç°æœ‰æ•ˆçš„å¾ªç¯è´Ÿè½½å¹³è¡¡ã€‚è¿™å¯¹äºå®æ–½æ»šåŠ¨æ›´æ–°å°¤ä¸ºé‡è¦ï¼Œå› ä¸ºå®ƒå…è®¸åœ¨ä¸ä¸­æ–­æœåŠ¡çš„æƒ…å†µä¸‹é€æ­¥æ›¿æ¢æ—§çš„Podsã€‚</p><h4 id="å®šåˆ¶è´Ÿè½½å¹³è¡¡ä¸è·¯ç”±ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#å®šåˆ¶è´Ÿè½½å¹³è¡¡ä¸è·¯ç”±ç­–ç•¥" aria-hidden="true">#</a> å®šåˆ¶è´Ÿè½½å¹³è¡¡ä¸è·¯ç”±ç­–ç•¥</h4><p>å¯¹äºéœ€è¦æ›´å¤æ‚è·¯ç”±é€»è¾‘æˆ–å®šåˆ¶è´Ÿè½½å¹³è¡¡çš„éƒ¨ç½²ï¼Œå¯èƒ½éœ€è¦æ¢ç´¢Kubernetesæä¾›çš„å…¶ä»–è·¯ç”±æ›¿ä»£æ–¹æ¡ˆã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨Ingress Controllerså’ŒIngress Resourceså¯ä»¥æä¾›æ›´é«˜çº§çš„è·¯ç”±èƒ½åŠ›ï¼Œæ¯”å¦‚åŸºäºURLçš„è·¯ç”±ã€SSL/TLSç»ˆç«¯åŠ å¯†å’Œè´Ÿè½½å‡è¡¡ç­–ç•¥ã€‚</p><h4 id="æ ‡ç­¾é©±åŠ¨çš„è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#æ ‡ç­¾é©±åŠ¨çš„è·¯ç”±" aria-hidden="true">#</a> æ ‡ç­¾é©±åŠ¨çš„è·¯ç”±</h4><p>Kubernetesä¸­çš„æœåŠ¡è·¯ç”±æ˜¯å®Œå…¨åŸºäºæ ‡ç­¾çš„ã€‚è¿™æ„å‘³ç€ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ªæ ‡è®°ä¸ºâ€œblueâ€çš„Serviceåªä¼šå°†æµé‡è·¯ç”±åˆ°å¸¦æœ‰â€œblueâ€æ ‡ç­¾çš„Podsï¼Œè€Œä¸€ä¸ªæ ‡è®°ä¸ºâ€œgreenâ€çš„Serviceåˆ™åªè·¯ç”±åˆ°å¸¦æœ‰â€œgreenâ€æ ‡ç­¾çš„Podsã€‚è¿™ç§è®¾è®¡å…è®¸ç®€å•è€Œç›´è§‚çš„æµé‡åˆ†é…å’Œç®¡ç†ã€‚</p><p><img src="http://sm.nsddd.top/sm202311262110507.png" alt="ingree-istio"></p><h4 id="nginx-ingress-controller" tabindex="-1"><a class="header-anchor" href="#nginx-ingress-controller" aria-hidden="true">#</a> NGINX Ingress Controller</h4><p>NGINX Ingress Controlleræ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºåœ¨Kubernetesç¯å¢ƒä¸­ç®¡ç†è¿›å…¥é›†ç¾¤çš„æµé‡ã€‚å®ƒæ”¯æŒå¤šç§è´Ÿè½½å¹³è¡¡å’Œè·¯ç”±è§„åˆ™ï¼Œé€‚ç”¨äºå¹¿æ³›çš„ç”¨ä¾‹ã€‚å…³é”®ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><ul><li><strong>å‰ç«¯è´Ÿè½½å‡è¡¡å™¨</strong>ï¼šå®ƒå¯ä»¥é…ç½®ä¸ºå‰ç«¯è´Ÿè½½å‡è¡¡å™¨ï¼Œè´Ÿè´£å¤„ç†è¿›å…¥é›†ç¾¤çš„æ‰€æœ‰æµé‡ã€‚</li><li><strong>è‡ªå®šä¹‰è·¯ç”±</strong>ï¼šæ”¯æŒå„ç§è‡ªå®šä¹‰è·¯ç”±åŠŸèƒ½ï¼Œå¦‚TLSç»ˆç«¯åŠ å¯†ã€URLé‡å†™ï¼Œä»¥åŠåŸºäºè‡ªå®šä¹‰è§„åˆ™çš„æµé‡è·¯ç”±ã€‚</li><li><strong>æµé‡åˆ†é…</strong>ï¼šå¯ä»¥é…ç½®è§„åˆ™æ¥åˆ†é…æµé‡ï¼Œä¾‹å¦‚å°†40%çš„æµé‡è·¯ç”±åˆ°å¸¦æœ‰ç‰¹å®šæ ‡ç­¾ï¼ˆå¦‚â€œblueâ€ï¼‰çš„æœåŠ¡ï¼Œè€Œ60%è·¯ç”±åˆ°å¦ä¸€ä¸ªæ ‡ç­¾ï¼ˆå¦‚â€œgreenâ€ï¼‰çš„æœåŠ¡ã€‚</li></ul><p>é€šè¿‡è¿™äº›åŠŸèƒ½ï¼ŒNGINX Ingress Controllerèƒ½å¤Ÿæœ‰æ•ˆåœ°ç®¡ç†å’Œä¼˜åŒ–è¿›å…¥Kubernetesé›†ç¾¤çš„æµé‡ã€‚</p><h4 id="istio-gateway" tabindex="-1"><a class="header-anchor" href="#istio-gateway" aria-hidden="true">#</a> Istio Gateway</h4><p>Istio Gatewayæ˜¯å¦ä¸€ä¸ªå…³é”®ç»„ä»¶ï¼Œç”¨äºåœ¨Kubernetesé›†ç¾¤çš„è¾¹ç¼˜ç®¡ç†æµé‡ã€‚å®ƒä¸»è¦è´Ÿè´£å¤„ç†è¿›å…¥å’Œç¦»å¼€é›†ç¾¤çš„HTTPå’ŒTCPè¿æ¥ã€‚Istio Gatewayçš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><ul><li><strong>è¾¹ç¼˜è´Ÿè½½å¹³è¡¡å™¨</strong>ï¼šä½œä¸ºé›†ç¾¤è¾¹ç¼˜çš„è´Ÿè½½å¹³è¡¡å™¨ï¼Œå®ƒå¤„ç†æ‰€æœ‰è¿›å…¥å’Œç¦»å¼€é›†ç¾¤çš„æµé‡ã€‚</li><li><strong>ç«¯å£å’Œåè®®è§„èŒƒ</strong>ï¼šIstio Gatewayå…è®¸å®šä¹‰ä¸€ç»„è¦å…¬å¼€çš„ç«¯å£ï¼Œä»¥åŠç›¸å…³çš„åè®®ç±»å‹ï¼Œç¡®ä¿æµé‡æŒ‰ç…§æ—¢å®šçš„è§„åˆ™å’Œåè®®æµåŠ¨ã€‚</li><li><strong>é›†æˆä¸IstioæœåŠ¡ç½‘æ ¼</strong>ï¼šä½œä¸ºIstioç”Ÿæ€ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä¸Istioçš„æœåŠ¡ç½‘æ ¼åŠŸèƒ½ç´§å¯†é›†æˆï¼Œæä¾›é«˜çº§çš„æµé‡ç®¡ç†å’Œå®‰å…¨æ€§åŠŸèƒ½ã€‚</li></ul><p><img src="http://sm.nsddd.top/sm202311262115919.png" alt="istio-ingress"></p><blockquote><p>è¯´æ˜é€šè¿‡Kubernetesä¸­çš„Ingressæ§åˆ¶å™¨çš„æµé‡æµå’ŒIstioæœåŠ¡ç½‘æ ¼ä¸­çš„æµé‡æµçš„å›¾è¡¨å·²ç»å‡†å¤‡å¥½äº†ã€‚è¿™äº›å›¾è¡¨æ¸…æ™°åœ°æ¯”è¾ƒäº†æ¯ä¸ªç³»ç»Ÿåœ¨Kubernetesç¯å¢ƒä¸­å¦‚ä½•å¤„ç†æµé‡è·¯ç”±å’Œç®¡ç†ï¼ŒåŒ…æ‹¬å…¥å£æ§åˆ¶å™¨å’ŒIstioç½‘å…³çš„è§’è‰²ã€‚</p></blockquote><h3 id="argo-rollouts" tabindex="-1"><a class="header-anchor" href="#argo-rollouts" aria-hidden="true">#</a> Argo Rollouts</h3><h4 id="ä»€ä¹ˆæ˜¯argo-rollouts" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯argo-rollouts" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯Argo Rolloutsï¼Ÿ</h4><p>Argo Rollouts æ˜¯ä¸€ä¸ªKubernetesæ§åˆ¶å™¨ï¼Œç”¨äºæ›´å¤æ‚ã€æ›´å¼ºå¤§çš„éƒ¨ç½²ç­–ç•¥ï¼Œå¦‚è“ç»¿éƒ¨ç½²ï¼ˆBlue-Green Deploymentsï¼‰å’Œé‡‘ä¸é›€éƒ¨ç½²ï¼ˆCanary Deploymentsï¼‰ã€‚å®ƒé€šè¿‡æ‰©å±•Kubernetesè‡ªèº«çš„éƒ¨ç½²èƒ½åŠ›ï¼Œä½¿å¾—åœ¨ä¸ä¸­æ–­æœåŠ¡çš„æƒ…å†µä¸‹æ›´æ–°å’Œç®¡ç†åº”ç”¨ç¨‹åºå˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p><h4 id="å®‰è£…-ä½¿ç”¨-argo-rollouts" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-ä½¿ç”¨-argo-rollouts" aria-hidden="true">#</a> å®‰è£… &amp; ä½¿ç”¨ Argo Rollouts</h4><ol><li><p><strong>å…ˆå†³æ¡ä»¶</strong>ï¼š</p><ul><li>ç¡®ä¿æ‚¨æœ‰ä¸€ä¸ªè¿è¡Œä¸­çš„ Kubernetes é›†ç¾¤ã€‚</li><li>æ‚¨éœ€è¦æœ‰è¶³å¤Ÿçš„æƒé™æ¥éƒ¨ç½²æ–°çš„ Kubernetes èµ„æºã€‚</li></ul></li><li><p><strong>å®‰è£…å‘½ä»¤</strong>ï¼š</p><ul><li><p>Argo Rollouts å¯ä»¥é€šè¿‡å…¶ Helm å›¾è¡¨æˆ–ä½¿ç”¨ kubectl ç›´æ¥ä»å…¶ GitHub ä»“åº“å®‰è£…ã€‚</p></li><li><p>ä½¿ç”¨ Helm å®‰è£…ï¼ˆå¦‚æœæ‚¨ä½¿ç”¨ Helmï¼‰:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>helm repo <span class="token function">add</span> argo https://argoproj.github.io/argo-helm
helm <span class="token function">install</span> argo-rollouts argo/argo-rollouts
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æˆ–è€…ï¼Œä½¿ç”¨ kubectl ä»å…¶ GitHub ä»“åº“å®‰è£…ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubectl create namespace argo-rollouts
kubectl apply <span class="token parameter variable">-n</span> argo-rollouts <span class="token parameter variable">-f</span> https://raw.githubusercontent.com/argoproj/argo-rollouts/stable/manifests/install.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ol><h3 id="å®šä¹‰-rollout-èµ„æº" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰-rollout-èµ„æº" aria-hidden="true">#</a> å®šä¹‰ Rollout èµ„æº</h3><ol><li><p><strong>åˆ›å»º Rollout èµ„æºå®šä¹‰</strong>ï¼š</p><ul><li>Rollout èµ„æºç±»ä¼¼äº Kubernetes çš„ Deployment èµ„æºï¼Œä½†å®ƒåŒ…å«é¢å¤–çš„å­—æ®µæ¥æŒ‡å®šéƒ¨ç½²ç­–ç•¥ï¼ˆä¾‹å¦‚é‡‘ä¸é›€æˆ–è“ç»¿éƒ¨ç½²ï¼‰ã€‚</li><li>åˆ›å»ºä¸€ä¸ª YAML æ–‡ä»¶ï¼Œå®šä¹‰æ‚¨çš„ Rolloutï¼ŒåŒ…æ‹¬é•œåƒã€å‰¯æœ¬æ•°ã€æ›´æ–°ç­–ç•¥ç­‰ã€‚</li></ul></li><li><p><strong>ç¤ºä¾‹ Rollout å®šä¹‰</strong>ï¼š</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> argoproj.io/v1alpha1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Rollout
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> example<span class="token punctuation">-</span>rollout
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> example
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> example
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> app
        <span class="token key atrule">image</span><span class="token punctuation">:</span> your<span class="token punctuation">-</span>image<span class="token punctuation">:</span>latest
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
  <span class="token key atrule">strategy</span><span class="token punctuation">:</span>
    <span class="token key atrule">canary</span><span class="token punctuation">:</span> 
      <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">setWeight</span><span class="token punctuation">:</span> <span class="token number">20</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pause</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">duration</span><span class="token punctuation">:</span> 1h<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="è§¦å‘å’Œç®¡ç†éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#è§¦å‘å’Œç®¡ç†éƒ¨ç½²" aria-hidden="true">#</a> è§¦å‘å’Œç®¡ç†éƒ¨ç½²</h3><ol><li><p><strong>åº”ç”¨ Rollout èµ„æº</strong>ï¼š</p><ul><li><p>ä½¿ç”¨ kubectl åº”ç”¨æ‚¨çš„ Rollout å®šä¹‰ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> your-rollout-definition.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li><li><p><strong>ç›‘æ§ Rollout çŠ¶æ€</strong>ï¼š</p><ul><li><p>ä½¿ç”¨ kubectl æ£€æŸ¥ Rollout çŠ¶æ€ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubectl argo rollouts get rollout example-rollout <span class="token parameter variable">--watch</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li><li><p><strong>ç®¡ç† Rollout</strong>ï¼š</p><ul><li>å¯ä»¥é€šè¿‡æ›´æ–° Rollout èµ„æºçš„å®šä¹‰ï¼ˆä¾‹å¦‚ï¼Œæ›´æ”¹é•œåƒæ ‡ç­¾ï¼‰æ¥è§¦å‘æ–°çš„éƒ¨ç½²ã€‚</li><li>ä½¿ç”¨ Argo Rollouts çš„ CLI å·¥å…·ï¼Œæ‚¨å¯ä»¥ç®¡ç† Rollout çš„æš‚åœã€æ¢å¤å’Œä¸­æ­¢ç­‰æ“ä½œã€‚</li></ul></li></ol><h4 id="argo-rolloutsçš„æ ¸å¿ƒåŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#argo-rolloutsçš„æ ¸å¿ƒåŠŸèƒ½" aria-hidden="true">#</a> Argo Rolloutsçš„æ ¸å¿ƒåŠŸèƒ½</h4><ul><li><strong>é«˜çº§éƒ¨ç½²ç­–ç•¥</strong>ï¼šæ”¯æŒè“ç»¿éƒ¨ç½²å’Œé‡‘ä¸é›€éƒ¨ç½²ç­‰ã€‚</li><li><strong>è‡ªåŠ¨åŒ–å›æ»š</strong>ï¼šå¦‚æœæ–°ç‰ˆæœ¬å‡ºç°é—®é¢˜ï¼Œå®ƒèƒ½è‡ªåŠ¨å›æ»šåˆ°ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬ã€‚</li><li><strong>æƒé‡å¼æµé‡åˆ†é…</strong>ï¼šå¯ä»¥æ§åˆ¶æ–°ç‰ˆæœ¬å’Œæ—§ç‰ˆæœ¬ä¹‹é—´çš„æµé‡åˆ†é…æ¯”ä¾‹ã€‚</li><li><strong>é›†æˆåº¦é«˜</strong>ï¼šä¸Istioã€NGINX Ingressç­‰æœåŠ¡ç½‘æ ¼å’ŒIngressæ§åˆ¶å™¨ç´§å¯†é›†æˆã€‚</li></ul><ol><li><strong>è“ç»¿éƒ¨ç½²</strong>ï¼š <ul><li>é¦–å…ˆï¼Œæ‚¨éƒ¨ç½²äº†æ–°ç‰ˆæœ¬ï¼ˆç»¿è‰²ç‰ˆæœ¬ï¼‰è€Œä¸ä¼šå½±å“åˆ°å½“å‰è¿è¡Œçš„æ—§ç‰ˆæœ¬ï¼ˆè“è‰²ç‰ˆæœ¬ï¼‰ã€‚</li><li>ä¸€æ—¦ç»¿è‰²ç‰ˆæœ¬å°±ç»ªå¹¶ä¸”ç»è¿‡äº†æµ‹è¯•éªŒè¯å…¶ç¨³å®šæ€§ï¼Œæµé‡å°†ä»è“è‰²ç‰ˆæœ¬å¹³æ»‘è½¬ç§»åˆ°ç»¿è‰²ç‰ˆæœ¬ã€‚</li><li>å¦‚æœç»¿è‰²ç‰ˆæœ¬è¿è¡Œè‰¯å¥½ï¼Œåˆ™å®Œæˆéƒ¨ç½²ï¼›å¦‚æœæœ‰é—®é¢˜ï¼Œåˆ™å¯ä»¥ç«‹å³åˆ‡æ¢å›è“è‰²ç‰ˆæœ¬ã€‚</li></ul></li><li><strong>é‡‘ä¸é›€éƒ¨ç½²</strong>ï¼š <ul><li>åœ¨è¿™ç§ç­–ç•¥ä¸­ï¼Œæ‚¨ä¼šé€æ¸å‘æ–°ç‰ˆæœ¬ï¼ˆé‡‘ä¸é›€ç‰ˆæœ¬ï¼‰å¼•å…¥ä¸€å°éƒ¨åˆ†ç”¨æˆ·æµé‡ã€‚</li><li>åˆå§‹é˜¶æ®µï¼Œåªæœ‰å°‘é‡çš„æµé‡è¢«è·¯ç”±åˆ°æ–°ç‰ˆæœ¬ï¼ŒåŒæ—¶ç›‘æ§å…¶æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</li><li>å¦‚æœæ–°ç‰ˆæœ¬è¡¨ç°è‰¯å¥½ï¼Œæ‚¨å¯ä»¥é€æ¸å¢åŠ æµé‡æ¯”ä¾‹ï¼Œç›´åˆ°å…¨éƒ¨æµé‡éƒ½è½¬ç§»åˆ°æ–°ç‰ˆæœ¬ã€‚</li><li>å¦‚æœæ–°ç‰ˆæœ¬å‡ºç°é—®é¢˜ï¼Œå¯ä»¥ç«‹å³åœæ­¢æµé‡çš„è½¬ç§»ï¼Œå¹¶å°†å…¶è·¯ç”±å›æ—§ç‰ˆæœ¬ã€‚</li></ul></li></ol><h3 id="è“ç»¿å‘å¸ƒ" tabindex="-1"><a class="header-anchor" href="#è“ç»¿å‘å¸ƒ" aria-hidden="true">#</a> è“ç»¿å‘å¸ƒ</h3><p>æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œæ”¯æŒå£°æ˜å¼çš„ Deployment çš„æ»šåŠ¨æ›´æ–°æ˜¯æ›´æ–°åº”ç”¨çš„ç»ä½³æ–¹å¼ï¼Œå› ä¸ºä½ çš„åº”ç”¨åœ¨éƒ¨ç½²æœŸé—´å°†ä½¿ç”¨å¤§è‡´ç›¸åŒæ•°é‡çš„èµ„æºï¼Œä¸”åœæœºæ—¶é—´ä¸ºé›¶ï¼Œå¯¹æ€§èƒ½çš„å½±å“æœ€å°ã€‚ç„¶è€Œï¼Œç”±äºå‘åä¸å…¼å®¹æ€§æˆ–æœ‰çŠ¶æ€æ€§ï¼Œæœ‰è®¸å¤šé—ç•™åº”ç”¨ç¨‹åºä¸èƒ½å¾ˆå¥½åœ°ä¸æ»šåŠ¨æ›´æ–°ä¸€èµ·å·¥ä½œã€‚æœ‰äº›åº”ç”¨ç¨‹åºå¯èƒ½è¿˜éœ€è¦éƒ¨ç½²æ–°ç‰ˆæœ¬å¹¶ç«‹å³åˆ‡æ¢åˆ°è¯¥ç‰ˆæœ¬ï¼Œæˆ–è€…åœ¨å‡ºç°é—®é¢˜æ—¶å¿«é€Ÿå›æ»šã€‚å¯¹äºè¿™äº›ç”¨ä¾‹ï¼Œè“ç»¿è‰²éƒ¨ç½²å°†æ˜¯é€‚å½“çš„éƒ¨ç½²ç­–ç•¥ã€‚è“ç»¿éƒ¨ç½²é€šè¿‡è®©ä¸¤ä¸ªéƒ¨ç½²åŒæ—¶å®Œå…¨æ‰©å±•ï¼Œä½†åªå°†ä¼ å…¥æµé‡å®šå‘åˆ°ä¸¤ä¸ªéƒ¨ç½²ä¸­çš„ä¸€ä¸ªæ¥å®ç°è¿™äº›ã€‚</p><blockquote><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ Nginx Ingress æ§åˆ¶å™¨å°† 100% çš„æµé‡è·¯ç”±åˆ° blue æˆ–è€… green deploymentï¼Œå› ä¸ºå†…ç½®çš„ kubernetes service åªæ”¯æŒ iptablesï¼Œå¹¶ä¸é‡ç½®ä¸ pod çš„ç°æœ‰é“¾æ¥ï¼Œå› æ­¤ä¸é€‚åˆè“ç»¿å‘å¸ƒã€‚</p></blockquote><p>åœ¨ Kubernetes ç¯å¢ƒä¸­ï¼Œè™½ç„¶å£°æ˜å¼çš„ Deployment é€šè¿‡æ»šåŠ¨æ›´æ–°ï¼ˆRolling Updateï¼‰æä¾›äº†é›¶åœæœºæ—¶é—´å’Œæœ€å°åŒ–å¯¹æ€§èƒ½çš„å½±å“ï¼Œä½†ç¡®å®å­˜åœ¨æŸäº›æƒ…å†µå’Œåº”ç”¨ç¨‹åºç±»å‹ï¼Œå…¶ä¸­è¿™ç§æ–¹æ³•å¯èƒ½ä¸æ˜¯æœ€ä½³é€‰æ‹©ã€‚ç‰¹åˆ«æ˜¯å¯¹äºé‚£äº›æœ‰çŠ¶æ€æ€§ï¼ˆStatefulï¼‰åº”ç”¨æˆ–å› å‘åä¸å…¼å®¹æ€§è€Œéš¾ä»¥è¿›è¡Œæ»šåŠ¨æ›´æ–°çš„é—ç•™åº”ç”¨ç¨‹åºï¼Œè“ç»¿éƒ¨ç½²ï¼ˆBlue-Green Deploymentï¼‰å¯èƒ½æ›´é€‚åˆã€‚</p><h3 id="iptable" tabindex="-1"><a class="header-anchor" href="#iptable" aria-hidden="true">#</a> Iptable</h3><p>Iptables æ˜¯ Linux ä¸Šä¸€ç§å¼ºå¤§çš„é˜²ç«å¢™å·¥å…·ï¼Œç”¨äºæ§åˆ¶è¿›å‡º Linux ç³»ç»Ÿçš„ç½‘ç»œæµé‡ã€‚å®ƒæ˜¯åŸºäº Netfilter æä¾›çš„ç½‘ç»œåŒ…è¿‡æ»¤æ¡†æ¶ï¼Œå…è®¸ç³»ç»Ÿç®¡ç†å‘˜é…ç½®è§„åˆ™é›†ï¼Œä»¥è¿‡æ»¤æµé‡å¹¶æä¾› NAT åŠŸèƒ½ã€‚</p><h4 id="ä¸»è¦ç‰¹ç‚¹å’ŒåŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#ä¸»è¦ç‰¹ç‚¹å’ŒåŠŸèƒ½" aria-hidden="true">#</a> ä¸»è¦ç‰¹ç‚¹å’ŒåŠŸèƒ½</h4><ol><li><strong>åŒ…è¿‡æ»¤</strong>ï¼š <ul><li>Iptables å¯ä»¥è¿‡æ»¤è¿›å‡ºç³»ç»Ÿçš„æ•°æ®åŒ…ï¼ŒåŒ…æ‹¬æºåœ°å€ã€ç›®çš„åœ°å€ã€ä¼ è¾“åè®®ç­‰ã€‚</li><li>å®ƒå¯ä»¥æ¥å—ã€æ‹’ç»æˆ–ä¸¢å¼ƒæ•°æ®åŒ…ï¼Œæ ¹æ®å®šä¹‰çš„è§„åˆ™å¯¹ç½‘ç»œæµé‡è¿›è¡Œç²¾ç¡®æ§åˆ¶ã€‚</li></ul></li><li><strong>é“¾å’Œè¡¨</strong>ï¼š <ul><li>Iptables ä½¿ç”¨é“¾ï¼ˆChainsï¼‰å’Œè¡¨ï¼ˆTablesï¼‰æ¥ç»„ç»‡è§„åˆ™ã€‚</li><li>å¸¸è§çš„é“¾æœ‰ INPUTã€OUTPUT å’Œ FORWARDï¼Œåˆ†åˆ«æ§åˆ¶è¿›å…¥ç³»ç»Ÿã€ç¦»å¼€ç³»ç»Ÿå’Œç©¿è¿‡ç³»ç»Ÿçš„æµé‡ã€‚</li><li>è¡¨å¦‚ <code>filter</code>ã€<code>nat</code> å’Œ <code>mangle</code> è¡¨ç”¨äºä¸åŒç±»å‹çš„æµé‡å¤„ç†ã€‚</li></ul></li><li><strong>NATï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰</strong>ï¼š <ul><li><code>Iptables</code> æ”¯æŒ NAT åŠŸèƒ½ï¼ŒåŒ…æ‹¬æºåœ°å€è½¬æ¢ï¼ˆSNATï¼‰å’Œç›®çš„åœ°å€è½¬æ¢ï¼ˆDNATï¼‰ã€‚</li><li>è¿™å¯¹äºè·¯ç”±å’Œè½¬å‘æµé‡è‡³å†…éƒ¨ç½‘ç»œä¸­çš„ç§æœ‰åœ°å€éå¸¸é‡è¦ã€‚</li></ul></li><li><strong>çŠ¶æ€è·Ÿè¸ª</strong>ï¼š <ul><li>Iptables èƒ½å¤Ÿè·Ÿè¸ªç½‘ç»œè¿æ¥çš„çŠ¶æ€ï¼Œå¦‚æ–°å»ºã€å·²å»ºç«‹ã€ç›¸å…³è”å’Œæ— æ•ˆè¿æ¥ã€‚</li><li>è¿™å…è®¸åŸºäºè¿æ¥çŠ¶æ€åº”ç”¨è§„åˆ™ï¼Œæé«˜è¿‡æ»¤çš„çµæ´»æ€§å’Œæ•ˆæœã€‚</li></ul></li></ol><h4 id="åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#åº”ç”¨åœºæ™¯" aria-hidden="true">#</a> åº”ç”¨åœºæ™¯</h4><ol><li><strong>å®‰å…¨é˜²æŠ¤</strong>ï¼š <ul><li>åœ¨æœåŠ¡å™¨å’Œç½‘ç»œè®¾å¤‡ä¸Šå®æ–½é˜²ç«å¢™è§„åˆ™ï¼Œé˜²æ­¢æœªæˆæƒè®¿é—®å’Œæ”»å‡»ã€‚</li></ul></li><li><strong>æµé‡ç®¡ç†</strong>ï¼š <ul><li>ç®¡ç†å’Œé™åˆ¶ç‰¹å®šç±»å‹çš„æµé‡ï¼Œä¼˜åŒ–ç½‘ç»œä½¿ç”¨ã€‚</li></ul></li><li><strong>ç½‘ç»œè°ƒè¯•</strong>ï¼š <ul><li>è·Ÿè¸ªå’Œç›‘æ§ç½‘ç»œæµé‡ï¼Œå¸®åŠ©è¯Šæ–­ç½‘ç»œé—®é¢˜ã€‚</li></ul></li></ol><h4 id="ä½¿ç”¨ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨ç¤ºä¾‹" aria-hidden="true">#</a> ä½¿ç”¨ç¤ºä¾‹</h4><ul><li><p>é˜»æ­¢æ¥è‡ªç‰¹å®š IP åœ°å€çš„æµé‡ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-s</span> <span class="token number">123.456</span>.789.0 <span class="token parameter variable">-j</span> DROP
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>å…è®¸ç‰¹å®šç«¯å£çš„æµé‡ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>iptables <span class="token parameter variable">-A</span> INPUT <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--dport</span> <span class="token number">22</span> <span class="token parameter variable">-j</span> ACCEPT
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><p>Iptables çš„çµæ´»æ€§å’Œå¼ºå¤§åŠŸèƒ½ä½¿å…¶æˆä¸º Linux ç³»ç»Ÿä¸­ç®¡ç†ç½‘ç»œæµé‡å’Œå®æ–½å®‰å…¨ç­–ç•¥çš„å…³é”®å·¥å…·ã€‚ç„¶è€Œï¼Œç”±äºå…¶å¤æ‚æ€§ï¼Œå»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è°¨æ…ä½¿ç”¨ï¼Œå¹¶ä¸”åœ¨åº”ç”¨ä»»ä½•è§„åˆ™ä¹‹å‰è¿›è¡Œå……åˆ†çš„æµ‹è¯•ã€‚</p><h3 id="è“ç»¿éƒ¨ç½²çš„å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#è“ç»¿éƒ¨ç½²çš„å·¥ä½œåŸç†" aria-hidden="true">#</a> è“ç»¿éƒ¨ç½²çš„å·¥ä½œåŸç†</h3><p>è“ç»¿éƒ¨ç½²çš„æ ¸å¿ƒæ€æƒ³æ˜¯åŒæ—¶ç»´æŠ¤ä¸¤ä¸ªç”Ÿäº§ç¯å¢ƒï¼ˆæˆ–éƒ¨ç½²ï¼‰çš„å®Œå…¨ä¸åŒç‰ˆæœ¬ï¼šä¸€ä¸ªè“è‰²ï¼ˆBlueï¼‰ç‰ˆæœ¬å’Œä¸€ä¸ªç»¿è‰²ï¼ˆGreenï¼‰ç‰ˆæœ¬ã€‚</p><ul><li><strong>è“è‰²éƒ¨ç½²</strong>ï¼šå½“å‰è¿è¡Œçš„æ—§ç‰ˆæœ¬ã€‚</li><li><strong>ç»¿è‰²éƒ¨ç½²</strong>ï¼šæ–°ç‰ˆæœ¬ï¼Œä¸è“è‰²éƒ¨ç½²ç›¸åŒä½†åŒ…å«æ›´æ–°ã€‚</li></ul><p>è¿™ä¸¤ä¸ªéƒ¨ç½²éƒ½ä¼šå®Œå…¨æ‰©å±•ï¼Œä½†åœ¨ä»»ä½•æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªéƒ¨ç½²ï¼ˆè“è‰²æˆ–ç»¿è‰²ï¼‰ä¼šæ¥æ”¶åˆ°æ‰€æœ‰ä¼ å…¥æµé‡ã€‚</p><h3 id="ä½¿ç”¨-nginx-ingress-æ§åˆ¶å™¨å®ç°è“ç»¿éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-nginx-ingress-æ§åˆ¶å™¨å®ç°è“ç»¿éƒ¨ç½²" aria-hidden="true">#</a> ä½¿ç”¨ Nginx Ingress æ§åˆ¶å™¨å®ç°è“ç»¿éƒ¨ç½²</h3><ol><li><p><strong>æµé‡è·¯ç”±</strong>ï¼š</p><ul><li><p>åœ¨è“ç»¿éƒ¨ç½²ä¸­ï¼ŒNginx Ingress æ§åˆ¶å™¨å¯ä»¥ç”¨äºå°†100%çš„æµé‡è·¯ç”±åˆ°è“è‰²æˆ–ç»¿è‰²éƒ¨ç½²ã€‚æˆ–è€…æ˜¯å°†éƒ¨åˆ†çš„æµé‡è·¯ç”±åˆ°è“è‰²éƒ¨ç½²ï¼Œéƒ¨åˆ†çš„æµé‡è·¯ç”±åˆ°ç»¿è‰²éƒ¨ç½²ã€‚</p><blockquote><p>å“ˆå“ˆå“ˆä½†æ˜¯è¿™æ ·è²Œä¼¼å°±ä¸æ˜¯è“ç»¿éƒ¨ç½²äº†ï¼Œæœ‰ç‚¹åƒæ˜¯é‡‘ä¸é›€éƒ¨ç½²ï¼š</p><p>å¦‚æœæ‚¨çš„éœ€æ±‚æ˜¯åŒæ—¶å‘è“è‰²å’Œç»¿è‰²éƒ¨ç½²åˆ†é…æµé‡ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨é‡‘ä¸é›€éƒ¨ç½²ï¼ˆCanary Deploymentï¼‰ã€‚åœ¨é‡‘ä¸é›€éƒ¨ç½²ä¸­ï¼Œæ–°ç‰ˆæœ¬ï¼ˆé‡‘ä¸é›€ï¼‰æœ€åˆåªæ¥æ”¶ä¸€å°éƒ¨åˆ†æµé‡ï¼Œè€Œä¸»è¦æµé‡ä»ç„¶è·¯ç”±åˆ°æ—§ç‰ˆæœ¬ã€‚æ ¹æ®æ–°ç‰ˆæœ¬çš„æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œé€æ¸å¢åŠ æµå‘æ–°ç‰ˆæœ¬çš„æµé‡æ¯”ä¾‹ã€‚</p></blockquote></li><li><p>è¿™æ˜¯é€šè¿‡æ›´æ–° Ingress èµ„æºæ¥å®ç°çš„ï¼Œè¯¥èµ„æºå†³å®šäº†å“ªä¸ªæœåŠ¡ï¼ˆè“è‰²è¿˜æ˜¯ç»¿è‰²ï¼‰å°†æ¥æ”¶æµé‡ã€‚</p></li></ul></li><li><p><strong>Kubernetes Service çš„å±€é™æ€§</strong>ï¼š</p><ul><li>Kubernetes Service åŸºäº iptables å®ç°ï¼Œä¸ä¼šé‡ç½®ä¸Podçš„ç°æœ‰è¿æ¥ã€‚</li><li>è¿™æ„å‘³ç€åœ¨è¿›è¡Œç‰ˆæœ¬åˆ‡æ¢æ—¶ï¼Œä¸€äº›ç°æœ‰çš„è¿æ¥å¯èƒ½ä»ç„¶æŒ‡å‘æ—§ç‰ˆæœ¬çš„Podï¼Œè¿™å¯¹äºéœ€è¦ç«‹å³åˆ‡æ¢å’Œå¿«é€Ÿå›æ»šçš„åº”ç”¨ä¸æ˜¯æœ€ä½³é€‰æ‹©ã€‚</li><li>å› æ­¤ï¼Œå¯¹äºè“ç»¿éƒ¨ç½²ï¼Œä½¿ç”¨åƒ Nginx è¿™æ ·çš„ Ingress æ§åˆ¶å™¨å¯ä»¥æ›´å¥½åœ°ç®¡ç†æµé‡åˆ‡æ¢ï¼Œå› ä¸ºå®ƒèƒ½æ›´ç²¾ç¡®åœ°æ§åˆ¶æµé‡çš„è·¯ç”±ã€‚</li></ul></li></ol><h3 id="ä½¿ç”¨-deployment-å®ç°è“ç»¿éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-deployment-å®ç°è“ç»¿éƒ¨ç½²" aria-hidden="true">#</a> ä½¿ç”¨ Deployment å®ç°è“ç»¿éƒ¨ç½²</h3><p><img src="http://sm.nsddd.top/sm202311270932090.png" alt="deployment-blue-green"></p><blockquote><p>The diagram illustrating the concept of Blue-Green Deployment in a Kubernetes environment using NGINX Ingress and Deployments is ready. It visually explains how traffic is directed to either the Blue or Green Deployments, showcasing the clear separation and traffic management between these two deployments.</p></blockquote><p>è¦ä½¿ç”¨ Ingress å®ç° Kubernetes ä¸­çš„è“ç»¿éƒ¨ç½²ï¼Œæ‚¨éœ€è¦å‡†å¤‡ä¸¤å¥—å®Œå…¨ä¸€æ ·ä½†ä¸åŒç‰ˆæœ¬çš„åº”ç”¨éƒ¨ç½²ï¼ˆDeploymentï¼‰ï¼Œä¸€ä¸ª Ingress æ§åˆ¶å™¨ï¼ˆä¾‹å¦‚ NGINXï¼‰ï¼Œä»¥åŠä¸€ä¸ª Ingress èµ„æºæ¥æ§åˆ¶æµé‡çš„è·¯ç”±ã€‚ä»¥ä¸‹æ˜¯å®ç°è¿™ä¸€ç­–ç•¥çš„æ­¥éª¤å’Œç¤ºä¾‹ä»£ç ã€‚</p><h3 id="è®¾è®¡æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#è®¾è®¡æ–¹æ¡ˆ" aria-hidden="true">#</a> è®¾è®¡æ–¹æ¡ˆ</h3><ol><li><strong>å‡†å¤‡ä¸¤ä¸ª Deployment</strong>ï¼š <ul><li>ä¸€ä¸ªâ€œè“è‰²â€Deploymentï¼Œè¿è¡Œå½“å‰ç‰ˆæœ¬çš„åº”ç”¨ã€‚</li><li>ä¸€ä¸ªâ€œç»¿è‰²â€Deploymentï¼Œè¿è¡Œæ–°ç‰ˆæœ¬çš„åº”ç”¨ã€‚</li></ul></li><li><strong>é…ç½® Service</strong>ï¼š <ul><li>ä¸ºæ¯ä¸ª Deployment åˆ›å»ºä¸€ä¸ª Serviceã€‚è¿™äº› Service å°†ä½œä¸ºæµé‡çš„å…¥å£ç‚¹ã€‚</li></ul></li><li><strong>è®¾ç½® Ingress æ§åˆ¶å™¨</strong>ï¼š <ul><li>ç¡®ä¿æ‚¨çš„ Kubernetes é›†ç¾¤ä¸­å·²å®‰è£…å¹¶è¿è¡Œäº† Ingress æ§åˆ¶å™¨ï¼Œä¾‹å¦‚ NGINXã€‚</li></ul></li><li><strong>ç¼–å†™ Ingress èµ„æº</strong>ï¼š <ul><li>åˆ›å»ºä¸€ä¸ª Ingress èµ„æºæ¥å®šä¹‰æµé‡è·¯ç”±è§„åˆ™ã€‚å¼€å§‹æ—¶ï¼Œå°†æ‰€æœ‰æµé‡è·¯ç”±åˆ°è“è‰² Deploymentã€‚</li><li>å½“å‡†å¤‡å°†æµé‡åˆ‡æ¢åˆ°ç»¿è‰² Deployment æ—¶ï¼Œæ›´æ–° Ingress èµ„æºã€‚</li></ul></li><li><strong>ç›‘æ§å’Œåˆ‡æ¢</strong>ï¼š <ul><li>åœ¨åˆ‡æ¢æµé‡ä¹‹å‰ï¼Œç¡®ä¿ç»¿è‰² Deployment å®Œå…¨å°±ç»ªä¸”æµ‹è¯•æ— è¯¯ã€‚</li><li>é€šè¿‡æ›´æ–° Ingress è§„åˆ™ï¼Œå°†æµé‡ä»è“è‰²åˆ‡æ¢åˆ°ç»¿è‰² Deploymentã€‚</li><li>å¦‚æœæ–°ç‰ˆæœ¬è¿è¡Œæ­£å¸¸ï¼Œç»§ç»­å°†æµé‡è·¯ç”±åˆ°ç»¿è‰² Deploymentï¼›å¦‚æœæœ‰é—®é¢˜ï¼Œå¯ä»¥å¿«é€Ÿåˆ‡å›è“è‰² Deploymentã€‚</li></ul></li></ol><p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p><p><strong>è“è‰² Deployment</strong> (<code>blue-deployment.yaml</code>):</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> blue<span class="token punctuation">-</span>deployment
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp
      <span class="token key atrule">version</span><span class="token punctuation">:</span> blue
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp
        <span class="token key atrule">version</span><span class="token punctuation">:</span> blue
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp
        <span class="token key atrule">image</span><span class="token punctuation">:</span> myapp<span class="token punctuation">:</span>blue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç»¿è‰² Deployment</strong> (<code>green-deployment.yaml</code>):</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> green<span class="token punctuation">-</span>deployment
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp
      <span class="token key atrule">version</span><span class="token punctuation">:</span> green
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp
        <span class="token key atrule">version</span><span class="token punctuation">:</span> green
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp
        <span class="token key atrule">image</span><span class="token punctuation">:</span> myapp<span class="token punctuation">:</span>green

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç»“åˆargo Rollouts</strong></p><p>è¦å°† Argo Rollouts ä¸è“ç»¿éƒ¨ç½²ç»“åˆèµ·æ¥ï¼Œæ‚¨å¯ä»¥é€šè¿‡ Argo Rollouts å®šä¹‰å’Œç®¡ç†è“ç»¿éƒ¨ç½²è¿‡ç¨‹ï¼ŒåŒæ—¶åˆ©ç”¨å…¶å¼ºå¤§çš„æµé‡æ§åˆ¶å’Œè‡ªåŠ¨åŒ–å›æ»šåŠŸèƒ½ã€‚è¿™éœ€è¦æ‚¨åœ¨ Kubernetes é›†ç¾¤ä¸­å®‰è£… Argo Rollouts æ§åˆ¶å™¨ï¼Œå¹¶å®šä¹‰ç›¸åº”çš„ Rollout èµ„æºæ¥ä»£æ›¿æ ‡å‡†çš„ Deployment èµ„æºã€‚</p><h3 id="ç»“åˆargo-rolloutsè®¾è®¡æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#ç»“åˆargo-rolloutsè®¾è®¡æ–¹æ¡ˆ" aria-hidden="true">#</a> ç»“åˆargo Rolloutsè®¾è®¡æ–¹æ¡ˆ</h3><ol><li><strong>å®‰è£… Argo Rollouts æ§åˆ¶å™¨</strong>ï¼š <ul><li>ç¡®ä¿æ‚¨çš„ Kubernetes é›†ç¾¤ä¸­å·²ç»å®‰è£…äº† Argo Rolloutsã€‚</li></ul></li><li><strong>å®šä¹‰ Rollout èµ„æº</strong>ï¼š <ul><li>æ›¿ä»£ä¼ ç»Ÿçš„ Deployment èµ„æºï¼Œä½¿ç”¨ Rollout èµ„æºæ¥å®šä¹‰æ‚¨çš„åº”ç”¨éƒ¨ç½²ã€‚</li><li>åœ¨ Rollout é…ç½®ä¸­æŒ‡å®šè“ç»¿éƒ¨ç½²ç­–ç•¥ã€‚</li></ul></li><li><strong>é…ç½® Service</strong>ï¼š <ul><li>å®šä¹‰ Service æ¥æŒ‡å‘ Rollout ç®¡ç†çš„ Podsã€‚</li></ul></li><li><strong>é…ç½® Ingress</strong>ï¼š <ul><li>ä½¿ç”¨ Ingress èµ„æºæ¥æ§åˆ¶å¤–éƒ¨æµé‡è¿›å…¥æ‚¨çš„æœåŠ¡ã€‚</li></ul></li><li><strong>æµé‡è½¬ç§»</strong>ï¼š <ul><li>åˆ©ç”¨ Argo Rollouts çš„èƒ½åŠ›æ¥ç®¡ç†ä»è“è‰²åˆ°ç»¿è‰²çš„æµé‡è½¬ç§»ã€‚</li></ul></li></ol><h3 id="ç¤ºä¾‹ä»£ç " tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹ä»£ç " aria-hidden="true">#</a> ç¤ºä¾‹ä»£ç </h3><ol><li><p><strong>Rollout èµ„æº</strong> (<code>blue-green-rollout.yaml</code>):</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> argoproj.io/v1alpha1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Rollout
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> bluegreen<span class="token punctuation">-</span>rollout
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp
        <span class="token key atrule">image</span><span class="token punctuation">:</span> myapp<span class="token punctuation">:</span>latest
  <span class="token key atrule">strategy</span><span class="token punctuation">:</span>
    <span class="token key atrule">blueGreen</span><span class="token punctuation">:</span> 
      <span class="token key atrule">activeService</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>active
      <span class="token key atrule">previewService</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>preview
      <span class="token key atrule">autoPromotionEnabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>Active Service</strong> (<code>active-service.yaml</code>):</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>active
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>Preview Service</strong> (<code>preview-service.yaml</code>):</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>preview
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp
    <span class="token key atrule">rollouts-pod-template-hash</span><span class="token punctuation">:</span> &lt;HASH<span class="token punctuation">&gt;</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>Ingress èµ„æº</strong> (<code>ingress.yaml</code>):</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> networking.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Ingress
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>ingress
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">http</span><span class="token punctuation">:</span>
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">path</span><span class="token punctuation">:</span> /
        <span class="token key atrule">pathType</span><span class="token punctuation">:</span> Prefix
        <span class="token key atrule">backend</span><span class="token punctuation">:</span>
          <span class="token key atrule">service</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>active
            <span class="token key atrule">port</span><span class="token punctuation">:</span>
              <span class="token key atrule">number</span><span class="token punctuation">:</span> <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>åœ¨è¿™ä¸ªæ–¹æ¡ˆä¸­ï¼Œ<code>activeService</code> å’Œ <code>previewService</code> åˆ†åˆ«ä»£è¡¨å½“å‰æ´»è·ƒç‰ˆæœ¬å’Œé¢„è§ˆï¼ˆæ–°ç‰ˆæœ¬ï¼‰çš„æœåŠ¡ã€‚Argo Rollouts ä¼šæ ¹æ®é…ç½®è‡ªåŠ¨ç®¡ç†è“ç»¿éƒ¨ç½²è¿‡ç¨‹ï¼ŒåŒ…æ‹¬æµé‡çš„è½¬ç§»ã€‚æ‚¨å¯ä»¥é€šè¿‡æ›´æ–° Rollout èµ„æºä¸­çš„é•œåƒç‰ˆæœ¬æ¥è§¦å‘æ–°çš„éƒ¨ç½²ï¼Œå¹¶ä½¿ç”¨ Argo Rollouts çš„å‘½ä»¤è¡Œå·¥å…·æ¥æ§åˆ¶æµé‡è½¬ç§»å’Œä¿ƒè¿›æ–°ç‰ˆæœ¬çš„å‘å¸ƒã€‚</p><h2 id="é‡‘ä¸é›€éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#é‡‘ä¸é›€éƒ¨ç½²" aria-hidden="true">#</a> é‡‘ä¸é›€éƒ¨ç½²</h2><p>é‡‘ä¸é›€éƒ¨ç½²æ˜¯ä¸€ç§æŠ€æœ¯ï¼š</p><blockquote><p>é‡‘ä¸é›€éƒ¨ç½²ï¼ˆCanary Deploymentï¼‰æ˜¯ä¸€ç§è½¯ä»¶å‘å¸ƒæŠ€æœ¯ï¼Œå®ƒåœ¨æ›´æ–°åº”ç”¨ç¨‹åºæ—¶é‡‡å–é€æ­¥çš„æ–¹æ³•ï¼Œä»¥æœ€å°åŒ–é£é™©ã€‚è¿™ç§ç­–ç•¥çš„å‘½åæºäºçŸ¿å·¥ä½¿ç”¨é‡‘ä¸é›€ä½œä¸ºä¸€ç§å®‰å…¨é¢„è­¦ç³»ç»Ÿçš„å†å²ã€‚åœ¨è½¯ä»¶éƒ¨ç½²çš„è¯­å¢ƒä¸­ï¼Œå®ƒä»£è¡¨äº†é€æ¸å¼•å…¥æ–°ç‰ˆæœ¬åº”ç”¨ç¨‹åºçš„è¿‡ç¨‹ï¼Œä»¥ä¾¿åœ¨å…¨é¢éƒ¨ç½²å‰å¯¹å…¶è¿›è¡Œæµ‹è¯•å’ŒéªŒè¯ã€‚</p></blockquote><h3 id="ç‰¹ç‚¹" tabindex="-1"><a class="header-anchor" href="#ç‰¹ç‚¹" aria-hidden="true">#</a> ç‰¹ç‚¹</h3><ol><li><strong>é€æ­¥æ¨å‡º</strong>ï¼š <ul><li>æ–°ç‰ˆæœ¬åˆå§‹åªå‘ä¸€å°éƒ¨åˆ†ç”¨æˆ·æˆ–ç¯å¢ƒå‘å¸ƒï¼Œè€Œå¤§éƒ¨åˆ†ç”¨æˆ·ä»ç„¶ä½¿ç”¨æ—§ç‰ˆæœ¬ã€‚</li></ul></li><li><strong>é£é™©æ§åˆ¶</strong>ï¼š <ul><li>å¦‚æœæ–°ç‰ˆæœ¬è¡¨ç°ä¸ä½³ï¼ˆå¦‚å‡ºç°é”™è¯¯æˆ–æ€§èƒ½é—®é¢˜ï¼‰ï¼Œåˆ™å½±å“çš„ç”¨æˆ·èŒƒå›´æœ‰é™ï¼Œä¸”å¯ä»¥è¿…é€Ÿå›æ»šã€‚</li></ul></li><li><strong>å®æ—¶åé¦ˆ</strong>ï¼š <ul><li>æä¾›æœºä¼šè§‚å¯Ÿæ–°ç‰ˆæœ¬åœ¨å®é™…ç¯å¢ƒä¸­çš„è¡¨ç°ï¼Œæ”¶é›†å®æ—¶åé¦ˆå’Œæ€§èƒ½æ•°æ®ã€‚</li></ul></li></ol><h3 id="å®æ–½æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#å®æ–½æ­¥éª¤" aria-hidden="true">#</a> å®æ–½æ­¥éª¤</h3><ol><li><strong>åˆå§‹å‘å¸ƒ</strong>ï¼š <ul><li>æ–°ç‰ˆæœ¬æœ€åˆåªå¯¹ä¸€å°ç»„ç”¨æˆ·æˆ–ä¸€éƒ¨åˆ†æµé‡å¯è§ã€‚</li></ul></li><li><strong>ç›‘æ§å’Œè¯„ä¼°</strong>ï¼š <ul><li>å¯¹æ–°ç‰ˆæœ¬çš„æ€§èƒ½ã€ç¨³å®šæ€§å’Œç”¨æˆ·åé¦ˆè¿›è¡ŒæŒç»­ç›‘æ§ã€‚</li></ul></li><li><strong>é€æ­¥å¢åŠ è¦†ç›–ç‡</strong>ï¼š <ul><li>å¦‚æœæ–°ç‰ˆæœ¬è¡¨ç°è‰¯å¥½ï¼Œé€æ­¥å¢åŠ å…¶å¯¹ç”¨æˆ·æˆ–æµé‡çš„è¦†ç›–èŒƒå›´ã€‚</li></ul></li><li><strong>å…¨é¢éƒ¨ç½²æˆ–å›æ»š</strong>ï¼š <ul><li>æ ¹æ®åé¦ˆå’Œç›‘æ§ç»“æœï¼Œå†³å®šæ˜¯å…¨é¢éƒ¨ç½²æ–°ç‰ˆæœ¬è¿˜æ˜¯å›æ»šåˆ°æ—§ç‰ˆæœ¬ã€‚</li></ul></li></ol><h3 id="åº”ç”¨åœºæ™¯-1" tabindex="-1"><a class="header-anchor" href="#åº”ç”¨åœºæ™¯-1" aria-hidden="true">#</a> åº”ç”¨åœºæ™¯</h3><ul><li><strong>é«˜é£é™©æ›´æ–°</strong>ï¼šå¯¹äºå¯èƒ½å¯¹ç³»ç»Ÿç¨³å®šæ€§æˆ–ç”¨æˆ·ä½“éªŒæœ‰é‡å¤§å½±å“çš„æ›´æ–°ã€‚</li><li><strong>å¤§å‹åº”ç”¨</strong>ï¼šåœ¨å¤§å‹æˆ–å¤æ‚çš„åº”ç”¨ä¸­ï¼Œä¸åŒç”¨æˆ·ç¾¤å¯èƒ½å¯¹æ›´æ–°æœ‰ä¸åŒçš„ååº”ã€‚</li><li><strong>è¿ç»­éƒ¨ç½²ç¯å¢ƒ</strong>ï¼šåœ¨æ•æ·å¼€å‘å’ŒæŒç»­é›†æˆ/æŒç»­éƒ¨ç½² (CI/CD) ç¯å¢ƒä¸­ï¼Œé‡‘ä¸é›€éƒ¨ç½²å¯ä»¥ä½œä¸ºä¸€ç§æœ‰æ•ˆçš„é£é™©ç®¡ç†å·¥å…·ã€‚</li></ul><h3 id="ä½¿ç”¨-ingress-å’Œ-deployment-å®ç°é‡‘ä¸é›€éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-ingress-å’Œ-deployment-å®ç°é‡‘ä¸é›€éƒ¨ç½²" aria-hidden="true">#</a> ä½¿ç”¨ Ingress å’Œ Deployment å®ç°é‡‘ä¸é›€éƒ¨ç½²</h3><h4 id="è®¾è®¡æ–¹æ¡ˆ-1" tabindex="-1"><a class="header-anchor" href="#è®¾è®¡æ–¹æ¡ˆ-1" aria-hidden="true">#</a> è®¾è®¡æ–¹æ¡ˆ</h4><ol><li><strong>å‡†å¤‡ä¸¤ä¸ª Deployment</strong>ï¼š <ul><li>ä¸€ä¸ªä¸ºå½“å‰ç‰ˆæœ¬ï¼ˆä¾‹å¦‚ï¼Œæ ‡è®°ä¸º <code>version: stable</code>ï¼‰ã€‚</li><li>å¦ä¸€ä¸ªä¸ºæ–°ç‰ˆæœ¬ï¼ˆä¾‹å¦‚ï¼Œæ ‡è®°ä¸º <code>version: canary</code>ï¼‰ã€‚</li></ul></li><li><strong>é…ç½® Service</strong>ï¼š <ul><li>ä¸ºæ¯ä¸ª Deployment åˆ›å»ºä¸€ä¸ª Serviceã€‚</li></ul></li><li><strong>é…ç½® Ingress</strong>ï¼š <ul><li>ä½¿ç”¨ Ingress èµ„æºå®šä¹‰æµé‡çš„åˆ†é…ç­–ç•¥ï¼ŒæŒ‡å®šä¸€éƒ¨åˆ†æµé‡åˆ°æ–°ç‰ˆæœ¬ã€‚</li></ul></li></ol><h4 id="ç¤ºä¾‹ä»£ç -1" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹ä»£ç -1" aria-hidden="true">#</a> ç¤ºä¾‹ä»£ç </h4><ol><li><p><strong>Stable Deployment</strong> (<code>stable-deployment.yaml</code>):</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>stable
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp
      <span class="token key atrule">version</span><span class="token punctuation">:</span> stable
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp
        <span class="token key atrule">version</span><span class="token punctuation">:</span> stable
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp
        <span class="token key atrule">image</span><span class="token punctuation">:</span> myapp<span class="token punctuation">:</span>stable
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>Canary Deployment</strong> (<code>canary-deployment.yaml</code>):</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>canary
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>  <span class="token comment"># Lesser replicas as it&#39;s a canary release</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp
      <span class="token key atrule">version</span><span class="token punctuation">:</span> canary
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp
        <span class="token key atrule">version</span><span class="token punctuation">:</span> canary
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp
        <span class="token key atrule">image</span><span class="token punctuation">:</span> myapp<span class="token punctuation">:</span>canary
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>Service</strong> (<code>service.yaml</code>):</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>yamlCopy codeapiVersion: v1
kind: Service
metadata:
  name: myapp-service
spec:
  selector:
    app: myapp
  ports:
  - protocol: TCP
    port: 80
    targetPort: 8080
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>Ingress èµ„æº</strong> (<code>ingress.yaml</code>):</p><ul><li>åœ¨è¿™é‡Œï¼Œæ‚¨éœ€è¦ä½¿ç”¨ Ingress æ§åˆ¶å™¨çš„ç‰¹å®šåŠŸèƒ½æ¥åˆ†é…æµé‡ï¼ˆä¾‹å¦‚ï¼ŒNGINX Ingress çš„æƒé‡åˆ†é…ï¼‰ã€‚</li></ul></li></ol><h3 id="ä½¿ç”¨-argo-rollouts-å®ç°é‡‘ä¸é›€éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-argo-rollouts-å®ç°é‡‘ä¸é›€éƒ¨ç½²" aria-hidden="true">#</a> ä½¿ç”¨ Argo Rollouts å®ç°é‡‘ä¸é›€éƒ¨ç½²</h3><h4 id="è®¾è®¡æ–¹æ¡ˆ-2" tabindex="-1"><a class="header-anchor" href="#è®¾è®¡æ–¹æ¡ˆ-2" aria-hidden="true">#</a> è®¾è®¡æ–¹æ¡ˆ</h4><ol><li><strong>å®‰è£… Argo Rollouts</strong>ï¼š <ul><li>ç¡®ä¿æ‚¨çš„ Kubernetes é›†ç¾¤ä¸­å·²ç»å®‰è£…äº† Argo Rolloutsã€‚</li></ul></li><li><strong>å®šä¹‰ Rollout èµ„æº</strong>ï¼š <ul><li>ä½¿ç”¨ Rollout èµ„æºæ¥å®šä¹‰åº”ç”¨éƒ¨ç½²ï¼Œå¹¶æŒ‡å®šé‡‘ä¸é›€ç­–ç•¥ã€‚</li></ul></li><li><strong>é…ç½® Service</strong>ï¼š <ul><li>å®šä¹‰ Service æ¥æŒ‡å‘ Rollout ç®¡ç†çš„ Podsã€‚</li></ul></li><li><strong>ç›‘æ§å’Œç®¡ç†éƒ¨ç½²</strong>ï¼š <ul><li>åˆ©ç”¨ Argo Rollouts æä¾›çš„å·¥å…·æ¥ç›‘æ§å’Œç®¡ç†éƒ¨ç½²è¿‡ç¨‹ã€‚</li></ul></li></ol><h4 id="ç¤ºä¾‹ä»£ç -2" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹ä»£ç -2" aria-hidden="true">#</a> ç¤ºä¾‹ä»£ç </h4><ol><li><p><strong>Rollout èµ„æº</strong> (<code>canary-rollout.yaml</code>):</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> argoproj.io/v1alpha1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Rollout
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp<span class="token punctuation">-</span>rollout
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">4</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> myapp
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> myapp
        <span class="token key atrule">image</span><span class="token punctuation">:</span> myapp<span class="token punctuation">:</span>new<span class="token punctuation">-</span>version
  <span class="token key atrule">strategy</span><span class="token punctuation">:</span>
    <span class="token key atrule">canary</span><span class="token punctuation">:</span>
      <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">setWeight</span><span class="token punctuation">:</span> <span class="token number">20</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pause</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">duration</span><span class="token punctuation">:</span> 48h<span class="token punctuation">}</span>
      <span class="token punctuation">-</span> <span class="token key atrule">setWeight</span><span class="token punctuation">:</span> <span class="token number">50</span>
      <span class="token punctuation">-</span> <span class="token key atrule">pause</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">duration</span><span class="token punctuation">:</span> 48h<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>Service</strong> (<code>service.yaml</code>):</p><ul><li>åŒä¸Šé¢çš„ Ingress å’Œ Deployment æ–¹æ³•ä¸­çš„ Serviceã€‚</li></ul></li></ol><p>åœ¨ä½¿ç”¨ Argo Rollouts çš„æƒ…å†µä¸‹ï¼Œéƒ¨ç½²çš„ç®¡ç†å’Œæµé‡åˆ†é…å˜å¾—æ›´åŠ ç®€å•å’Œç›´è§‚ã€‚æ‚¨å¯ä»¥æ›´ç²¾ç¡®åœ°æ§åˆ¶æ–°ç‰ˆæœ¬çš„æµé‡æ¯”ä¾‹ï¼Œå¹¶åˆ©ç”¨ Rollouts çš„è‡ªåŠ¨åŒ–ç‰¹æ€§æ¥ç›‘æ§éƒ¨ç½²çš„å¥åº·çŠ¶å†µå’Œè‡ªåŠ¨å›æ»š</p><h3 id="æ¸è¿›å¼éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#æ¸è¿›å¼éƒ¨ç½²" aria-hidden="true">#</a> æ¸è¿›å¼éƒ¨ç½²</h3><p>æ¸è¿›å¼éƒ¨ç½²æ˜¯é‡‘ä¸é›€éƒ¨ç½²çš„ä¸€ä¸ªå®Œå…¨çš„è‡ªåŠ¨åŒ–ç‰ˆæœ¬ã€‚æ¸è¿›å¼äº¤äº’ä¸æ˜¯åœ¨æ‰©å¤§é‡‘ä¸é›€éƒ¨ç½²ä¹‹å‰æ£€æµ‹ä¸€ä¸ªå›ºå®šçš„æ—¶é—´æ®µï¼Œè€Œæ˜¯æŒç»­ç›‘æµ‹ Pod çš„å¥åº·çŠ¶æ€ï¼Œå¹¶ä¸”ä¸æ–­æ‰©å¤§è§„æ¨¡ï¼Œç›´åˆ°å®Œå…¨æ‰©å±•ã€‚</p><h2 id="end-é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#end-é“¾æ¥" aria-hidden="true">#</a> END é“¾æ¥</h2><ul><li><div><a href="88.md" style="float:left;">â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”— </a><a href="90.md" style="float:right;"> ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul><ul><li><p><a href="/" class="">â“‚ï¸å›åˆ°ç›®å½•ğŸ </a></p></li><li><p><a href="https://nsddd.top/archives/contributors" target="_blank" rel="noopener noreferrer"><strong>ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–</strong><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</p></li><li><p>âœ´ï¸ç‰ˆæƒå£°æ˜ Â© ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª<a href="http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="noopener noreferrer">CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰Â©<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li></ul></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/3293172751/awesome-docker/edit/master/docs/Cloud-Native-k8s/89.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨GitHubä¸Šè´¡çŒ®æ­¤é¡µé¢"><!--[--><!--]--> åœ¨GitHubä¸Šè´¡çŒ®æ­¤é¡µé¢ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">ä¸Šæ¬¡æ›´æ–°: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">è´¡çŒ®è€…: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 3293172751nss@gmail.com">Xinwei Xiong</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 3293172751nss@gmail.com">xiongxinwei</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/Cloud-Native-k8s/88.html" class="" aria-label="ç¬¬88èŠ‚ å¹³å°å·¥ç¨‹çš„å­¦ä¹ "><!--[--><!--]--> ç¬¬88èŠ‚ å¹³å°å·¥ç¨‹çš„å­¦ä¹  <!--[--><!--]--></a></span><span class="next"><a href="/Cloud-Native-k8s/90.html" class="" aria-label="ç¬¬90èŠ‚ GitOps è¿›é˜¶ç†è®º"><!--[--><!--]--> ç¬¬90èŠ‚ GitOps è¿›é˜¶ç†è®º <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.9f14a191.js" defer></script>
  </body>
</html>
