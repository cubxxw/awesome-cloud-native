<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/img/1.jpg"><title>ç¬¬53èŠ‚ CRIã€CNIã€CSI åº•å±‚åˆ¨æ | ä½ å¥½</title><meta name="description" content="é“¾å­¦ç¤¾è‡´åŠ›äºæ‰“é€ å‡ºåŒºå—é“¾å»ä¸­å¿ƒåŒ–çš„å­¦ä¹ å¹³å°">
    <link rel="modulepreload" href="/assets/app.6a4cbc08.js"><link rel="modulepreload" href="/assets/53.html.b1f4b16a.js"><link rel="modulepreload" href="/assets/53.html.df9bfd27.js"><link rel="prefetch" href="/assets/index.html.06a2f3de.js"><link rel="prefetch" href="/assets/1.html.18938c4c.js"><link rel="prefetch" href="/assets/10.html.f664515e.js"><link rel="prefetch" href="/assets/11.html.894534ee.js"><link rel="prefetch" href="/assets/12.html.7be36974.js"><link rel="prefetch" href="/assets/13.html.63f1e7e4.js"><link rel="prefetch" href="/assets/14.html.89138f20.js"><link rel="prefetch" href="/assets/15.html.455305e3.js"><link rel="prefetch" href="/assets/16.html.b53d8f21.js"><link rel="prefetch" href="/assets/17.html.40724eb8.js"><link rel="prefetch" href="/assets/18.html.0c25012b.js"><link rel="prefetch" href="/assets/19.html.3ce29682.js"><link rel="prefetch" href="/assets/2.html.f4300b24.js"><link rel="prefetch" href="/assets/20.html.8858a4e9.js"><link rel="prefetch" href="/assets/21.html.e5b16c89.js"><link rel="prefetch" href="/assets/22.html.a91eab06.js"><link rel="prefetch" href="/assets/23.html.8928dd88.js"><link rel="prefetch" href="/assets/24.html.e5bb064a.js"><link rel="prefetch" href="/assets/25.html.8e5080fc.js"><link rel="prefetch" href="/assets/26.html.dcc6bb0c.js"><link rel="prefetch" href="/assets/27.html.7aea7424.js"><link rel="prefetch" href="/assets/28.html.9b4f492d.js"><link rel="prefetch" href="/assets/29.html.4cd69ba4.js"><link rel="prefetch" href="/assets/3.html.7aea9b7f.js"><link rel="prefetch" href="/assets/30.html.a46a758d.js"><link rel="prefetch" href="/assets/31.html.d7390509.js"><link rel="prefetch" href="/assets/32.html.c433c11f.js"><link rel="prefetch" href="/assets/33.html.30375b0f.js"><link rel="prefetch" href="/assets/34.html.201cfeb6.js"><link rel="prefetch" href="/assets/35.html.15fb2830.js"><link rel="prefetch" href="/assets/36.html.75b9800c.js"><link rel="prefetch" href="/assets/37.html.a93f8c48.js"><link rel="prefetch" href="/assets/38.html.8b270f20.js"><link rel="prefetch" href="/assets/39.html.72220720.js"><link rel="prefetch" href="/assets/4.html.d75f7d0e.js"><link rel="prefetch" href="/assets/40.html.0c25b56b.js"><link rel="prefetch" href="/assets/41.html.ebde12e4.js"><link rel="prefetch" href="/assets/42.html.98b0929d.js"><link rel="prefetch" href="/assets/43.html.a362dcd0.js"><link rel="prefetch" href="/assets/44.html.3fcc9a07.js"><link rel="prefetch" href="/assets/45.html.d280487f.js"><link rel="prefetch" href="/assets/46.html.e311282b.js"><link rel="prefetch" href="/assets/47.html.613325c9.js"><link rel="prefetch" href="/assets/48.html.4a4db7ad.js"><link rel="prefetch" href="/assets/49.html.8b671ad7.js"><link rel="prefetch" href="/assets/5.html.32bda1b0.js"><link rel="prefetch" href="/assets/50.html.ed9ddc5b.js"><link rel="prefetch" href="/assets/51.html.8edafd7d.js"><link rel="prefetch" href="/assets/52.html.d226f9fd.js"><link rel="prefetch" href="/assets/53.html.d1c693c4.js"><link rel="prefetch" href="/assets/54.html.37a1eff3.js"><link rel="prefetch" href="/assets/55.html.dde3ab2d.js"><link rel="prefetch" href="/assets/56.html.2ac52495.js"><link rel="prefetch" href="/assets/57.html.bacbca68.js"><link rel="prefetch" href="/assets/58.html.4505d1c9.js"><link rel="prefetch" href="/assets/59.html.b34e6550.js"><link rel="prefetch" href="/assets/6.html.43677f4a.js"><link rel="prefetch" href="/assets/60.html.b4109b9c.js"><link rel="prefetch" href="/assets/61.html.b523b5ff.js"><link rel="prefetch" href="/assets/62.html.ae7dc90f.js"><link rel="prefetch" href="/assets/63.html.303f1ec3.js"><link rel="prefetch" href="/assets/64.html.9a893b61.js"><link rel="prefetch" href="/assets/65.html.03e77126.js"><link rel="prefetch" href="/assets/66.html.88143b69.js"><link rel="prefetch" href="/assets/67.html.b0109f9a.js"><link rel="prefetch" href="/assets/68.html.324487cb.js"><link rel="prefetch" href="/assets/69.html.99b484cd.js"><link rel="prefetch" href="/assets/7.html.cb20d1a2.js"><link rel="prefetch" href="/assets/70.html.14b1357f.js"><link rel="prefetch" href="/assets/71.html.a0032e32.js"><link rel="prefetch" href="/assets/72.html.3b1418fa.js"><link rel="prefetch" href="/assets/73.html.daff00a5.js"><link rel="prefetch" href="/assets/74.html.dfe1db4f.js"><link rel="prefetch" href="/assets/75.html.e5ee6727.js"><link rel="prefetch" href="/assets/76.html.488a9c9a.js"><link rel="prefetch" href="/assets/77.html.eb808247.js"><link rel="prefetch" href="/assets/78.html.b7e8ce1d.js"><link rel="prefetch" href="/assets/79.html.0c2a6539.js"><link rel="prefetch" href="/assets/8.html.cd541b09.js"><link rel="prefetch" href="/assets/80.html.c7833729.js"><link rel="prefetch" href="/assets/81.html.5e9941b0.js"><link rel="prefetch" href="/assets/82.html.41324c79.js"><link rel="prefetch" href="/assets/83.html.e38e8dd9.js"><link rel="prefetch" href="/assets/84.html.fd03f5b0.js"><link rel="prefetch" href="/assets/85.html.3f667e5f.js"><link rel="prefetch" href="/assets/86.html.94c2f18e.js"><link rel="prefetch" href="/assets/87.html.0d39d5b3.js"><link rel="prefetch" href="/assets/88.html.8e8f07de.js"><link rel="prefetch" href="/assets/89.html.fc38df69.js"><link rel="prefetch" href="/assets/9.html.21fb1ee7.js"><link rel="prefetch" href="/assets/90.html.0b0448cc.js"><link rel="prefetch" href="/assets/91.html.f7320e64.js"><link rel="prefetch" href="/assets/92.html.d8582fb2.js"><link rel="prefetch" href="/assets/93.html.841401ac.js"><link rel="prefetch" href="/assets/94.html.cf611e9c.js"><link rel="prefetch" href="/assets/95.html.2a553f73.js"><link rel="prefetch" href="/assets/96.html.2a9acdbf.js"><link rel="prefetch" href="/assets/97.html.6c1f49c6.js"><link rel="prefetch" href="/assets/98.html.c75acc71.js"><link rel="prefetch" href="/assets/99.html.54c6fa27.js"><link rel="prefetch" href="/assets/index.html.dc8ab598.js"><link rel="prefetch" href="/assets/TODO.html.830317c3.js"><link rel="prefetch" href="/assets/1.html.908ee66a.js"><link rel="prefetch" href="/assets/10.html.e77e0455.js"><link rel="prefetch" href="/assets/11.html.7e785902.js"><link rel="prefetch" href="/assets/12.html.1599a54d.js"><link rel="prefetch" href="/assets/13.html.70628749.js"><link rel="prefetch" href="/assets/14.html.18e6797b.js"><link rel="prefetch" href="/assets/15.html.df743cd2.js"><link rel="prefetch" href="/assets/16.html.55d56ea8.js"><link rel="prefetch" href="/assets/17.html.6874d49f.js"><link rel="prefetch" href="/assets/18.html.65b90de4.js"><link rel="prefetch" href="/assets/19.html.dde6b661.js"><link rel="prefetch" href="/assets/2.html.e1274803.js"><link rel="prefetch" href="/assets/20.html.0fe80452.js"><link rel="prefetch" href="/assets/21.html.f85d8468.js"><link rel="prefetch" href="/assets/22.html.0afb63ed.js"><link rel="prefetch" href="/assets/23.html.acd56ad8.js"><link rel="prefetch" href="/assets/24.html.f874b480.js"><link rel="prefetch" href="/assets/25.html.e020387b.js"><link rel="prefetch" href="/assets/26.html.ccbed0cc.js"><link rel="prefetch" href="/assets/27.html.148446d1.js"><link rel="prefetch" href="/assets/28.html.a94af5c0.js"><link rel="prefetch" href="/assets/29.html.aa33eff4.js"><link rel="prefetch" href="/assets/3.html.cac76b28.js"><link rel="prefetch" href="/assets/30.html.6c68425a.js"><link rel="prefetch" href="/assets/31.html.9b16aa42.js"><link rel="prefetch" href="/assets/32.html.6d1882b9.js"><link rel="prefetch" href="/assets/33.html.450fcdf8.js"><link rel="prefetch" href="/assets/34.html.b2875ca6.js"><link rel="prefetch" href="/assets/35.html.b9867f79.js"><link rel="prefetch" href="/assets/36.html.614ee854.js"><link rel="prefetch" href="/assets/37.html.2d010e5c.js"><link rel="prefetch" href="/assets/38.html.db03c609.js"><link rel="prefetch" href="/assets/39.html.dae7a11d.js"><link rel="prefetch" href="/assets/4.html.d793bb26.js"><link rel="prefetch" href="/assets/40.html.78ecc669.js"><link rel="prefetch" href="/assets/41.html.f71f97a0.js"><link rel="prefetch" href="/assets/42.html.8af2270a.js"><link rel="prefetch" href="/assets/43.html.aeab5555.js"><link rel="prefetch" href="/assets/44.html.ca417de8.js"><link rel="prefetch" href="/assets/45.html.26989a52.js"><link rel="prefetch" href="/assets/46.html.48fe7270.js"><link rel="prefetch" href="/assets/47.html.3e47ee65.js"><link rel="prefetch" href="/assets/48.html.d08a8b7f.js"><link rel="prefetch" href="/assets/49.html.1c55cdc2.js"><link rel="prefetch" href="/assets/5.html.f58f6203.js"><link rel="prefetch" href="/assets/50.html.581cdfdd.js"><link rel="prefetch" href="/assets/51.html.143c32e9.js"><link rel="prefetch" href="/assets/52.html.7488aa3f.js"><link rel="prefetch" href="/assets/54.html.97e0befc.js"><link rel="prefetch" href="/assets/55.html.9f2e0fc4.js"><link rel="prefetch" href="/assets/56.html.832dc435.js"><link rel="prefetch" href="/assets/57.html.55b5f82f.js"><link rel="prefetch" href="/assets/58.html.f97be2b4.js"><link rel="prefetch" href="/assets/59.html.c2454b9d.js"><link rel="prefetch" href="/assets/6.html.2b7b8ad3.js"><link rel="prefetch" href="/assets/60.html.5867f9c4.js"><link rel="prefetch" href="/assets/61.html.1e8bbff2.js"><link rel="prefetch" href="/assets/62.html.ce4e8457.js"><link rel="prefetch" href="/assets/63.html.b668ae9a.js"><link rel="prefetch" href="/assets/64.html.875cd724.js"><link rel="prefetch" href="/assets/65.html.53b86f35.js"><link rel="prefetch" href="/assets/66.html.a502d8c9.js"><link rel="prefetch" href="/assets/67.html.7d2e39ec.js"><link rel="prefetch" href="/assets/68.html.4430bebd.js"><link rel="prefetch" href="/assets/69.html.bf5ab228.js"><link rel="prefetch" href="/assets/7.html.44323637.js"><link rel="prefetch" href="/assets/70.html.670b967e.js"><link rel="prefetch" href="/assets/71.html.4898ac53.js"><link rel="prefetch" href="/assets/72.html.3ed54957.js"><link rel="prefetch" href="/assets/73.html.3269221e.js"><link rel="prefetch" href="/assets/74.html.d36867b2.js"><link rel="prefetch" href="/assets/75.html.8b1ecf89.js"><link rel="prefetch" href="/assets/76.html.6edcd166.js"><link rel="prefetch" href="/assets/77.html.e7635ab7.js"><link rel="prefetch" href="/assets/78.html.0de8f8e0.js"><link rel="prefetch" href="/assets/79.html.b84c0c1d.js"><link rel="prefetch" href="/assets/8.html.fbdd9051.js"><link rel="prefetch" href="/assets/80.html.72b53b23.js"><link rel="prefetch" href="/assets/81.html.2df80b97.js"><link rel="prefetch" href="/assets/82.html.ad487a1e.js"><link rel="prefetch" href="/assets/83.html.c2f31839.js"><link rel="prefetch" href="/assets/84.html.8f08ca4d.js"><link rel="prefetch" href="/assets/85.html.58986e20.js"><link rel="prefetch" href="/assets/86.html.b208cc40.js"><link rel="prefetch" href="/assets/87.html.c3518680.js"><link rel="prefetch" href="/assets/88.html.4987ffcc.js"><link rel="prefetch" href="/assets/89.html.ba926430.js"><link rel="prefetch" href="/assets/9.html.1b790a84.js"><link rel="prefetch" href="/assets/90.html.21f82605.js"><link rel="prefetch" href="/assets/91.html.b7301274.js"><link rel="prefetch" href="/assets/92.html.3662bc0c.js"><link rel="prefetch" href="/assets/93.html.e2ac0831.js"><link rel="prefetch" href="/assets/94.html.02d9e407.js"><link rel="prefetch" href="/assets/95.html.10a9639a.js"><link rel="prefetch" href="/assets/96.html.62960ce9.js"><link rel="prefetch" href="/assets/97.html.d0ab9bbe.js"><link rel="prefetch" href="/assets/98.html.89ca1b0b.js"><link rel="prefetch" href="/assets/99.html.5143f23b.js"><link rel="prefetch" href="/assets/index.html.b4c0dc45.js"><link rel="prefetch" href="/assets/1.html.b0d7e311.js"><link rel="prefetch" href="/assets/10.html.74bfa8d5.js"><link rel="prefetch" href="/assets/11.html.a0ee6e27.js"><link rel="prefetch" href="/assets/12.html.c7e95b78.js"><link rel="prefetch" href="/assets/13.html.21fe8d41.js"><link rel="prefetch" href="/assets/14.html.2bc4842f.js"><link rel="prefetch" href="/assets/15.html.273aab40.js"><link rel="prefetch" href="/assets/16.html.cff5ccdd.js"><link rel="prefetch" href="/assets/17.html.61d6478a.js"><link rel="prefetch" href="/assets/18.html.b5af5a3c.js"><link rel="prefetch" href="/assets/19.html.8dd80505.js"><link rel="prefetch" href="/assets/2.html.c38b309c.js"><link rel="prefetch" href="/assets/20.html.7423c3ab.js"><link rel="prefetch" href="/assets/21.html.4f66bd46.js"><link rel="prefetch" href="/assets/22.html.a59e5010.js"><link rel="prefetch" href="/assets/23.html.1548e8fe.js"><link rel="prefetch" href="/assets/24.html.4fa654f7.js"><link rel="prefetch" href="/assets/25.html.c2065edd.js"><link rel="prefetch" href="/assets/26.html.a1050e08.js"><link rel="prefetch" href="/assets/27.html.d6d251ce.js"><link rel="prefetch" href="/assets/28.html.50e90924.js"><link rel="prefetch" href="/assets/29.html.5e4331f5.js"><link rel="prefetch" href="/assets/3.html.6b85bcb4.js"><link rel="prefetch" href="/assets/30.html.54824bc2.js"><link rel="prefetch" href="/assets/31.html.df4f90ad.js"><link rel="prefetch" href="/assets/32.html.ee8fa45f.js"><link rel="prefetch" href="/assets/33.html.ce4b5b50.js"><link rel="prefetch" href="/assets/34.html.6692d866.js"><link rel="prefetch" href="/assets/35.html.113be7d0.js"><link rel="prefetch" href="/assets/36.html.c5f9162c.js"><link rel="prefetch" href="/assets/37.html.e6401841.js"><link rel="prefetch" href="/assets/38.html.e648e6c2.js"><link rel="prefetch" href="/assets/39.html.1107f344.js"><link rel="prefetch" href="/assets/4.html.2ba64301.js"><link rel="prefetch" href="/assets/40.html.8da7b155.js"><link rel="prefetch" href="/assets/41.html.2a8a63fa.js"><link rel="prefetch" href="/assets/42.html.129390e0.js"><link rel="prefetch" href="/assets/43.html.da0927d8.js"><link rel="prefetch" href="/assets/44.html.36225633.js"><link rel="prefetch" href="/assets/45.html.72187430.js"><link rel="prefetch" href="/assets/46.html.202f463b.js"><link rel="prefetch" href="/assets/47.html.170cb5f2.js"><link rel="prefetch" href="/assets/48.html.f7a22b63.js"><link rel="prefetch" href="/assets/49.html.99c718b4.js"><link rel="prefetch" href="/assets/5.html.9a93b5bd.js"><link rel="prefetch" href="/assets/6.html.6a0cab53.js"><link rel="prefetch" href="/assets/7.html.4ecafecd.js"><link rel="prefetch" href="/assets/8.html.f3e71fb5.js"><link rel="prefetch" href="/assets/9.html.0f94f747.js"><link rel="prefetch" href="/assets/1.html.fefabf1f.js"><link rel="prefetch" href="/assets/10.html.a591fdaf.js"><link rel="prefetch" href="/assets/11.html.f0c58879.js"><link rel="prefetch" href="/assets/12.html.6174ec90.js"><link rel="prefetch" href="/assets/13.html.181888e9.js"><link rel="prefetch" href="/assets/14.html.7b106669.js"><link rel="prefetch" href="/assets/15.html.c0e4acaa.js"><link rel="prefetch" href="/assets/16.html.7a3ba1ea.js"><link rel="prefetch" href="/assets/17.html.7a0b131d.js"><link rel="prefetch" href="/assets/18.html.a9e5ae4a.js"><link rel="prefetch" href="/assets/19.html.f9a1dad0.js"><link rel="prefetch" href="/assets/2.html.47656e60.js"><link rel="prefetch" href="/assets/20.html.7990e495.js"><link rel="prefetch" href="/assets/21.html.10de0a75.js"><link rel="prefetch" href="/assets/22.html.ccdeb6c4.js"><link rel="prefetch" href="/assets/23.html.371d6681.js"><link rel="prefetch" href="/assets/24.html.1e3b14eb.js"><link rel="prefetch" href="/assets/25.html.ce330676.js"><link rel="prefetch" href="/assets/26.html.d044406f.js"><link rel="prefetch" href="/assets/27.html.ccc926f6.js"><link rel="prefetch" href="/assets/28.html.49f5cbc7.js"><link rel="prefetch" href="/assets/29.html.f44fb171.js"><link rel="prefetch" href="/assets/3.html.44eda9ad.js"><link rel="prefetch" href="/assets/30.html.71962bb9.js"><link rel="prefetch" href="/assets/31.html.05d73e5f.js"><link rel="prefetch" href="/assets/32.html.e98a73d9.js"><link rel="prefetch" href="/assets/33.html.55b3c6fb.js"><link rel="prefetch" href="/assets/34.html.5146048c.js"><link rel="prefetch" href="/assets/35.html.51cb1df4.js"><link rel="prefetch" href="/assets/36.html.dea92735.js"><link rel="prefetch" href="/assets/37.html.4987df3a.js"><link rel="prefetch" href="/assets/38.html.94359779.js"><link rel="prefetch" href="/assets/39.html.e9fb19b6.js"><link rel="prefetch" href="/assets/4.html.72833ac9.js"><link rel="prefetch" href="/assets/40.html.12ce2063.js"><link rel="prefetch" href="/assets/41.html.17b39dbf.js"><link rel="prefetch" href="/assets/42.html.737c2f7f.js"><link rel="prefetch" href="/assets/43.html.4aa549bb.js"><link rel="prefetch" href="/assets/44.html.461dd21b.js"><link rel="prefetch" href="/assets/45.html.f89e3252.js"><link rel="prefetch" href="/assets/46.html.0c1c3d86.js"><link rel="prefetch" href="/assets/47.html.7a6006c3.js"><link rel="prefetch" href="/assets/48.html.876530ae.js"><link rel="prefetch" href="/assets/49.html.93195ef1.js"><link rel="prefetch" href="/assets/5.html.d52a2513.js"><link rel="prefetch" href="/assets/50.html.ae771c42.js"><link rel="prefetch" href="/assets/6.html.6207e399.js"><link rel="prefetch" href="/assets/7.html.60b74bd7.js"><link rel="prefetch" href="/assets/8.html.4ebadc89.js"><link rel="prefetch" href="/assets/9.html.38305fea.js"><link rel="prefetch" href="/assets/k8s_011.html.a02b632d.js"><link rel="prefetch" href="/assets/k8s_012.html.43d51b72.js"><link rel="prefetch" href="/assets/k8s_013.html.ec5b47f7.js"><link rel="prefetch" href="/assets/k8s_014.html.f6d97c90.js"><link rel="prefetch" href="/assets/k8s_015.html.e0a1919b.js"><link rel="prefetch" href="/assets/k8s_016.html.3974eb6c.js"><link rel="prefetch" href="/assets/k8s_017.html.75871624.js"><link rel="prefetch" href="/assets/k8s_018.html.12099bf7.js"><link rel="prefetch" href="/assets/k8s_019.html.056e3a37.js"><link rel="prefetch" href="/assets/k8s_020.html.81fc58d1.js"><link rel="prefetch" href="/assets/k8s_021.html.28a3099b.js"><link rel="prefetch" href="/assets/k8s_022.html.bd4c9467.js"><link rel="prefetch" href="/assets/k8s_023.html.ffd7194a.js"><link rel="prefetch" href="/assets/k8s_024.html.3422943c.js"><link rel="prefetch" href="/assets/k8s_025.html.29b4b1e1.js"><link rel="prefetch" href="/assets/k8s_026.html.37a39c28.js"><link rel="prefetch" href="/assets/k8s_027.html.ffb2e25f.js"><link rel="prefetch" href="/assets/k8s_028.html.d98c6ad6.js"><link rel="prefetch" href="/assets/k8s_029.html.ca41febf.js"><link rel="prefetch" href="/assets/k8s_030.html.9902d045.js"><link rel="prefetch" href="/assets/README (copy).html.813a2fda.js"><link rel="prefetch" href="/assets/index.html.3fd59935.js"><link rel="prefetch" href="/assets/404.html.c3e557d0.js"><link rel="prefetch" href="/assets/index.html.9da48d59.js"><link rel="prefetch" href="/assets/1.html.110666ec.js"><link rel="prefetch" href="/assets/10.html.ca51c602.js"><link rel="prefetch" href="/assets/11.html.42c91fe1.js"><link rel="prefetch" href="/assets/12.html.f3bb6619.js"><link rel="prefetch" href="/assets/13.html.da3d5079.js"><link rel="prefetch" href="/assets/14.html.7d487ab2.js"><link rel="prefetch" href="/assets/15.html.f8a5b813.js"><link rel="prefetch" href="/assets/16.html.a0bd1cbb.js"><link rel="prefetch" href="/assets/17.html.4b88fb6e.js"><link rel="prefetch" href="/assets/18.html.b161af28.js"><link rel="prefetch" href="/assets/19.html.3adb9240.js"><link rel="prefetch" href="/assets/2.html.8a7ee391.js"><link rel="prefetch" href="/assets/20.html.6e260dcd.js"><link rel="prefetch" href="/assets/21.html.49e0c229.js"><link rel="prefetch" href="/assets/22.html.7b867e48.js"><link rel="prefetch" href="/assets/23.html.4feb2cc4.js"><link rel="prefetch" href="/assets/24.html.68c17d84.js"><link rel="prefetch" href="/assets/25.html.eb056033.js"><link rel="prefetch" href="/assets/26.html.16466919.js"><link rel="prefetch" href="/assets/27.html.082aa24c.js"><link rel="prefetch" href="/assets/28.html.4e5f488e.js"><link rel="prefetch" href="/assets/29.html.a4b125ed.js"><link rel="prefetch" href="/assets/3.html.b660443f.js"><link rel="prefetch" href="/assets/30.html.644f47eb.js"><link rel="prefetch" href="/assets/31.html.38bb8f88.js"><link rel="prefetch" href="/assets/32.html.4cde1397.js"><link rel="prefetch" href="/assets/33.html.33cfa4af.js"><link rel="prefetch" href="/assets/34.html.f1184a92.js"><link rel="prefetch" href="/assets/35.html.d1a2960f.js"><link rel="prefetch" href="/assets/36.html.0a3ef9f8.js"><link rel="prefetch" href="/assets/37.html.239f6086.js"><link rel="prefetch" href="/assets/38.html.36262b69.js"><link rel="prefetch" href="/assets/39.html.68dae2cb.js"><link rel="prefetch" href="/assets/4.html.7106aecf.js"><link rel="prefetch" href="/assets/40.html.404af430.js"><link rel="prefetch" href="/assets/41.html.3d28b569.js"><link rel="prefetch" href="/assets/42.html.aef0d07e.js"><link rel="prefetch" href="/assets/43.html.7969b7fe.js"><link rel="prefetch" href="/assets/44.html.3242b679.js"><link rel="prefetch" href="/assets/45.html.71773b23.js"><link rel="prefetch" href="/assets/46.html.f11af3a8.js"><link rel="prefetch" href="/assets/47.html.7fab3fe8.js"><link rel="prefetch" href="/assets/48.html.a96bdc17.js"><link rel="prefetch" href="/assets/49.html.19c92ef5.js"><link rel="prefetch" href="/assets/5.html.7e7af9d5.js"><link rel="prefetch" href="/assets/50.html.363555e7.js"><link rel="prefetch" href="/assets/51.html.df242abb.js"><link rel="prefetch" href="/assets/52.html.40c85bda.js"><link rel="prefetch" href="/assets/53.html.d93e4169.js"><link rel="prefetch" href="/assets/54.html.eac7454b.js"><link rel="prefetch" href="/assets/55.html.b214d24f.js"><link rel="prefetch" href="/assets/56.html.b577d09d.js"><link rel="prefetch" href="/assets/57.html.30a1ff79.js"><link rel="prefetch" href="/assets/58.html.f14b7c8c.js"><link rel="prefetch" href="/assets/59.html.ccc7ba22.js"><link rel="prefetch" href="/assets/6.html.faa2c261.js"><link rel="prefetch" href="/assets/60.html.6c47af09.js"><link rel="prefetch" href="/assets/61.html.37fb0eb6.js"><link rel="prefetch" href="/assets/62.html.5a9f9b46.js"><link rel="prefetch" href="/assets/63.html.9b53bc30.js"><link rel="prefetch" href="/assets/64.html.566e48d3.js"><link rel="prefetch" href="/assets/65.html.5da06b80.js"><link rel="prefetch" href="/assets/66.html.339f5274.js"><link rel="prefetch" href="/assets/67.html.13eefb96.js"><link rel="prefetch" href="/assets/68.html.edc1893f.js"><link rel="prefetch" href="/assets/69.html.58ead814.js"><link rel="prefetch" href="/assets/7.html.d21e0e40.js"><link rel="prefetch" href="/assets/70.html.6323cf6e.js"><link rel="prefetch" href="/assets/71.html.15cf812d.js"><link rel="prefetch" href="/assets/72.html.b486ec5e.js"><link rel="prefetch" href="/assets/73.html.344b1a0e.js"><link rel="prefetch" href="/assets/74.html.1607885c.js"><link rel="prefetch" href="/assets/75.html.43b00625.js"><link rel="prefetch" href="/assets/76.html.974a9da1.js"><link rel="prefetch" href="/assets/77.html.dea1c3b3.js"><link rel="prefetch" href="/assets/78.html.16255390.js"><link rel="prefetch" href="/assets/79.html.97e3e5fe.js"><link rel="prefetch" href="/assets/8.html.bf8030e5.js"><link rel="prefetch" href="/assets/80.html.855b7129.js"><link rel="prefetch" href="/assets/81.html.129fb753.js"><link rel="prefetch" href="/assets/82.html.ab3111d0.js"><link rel="prefetch" href="/assets/83.html.b5323192.js"><link rel="prefetch" href="/assets/84.html.0be24c3a.js"><link rel="prefetch" href="/assets/85.html.2eec6356.js"><link rel="prefetch" href="/assets/86.html.70d8c2cd.js"><link rel="prefetch" href="/assets/87.html.2e5abfde.js"><link rel="prefetch" href="/assets/88.html.74a4d566.js"><link rel="prefetch" href="/assets/89.html.4882fac4.js"><link rel="prefetch" href="/assets/9.html.174c9c4e.js"><link rel="prefetch" href="/assets/90.html.bc24e16b.js"><link rel="prefetch" href="/assets/91.html.2c227269.js"><link rel="prefetch" href="/assets/92.html.1cf184f7.js"><link rel="prefetch" href="/assets/93.html.188150b9.js"><link rel="prefetch" href="/assets/94.html.b400f4c6.js"><link rel="prefetch" href="/assets/95.html.68d08d09.js"><link rel="prefetch" href="/assets/96.html.dfad87ba.js"><link rel="prefetch" href="/assets/97.html.a75a99f4.js"><link rel="prefetch" href="/assets/98.html.3af6bcef.js"><link rel="prefetch" href="/assets/99.html.5b7721ee.js"><link rel="prefetch" href="/assets/index.html.e7cb1c2a.js"><link rel="prefetch" href="/assets/TODO.html.6015f07f.js"><link rel="prefetch" href="/assets/1.html.4399f613.js"><link rel="prefetch" href="/assets/10.html.be3cd26e.js"><link rel="prefetch" href="/assets/11.html.fb719449.js"><link rel="prefetch" href="/assets/12.html.c1d91836.js"><link rel="prefetch" href="/assets/13.html.3b0546d9.js"><link rel="prefetch" href="/assets/14.html.078a122f.js"><link rel="prefetch" href="/assets/15.html.705ae128.js"><link rel="prefetch" href="/assets/16.html.58ec2dfa.js"><link rel="prefetch" href="/assets/17.html.beae6d05.js"><link rel="prefetch" href="/assets/18.html.fcbb7c6b.js"><link rel="prefetch" href="/assets/19.html.5e6980de.js"><link rel="prefetch" href="/assets/2.html.9fa4a593.js"><link rel="prefetch" href="/assets/20.html.2a5d1a7a.js"><link rel="prefetch" href="/assets/21.html.39a36f27.js"><link rel="prefetch" href="/assets/22.html.8e115313.js"><link rel="prefetch" href="/assets/23.html.43d6dcff.js"><link rel="prefetch" href="/assets/24.html.0f9cd709.js"><link rel="prefetch" href="/assets/25.html.ef3ce6b9.js"><link rel="prefetch" href="/assets/26.html.f8549149.js"><link rel="prefetch" href="/assets/27.html.8cf0a5aa.js"><link rel="prefetch" href="/assets/28.html.85483087.js"><link rel="prefetch" href="/assets/29.html.7ae6d13c.js"><link rel="prefetch" href="/assets/3.html.6791871b.js"><link rel="prefetch" href="/assets/30.html.5d7805e4.js"><link rel="prefetch" href="/assets/31.html.276cf9c6.js"><link rel="prefetch" href="/assets/32.html.fac7231a.js"><link rel="prefetch" href="/assets/33.html.f90f9bb2.js"><link rel="prefetch" href="/assets/34.html.b7cf9577.js"><link rel="prefetch" href="/assets/35.html.c1cc8fa0.js"><link rel="prefetch" href="/assets/36.html.9f1f4b55.js"><link rel="prefetch" href="/assets/37.html.cdff841d.js"><link rel="prefetch" href="/assets/38.html.cb730a4c.js"><link rel="prefetch" href="/assets/39.html.303746c4.js"><link rel="prefetch" href="/assets/4.html.7da4eec6.js"><link rel="prefetch" href="/assets/40.html.95b35ec3.js"><link rel="prefetch" href="/assets/41.html.3db25c7b.js"><link rel="prefetch" href="/assets/42.html.2cad53af.js"><link rel="prefetch" href="/assets/43.html.c0394be1.js"><link rel="prefetch" href="/assets/44.html.6bf5febb.js"><link rel="prefetch" href="/assets/45.html.6410fac8.js"><link rel="prefetch" href="/assets/46.html.2dc45be0.js"><link rel="prefetch" href="/assets/47.html.bb050c5b.js"><link rel="prefetch" href="/assets/48.html.a4d35ce4.js"><link rel="prefetch" href="/assets/49.html.487fc2b1.js"><link rel="prefetch" href="/assets/5.html.23c14775.js"><link rel="prefetch" href="/assets/50.html.a8acc06b.js"><link rel="prefetch" href="/assets/51.html.55e194d6.js"><link rel="prefetch" href="/assets/52.html.b13ae1c6.js"><link rel="prefetch" href="/assets/54.html.4a7e7296.js"><link rel="prefetch" href="/assets/55.html.1f4ae451.js"><link rel="prefetch" href="/assets/56.html.688196ca.js"><link rel="prefetch" href="/assets/57.html.99b52eb9.js"><link rel="prefetch" href="/assets/58.html.03ba46a1.js"><link rel="prefetch" href="/assets/59.html.da839932.js"><link rel="prefetch" href="/assets/6.html.f552fdb3.js"><link rel="prefetch" href="/assets/60.html.79ef632c.js"><link rel="prefetch" href="/assets/61.html.96d0689f.js"><link rel="prefetch" href="/assets/62.html.c65e7d72.js"><link rel="prefetch" href="/assets/63.html.0daeddfd.js"><link rel="prefetch" href="/assets/64.html.0d63dd48.js"><link rel="prefetch" href="/assets/65.html.76181296.js"><link rel="prefetch" href="/assets/66.html.839adc67.js"><link rel="prefetch" href="/assets/67.html.aad4abc1.js"><link rel="prefetch" href="/assets/68.html.2ae14895.js"><link rel="prefetch" href="/assets/69.html.35cdf932.js"><link rel="prefetch" href="/assets/7.html.bd5f9567.js"><link rel="prefetch" href="/assets/70.html.4e6d64cf.js"><link rel="prefetch" href="/assets/71.html.3a79848a.js"><link rel="prefetch" href="/assets/72.html.a0a21e08.js"><link rel="prefetch" href="/assets/73.html.9646b20d.js"><link rel="prefetch" href="/assets/74.html.98b085bc.js"><link rel="prefetch" href="/assets/75.html.f9262d71.js"><link rel="prefetch" href="/assets/76.html.4840dfe6.js"><link rel="prefetch" href="/assets/77.html.d3bfac4b.js"><link rel="prefetch" href="/assets/78.html.91777547.js"><link rel="prefetch" href="/assets/79.html.ce09b7c6.js"><link rel="prefetch" href="/assets/8.html.0fd20baf.js"><link rel="prefetch" href="/assets/80.html.c1c94da5.js"><link rel="prefetch" href="/assets/81.html.4f1a379c.js"><link rel="prefetch" href="/assets/82.html.6a318b87.js"><link rel="prefetch" href="/assets/83.html.8d13d899.js"><link rel="prefetch" href="/assets/84.html.44dfee6c.js"><link rel="prefetch" href="/assets/85.html.61f1bd5c.js"><link rel="prefetch" href="/assets/86.html.1c8cc854.js"><link rel="prefetch" href="/assets/87.html.901406c3.js"><link rel="prefetch" href="/assets/88.html.ddd95981.js"><link rel="prefetch" href="/assets/89.html.c5caa341.js"><link rel="prefetch" href="/assets/9.html.b7dc83c1.js"><link rel="prefetch" href="/assets/90.html.b2a1371f.js"><link rel="prefetch" href="/assets/91.html.6ce1483c.js"><link rel="prefetch" href="/assets/92.html.8f7b5fcb.js"><link rel="prefetch" href="/assets/93.html.ab0afa7e.js"><link rel="prefetch" href="/assets/94.html.dfa2a25b.js"><link rel="prefetch" href="/assets/95.html.098be576.js"><link rel="prefetch" href="/assets/96.html.97a0def9.js"><link rel="prefetch" href="/assets/97.html.e2493561.js"><link rel="prefetch" href="/assets/98.html.9e70777a.js"><link rel="prefetch" href="/assets/99.html.c52bc691.js"><link rel="prefetch" href="/assets/index.html.dfd0e4d4.js"><link rel="prefetch" href="/assets/1.html.a56460bc.js"><link rel="prefetch" href="/assets/10.html.dbacfdb9.js"><link rel="prefetch" href="/assets/11.html.35f62744.js"><link rel="prefetch" href="/assets/12.html.e2f122a4.js"><link rel="prefetch" href="/assets/13.html.b5002b9b.js"><link rel="prefetch" href="/assets/14.html.bfa594d7.js"><link rel="prefetch" href="/assets/15.html.a9a53ab1.js"><link rel="prefetch" href="/assets/16.html.19247327.js"><link rel="prefetch" href="/assets/17.html.e85b34a6.js"><link rel="prefetch" href="/assets/18.html.eb7f225e.js"><link rel="prefetch" href="/assets/19.html.ae4b3941.js"><link rel="prefetch" href="/assets/2.html.787b6421.js"><link rel="prefetch" href="/assets/20.html.bf82c2b5.js"><link rel="prefetch" href="/assets/21.html.4aa72c25.js"><link rel="prefetch" href="/assets/22.html.9bac5792.js"><link rel="prefetch" href="/assets/23.html.78ca00b3.js"><link rel="prefetch" href="/assets/24.html.370a40f6.js"><link rel="prefetch" href="/assets/25.html.58aa5bcb.js"><link rel="prefetch" href="/assets/26.html.994465fa.js"><link rel="prefetch" href="/assets/27.html.ab26ec57.js"><link rel="prefetch" href="/assets/28.html.f45656db.js"><link rel="prefetch" href="/assets/29.html.e481b125.js"><link rel="prefetch" href="/assets/3.html.d2e2434f.js"><link rel="prefetch" href="/assets/30.html.de8046bc.js"><link rel="prefetch" href="/assets/31.html.482d4006.js"><link rel="prefetch" href="/assets/32.html.36170567.js"><link rel="prefetch" href="/assets/33.html.a1b3e6c8.js"><link rel="prefetch" href="/assets/34.html.14354485.js"><link rel="prefetch" href="/assets/35.html.6220afc9.js"><link rel="prefetch" href="/assets/36.html.474e7e8e.js"><link rel="prefetch" href="/assets/37.html.dada9fb4.js"><link rel="prefetch" href="/assets/38.html.612718dd.js"><link rel="prefetch" href="/assets/39.html.30f29a09.js"><link rel="prefetch" href="/assets/4.html.a3775f6e.js"><link rel="prefetch" href="/assets/40.html.e36750af.js"><link rel="prefetch" href="/assets/41.html.7824b9ca.js"><link rel="prefetch" href="/assets/42.html.05b66b58.js"><link rel="prefetch" href="/assets/43.html.e6432122.js"><link rel="prefetch" href="/assets/44.html.f42ee5a4.js"><link rel="prefetch" href="/assets/45.html.b5f52876.js"><link rel="prefetch" href="/assets/46.html.2fab1ba3.js"><link rel="prefetch" href="/assets/47.html.39a86474.js"><link rel="prefetch" href="/assets/48.html.842d6da0.js"><link rel="prefetch" href="/assets/49.html.1682ed19.js"><link rel="prefetch" href="/assets/5.html.c1fcc520.js"><link rel="prefetch" href="/assets/6.html.dbcf4239.js"><link rel="prefetch" href="/assets/7.html.eb5ee1ea.js"><link rel="prefetch" href="/assets/8.html.65f23a90.js"><link rel="prefetch" href="/assets/9.html.ae88b8e1.js"><link rel="prefetch" href="/assets/1.html.8330e8c0.js"><link rel="prefetch" href="/assets/10.html.273daac8.js"><link rel="prefetch" href="/assets/11.html.f51e9ef1.js"><link rel="prefetch" href="/assets/12.html.0fffe03f.js"><link rel="prefetch" href="/assets/13.html.4b41e044.js"><link rel="prefetch" href="/assets/14.html.b23154a3.js"><link rel="prefetch" href="/assets/15.html.41840c92.js"><link rel="prefetch" href="/assets/16.html.4752131c.js"><link rel="prefetch" href="/assets/17.html.e435a303.js"><link rel="prefetch" href="/assets/18.html.e4a6edda.js"><link rel="prefetch" href="/assets/19.html.7569dbc7.js"><link rel="prefetch" href="/assets/2.html.790d2068.js"><link rel="prefetch" href="/assets/20.html.d32600d7.js"><link rel="prefetch" href="/assets/21.html.2d020afb.js"><link rel="prefetch" href="/assets/22.html.d32f7916.js"><link rel="prefetch" href="/assets/23.html.3af4f085.js"><link rel="prefetch" href="/assets/24.html.5cccc9ea.js"><link rel="prefetch" href="/assets/25.html.a35b85b0.js"><link rel="prefetch" href="/assets/26.html.23548ec8.js"><link rel="prefetch" href="/assets/27.html.42c55d67.js"><link rel="prefetch" href="/assets/28.html.fad5a0be.js"><link rel="prefetch" href="/assets/29.html.46b548cd.js"><link rel="prefetch" href="/assets/3.html.02bb2d08.js"><link rel="prefetch" href="/assets/30.html.2044379a.js"><link rel="prefetch" href="/assets/31.html.34239ead.js"><link rel="prefetch" href="/assets/32.html.813edf82.js"><link rel="prefetch" href="/assets/33.html.b1f8455f.js"><link rel="prefetch" href="/assets/34.html.0b040b9f.js"><link rel="prefetch" href="/assets/35.html.2f7f4ada.js"><link rel="prefetch" href="/assets/36.html.0285831a.js"><link rel="prefetch" href="/assets/37.html.13d62fad.js"><link rel="prefetch" href="/assets/38.html.5fd109a9.js"><link rel="prefetch" href="/assets/39.html.ed03e9f7.js"><link rel="prefetch" href="/assets/4.html.5df02a2b.js"><link rel="prefetch" href="/assets/40.html.39e55f91.js"><link rel="prefetch" href="/assets/41.html.d30c70dd.js"><link rel="prefetch" href="/assets/42.html.39f5a3ef.js"><link rel="prefetch" href="/assets/43.html.8cfdf790.js"><link rel="prefetch" href="/assets/44.html.1301b8c5.js"><link rel="prefetch" href="/assets/45.html.2203e1b4.js"><link rel="prefetch" href="/assets/46.html.eae46f1b.js"><link rel="prefetch" href="/assets/47.html.ad94e4b6.js"><link rel="prefetch" href="/assets/48.html.8a4a80b6.js"><link rel="prefetch" href="/assets/49.html.f12e9847.js"><link rel="prefetch" href="/assets/5.html.adde7430.js"><link rel="prefetch" href="/assets/50.html.091fd04b.js"><link rel="prefetch" href="/assets/6.html.80ea4bbe.js"><link rel="prefetch" href="/assets/7.html.12fc449b.js"><link rel="prefetch" href="/assets/8.html.19da7c2d.js"><link rel="prefetch" href="/assets/9.html.04c321d2.js"><link rel="prefetch" href="/assets/k8s_011.html.a42fd60b.js"><link rel="prefetch" href="/assets/k8s_012.html.625491b8.js"><link rel="prefetch" href="/assets/k8s_013.html.4130d6fa.js"><link rel="prefetch" href="/assets/k8s_014.html.09989b02.js"><link rel="prefetch" href="/assets/k8s_015.html.4cf5df48.js"><link rel="prefetch" href="/assets/k8s_016.html.6e8ef30f.js"><link rel="prefetch" href="/assets/k8s_017.html.93e8d4cc.js"><link rel="prefetch" href="/assets/k8s_018.html.1fa84ea3.js"><link rel="prefetch" href="/assets/k8s_019.html.9bd0b0c1.js"><link rel="prefetch" href="/assets/k8s_020.html.5f2fadc5.js"><link rel="prefetch" href="/assets/k8s_021.html.fa6f0f37.js"><link rel="prefetch" href="/assets/k8s_022.html.22cbb44c.js"><link rel="prefetch" href="/assets/k8s_023.html.8fef4d5a.js"><link rel="prefetch" href="/assets/k8s_024.html.57df8cab.js"><link rel="prefetch" href="/assets/k8s_025.html.2febbd25.js"><link rel="prefetch" href="/assets/k8s_026.html.96fc0364.js"><link rel="prefetch" href="/assets/k8s_027.html.2e3267b3.js"><link rel="prefetch" href="/assets/k8s_028.html.5f47c7ca.js"><link rel="prefetch" href="/assets/k8s_029.html.617734d6.js"><link rel="prefetch" href="/assets/k8s_030.html.89c7842f.js"><link rel="prefetch" href="/assets/README (copy).html.d7233c89.js"><link rel="prefetch" href="/assets/index.html.cfb6b9bf.js"><link rel="prefetch" href="/assets/404.html.294df2c6.js">
    <link rel="stylesheet" href="/assets/style.57cbcbfb.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="åˆ‡æ¢ä¾§è¾¹æ " aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">ä½ å¥½</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¤µå…³äºæˆ‘"><span class="title">ğŸ¤µå…³äºæˆ‘</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¤µå…³äºæˆ‘"><span class="title">ğŸ¤µå…³äºæˆ‘</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/cubxxw/awesome-cs-cloudnative-blockchain" target="_self" aria-label="Githubä»“åº“"><!--[--><!--]--> Githubä»“åº“ <!----><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="http://nsddd.top" target="_self" aria-label="æˆ‘çš„åšå®¢"><!--[--><!--]--> æˆ‘çš„åšå®¢ <!----><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://www.zhihu.com/people/3293172751" rel="noopener noreferrer" target="_blank" aria-label="çŸ¥ä¹"><!--[--><!--]--> çŸ¥ä¹ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/kubecub/" rel="noopener noreferrer" target="_blank" aria-label="â›“ï¸é“¾å­¦ç¤¾ç»„ç»‡"><!--[--><!--]--> â›“ï¸é“¾å­¦ç¤¾ç»„ç»‡ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/" class="" aria-label="ğŸ é¦–é¡µ"><!--[--><!--]--> ğŸ é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://go.nsddd.top" rel="noopener noreferrer" target="_blank" aria-label="ğŸ“šGoè¯­è¨€å­¦ä¹ "><!--[--><!--]--> ğŸ“šGoè¯­è¨€å­¦ä¹  <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/Cloud-Native-k8s/" class="router-link-active" aria-label="âš¡ k8så­¦ä¹ ç¯‡"><!--[--><!--]--> âš¡ k8så­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/markdown/" class="" aria-label="âš¡ dockerå­¦ä¹ ç¯‡"><!--[--><!--]--> âš¡ dockerå­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/Cloud-Native/" class="" aria-label="ğŸ„â€â™‚ï¸ äº‘åŸç”Ÿå­¦ä¹ ç¯‡"><!--[--><!--]--> ğŸ„â€â™‚ï¸ äº‘åŸç”Ÿå­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/3293172751/awesome-docker" rel="noopener noreferrer" target="_blank" aria-label="æŸ¥çœ‹æºç "><!--[--><!--]--> æŸ¥çœ‹æºç  <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="åˆ‡æ¢é¢œè‰²æ¨¡å¼"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="ğŸ¤µå…³äºæˆ‘"><span class="title">ğŸ¤µå…³äºæˆ‘</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="ğŸ¤µå…³äºæˆ‘"><span class="title">ğŸ¤µå…³äºæˆ‘</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/cubxxw/awesome-cs-cloudnative-blockchain" target="_self" aria-label="Githubä»“åº“"><!--[--><!--]--> Githubä»“åº“ <!----><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="http://nsddd.top" target="_self" aria-label="æˆ‘çš„åšå®¢"><!--[--><!--]--> æˆ‘çš„åšå®¢ <!----><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://www.zhihu.com/people/3293172751" rel="noopener noreferrer" target="_blank" aria-label="çŸ¥ä¹"><!--[--><!--]--> çŸ¥ä¹ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/kubecub/" rel="noopener noreferrer" target="_blank" aria-label="â›“ï¸é“¾å­¦ç¤¾ç»„ç»‡"><!--[--><!--]--> â›“ï¸é“¾å­¦ç¤¾ç»„ç»‡ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/" class="" aria-label="ğŸ é¦–é¡µ"><!--[--><!--]--> ğŸ é¦–é¡µ <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://go.nsddd.top" rel="noopener noreferrer" target="_blank" aria-label="ğŸ“šGoè¯­è¨€å­¦ä¹ "><!--[--><!--]--> ğŸ“šGoè¯­è¨€å­¦ä¹  <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/Cloud-Native-k8s/" class="router-link-active" aria-label="âš¡ k8så­¦ä¹ ç¯‡"><!--[--><!--]--> âš¡ k8så­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/markdown/" class="" aria-label="âš¡ dockerå­¦ä¹ ç¯‡"><!--[--><!--]--> âš¡ dockerå­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a href="/Cloud-Native/" class="" aria-label="ğŸ„â€â™‚ï¸ äº‘åŸç”Ÿå­¦ä¹ ç¯‡"><!--[--><!--]--> ğŸ„â€â™‚ï¸ äº‘åŸç”Ÿå­¦ä¹ ç¯‡ <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/3293172751/awesome-docker" rel="noopener noreferrer" target="_blank" aria-label="æŸ¥çœ‹æºç "><!--[--><!--]--> æŸ¥çœ‹æºç  <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/" class="sidebar-item sidebar-heading" aria-label="ğŸ å›åˆ°ä¸»é¡µ"><!--[--><!--]--> ğŸ å›åˆ°ä¸»é¡µ <!--[--><!--]--></a><!----></li><li><a class="external-link sidebar-item sidebar-heading" href="https://xxw.nsddd.top/s/wRSz" rel="noopener noreferrer" target="_blank" aria-label="ğŸ’±ä¸ªäººäº‘ç›˜åœ°å€"><!--[--><!--]--> ğŸ’±ä¸ªäººäº‘ç›˜åœ°å€ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">âš¡ k8säº‘åŸç”Ÿå­¦ä¹ ç¯‡ <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/Cloud-Native-k8s/1.html" class="sidebar-item" aria-label="ç¬¬1èŠ‚ äº‘å¹³å°"><!--[--><!--]--> ç¬¬1èŠ‚ äº‘å¹³å° <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/2.html" class="sidebar-item" aria-label="ç¬¬2èŠ‚ dockerå®ç”¨æ“ä½œ"><!--[--><!--]--> ç¬¬2èŠ‚ dockerå®ç”¨æ“ä½œ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/3.html" class="sidebar-item" aria-label="ç¬¬3èŠ‚ dockerä¸‰é©¾é©¬è½¦"><!--[--><!--]--> ç¬¬3èŠ‚ dockerä¸‰é©¾é©¬è½¦ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/4.html" class="sidebar-item" aria-label="ç¬¬4èŠ‚ kubernetes(k8s)æ•™ç¨‹"><!--[--><!--]--> ç¬¬4èŠ‚ kubernetes(k8s)æ•™ç¨‹ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/5.html" class="sidebar-item" aria-label="ç¬¬5èŠ‚ é›†ç¾¤æ­å»º"><!--[--><!--]--> ç¬¬5èŠ‚ é›†ç¾¤æ­å»º <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/6.html" class="sidebar-item" aria-label="ç¬¬6èŠ‚ sealosæ­å»ºk8s"><!--[--><!--]--> ç¬¬6èŠ‚ sealosæ­å»ºk8s <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/7.html" class="sidebar-item" aria-label="ç¬¬7èŠ‚ k8såœ¨çº¿å®éªŒå­¦ä¹ å¹³å°"><!--[--><!--]--> ç¬¬7èŠ‚ k8såœ¨çº¿å®éªŒå­¦ä¹ å¹³å° <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/8.html" class="sidebar-item" aria-label="ç¬¬8èŠ‚ å›¾å½¢ç•Œé¢å’Œå‘½åç©ºé—´"><!--[--><!--]--> ç¬¬8èŠ‚ å›¾å½¢ç•Œé¢å’Œå‘½åç©ºé—´ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/9.html" class="sidebar-item" aria-label="ç¬¬9èŠ‚ Pod"><!--[--><!--]--> ç¬¬9èŠ‚ Pod <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/10.html" class="sidebar-item" aria-label="ç¬¬10èŠ‚ Deployment"><!--[--><!--]--> ç¬¬10èŠ‚ Deployment <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/11.html" class="sidebar-item" aria-label="ç¬¬11èŠ‚ service"><!--[--><!--]--> ç¬¬11èŠ‚ service <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/12.html" class="sidebar-item" aria-label="ç¬¬12èŠ‚ Ingress"><!--[--><!--]--> ç¬¬12èŠ‚ Ingress <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/13.html" class="sidebar-item" aria-label="ç¬¬13èŠ‚ å­˜å‚¨æŠ½è±¡"><!--[--><!--]--> ç¬¬13èŠ‚ å­˜å‚¨æŠ½è±¡ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/14.html" class="sidebar-item" aria-label="ç¬¬14èŠ‚ k3s"><!--[--><!--]--> ç¬¬14èŠ‚ k3s <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/15.html" class="sidebar-item" aria-label="ç¬¬15èŠ‚ k3s è¡¥å……"><!--[--><!--]--> ç¬¬15èŠ‚ k3s è¡¥å…… <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/16.html" class="sidebar-item" aria-label="Treafik LB"><!--[--><!--]--> Treafik LB <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/17.html" class="sidebar-item" aria-label="ç¬¬17èŠ‚ Service LB"><!--[--><!--]--> ç¬¬17èŠ‚ Service LB <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/18.html" class="sidebar-item" aria-label="ç¬¬18èŠ‚kubernetes API è®¿é—®æ§åˆ¶"><!--[--><!--]--> ç¬¬18èŠ‚kubernetes API è®¿é—®æ§åˆ¶ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/19.html" class="sidebar-item" aria-label="ç¬¬19èŠ‚  StatefulSet"><!--[--><!--]--> ç¬¬19èŠ‚  StatefulSet <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/20.html" class="sidebar-item" aria-label="ç¬¬19èŠ‚  StatefulSet"><!--[--><!--]--> ç¬¬19èŠ‚  StatefulSet <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/21.html" class="sidebar-item" aria-label="ç¬¬21èŠ‚ Minikube å’Œ Kind"><!--[--><!--]--> ç¬¬21èŠ‚ Minikube å’Œ Kind <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/22.html" class="sidebar-item" aria-label="ç¬¬22èŠ‚ è¿è¡Œæœ‰çŠ¶æ€åº”ç”¨"><!--[--><!--]--> ç¬¬22èŠ‚ è¿è¡Œæœ‰çŠ¶æ€åº”ç”¨ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/23.html" class="sidebar-item" aria-label="ç¬¬23èŠ‚ Kubeconfig &amp;&amp; token"><!--[--><!--]--> ç¬¬23èŠ‚ Kubeconfig &amp;&amp; token <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/24.html" class="sidebar-item" aria-label="ç¬¬24èŠ‚ ETCD"><!--[--><!--]--> ç¬¬24èŠ‚ ETCD <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/25.html" class="sidebar-item" aria-label="ç¬¬25èŠ‚ raft ç®—æ³•"><!--[--><!--]--> ç¬¬25èŠ‚ raft ç®—æ³• <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/26.html" class="sidebar-item" aria-label="ç¬¬26èŠ‚ helm æ•™ç¨‹"><!--[--><!--]--> ç¬¬26èŠ‚ helm æ•™ç¨‹ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/27.html" class="sidebar-item" aria-label="ç¬¬27èŠ‚ k3s è¡¥å……ï¼ˆé«˜çº§ï¼‰"><!--[--><!--]--> ç¬¬27èŠ‚ k3s è¡¥å……ï¼ˆé«˜çº§ï¼‰ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/28.html" class="sidebar-item" aria-label="ç¬¬28èŠ‚ Linuxç³»ç»Ÿç§»æ¤ï¼Œåˆ†åŒºï¼Œrootfs"><!--[--><!--]--> ç¬¬28èŠ‚ Linuxç³»ç»Ÿç§»æ¤ï¼Œåˆ†åŒºï¼Œrootfs <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/29.html" class="sidebar-item" aria-label="ç¬¬29èŠ‚ CloudNative / Kubernetes å­¦ä¹ èµ„æºæ•´ç†"><!--[--><!--]--> ç¬¬29èŠ‚ CloudNative / Kubernetes å­¦ä¹ èµ„æºæ•´ç† <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/30.html" class="sidebar-item" aria-label="ç¬¬30èŠ‚ K8s å¼€å‘ç¯å¢ƒæ­å»º"><!--[--><!--]--> ç¬¬30èŠ‚ K8s å¼€å‘ç¯å¢ƒæ­å»º <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/31.html" class="sidebar-item" aria-label="ç¬¬31èŠ‚ kubernetes çš„ç¼–è¯‘å’Œè°ƒè¯•"><!--[--><!--]--> ç¬¬31èŠ‚ kubernetes çš„ç¼–è¯‘å’Œè°ƒè¯• <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/32.html" class="sidebar-item" aria-label="ç¬¬32èŠ‚ kubernetes ç›®å½•ç»“æ„"><!--[--><!--]--> ç¬¬32èŠ‚ kubernetes ç›®å½•ç»“æ„ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/33.html" class="sidebar-item" aria-label="ç¬¬33èŠ‚ Postmanè¯·æ±‚Server"><!--[--><!--]--> ç¬¬33èŠ‚ Postmanè¯·æ±‚Server <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/34.html" class="sidebar-item" aria-label="ç¬¬34èŠ‚ API Server"><!--[--><!--]--> ç¬¬34èŠ‚ API Server <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/35.html" class="sidebar-item" aria-label="ç¬¬35èŠ‚ client-go å†™ k8s æ§åˆ¶å™¨"><!--[--><!--]--> ç¬¬35èŠ‚ client-go å†™ k8s æ§åˆ¶å™¨ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/36.html" class="sidebar-item" aria-label="ç¬¬ 36 èŠ‚ ä¸€äº›ç–‘é—®"><!--[--><!--]--> ç¬¬ 36 èŠ‚ ä¸€äº›ç–‘é—® <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/37.html" class="sidebar-item" aria-label="ç¬¬ 37 èŠ‚ ä¸€äº›ç–‘é—®å’Œè§£ç­” 2"><!--[--><!--]--> ç¬¬ 37 èŠ‚ ä¸€äº›ç–‘é—®å’Œè§£ç­” 2 <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/38.html" class="sidebar-item" aria-label="ç¬¬38èŠ‚ ä¸€äº›ç–‘é—®å’Œè§£ç­”3"><!--[--><!--]--> ç¬¬38èŠ‚ ä¸€äº›ç–‘é—®å’Œè§£ç­”3 <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/39.html" class="sidebar-item" aria-label="ç¬¬ 39 èŠ‚ å…³äº Kubernetes çš„ä¸€äº›ç–‘é—® 4"><!--[--><!--]--> ç¬¬ 39 èŠ‚ å…³äº Kubernetes çš„ä¸€äº›ç–‘é—® 4 <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/40.html" class="sidebar-item" aria-label="ç¬¬40èŠ‚ Istio"><!--[--><!--]--> ç¬¬40èŠ‚ Istio <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/41.html" class="sidebar-item" aria-label="ç¬¬41èŠ‚ ä»£ç ç”Ÿæˆ"><!--[--><!--]--> ç¬¬41èŠ‚ ä»£ç ç”Ÿæˆ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/42.html" class="sidebar-item" aria-label="ç¬¬ 42 èŠ‚ Kubernetes çš„å¤šç§Ÿæˆ·"><!--[--><!--]--> ç¬¬ 42 èŠ‚ Kubernetes çš„å¤šç§Ÿæˆ· <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/43.html" class="sidebar-item" aria-label="ç¬¬43èŠ‚ kubernetes çš„è´¡çŒ®å­¦ä¹ "><!--[--><!--]--> ç¬¬43èŠ‚ kubernetes çš„è´¡çŒ®å­¦ä¹  <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/44.html" class="sidebar-item" aria-label="ç¬¬44èŠ‚ kubernetes èµ„æºå†…éƒ¨ç‰ˆæœ¬å’Œå¤–éƒ¨ç‰ˆæœ¬"><!--[--><!--]--> ç¬¬44èŠ‚ kubernetes èµ„æºå†…éƒ¨ç‰ˆæœ¬å’Œå¤–éƒ¨ç‰ˆæœ¬ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/45.html" class="sidebar-item" aria-label="ç¬¬45èŠ‚ namespace é€šä¿¡é—®é¢˜"><!--[--><!--]--> ç¬¬45èŠ‚ namespace é€šä¿¡é—®é¢˜ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/46.html" class="sidebar-item" aria-label="ç¬¬46èŠ‚ æ·±æŒ–å®¹å™¨åº•å±‚æŠ€æœ¯"><!--[--><!--]--> ç¬¬46èŠ‚ æ·±æŒ–å®¹å™¨åº•å±‚æŠ€æœ¯ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/47.html" class="sidebar-item" aria-label="ç¬¬47èŠ‚ Kubernetes æ¦‚å¿µä»¥åŠæ¶æ„"><!--[--><!--]--> ç¬¬47èŠ‚ Kubernetes æ¦‚å¿µä»¥åŠæ¶æ„ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/48.html" class="sidebar-item" aria-label="ç¬¬48èŠ‚ æ·±å…¥ç†è§£Kubernetesæ§åˆ¶å¹³é¢ç»„ä»¶ï¼šETCD"><!--[--><!--]--> ç¬¬48èŠ‚ æ·±å…¥ç†è§£Kubernetesæ§åˆ¶å¹³é¢ç»„ä»¶ï¼šETCD <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/49.html" class="sidebar-item" aria-label="ç¬¬49èŠ‚ æ·±å…¥ç†è§£ Kube-APIServer"><!--[--><!--]--> ç¬¬49èŠ‚ æ·±å…¥ç†è§£ Kube-APIServer <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/50.html" class="sidebar-item" aria-label="ç¬¬50èŠ‚ Kubernetes æ§åˆ¶å¹³é¢ï¼šè°ƒåº¦å™¨"><!--[--><!--]--> ç¬¬50èŠ‚ Kubernetes æ§åˆ¶å¹³é¢ï¼šè°ƒåº¦å™¨ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/51.html" class="sidebar-item" aria-label="ç¬¬51èŠ‚  Controller Manager"><!--[--><!--]--> ç¬¬51èŠ‚  Controller Manager <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/52.html" class="sidebar-item" aria-label="ç¬¬52èŠ‚ kubectl"><!--[--><!--]--> ç¬¬52èŠ‚ kubectl <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/53.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="ç¬¬53èŠ‚ CRIã€CNIã€CSI åº•å±‚åˆ¨æ"><!--[--><!--]--> ç¬¬53èŠ‚ CRIã€CNIã€CSI åº•å±‚åˆ¨æ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Cloud-Native-k8s/53.html#å®¹å™¨è¿è¡Œæ—¶" class="router-link-active router-link-exact-active sidebar-item" aria-label="å®¹å™¨è¿è¡Œæ—¶"><!--[--><!--]--> å®¹å™¨è¿è¡Œæ—¶ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/53.html#cni" class="router-link-active router-link-exact-active sidebar-item" aria-label="CNI"><!--[--><!--]--> CNI <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/53.html#csi" class="router-link-active router-link-exact-active sidebar-item" aria-label="CSI"><!--[--><!--]--> CSI <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Cloud-Native-k8s/53.html#end-é“¾æ¥" class="router-link-active router-link-exact-active sidebar-item" aria-label="END é“¾æ¥"><!--[--><!--]--> END é“¾æ¥ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/Cloud-Native-k8s/54.html" class="sidebar-item" aria-label="ç¬¬54èŠ‚ Kubernetes ç”Ÿå‘½å‘¨æœŸç®¡ç†å’ŒæœåŠ¡å‘ç°"><!--[--><!--]--> ç¬¬54èŠ‚ Kubernetes ç”Ÿå‘½å‘¨æœŸç®¡ç†å’ŒæœåŠ¡å‘ç° <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/55.html" class="sidebar-item" aria-label="ç¬¬55èŠ‚ æœåŠ¡å‘ç°"><!--[--><!--]--> ç¬¬55èŠ‚ æœåŠ¡å‘ç° <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/56.html" class="sidebar-item" aria-label="ç¬¬56èŠ‚ service"><!--[--><!--]--> ç¬¬56èŠ‚ service <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/57.html" class="sidebar-item" aria-label="ç¬¬57èŠ‚ kube-proxy"><!--[--><!--]--> ç¬¬57èŠ‚ kube-proxy <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/58.html" class="sidebar-item" aria-label="ç¬¬58èŠ‚ Kubernetes ç½‘ç»œ"><!--[--><!--]--> ç¬¬58èŠ‚ Kubernetes ç½‘ç»œ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/59.html" class="sidebar-item" aria-label="ç¬¬59èŠ‚ CoreDNS å’Œ Ingress"><!--[--><!--]--> ç¬¬59èŠ‚ CoreDNS å’Œ Ingress <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/60.html" class="sidebar-item" aria-label="ç¬¬60èŠ‚ ç”Ÿäº§åŒ–é›†ç¾¤çš„ç®¡ç†"><!--[--><!--]--> ç¬¬60èŠ‚ ç”Ÿäº§åŒ–é›†ç¾¤çš„ç®¡ç† <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/61.html" class="sidebar-item" aria-label="ç¬¬61èŠ‚ èŠ‚ç‚¹èµ„æºç®¡ç†ã€å¼‚å¸¸æ£€æµ‹ä»¥åŠå¸¸è§é—®é¢˜æ’æŸ¥"><!--[--><!--]--> ç¬¬61èŠ‚ èŠ‚ç‚¹èµ„æºç®¡ç†ã€å¼‚å¸¸æ£€æµ‹ä»¥åŠå¸¸è§é—®é¢˜æ’æŸ¥ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/62.html" class="sidebar-item" aria-label="ç¬¬62èŠ‚ Istio é«˜çº§æµé‡ç®¡ç†"><!--[--><!--]--> ç¬¬62èŠ‚ Istio é«˜çº§æµé‡ç®¡ç† <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/63.html" class="sidebar-item" aria-label="ç¬¬63èŠ‚ Prometheus å’Œ Grafana æ—¥å¿—æ”¶é›†æ–¹æ¡ˆ"><!--[--><!--]--> ç¬¬63èŠ‚ Prometheus å’Œ Grafana æ—¥å¿—æ”¶é›†æ–¹æ¡ˆ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/64.html" class="sidebar-item" aria-label="ç¬¬64èŠ‚ kubeadmæ¦‚è¿°ã€åŸç†ã€ä»¥åŠéƒ¨åˆ†æºç é˜…è¯»"><!--[--><!--]--> ç¬¬64èŠ‚ kubeadmæ¦‚è¿°ã€åŸç†ã€ä»¥åŠéƒ¨åˆ†æºç é˜…è¯» <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/65.html" class="sidebar-item" aria-label="ç¬¬65èŠ‚ eBPF åˆ¨æä»¥åŠæºç å­¦ä¹ "><!--[--><!--]--> ç¬¬65èŠ‚ eBPF åˆ¨æä»¥åŠæºç å­¦ä¹  <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/66.html" class="sidebar-item" aria-label="ç¬¬66èŠ‚ Kubernetes äºŒæ¬¡å¼€å‘ CRD å­¦ä¹ "><!--[--><!--]--> ç¬¬66èŠ‚ Kubernetes äºŒæ¬¡å¼€å‘ CRD å­¦ä¹  <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/67.html" class="sidebar-item" aria-label="ç¬¬67èŠ‚ K8s æ·±å…¥ç†è§£ Operator-client è¯¦è§£"><!--[--><!--]--> ç¬¬67èŠ‚ K8s æ·±å…¥ç†è§£ Operator-client è¯¦è§£ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/68.html" class="sidebar-item" aria-label="ç¬¬68èŠ‚ Reflector åŸç†"><!--[--><!--]--> ç¬¬68èŠ‚ Reflector åŸç† <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/69.html" class="sidebar-item" aria-label="ç¬¬69èŠ‚  DeltaFIFO åŸç†"><!--[--><!--]--> ç¬¬69èŠ‚  DeltaFIFO åŸç† <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/70.html" class="sidebar-item" aria-label="ç¬¬70èŠ‚ Kubernetes ç¤¾åŒºè§„èŒƒ"><!--[--><!--]--> ç¬¬70èŠ‚ Kubernetes ç¤¾åŒºè§„èŒƒ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/71.html" class="sidebar-item" aria-label="ç¬¬71èŠ‚ ProwåŠå…¶ç”Ÿæ€ç³»ç»Ÿ"><!--[--><!--]--> ç¬¬71èŠ‚ ProwåŠå…¶ç”Ÿæ€ç³»ç»Ÿ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/72.html" class="sidebar-item" aria-label="ç¬¬72èŠ‚"><!--[--><!--]--> ç¬¬72èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/73.html" class="sidebar-item" aria-label="ç¬¬73èŠ‚"><!--[--><!--]--> ç¬¬73èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/74.html" class="sidebar-item" aria-label="ç¬¬74èŠ‚"><!--[--><!--]--> ç¬¬74èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/75.html" class="sidebar-item" aria-label="ç¬¬75èŠ‚"><!--[--><!--]--> ç¬¬75èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/76.html" class="sidebar-item" aria-label="ç¬¬76èŠ‚"><!--[--><!--]--> ç¬¬76èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/77.html" class="sidebar-item" aria-label="ç¬¬77èŠ‚"><!--[--><!--]--> ç¬¬77èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/78.html" class="sidebar-item" aria-label="ç¬¬78èŠ‚"><!--[--><!--]--> ç¬¬78èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/79.html" class="sidebar-item" aria-label="ç¬¬79èŠ‚"><!--[--><!--]--> ç¬¬79èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/80.html" class="sidebar-item" aria-label="ç¬¬80èŠ‚"><!--[--><!--]--> ç¬¬80èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/81.html" class="sidebar-item" aria-label="ç¬¬81èŠ‚"><!--[--><!--]--> ç¬¬81èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/82.html" class="sidebar-item" aria-label="ç¬¬82èŠ‚"><!--[--><!--]--> ç¬¬82èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/83.html" class="sidebar-item" aria-label="ç¬¬83èŠ‚"><!--[--><!--]--> ç¬¬83èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/84.html" class="sidebar-item" aria-label="ç¬¬84èŠ‚"><!--[--><!--]--> ç¬¬84èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/85.html" class="sidebar-item" aria-label="ç¬¬85èŠ‚"><!--[--><!--]--> ç¬¬85èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/86.html" class="sidebar-item" aria-label="ç¬¬86èŠ‚"><!--[--><!--]--> ç¬¬86èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/87.html" class="sidebar-item" aria-label="ç¬¬87èŠ‚"><!--[--><!--]--> ç¬¬87èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/88.html" class="sidebar-item" aria-label="ç¬¬88èŠ‚"><!--[--><!--]--> ç¬¬88èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/89.html" class="sidebar-item" aria-label="ç¬¬89èŠ‚"><!--[--><!--]--> ç¬¬89èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/90.html" class="sidebar-item" aria-label="ç¬¬90èŠ‚"><!--[--><!--]--> ç¬¬90èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/91.html" class="sidebar-item" aria-label="ç¬¬91èŠ‚"><!--[--><!--]--> ç¬¬91èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/92.html" class="sidebar-item" aria-label="ç¬¬92èŠ‚"><!--[--><!--]--> ç¬¬92èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/93.html" class="sidebar-item" aria-label="ç¬¬93èŠ‚"><!--[--><!--]--> ç¬¬93èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/94.html" class="sidebar-item" aria-label="ç¬¬94èŠ‚"><!--[--><!--]--> ç¬¬94èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/95.html" class="sidebar-item" aria-label="ç¬¬95èŠ‚"><!--[--><!--]--> ç¬¬95èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/96.html" class="sidebar-item" aria-label="ç¬¬96èŠ‚"><!--[--><!--]--> ç¬¬96èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/97.html" class="sidebar-item" aria-label="ç¬¬97èŠ‚"><!--[--><!--]--> ç¬¬97èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/98.html" class="sidebar-item" aria-label="ç¬¬98èŠ‚"><!--[--><!--]--> ç¬¬98èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/99.html" class="sidebar-item" aria-label="ç¬¬99èŠ‚"><!--[--><!--]--> ç¬¬99èŠ‚ <!--[--><!--]--></a><!----></li><li><a href="/Cloud-Native-k8s/100.md" class="sidebar-item" aria-label="100.md"><!--[--><!--]--> 100.md <!--[--><!--]--></a><!----></li><li><a class="external-link sidebar-item" href="https://nsddd.top/archives/contributors" rel="noopener noreferrer" target="_blank" aria-label="ğŸ’å¦‚ä½•å‚ä¸è´¡çŒ®ï¼Ÿ"><!--[--><!--]--> ğŸ’å¦‚ä½•å‚ä¸è´¡çŒ®ï¼Ÿ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><ul><li><a href="http://nsddd.top" target="_blank" rel="noopener noreferrer">author<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h1 id="ç¬¬53èŠ‚-criã€cniã€csi-åº•å±‚åˆ¨æ" tabindex="-1"><a class="header-anchor" href="#ç¬¬53èŠ‚-criã€cniã€csi-åº•å±‚åˆ¨æ" aria-hidden="true">#</a> ç¬¬53èŠ‚ CRIã€CNIã€CSI åº•å±‚åˆ¨æ</h1><div><a href="52.md" style="float:left;">â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”— </a><a href="54.md" style="float:right;"> â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div><br><blockquote><p>â¤ï¸ğŸ’•ğŸ’•æ–°æ—¶ä»£æ‹¥æŠ±äº‘åŸç”Ÿï¼Œäº‘åŸç”Ÿå…·æœ‰ç¯å¢ƒç»Ÿä¸€ã€æŒ‰éœ€ä»˜è´¹ã€å³å¼€å³ç”¨ã€ç¨³å®šæ€§å¼ºç‰¹ç‚¹ã€‚Myblog:<a href="http://nsddd.top/" target="_blank" rel="noopener noreferrer">http://nsddd.top<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><hr><p>[TOC]</p><h2 id="å®¹å™¨è¿è¡Œæ—¶" tabindex="-1"><a class="header-anchor" href="#å®¹å™¨è¿è¡Œæ—¶" aria-hidden="true">#</a> å®¹å™¨è¿è¡Œæ—¶</h2><p>å®¹å™¨è¿è¡Œæ—¶(Container Runtime)ï¼Œè¿è¡ŒäºKubernetes (k8s)é›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹ä¸­ï¼Œè´Ÿè´£å®¹å™¨çš„æ•´ ä¸ªç”Ÿå‘½å‘¨æœŸã€‚å…¶ä¸­Dockeræ˜¯ç›®å‰åº”ç”¨æœ€å¹¿çš„ã€‚éšç€å®¹å™¨äº‘çš„å‘å±•,è¶Šæ¥è¶Šå¤šçš„å®¹å™¨è¿è¡Œæ—¶æ¶Œç°ã€‚ä¸ºäº† è§£å†³è¿™äº›å®¹å™¨è¿è¡Œæ—¶å’ŒKubernetesçš„é›†æˆé—®é¢˜ï¼Œåœ¨Kubernetes 1.5ç‰ˆæœ¬ä¸­ï¼Œç¤¾åŒºæ¨å‡ºäº†CRI ( Container Runtime Interface,å®¹å™¨è¿è¡Œæ—¶æ¥å£)ä»¥æ”¯æŒæ›´å¤šçš„å®¹å™¨è¿è¡Œæ—¶ã€‚</p><p><img src="http://sm.nsddd.top/sm202303082036547.png" alt="image-20230308203547983"></p><h3 id="ä»€ä¹ˆæ˜¯-cri" tabindex="-1"><a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-cri" aria-hidden="true">#</a> ä»€ä¹ˆæ˜¯ CRI</h3><p><strong>CRI æ˜¯ Kubernetes å®šä¹‰çš„ä¸€ç»„ gRPC æœåŠ¡ã€‚</strong></p><p>kubelet ä½œä¸ºå®¢æˆ·ç«¯ï¼Œ<strong>åŸºäº gRPC æ¡†æ¶ï¼Œé€šè¿‡ Socket å’Œå®¹å™¨è¿è¡Œæ—¶é€šä¿¡</strong>ã€‚å®ƒåŒ…æ‹¬ä¸¤ç±»æœåŠ¡:</p><ul><li><strong>é•œåƒæœåŠ¡(Image Service)</strong>ï¼šæä¾›ä¸‹è½½ã€æ£€æŸ¥å’Œåˆ é™¤é•œåƒçš„è¿œç¨‹ç¨‹åºè°ƒç”¨ï¼›</li><li><strong>è¿è¡Œæ—¶æœåŠ¡(Runtime Service)</strong>ï¼šåŒ…å«ç”¨äºç®¡ç†å®¹å™¨ç”Ÿå‘½å‘¨æœŸï¼Œä»¥åŠä¸å®¹å™¨äº¤äº’çš„è°ƒç”¨(exec/ attach / port-forward)çš„è¿œç¨‹ç¨‹åºè°ƒç”¨ã€‚</li></ul><p><img src="http://sm.nsddd.top/sm202303082035460.png" alt="image-20230308203517139"></p><h3 id="è¿è¡Œæ—¶çš„å±‚çº§" tabindex="-1"><a class="header-anchor" href="#è¿è¡Œæ—¶çš„å±‚çº§" aria-hidden="true">#</a> è¿è¡Œæ—¶çš„å±‚çº§</h3><p>å®¹å™¨è¿è¡Œæ—¶å¯ä»¥åˆ†ä¸ºé«˜å±‚å’Œä½å±‚çš„è¿è¡Œæ—¶ï¼š</p><blockquote><p>Dockershimeï¼Œcontainerd å’Œ CRI-O éƒ½æ˜¯éµå¾ª CRI çš„å®¹å™¨è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º é«˜çº§è¿è¡Œæ—¶ã€‚</p><p>OCI å®šä¹‰äº†åˆ›å»ºå®¹å™¨çš„æ ¼å¼å’Œè¿è¡Œæ—¶çš„å¼€æºè¡Œä¸šæ ‡å‡†ï¼ŒåŒ…æ‹¬ é•œåƒè§„èŒƒï¼ˆImage Specification) å’Œ å®¹å™¨è¿è¡Œæ—¶è§„èŒƒ ï¼ˆruntime specificationï¼‰</p><p>é•œåƒè§„èŒƒå®šä¹‰äº† OCI é•œåƒæ ‡å‡†ï¼Œé«˜å±‚çº§è¿è¡Œæ—¶ å°†ä¼šä¸‹è½½ä¸€ä¸ª OCI é•œåƒï¼Œå¹¶ä¸”å°†å®ƒè§£å‹ä¸º OCI è¿è¡Œæ—¶æ–‡ä»¶ç³»ç»ŸåŒ…ï¼ˆfile system bundleï¼‰</p><p>è¿è¡Œæ—¶è§„èŒƒæè¿°äº†å¦‚ä½•ä» OCI è¿è¡Œæ—¶æ–‡ä»¶ç³»ç»ŸåŒ…è¿è¡Œå®¹å™¨ç¨‹åºã€‚å¹¶ä¸”å®šä¹‰å®ƒçš„é…ç½®ï¼Œè¿è¡Œç¯å¢ƒå’Œç”Ÿå‘½å‘¨æœŸã€‚å¦‚ä½•ä¸ºæ–°çš„å®¹å™¨è®¾ç½®å‘½åç©ºé—´ï¼ˆnamespaceï¼‰å’Œæ§åˆ¶ç»„ï¼ˆcgroup) ï¼Œä»¥åŠæŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿï¼ˆrootfsï¼‰ç­‰ç­‰æ“ä½œï¼Œéƒ½æ˜¯åœ¨è¿™é‡Œå®šä¹‰çš„ã€‚å®ƒçš„ä¸€ä¸ªå‚è€ƒå®ç°æ˜¯ runcï¼Œæˆ‘ä»¬ç§°å…¶ä¸º <strong>ä½å±‚çº§è¿è¡Œæ—¶ï¼ˆLow-level Runtime)</strong></p></blockquote><ul><li><strong>é«˜å±‚çº§è¿è¡Œæ—¶(High-level Runtime)</strong>ï¼šä¸»è¦åŒ…æ‹¬ Docker,containerd å’Œ CRI-O</li><li><strong>ä½å±‚çº§è¿è¡Œæ—¶(Low-level Runtime)</strong>ï¼šåŒ…å«äº† <strong>runc</strong>, kata,ä»¥åŠ gVisorã€‚</li></ul><p>ä½å±‚è¿è¡Œæ—¶ kata å’Œ gVisor éƒ½è¿˜å¤„äºå°è§„æ¨¡è½åœ°æˆ–è€…å®éªŒé˜¶æ®µï¼Œå…¶ç”Ÿæ€æˆç†Ÿåº¦å’Œä½¿ç”¨æ¡ˆä¾‹éƒ½æ¯”è¾ƒæ¬ ç¼ºï¼Œæ‰€ä»¥é™¤éæœ‰ç‰¹æ®Šçš„éœ€æ±‚ï¼Œå¦åˆ™ runc å‡ ä¹æ˜¯å¿…ç„¶çš„é€‰æ‹©ã€‚å› æ­¤åœ¨å¯¹å®¹å™¨è¿è¡Œæ—¶çš„é€‰æ‹©ä¸Šï¼Œä¸»è¦æ˜¯èšç„¦äºä¸Šå±‚è¿è¡Œæ—¶çš„é€‰æ‹©ã€‚</p><ul><li><a href="https://github.com/google/gvisor" target="_blank" rel="noopener noreferrer">https://github.com/google/gvisor<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><blockquote><p><strong>å¯èƒ½ä½ è¿˜æ˜¯æ— æ³•ç†è§£ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸€è¾¹é“¾æ¥ Kubernetes ï¼Œä¸€è¾¹é“¾æ¥å®¹å™¨è¿›ç¨‹ï¼Œå‰è€…æ˜¯é«˜çº§è¿è¡Œæ—¶ï¼Œåè€…æ˜¯ä½çº§è¿è¡Œæ—¶ã€‚</strong></p></blockquote><h3 id="oci" tabindex="-1"><a class="header-anchor" href="#oci" aria-hidden="true">#</a> OCI</h3><p>**OCI (Open Container Initiative,å¼€æ”¾å®¹å™¨è®¡åˆ’)**å®šä¹‰äº†åˆ›å»ºå®¹å™¨çš„æ ¼å¼å’Œè¿è¡Œæ—¶çš„å¼€æºè¡Œä¸šæ ‡å‡†, åŒ…æ‹¬ï¼š</p><ul><li><strong>é•œåƒè§„èŒƒ(Image Specification)</strong>ï¼šå®šä¹‰äº† OCI é•œåƒçš„æ ‡å‡†ã€‚é«˜å±‚çº§è¿è¡Œæ—¶å°†ä¼šä¸‹è½½ä¸€ä¸ª<strong>OCI é•œåƒ</strong>,å¹¶æŠŠå®ƒè§£å‹æˆ<strong>OCI è¿è¡Œæ—¶æ–‡ä»¶ç³»ç»ŸåŒ…(filesystem bundle)</strong>ã€‚</li><li><strong>è¿è¡Œæ—¶è§„èŒƒ(Runtime Specification)</strong>ï¼šæè¿°äº†å¦‚ä½•ä» OCI è¿è¡Œæ—¶æ–‡ä»¶ç³»ç»ŸåŒ…è¿è¡Œå®¹å™¨ç¨‹åºï¼Œå¹¶ä¸”å®šä¹‰å®ƒçš„é…ç½®ã€è¿è¡Œç¯å¢ƒå’Œç”Ÿå‘½å‘¨æœŸï¼Œå¦‚ä½•ä¸ºæ–°å®¹å™¨è®¾ç½®å‘½åç©ºé—´(namepsaces)å’Œæ§åˆ¶ç»„(cgroups) ï¼Œä»¥åŠæŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿç­‰ç­‰æ“ä½œã€‚</li></ul><h3 id="cri-æ–¹æ³•åˆ—è¡¨" tabindex="-1"><a class="header-anchor" href="#cri-æ–¹æ³•åˆ—è¡¨" aria-hidden="true">#</a> CRI æ–¹æ³•åˆ—è¡¨</h3><p><img src="http://sm.nsddd.top/sm202303082048941.png" alt="image-20230308204826501"></p><p><img src="http://sm.nsddd.top/sm202303082048989.png" alt="image-20230308204850894"></p><h3 id="å¼€æºè¿è¡Œæ—¶çš„æ¯”è¾ƒ" tabindex="-1"><a class="header-anchor" href="#å¼€æºè¿è¡Œæ—¶çš„æ¯”è¾ƒ" aria-hidden="true">#</a> å¼€æºè¿è¡Œæ—¶çš„æ¯”è¾ƒ</h3><p><code>Docker</code> çš„å¤šå±‚å°è£…å’Œè°ƒç”¨ï¼Œå¯¼è‡´å…¶åœ¨å¯ç»´æŠ¤æ€§ä¸Šç•¥é€Šä¸€ç­¹,å¢åŠ äº†çº¿ä¸Šé—®é¢˜çš„å®šä½éš¾åº¦;å‡ ä¹é™¤äº†é‡å¯ <code>Docker</code>ï¼Œæˆ‘ä»¬å°±æ¯«æ— ä»–æ³•äº†ã€‚ <code>containerd</code> å’Œ <code>CRI-O</code> çš„æ–¹æ¡ˆæ¯”èµ· <code>Docker</code> ç®€æ´å¾ˆå¤šã€‚</p><blockquote><p>docker å¯ä»¥ç†è§£ä¸º containerd çš„ä¸€ä¸ªè¶…é›†ï¼Œå¦‚æœä½ ç”¨ docker ä½œä¸º è¿è¡Œæ—¶ï¼Œé‚£ä¹ˆç›¸å½“äºå¯åŠ¨äº†ä¸€ä¸ªåšé‡çš„ dockershimã€‚</p></blockquote><p><img src="http://sm.nsddd.top/sm202303082049718.png" alt="image-20230308204923967"></p><h4 id="æ€§èƒ½å·®å¼‚" tabindex="-1"><a class="header-anchor" href="#æ€§èƒ½å·®å¼‚" aria-hidden="true">#</a> æ€§èƒ½å·®å¼‚</h4><p>containerd åœ¨å„ä¸ªæ–¹é¢éƒ½è¡¨ç°è‰¯å¥½ï¼Œé™¤äº†å¯åŠ¨å®¹å™¨è¿™é¡¹ã€‚ä»æ€»ç”¨æ—¶æ¥çœ‹ï¼Œcontainerd çš„ç”¨æ—¶è¿˜æ˜¯è¦æ¯” CRI-O è¦çŸ­çš„ã€‚</p><blockquote><p>æ‰€ä»¥æœ€ç»ˆæ˜¯ containerd èµ¢äº†ï¼Œæœ€ä¼˜çš„æ–¹æ¡ˆï¼Œå½“ç„¶ cri-o + runc ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p></blockquote><p><img src="http://sm.nsddd.top/sm202303082049094.png" alt="image-20230308204953887"></p><h4 id="ä¼˜åŠ£å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#ä¼˜åŠ£å¯¹æ¯”" aria-hidden="true">#</a> ä¼˜åŠ£å¯¹æ¯”</h4><p>åŠŸèƒ½æ€§æ¥è®²ï¼Œ<code>containerd</code> å’Œ <code>CRI-O</code> éƒ½ç¬¦åˆ <code>CRI</code> å’Œ <code>OCI</code> çš„æ ‡å‡†;ï¼›åœ¨ç¨³å®šæ€§ä¸Šï¼Œcontainerd ç•¥èƒœä¸€ç­¹; ä»æ€§èƒ½ä¸Šè®²ï¼Œcontainerd èƒœå‡ºã€‚</p><table><thead><tr><th></th><th>containerd</th><th>CRI-O</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>æ€§èƒ½</td><td>æ›´ä¼˜</td><td>ä¼˜</td><td></td></tr><tr><td>åŠŸèƒ½</td><td>ä¼˜</td><td>ä¼˜</td><td>CRI ä¸ OCI å…¼å®¹</td></tr><tr><td>ç¨³å®šæ€§</td><td>ç¨³å®š</td><td>æœªçŸ¥</td><td></td></tr></tbody></table><h4 id="docker-containerd" tabindex="-1"><a class="header-anchor" href="#docker-containerd" aria-hidden="true">#</a> Docker &amp; Containerd</h4><p>Docker å†…éƒ¨å…³äºå®¹å™¨è¿è¡Œæ—¶åŠŸèƒ½çš„æ ¸å¿ƒç»„ä»¶æ˜¯ containerd,åæ¥ containerd ä¹Ÿå¯ç›´æ¥å’Œ kubelet é€šè¿‡ CRI å¯¹æ¥ï¼Œç‹¬ç«‹åœ¨ Kubernetes ä¸­ä½¿ç”¨ã€‚</p><blockquote><p>è¿™å°±æ˜¯å¾ˆå¾®å¦™çš„ï¼Œcontainerd ä¹Ÿæä¾›äº† CLI å·¥å…·ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>crictl pods <span class="token comment">#ä¹Ÿèƒ½è¯»å–podä¿¡æ¯</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><p>ç›¸å¯¹äº Dockerè€Œè¨€ï¼Œcontainerd å‡å°‘äº†Docker æ‰€éœ€çš„å¤„ç†æ¨¡å— Dockerd å’Œ Docker-shim,å¹¶ä¸”å¯¹ Docker æ”¯æŒçš„å­˜å‚¨é©±åŠ¨è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå› æ­¤åœ¨å®¹å™¨çš„åˆ›å»ºå¯åŠ¨åœæ­¢å’Œåˆ é™¤ï¼Œä»¥åŠå¯¹é•œåƒçš„æ‹‰å–ä¸Šï¼Œéƒ½å…·æœ‰æ€§èƒ½ä¸Šçš„ä¼˜åŠ¿ã€‚æ¶æ„çš„ç®€åŒ–åŒæ—¶ä¹Ÿå¸¦æ¥äº†ç»´æŠ¤çš„ä¾¿åˆ©ã€‚</p><p>å½“ç„¶ Docker ä¹Ÿå…·æœ‰å¾ˆå¤š containerd ä¸å…·æœ‰çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æ”¯æŒ zfs å­˜å‚¨é©±åŠ¨ï¼Œæ”¯æŒå¯¹æ—¥å¿—çš„å¤§å°å’Œæ–‡ä»¶é™åˆ¶ï¼Œåœ¨ä»¥ overlayfs2 åšå­˜å‚¨é©±åŠ¨çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡ xfs_quota æ¥å¯¹å®¹å™¨çš„å¯å†™å±‚è¿›è¡Œå¤§å°é™åˆ¶ç­‰ã€‚å°½ç®¡å¦‚æ­¤ï¼Œcontainerd ç›®å‰ä¹ŸåŸºæœ¬ä¸Šèƒ½å¤Ÿæ»¡è¶³å®¹å™¨çš„ä¼—å¤šç®¡ç†éœ€æ±‚ï¼Œæ‰€ä»¥å°†å®ƒä½œä¸ºè¿è¡Œæ—¶çš„ä¹Ÿè¶Šæ¥è¶Šå¤šã€‚</p><h4 id="docker-å’Œ-containerd-çš„å·®å¼‚ç»†èŠ‚" tabindex="-1"><a class="header-anchor" href="#docker-å’Œ-containerd-çš„å·®å¼‚ç»†èŠ‚" aria-hidden="true">#</a> docker å’Œ containerd çš„å·®å¼‚ç»†èŠ‚</h4><img src="http://sm.nsddd.top/sm202303082050059.png" alt="image-20230308205012033" style="zoom:67%;"><p>å¯ä»¥çœ‹åˆ° docker ä¸­æœ‰è®¸å¤š k8s ä¸éœ€è¦çš„åŠŸèƒ½ï¼Œk8s éœ€è¦çš„åªæ˜¯ çº¢æ¡†ä¸­çš„éƒ¨åˆ†ï¼Œå…¶ä»–çš„éƒ½æ˜¯å†—ä½™ï¼Œå³ä¾¿å»æ‰è¿™éƒ¨åˆ†ï¼Œå‰©ä¸‹çš„è°ƒç”¨é“¾ä¹Ÿæ˜¯éå¸¸çš„é•¿ã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹ containerd æ•´ä¸ªä»£ç å’Œè°ƒç”¨é“¾éƒ½è¿œä¼˜äº docker çš„ã€‚</p><h3 id="å¦‚ä½•ä»-docker-åˆ‡æ¢åˆ°-containerd" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ä»-docker-åˆ‡æ¢åˆ°-containerd" aria-hidden="true">#</a> å¦‚ä½•ä» Docker åˆ‡æ¢åˆ° Containerd</h3><p>https://kubernetes.io/zh/docs/setup/production-environment/container-runtimes/#containerd</p><p>Stop service</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl stop kubelet
systemctl stop <span class="token function">docker</span>
systemctl stop containerd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Create containerd config folderï¼š</strong></p><blockquote><p>é…ç½® containerd ï¼š</p></blockquote><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /etc/containerd
containerd config default <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/containerd/config.toml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>åœ¨ containerd ä¸­ï¼Œ<code>sandbox_image</code> è¿™ä¸ªå‚æ•°ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>â¯ containerd config default <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/containerd/config.toml <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;sandbox_image&quot;</span>
    sandbox_image <span class="token operator">=</span> <span class="token string">&quot;k8s.gcr.io/pause:3.1&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å›½å†…ä¸ç¿»å¢™æ˜¯æ²¡åŠæ³•ä¸‹è½½çš„ã€‚</p></blockquote><p>Update default config</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token parameter variable">-i</span> s<span class="token comment">#k8s.gcr.io/pause:3.5#registry.aliyuncs.com/google_containers/pause:3.5#g /etc/containerd/config.toml</span>
<span class="token function">sed</span> <span class="token parameter variable">-i</span> s<span class="token comment">#&#39;SystemdCgroup = false&#39;#&#39;SystemdCgroup = true&#39;#g /etc/containerd/config.toml</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>å¯ä»¥é…ç½®é•œåƒä¸º é˜¿é‡Œäº‘</p></blockquote><p>Edit kubelet config and add extra args</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /etc/systemd/system/kubelet.service.d/10-kubeadm.conf
<span class="token assign-left variable">Environment</span><span class="token operator">=</span><span class="token string">&quot;KUBELET_EXTRA_ARGS=--container-runtime=remote --container-runtime-endpoint=unix:///run/containerd/containerd.sock --pod-infra-container-image=registry.aliyuncs.com/google_containers/pause:3.5&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>æ¥ä¸‹æ¥å°±æ˜¯ ä¿®æ”¹ Kubernetes çš„å¯åŠ¨å‚æ•°ï¼Œå‘Šè¯‰ Kubernetes æˆ‘çš„è¿è¡Œæ—¶ è¦æ”¹ä¸º containerdã€‚</strong></p><p><img src="http://sm.nsddd.top/sm202303082108767.png" alt="image-20230308210827670"></p><p>è¿™ä¸ªä½ç½®å°±æ˜¯ kubelete gPRC è°ƒç”¨çš„ä½ç½®ã€‚</p></blockquote><p>Restart</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl daemon-reload
systemctl restart containerd
systemctl restart kubelet
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Config crictl to set correct endpoint</p><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>cat <span class="token operator">&lt;&lt;</span>EOF <span class="token operator">|</span> sudo tee <span class="token operator">/</span>etc<span class="token operator">/</span>crictl<span class="token punctuation">.</span>yaml
runtime<span class="token operator">-</span>endpoint<span class="token punctuation">:</span> unix<span class="token punctuation">:</span><span class="token operator">/</span><span class="token comment">//run/containerd/containerd.sock</span>
EOF
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="cni" tabindex="-1"><a class="header-anchor" href="#cni" aria-hidden="true">#</a> CNI</h2><p><a href="https://dramasamy.medium.com/life-of-a-packet-in-kubernetes-part-2-a07f5bf0ff14" target="_blank" rel="noopener noreferrer">k8s ç½‘ç»œæµè½¬<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="kubernetes-é›†ç¾¤ç½‘ç»œ" tabindex="-1"><a class="header-anchor" href="#kubernetes-é›†ç¾¤ç½‘ç»œ" aria-hidden="true">#</a> Kubernetes é›†ç¾¤ç½‘ç»œ</h3><p>okï¼Œæˆ‘è§‰å¾— Kubernetes çš„é›†ç¾¤ç½‘ç»œæ˜¯éå¸¸å¤æ‚çš„ï¼Œå›å½’åˆ°ç½‘ç»œæœ¬èº«ä¹Ÿæ˜¯éå¸¸å¤æ‚çš„ã€‚å³ä½¿æ˜¯å¯¹æœ‰ç€è™šæ‹Ÿç½‘ç»œå’Œè¯·æ±‚è·¯ç”±æ“ä½œçš„å·¥ç¨‹å¸ˆæ¥è¯´ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å¾ˆå¤šä¹¦ä¸Šï¼ˆåŒ…æ‹¬ dockerã€Kubernetes çš„æ•™ç¨‹ï¼Œç½‘ç»œå­¦ä¹ æœ¬èº«æ˜¯ä¸€ä¸ªå¾ªå¾ªæ¸è¿›çš„è¿‡ç¨‹ï¼ŒKubernetes ä¼šä» docker ç½‘ç»œè®²èµ·ï¼Œdocker ä»Linuxè®²èµ·ï¼Œæˆ‘ä»¬åœ¨å‰é¢ docker ä¸­ä¹Ÿæ˜¯äº†è§£åˆ°ç½‘ç»œä¸€äº›æ ¸å¿ƒçš„ä¸æ˜¯å—ï¼Œé‚£æˆ‘ä»¬å°±ä» Linux ç½‘ç»œå¼€å§‹è®²èµ·ã€‚</p><blockquote><p>Linuxåç§°ç©ºé—´åŒ…å«äº†å¤§å¤šæ•°ç°ä»£å®¹å™¨å®ç°èƒŒåçš„ä¸€äº›åŸºæœ¬æŠ€æœ¯ã€‚åœ¨é«˜çº§åˆ«ä¸Šï¼Œå®ƒä»¬å…è®¸åœ¨ç‹¬ç«‹è¿›ç¨‹ä¹‹é—´éš”ç¦»å…¨å±€ç³»ç»Ÿèµ„æºã€‚ä¾‹å¦‚ï¼ŒPIDå‘½åç©ºé—´éš”ç¦»è¿›ç¨‹IDå·ç©ºé—´ã€‚è¿™æ„å‘³ç€åœ¨åŒä¸€ä¸»æœºä¸Šè¿è¡Œçš„ä¸¤ä¸ªè¿›ç¨‹å¯ä»¥æœ‰ç›¸åŒçš„PIDï¼</p><p>è¿™ç§çº§åˆ«çš„éš”ç¦»åœ¨å®¹å™¨ä¸–ç•Œä¸­æ˜¾ç„¶æ˜¯æœ‰ç”¨çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ²¡æœ‰åç§°ç©ºé—´ï¼Œåœ¨å®¹å™¨Aä¸­è¿è¡Œçš„è¿›ç¨‹<em>å¯èƒ½</em>ä¼šåœ¨å®¹å™¨Bä¸­å¸è½½ä¸€ä¸ªé‡è¦çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæˆ–è€…æ›´æ”¹å®¹å™¨Cçš„ä¸»æœºåï¼Œæˆ–è€…ä»å®¹å™¨Dä¸­åˆ é™¤ä¸€ä¸ªç½‘ç»œæ¥å£ã€‚é€šè¿‡å‘½åè¿™äº›èµ„æºï¼Œå®¹å™¨Aä¸­çš„è¿›ç¨‹ç”šè‡³ä¸çŸ¥é“å®¹å™¨Bã€Cå’ŒDä¸­çš„è¿›ç¨‹å­˜åœ¨ã€‚</p></blockquote><p><strong>Kubernetesç½‘ç»œæ¨¡å‹è®¾è®¡çš„åŸºç¡€åŸåˆ™æ˜¯:</strong></p><ul><li>æ‰€æœ‰çš„Podèƒ½å¤Ÿä¸é€šè¿‡NATå°±èƒ½ç›¸äº’è®¿é—®ã€‚</li><li>æ‰€æœ‰çš„èŠ‚ç‚¹èƒ½å¤Ÿä¸é€šè¿‡NATå°±èƒ½ç›¸äº’è®¿é—®ã€‚</li><li>å®¹å™¨å†…çœ‹è§çš„IPåœ°å€å’Œå¤–éƒ¨ç»„ä»¶çœ‹åˆ°çš„å®¹å™¨IPæ˜¯ä¸€æ ·çš„ã€‚</li></ul><p>Kubernetes çš„é›†ç¾¤é‡Œï¼ŒIP åœ°å€æ˜¯ä»¥ Pod ä¸ºå•ä½è¿›è¡Œåˆ†é…çš„ï¼Œæ¯ä¸ª Pod éƒ½æ‹¥æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ IP åœ°å€ã€‚<strong>ä¸€ä¸ª Pod å†…éƒ¨çš„æ‰€æœ‰å®¹å™¨å…±äº«ä¸€ä¸ªç½‘ç»œæ ˆï¼Œå³å®¿ä¸»æœºä¸Šçš„ä¸€ä¸ªç½‘ç»œå‘½åç©ºé—´ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„ IP åœ°å€ã€ç½‘ç»œè®¾å¤‡ã€é…ç½®ç­‰éƒ½æ˜¯å…±äº«çš„ã€‚</strong> ä¹Ÿå°±æ˜¯è¯´ï¼ŒPod é‡Œé¢çš„æ‰€æœ‰å®¹å™¨èƒ½é€šè¿‡ <code>localhost:port</code> æ¥è¿æ¥å¯¹æ–¹ã€‚</p><p><strong>åœ¨ Kubernetes ä¸­ï¼Œæä¾›äº†ä¸€ä¸ªè½»é‡çš„é€šç”¨å®¹å™¨ç½‘ç»œæ¥å£ CNI ( Container Network Interface)ï¼Œä¸“é—¨ç”¨äºè®¾ç½®å’Œåˆ é™¤å®¹å™¨çš„ç½‘ç»œè¿é€šæ€§ã€‚</strong> å®¹å™¨è¿è¡Œæ—¶é€šè¿‡ CNI è°ƒç”¨ç½‘ç»œæ’ä»¶æ¥å®Œæˆå®¹å™¨çš„ç½‘ç»œè®¾ç½®ã€‚</p><h3 id="cni-æ’ä»¶åˆ†ç±»å’Œå¸¸è§æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#cni-æ’ä»¶åˆ†ç±»å’Œå¸¸è§æ’ä»¶" aria-hidden="true">#</a> CNI æ’ä»¶åˆ†ç±»å’Œå¸¸è§æ’ä»¶</h3><ul><li>IPAMï¼š IPåœ°å€åˆ†é…</li><li>ä¸»æ’ä»¶ï¼šç½‘å¡è®¾ç½® <ul><li><code>bridge</code>ï¼šåˆ›å»ºä¸€ä¸ªç½‘æ¡¥ï¼Œå¹¶æŠŠä¸»æœºç«¯å£å’Œå®¹å™¨ç«¯å£æ’å…¥ç½‘æ¡¥</li><li><code>ipvlan</code>ï¼šä¸ºå®¹å™¨æ·»åŠ <code>ipvlan</code>ç½‘å£</li><li><code>loopback</code>ï¼šè®¾ç½®<code>loopback</code>ç½‘å£</li></ul></li><li>Metaï¼š é™„åŠ åŠŸèƒ½ <ul><li><code>portmap</code>ï¼šè®¾ç½®ä¸»æœºç«¯å£å’Œå®¹å™¨ç«¯å£æ˜ å°„</li><li><code>bandwidth</code>ï¼šåˆ©ç”¨ <code>Linux Traffic Control</code>é™æµ</li><li><code>firewall</code>ï¼šé€šè¿‡ <code>iptables</code> æˆ– <code>firewalld</code> ä¸ºå®¹å™¨è®¾ç½®é˜²ç«å¢™è§„åˆ™</li></ul></li></ul><p>https://github.com/containernetworking/plugins</p><h3 id="cni-æ’ä»¶è¿è¡Œæœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#cni-æ’ä»¶è¿è¡Œæœºåˆ¶" aria-hidden="true">#</a> CNI æ’ä»¶è¿è¡Œæœºåˆ¶</h3><p>å®¹å™¨è¿è¡Œæ—¶åœ¨å¯åŠ¨æ—¶ä¼šä» CNI çš„é…ç½®ç›®å½•ä¸­è¯»å– JSON æ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cat</span> /etc/cni/net.d <span class="token comment"># è¯»å–è¿™ä¸ª CNI é…ç½®æ–‡ä»¶</span>

<span class="token function">ls</span> <span class="token parameter variable">-al</span> /opt/cni/bin <span class="token comment"># CNI å¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ–‡ä»¶åç¼€ä¸º <code>.conf</code>ã€ <code>.conflist</code>ã€ <code>.json</code>ã€‚å¦‚æœé…ç½®ç›®å½•ä¸­åŒ…å«å¤šä¸ªæ–‡ä»¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¼šä»¥åå­—æ’åºé€‰ç”¨ç¬¬ä¸€ä¸ªé…ç½®æ–‡ä»¶ä½œä¸ºé»˜è®¤çš„ç½‘ç»œé…ç½®ï¼Œå¹¶åŠ è½½è·å–å…¶ä¸­æŒ‡å®šçš„ CNI æ’ä»¶åç§°å’Œé…ç½®å‚æ•°ã€‚</p><blockquote><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰ä¸ª <code>.conflist</code> ç»“å°¾çš„æ–‡ä»¶ï¼Œæ˜¯çš„ï¼Œ<strong>k8s çš„ cni å…è®¸åŒæ—¶ä½¿ç”¨å¤šä¸ªæ’ä»¶ï¼Œå¹¶ä¸”ä¼šæŠŠä¸Šä¸€ä¸ªæ’ä»¶çš„æ‰§è¡Œç»“æœä½œä¸ºå‚æ•°ä¼ é€’ç»™ä¸‹ä¸€ä¸ªæ’ä»¶ï¼Œä»¥æ­¤æˆ‘ä»¬å¯ä»¥ä¸²é€šå¤šä¸ªæ’ä»¶</strong>ï¼Œè®©å¤šä¸ªæ’ä»¶åšä¸åŒçš„äº‹æƒ…ã€‚æ¯”å¦‚æˆ‘å¯ä»¥ç¬¬ä¸€ä¸ªæ’ä»¶åªè´Ÿè´£è®©åŒä¸€å°ä¸»æœºä¸Šçš„èŠ‚ç‚¹é€šä¿¡ï¼Œç„¶åç¬¬äºŒä¸ªæ’ä»¶å¯ä»¥è´Ÿè´£è®©ä¸åŒèŠ‚ç‚¹ä¸Šçš„ pod é€šä¿¡ï¼Œæ€»ä¹‹è¿˜æ˜¯é‚£å¥è¯ï¼Œé…ç½®æ–‡ä»¶æœ‰äº†ï¼Œpod ä¿¡æ¯ä¹Ÿè¢« k8s ä¼ è¿‡æ¥äº†ï¼Œçˆ±æ€ä¹ˆç©å„¿æ˜¯ä½ æ’ä»¶è‡ªå·±çš„äº‹å„¿äº†~</p></blockquote><p>å…³äºå®¹å™¨ç½‘ç»œç®¡ç†ï¼Œå®¹å™¨è¿è¡Œæ—¶ä¸€èˆ¬éœ€è¦é…ç½®ä¸¤ä¸ªå‚æ•° <code>--cni-bin-dir</code> å’Œ <code>--cni-conf-dir</code>ã€‚</p><ul><li><code>cni-bin-dir</code>ï¼šç½‘ç»œæ’ä»¶çš„å¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨ç›®å½•ã€‚é»˜è®¤æ˜¯ <code>/opt/cni/bin</code>ã€‚</li><li><code>cni-conf-dir</code>ï¼šç½‘ç»œæ’ä»¶çš„é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•ã€‚é»˜è®¤æ˜¯ <code>/etc/cni/net.d</code>ã€‚</li></ul><blockquote><p>æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œkubelet å†…ç½®çš„ Docker ä½œä¸ºå®¹å™¨è¿è¡Œæ—¶ï¼Œæ˜¯ç”± kubelet æ¥æŸ¥æ‰¾ CNI æ’ä»¶çš„ï¼Œè¿è¡Œæ’ä»¶æ¥ä¸ºå®¹å™¨è®¾ç½®ç½‘ç»œ,è¿™ä¸¤ä¸ªå‚æ•°åº”è¯¥é…ç½®åœ¨ kubelet å¤„ã€‚</p><p>åç»­ k8s v1.24 å½»åº•ç§»é™¤ docker ä¹‹åå°±ä¸ç”¨è€ƒè™‘è¿™ç§ç‰¹æ®Šæƒ…å†µäº†ã€‚</p></blockquote><p><strong>å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</strong></p><p><img src="http://sm.nsddd.top/sm202303082216727.png" alt="img"></p><p><strong>å®Œæ•´çš„è°ƒç”¨é“¾å¦‚ä¸‹ï¼š</strong></p><p>é¦–å…ˆ Pod æ˜¯ç”± <code>kubelet</code> æ¥èµ·çš„ï¼Œç„¶å <code>kubelet</code> é€šè¿‡ <code>CRI</code> æ¥å£æ¥èµ· Podã€‚</p><p>è€Œèµ· Pod çš„è¿‡ç¨‹ä¸­åˆåŒ…å« <strong>ç½‘ç»œç›¸å…³é…ç½®</strong>ï¼Œè¿™éƒ¨åˆ†å°±è¦ç”± CRI æ¥è°ƒç”¨ CNI å®ç°äº†ã€‚</p><p>å› æ­¤æ•´ä¸ªè°ƒç”¨é“¾å°±æ˜¯ <code>kubelet --&gt; CRI --&gt; CNI</code>ã€‚</p><img src="http://sm.nsddd.top/sm202303082216115.jpeg" alt="img" style="zoom:33%;"><h3 id="cni-éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#cni-éƒ¨ç½²" aria-hidden="true">#</a> CNI éƒ¨ç½²ï¼Ÿ</h3><p>CNI æ’ä»¶éƒ¨ç½²çš„æ—¶å€™ä¸€èˆ¬ä¼šå¯åŠ¨ä¸€ä¸ª DaemonSetï¼Œç„¶åæŠŠ é•œåƒé‡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶å¤åˆ¶åˆ°å®¿ä¸»æœºçš„ <code>/opt/cni/bin</code> ç›®å½•ä¸‹ï¼Œè¿™æ ·å°±ç®—æ˜¯å®Œæˆäº†éƒ¨ç½²ã€‚</p><blockquote><p>å› æ­¤å†™ä¸€ä¸ª CNI æ’ä»¶å®é™…å°±æ˜¯æä¾›ä¸€äº›åŒ…å«å¯¹åº”åŠŸèƒ½çš„äºŒè¿›åˆ¶æ–‡ä»¶ç»™ kubelet è°ƒç”¨ã€‚</p></blockquote><p>CNI å¯ä»¥ è®¾ç½®å¤šä¸ªï¼Œåªä¸è¿‡ CNI æ˜¯æŒ‰ç…§é¡ºåºæ‰§è¡Œ~</p><h3 id="cni-æ’ä»¶è®¾è®¡è€ƒé‡" tabindex="-1"><a class="header-anchor" href="#cni-æ’ä»¶è®¾è®¡è€ƒé‡" aria-hidden="true">#</a> CNI æ’ä»¶è®¾è®¡è€ƒé‡</h3><ul><li>å®¹å™¨è¿è¡Œæ—¶å¿…é¡»åœ¨è°ƒç”¨ä»»ä½•æ’ä»¶ä¹‹å‰ä¸ºå®¹å™¨åˆ›å»ºä¸ªæ–°çš„ç½‘ç»œå‘½åç©ºé—´ã€‚</li><li>å®¹å™¨è¿è¡Œæ—¶å¿…é¡»å†³å®šè¿™ä¸ªå®¹å™¨å±äºå“ªäº›ç½‘ç»œï¼Œé’ˆå¯¹æ¯ä¸ªç½‘ç»œï¼Œå“ªäº›æ’ä»¶å¿…é¡»è¦æ‰§è¡Œã€‚</li><li>å®¹å™¨è¿è¡Œæ—¶å¿…é¡»åŠ è½½é…ç½®æ–‡ä»¶ï¼Œå¹¶ç¡®å®šè®¾ç½®ç½‘ç»œæ—¶å“ªäº›æ’ä»¶å¿…é¡»è¢«æ‰§è¡Œ</li><li>ç½‘ç»œé…ç½®é‡‡ç”¨ <code>JSON</code> æ ¼å¼ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°å­˜å‚¨åœ¨æ–‡ä»¶ä¸­ã€‚</li><li>å®¹å™¨è¿è¡Œæ—¶å¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œé…ç½®æ–‡ä»¶é‡Œç›¸åº”çš„æ’ä»¶</li><li>åœ¨å®Œæˆå®¹å™¨ç”Ÿå‘½å‘¨æœŸåå®¹å™¨è¿è¡Œæ—¶å¿…é¡»æŒ‰ç…§ä¸æ‰§è¡Œæ·»åŠ å®¹å™¨ç›¸åçš„é¡ºåºæ‰§è¡Œæ’ä»¶ï¼Œä»¥ä¾¿å°†å®¹å™¨ä¸ç½‘ç»œæ–­å¼€è¿æ¥</li><li>å®¹å™¨è¿è¡Œæ—¶è¢«åŒä¸€å®¹å™¨è°ƒç”¨æ—¶ä¸èƒ½å¹¶è¡Œæ“ä½œä½†è¢«ä¸åŒçš„å®¹å™¨è°ƒç”¨æ—¶ï¼Œå…è®¸å¹¶è¡Œæ“ä½œã€‚</li><li>å®¹å™¨è¿è¡Œæ—¶é’ˆå¯¹ä¸€ä¸ªå®¹å™¨å¿…é¡»æŒ‰é¡ºåºæ‰§è¡Œ ADD å’Œ DEL æ“ä½œï¼ŒADD åé¢æ€»æ˜¯è·Ÿç€ç›¸åº”çš„ DELã€‚DEL å¯èƒ½è·Ÿç€é¢å¤–çš„ DEL,æ’ä»¶åº”è¯¥å…è®¸å¤„ç†å¤šä¸ª DELã€‚</li><li>å®¹å™¨å¿…é¡»ç”± <code>ContainerID</code> æ¥å”¯ä¸€æ ‡è¯†ï¼Œéœ€è¦å­˜å‚¨çŠ¶æ€çš„æ’ä»¶éœ€è¦ä½¿ç”¨ç½‘ç»œåç§°å®¹å™¨ ID å’Œç½‘ç»œæ¥å£ç»„æˆçš„ä¸» key ç”¨äºç´¢å¼•ã€‚</li><li>å®¹å™¨è¿è¡Œæ—¶é’ˆå¯¹ <strong>åŒä¸€ä¸ªç½‘ç»œã€åŒä¸€ä¸ªå®¹å™¨åŒä¸€ä¸ªç½‘ç»œæ¥å£</strong>ï¼Œ ä¸èƒ½è¿ç»­è°ƒç”¨ä¸¤æ¬¡ ADD å‘½ä»¤ã€‚</li></ul><h3 id="æ‰“é€šä¸»æœºå±‚ç½‘ç»œ" tabindex="-1"><a class="header-anchor" href="#æ‰“é€šä¸»æœºå±‚ç½‘ç»œ" aria-hidden="true">#</a> æ‰“é€šä¸»æœºå±‚ç½‘ç»œ</h3><p>CNI æ’ä»¶å¤–ï¼ŒKubernetes è¿˜éœ€è¦æ ‡å‡†çš„ CNI æ’ä»¶ <code>lo</code>ï¼Œæœ€ä½ç‰ˆæœ¬ä¸º 0.2.0 ç‰ˆæœ¬ã€‚ç½‘ç»œæ’ä»¶é™¤æ”¯æŒè®¾ç½®å’Œæ¸…ç† Pod ç½‘ç»œæ¥å£å¤–,è¯¥æ’ä»¶è¿˜éœ€è¦æ”¯æŒ <code>Iptables</code>ã€‚å¦‚æœ <code>Kube-proxy</code> å·¥ä½œåœ¨ <code>Iptables</code> æ¨¡å¼ï¼Œç½‘ç»œæ’ä»¶éœ€è¦ç¡®ä¿å®¹å™¨æµé‡èƒ½ä½¿ç”¨ <code>Iptables</code> è½¬å‘ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç½‘ç»œæ’ä»¶å°†å®¹å™¨è¿æ¥åˆ° Linux ç½‘æ¡¥ï¼Œå¿…é¡»å°† <code>net/bridge/bridge-nf-call-iptables</code> å‚æ•° sysctl è®¾ç½®ä¸º 1ï¼Œç½‘æ¡¥ä¸Šæ•°æ®åŒ…å°†éå† Iptables è§„åˆ™ã€‚å¦‚æœæ’ä»¶ä¸ä½¿ç”¨ Linux æ¡¥æ¥å™¨ ( è€Œæ˜¯ç±»ä¼¼ <code>Open vSwitch</code>æˆ–å…¶ä»–æŸç§æœºåˆ¶çš„æ’ä»¶)ï¼Œåˆ™åº”ç¡®ä¿å®¹å™¨æµé‡è¢«æ­£ç¡®è®¾ç½®äº†è·¯ç”±ã€‚</p><h3 id="cni-plugin" tabindex="-1"><a class="header-anchor" href="#cni-plugin" aria-hidden="true">#</a> CNI Plugin</h3><p><code>ContainerNetworking</code> ç»„ç»´æŠ¤äº†ä¸€äº› CNI æ’ä»¶ï¼ŒåŒ…æ‹¬ç½‘ç»œæ¥å£åˆ›å»ºçš„ bridgeã€ipvlanã€ loopbackã€macvlanã€ptpã€host-device ç­‰ï¼ŒIP åœ°å€åˆ†é…çš„ DHCPã€host-local å’Œ static,å…¶ä»–çš„ Flannelã€tunningã€portmapã€ firewall ç­‰ã€‚ ç¤¾åŒºè¿˜æœ‰äº›ç¬¬ä¸‰æ–¹ç½‘ç»œç­–ç•¥æ–¹é¢çš„æ’ä»¶ï¼Œä¾‹ å¦‚Calicoã€Cilium å’Œ Weave ç­‰ã€‚å¯ç”¨é€‰é¡¹çš„å¤šæ ·æ€§æ„å‘³ç€å¤§å¤šæ•°ç”¨æˆ·å°†èƒ½å¤Ÿæ‰¾åˆ°é€‚åˆå…¶å½“å‰éœ€æ±‚å’Œéƒ¨ç½²ç¯å¢ƒçš„ CNI æ’ä»¶ï¼Œå¹¶åœ¨æƒ…å†µå˜åŒ–æ—¶è¿…æ·è½¬æ¢è§£å†³æ–¹æ¡ˆã€‚</p><h3 id="flannel" tabindex="-1"><a class="header-anchor" href="#flannel" aria-hidden="true">#</a> Flannel</h3><p>Flannel æ˜¯ç”± CoreOS å¼€å‘çš„é¡¹ç›®ï¼Œæ˜¯ CNI æ’ä»¶æ—©æœŸçš„å…¥é—¨äº§å“ï¼Œç®€å•æ˜“ç”¨ã€‚ Flannel ä½¿ç”¨ Kubernetes é›†ç¾¤çš„ç°æœ‰ etcd é›†ç¾¤æ¥å­˜å‚¨å…¶çŠ¶æ€ä¿¡æ¯ï¼Œä»è€Œä¸å¿…æä¾›ä¸“ç”¨çš„æ•°æ®å­˜å‚¨ï¼Œåªéœ€è¦åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œ flanneld æ¥å®ˆæŠ¤è¿›ç¨‹ã€‚</p><p>æ¯ä¸ªèŠ‚ç‚¹éƒ½è¢«åˆ†é…ä¸€ä¸€ä¸ªå­ç½‘ï¼Œä¸ºè¯¥èŠ‚ç‚¹ä¸Šçš„ Pod åˆ†é… IP åœ°å€ã€‚ åŒä¸€ä¸»æœºå†…çš„ Pod å¯ä»¥ä½¿ç”¨ç½‘æ¡¥è¿›è¡Œé€šä¿¡ï¼Œè€Œä¸åŒä¸»æœºä¸Šçš„ Pod å°†é€šè¿‡ flanneld å°†å…¶æµé‡å°è£…åœ¨ UDP æ•°æ®åŒ…ä¸­ï¼Œä»¥è·¯ç”±åˆ°é€‚å½“çš„ç›®çš„åœ°ã€‚ å°è£…æ–¹å¼é»˜è®¤å’Œæ¨èçš„æ–¹æ³•æ˜¯ä½¿ç”¨ VxLAN,å› ä¸ºå®ƒå…·æœ‰è‰¯å¥½çš„æ€§èƒ½,å¹¶ä¸”æ¯”å…¶ä»–é€‰é¡¹è¦å°‘äº›äººä¸ºå¹²é¢„ã€‚è™½ç„¶ä½¿ç”¨VxLAN ä¹‹ç±»çš„æŠ€æœ¯å°è£…çš„è§£å†³æ–¹æ¡ˆæ•ˆæœå¾ˆå¥½ï¼Œä½†ç¼ºç‚¹å°±æ˜¯è¯¥è¿‡ç¨‹ä½¿æµé‡è·Ÿè¸ªå˜å¾—å›°éš¾ã€‚</p><p>åŒæ—¶ Flannel ä¸æ”¯æŒ network policyã€‚</p><p><img src="http://sm.nsddd.top/sm202303082217859.png" alt="img"></p><p>Flannel é€šè¿‡å°åŒ…è§£åŒ…æ–¹å¼å®ç°ã€‚</p><h3 id="calico" tabindex="-1"><a class="header-anchor" href="#calico" aria-hidden="true">#</a> Calico</h3><p>Calico ä»¥å…¶æ€§èƒ½ã€çµæ´»æ€§å’Œç½‘ç»œç­–ç•¥è€Œé—»åï¼Œä¸ä»…æ¶‰åŠåœ¨ä¸»æœºå’Œ Pod ä¹‹é—´æä¾›ç½‘ç»œè¿æ¥ï¼Œè€Œä¸”è¿˜æ¶‰åŠç½‘ç»œå®‰å…¨å’Œ ç­–ç•¥ç®¡ç†ã€‚</p><p>å¯¹äºåŒç½‘æ®µé€šä¿¡ï¼ŒåŸºäºç¬¬ 3 å±‚ï¼ŒCalico ä½¿ç”¨ BGP è·¯ç”±åè®®åœ¨ä¸»æœºä¹‹é—´è·¯ç”±æ•°æ®åŒ…ï¼Œä½¿ç”¨ BGP è·¯ç”±åè®®ä¹Ÿæ„å‘³ç€æ•°æ®åŒ…åœ¨ä¸»æœºä¹‹é—´ç§»åŠ¨æ—¶ä¸éœ€è¦åŒ…è£…åœ¨é¢å¤–çš„å°è£…å±‚ä¸­ã€‚</p><p>å¯¹äºè·¨ç½‘æ®µé€šä¿¡ï¼ŒåŸºäº IPinIP ä½¿ç”¨è™šæ‹Ÿç½‘å¡è®¾å¤‡ <code>tunl0</code>,ç”¨ä¸€ä¸ª IP æ•°æ®åŒ…å°è£…å¦ä¸€ä¸ª IP æ•°æ®åŒ…ï¼Œå¤–å±‚ IP æ•°æ®åŒ…å¤´çš„æºåœ°å€ä¸ºéš§é“å…¥å£è®¾å¤‡çš„ IP åœ°å€ï¼Œç›®æ ‡åœ°å€ä¸ºéš§é“å‡ºå£è®¾å¤‡çš„ IP åœ°å€ã€‚</p><p>ç½‘ç»œç­–ç•¥æ˜¯ Calico æœ€å—æ¬¢è¿çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œä½¿ç”¨ ACLS åè®®å’Œ <code>kube-proxy</code> æ¥åˆ›å»º <code>iptables</code> è¿‡æ»¤è§„åˆ™ï¼Œä»è€Œå®ç°éš”ç¦»å®¹å™¨ç½‘ç»œçš„ç›®çš„ã€‚</p><p>æ­¤å¤–ï¼ŒCalico è¿˜å¯ä»¥ä¸æœåŠ¡ç½‘æ ¼ Istio é›†æˆï¼Œåœ¨æœåŠ¡ç½‘æ ¼å±‚å’Œç½‘ç»œåŸºç¡€ç»“æ„å±‚ä¸Šè§£é‡Šå’Œå®æ–½é›†ç¾¤ä¸­å·¥ä½œè´Ÿè½½çš„ç­–ç•¥ã€‚è¿™æ„å‘³ç€å¯ä»¥é…ç½®åŠŸèƒ½å¼ºå¤§çš„è§„åˆ™ï¼Œä»¥æè¿° Pod åº”è¯¥å¦‚ä½•å‘é€å’Œæ¥æ”¶æµé‡ï¼Œæé«˜å®‰å…¨æ€§åŠåŠ å¼ºå¯¹ç½‘ç»œç¯å¢ƒçš„æ§åˆ¶ã€‚</p><p>Calico å±äºå®Œå…¨åˆ†å¸ƒå¼çš„æ¨ªå‘æ‰©å±•ç»“æ„ï¼Œå…è®¸å¼€å‘äººå‘˜å’Œç®¡ç†å‘˜å¿«é€Ÿå’Œå¹³ç¨³åœ°æ‰©å±•éƒ¨ç½²è§„æ¨¡ã€‚å¯¹äºæ€§èƒ½å’ŒåŠŸèƒ½(å¦‚ ç½‘ç»œç­–ç•¥)è¦æ±‚é«˜çš„ç¯å¢ƒï¼ŒCalico æ˜¯ä¸€ä¸ªä¸é”™é€‰æ‹©ã€‚</p><p><strong>Calico æœ‰ä¸¤ç§æ¨¡å¼ï¼š</strong></p><ul><li>å°åŒ…è§£åŒ…çš„éš§é“æ¨¡å¼</li><li>åŠ¨æ€è·¯ç”±æ¨¡å¼</li></ul><p><img src="http://sm.nsddd.top/sm202303082217415.png" alt="img"></p><h4 id="calico-è¿è¡Œæµç¨‹" tabindex="-1"><a class="header-anchor" href="#calico-è¿è¡Œæµç¨‹" aria-hidden="true">#</a> Calico è¿è¡Œæµç¨‹</h4><p>æ’ä»¶éƒ¨ç½²åä¼šå¯åŠ¨ DaemonSetï¼Œè¯¥ DaemonSet ä¼šæŠŠå­˜æ”¾é…ç½®æ–‡ä»¶(<code>/etc/cni/net.d</code>)å’ŒäºŒè¿›åˆ¶æ–‡ä»¶(<code>/opt/cni/bin</code>)çš„ç›®å½•æŒ‚è½½åˆ° Pod é‡Œå»ï¼ŒåæŠŠé•œåƒé‡Œçš„é…ç½®æ–‡ä»¶å’ŒäºŒè¿›åˆ¶æ–‡ä»¶å¤åˆ¶åˆ°å¯¹åº”ç›®å½•ã€‚</p><blockquote><p>DaemonSet ä¼šè¿è¡Œå†æ‰€æœ‰èŠ‚ç‚¹ä¸Šï¼Œæ‰€ä»¥æ·»åŠ æˆ–è€…åˆ é™¤èŠ‚ç‚¹æ—¶éƒ½å¯ä»¥å¤„ç†ã€‚</p></blockquote><h4 id="calico-vxlan" tabindex="-1"><a class="header-anchor" href="#calico-vxlan" aria-hidden="true">#</a> Calico VxLAN</h4><p><img src="http://sm.nsddd.top/sm202303091558883.png" alt="img"></p><p>Pod1 å’Œ Pod2 å¤„äºä¸åŒ Nodeï¼Œä¸”ä¸å±äºåŒä¸€ç½‘æ®µï¼Œæ— æ³•ç›´æ¥è·¯ç”±åˆ°è¾¾ã€‚</p><p>ç„¶åå®‰è£…äº† Calico ä¹‹åä¼šåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½æœ‰ä¸€ä¸ª <code>vxland</code> è¿›ç¨‹å’Œ <code>vxlan-calico</code> çš„ç½‘ç»œè®¾å¤‡ï¼ŒPod ä¸­çš„æ•°æ®é€šè¿‡ <code>vxlan-calico</code> è®¾å¤‡è½¬å‘åˆ° vxland è¿›ç¨‹ï¼Œè¿™ä¸ª vxland è¿›ç¨‹å°±ä¼šè¿›è¡Œå°åŒ…ï¼ŒæŠŠ Pod é‡Œå‘å‡ºæ¥çš„ç½‘ç»œåŒ…æ•´ä¸ªä½œä¸º payloadï¼Œç„¶åå†æ¬¡å¢åŠ  IP å¤´ï¼Œè¿™é‡Œæ·»åŠ çš„æºIPå°±æ˜¯å½“å‰èŠ‚ç‚¹çš„<code>IP+vxland</code> ç›‘å¬çš„ 4789 ç«¯å£ï¼Œç›®æ ‡IPå°±æ˜¯Pod2æ‰€åœ¨Nodeçš„IPï¼Œç„¶åè¿™ä¸ªåŒ…å°±èµ°å¤–éƒ¨èŠ‚ç‚¹çš„è·¯ç”±ä»master èŠ‚ç‚¹åˆ°äº† node èŠ‚ç‚¹ï¼Œç„¶å node èŠ‚ç‚¹çš„ vxland è¿›è¡Œè§£åŒ…ååˆé€šè¿‡<code>vxlan-calico</code> è®¾å¤‡è¿›å…¥åˆ° Pod2 é‡Œé¢ã€‚</p><blockquote><p>å®é™…å’Œ Flannel çš„åŸç†æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å°åŒ…è§£åŒ…</p></blockquote><h4 id="ipam-æ•°æ®å­˜å‚¨" tabindex="-1"><a class="header-anchor" href="#ipam-æ•°æ®å­˜å‚¨" aria-hidden="true">#</a> IPAM æ•°æ®å­˜å‚¨</h4><p>Calico é»˜è®¤ä½¿ç”¨çš„æ˜¯åœ¨é›†ç¾¤ä¸­åˆ›å»º crd æ–¹å¼æ¥å­˜å‚¨ã€‚</p><blockquote><p>å½“å‰ä¹Ÿå¯ä»¥é…ç½®å…¶ä»–å­˜å‚¨æ–¹å¼</p></blockquote><ul><li>IPPoolï¼šå®šä¹‰ä¸€ä¸ªé›†ç¾¤çš„é¢„å®šä¹‰çš„ IP æ®µ</li><li>IPAMBlockï¼šå®šä¹‰æ¯ä¸ªä¸»æœºé¢„åˆ†é…çš„ IP æ®µ</li><li>IPAMHandleï¼šç”¨æ¥è®°å½• IP åˆ†é…çš„å…·ä½“ç»†èŠ‚</li></ul><h3 id="calico-æ•°æ®æµè½¬æ¼”ç¤º" tabindex="-1"><a class="header-anchor" href="#calico-æ•°æ®æµè½¬æ¼”ç¤º" aria-hidden="true">#</a> Calico æ•°æ®æµè½¬æ¼”ç¤º</h3><h4 id="åŒä¸€èŠ‚ç‚¹é—´ä¸åŒ-pod" tabindex="-1"><a class="header-anchor" href="#åŒä¸€èŠ‚ç‚¹é—´ä¸åŒ-pod" aria-hidden="true">#</a> åŒä¸€èŠ‚ç‚¹é—´ä¸åŒ Pod</h4><p>é¦–å…ˆå¯åŠ¨ä¸€ä¸ªåŒ…å«å¤§é‡å·¥å…·çš„å®¹å™¨ï¼Œæ¯”å¦‚ centos</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>kubectl run <span class="token parameter variable">--images</span><span class="token operator">=</span>centos centos
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åè¿›å…¥è¯¥ Pod</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ k <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> centos-5fdd4bb694-7cgc8 <span class="token function">bash</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŸ¥çœ‹è¯¥ Pod çš„ IP å’Œè·¯ç”±ä¿¡æ¯</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ip</span> a
<span class="token number">1</span>: lo: <span class="token operator">&lt;</span>LOOPBACK,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="token number">1000</span>
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet <span class="token number">127.0</span>.0.1/8 scope <span class="token function">host</span> lo
       valid_lft forever preferred_lft forever
<span class="token number">3</span>: eth0@if48: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">1450</span> qdisc noqueue state UP group default
    link/ether <span class="token number">16</span>:4c:ec:e4:3a:d6 brd ff:ff:ff:ff:ff:ff link-netnsid <span class="token number">0</span>
    inet <span class="token number">192.168</span>.119.78/32 brd <span class="token number">192.168</span>.119.78 scope global eth0
       valid_lft forever preferred_lft forever

$ <span class="token function">ip</span> r
default via <span class="token number">169.254</span>.1.1 dev eth0
<span class="token number">169.254</span>.1.1 dev eth0 scope <span class="token function">link</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªé»˜è®¤è·¯ç”±ï¼Œæ‰€æœ‰æ•°æ®éƒ½è¦é€šè¿‡ eth0 å‘é€åˆ° 169.254.1.1 è¿™ä¸ªIPã€‚</p><p>ç„¶åä½¿ç”¨ arpping çœ‹ä¸€ä¸‹ 169.254.1.1 è¿™ä¸ª IP æ˜¯å“ªä¸ªè®¾å¤‡</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ arping <span class="token number">169.254</span>.1.1
ARPING <span class="token number">169.254</span>.1.1 from <span class="token number">192.168</span>.119.78 eth0
Unicast reply from <span class="token number">169.254</span>.1.1 <span class="token punctuation">[</span>EE:EE:EE:EE:EE:EE<span class="token punctuation">]</span>  <span class="token number">0</span>.579ms
Unicast reply from <span class="token number">169.254</span>.1.1 <span class="token punctuation">[</span>EE:EE:EE:EE:EE:EE<span class="token punctuation">]</span>  <span class="token number">0</span>.536ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‘ç°è¿™ä¸ª IP å¯¹åº”çš„ mac åœ°å€æ˜¯ EE:EE:EE:EE:EE:EE.</p><p>ç„¶åé€€å‡ºå®¹å™¨ï¼Œåˆ°ä¸»æœºä¸Šçœ‹ä¸€ä¸‹æœ‰æ²¡æœ‰ mac åœ°å€å…¨ä¸º e çš„è®¾å¤‡</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ip</span> a
<span class="token number">45</span>: calie3f1daf7d15@if3: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">1450</span> qdisc noqueue state UP group default
    link/ether ee:ee:ee:ee:ee:ee brd ff:ff:ff:ff:ff:ff link-netnsid <span class="token number">11</span>
    inet6 fe80::ecee:eeff:feee:eeee/64 scope <span class="token function">link</span>
       valid_lft forever preferred_lft forever
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‘ç°è¿˜çœŸæœ‰ï¼Œæ‰€æœ‰ä»¥ cali å¼€å¤´çš„è®¾å¤‡éƒ½æ˜¯è¿™ä¸ª mac åœ°å€ï¼Œè¿™äº›å®é™…æ˜¯ calico åˆ›å»ºçš„ veth pairï¼Œä¸€ç«¯åœ¨ Pod é‡Œï¼Œä¸€ç«¯åœ¨ä¸»æœºä¸Šã€‚</p><p>ç„¶åå†çœ‹ä¸€ä¸‹å®¿ä¸»æœºä¸Šçš„è·¯ç”±ä¿¡æ¯</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@agent-1 ~<span class="token punctuation">]</span><span class="token comment"># ip r</span>
default via <span class="token number">192.168</span>.10.1 dev eth0 
<span class="token number">169.254</span>.169.254 via <span class="token number">192.168</span>.10.3 dev eth0 proto static 
blackhole <span class="token number">172.25</span>.0.128/26 proto <span class="token number">80</span> 
<span class="token number">172.25</span>.0.131 dev cali1cc9705ed50 scope <span class="token function">link</span> 
<span class="token number">172.25</span>.0.132 dev cali9d0f51d41f9 scope <span class="token function">link</span> 
<span class="token number">172.25</span>.0.133 dev cali4dcdb8d77a9 scope <span class="token function">link</span> 
<span class="token number">172.25</span>.0.134 dev caliac318995356 scope <span class="token function">link</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‘ç°æœ‰å¥½å‡ ä¸ª IP çš„æµé‡éƒ½è¦è½¬ç»™ cali* è®¾å¤‡ï¼Œå®é™…ä¸Šè¿™äº›æµé‡å°±æ˜¯é€šè¿‡ veth pair åˆè¿›å…¥åˆ°äº†åˆ«çš„å®¹å™¨é‡Œäº†ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ Pod é‡Œ ping åˆ«çš„ Pod èƒ½é€šã€‚</p><blockquote><p>æµé‡åˆ°å®¿ä¸»æœºè½¬ä¸€åœˆåˆè¿›å…¥åˆ° Pod é‡Œäº†ã€‚</p></blockquote><h4 id="ä¸åŒèŠ‚ç‚¹ä¸Šçš„-pod" tabindex="-1"><a class="header-anchor" href="#ä¸åŒèŠ‚ç‚¹ä¸Šçš„-pod" aria-hidden="true">#</a> ä¸åŒèŠ‚ç‚¹ä¸Šçš„ Pod</h4><p>å…·ä½“èŠ‚ç‚¹åŠ IP ä¿¡æ¯å¦‚ä¸‹ï¼š</p><div class="language-apl ext-apl line-numbers-mode"><pre class="language-apl"><code>ipamblock<span class="token dfn builtin">:</span>
<span class="token number">10</span><span class="token function">-</span><span class="token number">233</span><span class="token function">-</span><span class="token number">90</span><span class="token function">-</span><span class="token number">0</span><span class="token function">-</span><span class="token number">24</span>
node1
cidr<span class="token dfn builtin">:</span> <span class="token number">10.233</span><span class="token number">.90</span><span class="token number">.0</span><span class="token monadic-operator operator">/</span><span class="token number">24</span>

ipamblock<span class="token dfn builtin">:</span>
<span class="token number">10</span><span class="token function">-</span><span class="token number">233</span><span class="token function">-</span><span class="token number">96</span><span class="token function">-</span><span class="token number">0</span><span class="token function">-</span><span class="token number">24</span>
node<span class="token dfn builtin">:</span> node2
cidr<span class="token dfn builtin">:</span> <span class="token number">10.233</span><span class="token number">.96</span><span class="token number">.0</span><span class="token monadic-operator operator">/</span><span class="token number">24</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶å calico éƒ¨ç½²åä¼šèµ·ä¸€ä¸ªå«åš bird çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹çš„ä½œç”¨å°±æ˜¯åŒæ­¥ä¸åŒèŠ‚ç‚¹é—´çš„è·¯ç”±ä¿¡æ¯ã€‚</p><p>Pod çš„ç½‘ç»œå®é™…ä¸Šæ˜¯ä¸€ä¸ªç§æœ‰çš„ä¿¡æ¯ï¼Œå’Œç»„å®¿ä¸»æœºçš„ç½‘ç»œæ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œå…¶ä»–èŠ‚ç‚¹ä¹Ÿæ— æ³•æ„ŸçŸ¥å½“å‰èŠ‚ç‚¹ä¸Šçš„ Pod ç½‘æ®µï¼Œå› æ­¤éœ€è¦å€ŸåŠ© bird è¿™ä¸ªå·¥å…·æ¥è¿›è¡ŒåŒæ­¥ã€‚</p><p>å…·ä½“åŒæ­¥çš„ä¿¡æ¯å°±æ˜¯å°±æ˜¯å“ªä¸ª IP æ®µå’Œå“ªä¸ªå®¿ä¸»æœºçš„ IP æ˜¯ç»‘å®šå…³ç³»ã€‚æ¯”å¦‚ä¸‹é¢çš„è¦è®¿é—® 10.233.96.0/24 è¿™ä¸ªIP æ®µå°±è¦è½¬å‘åˆ° 192.168.34.11ï¼Œè¦è®¿é—® 10.233.90.0/24 è¿™ä¸ª IP æ®µå°±éœ€è¦è½¬å‘åˆ° 192.168.34.10ã€‚</p><p>å› æ­¤åœ¨ node1 ä¸Šå°±ä¼šå‡ºç°è¿™ä¹ˆä¸€æ¡æŒ‡å‘ node2 çš„è·¯ç”±ä¿¡æ¯</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>10.233.96.0/24 via 192.168.34.11 dev tunl0 proto bird onlink
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åŒæ ·çš„ node2 ä¸Šä¹Ÿæœ‰åˆ° node1 çš„è·¯ç”±ä¿¡æ¯</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>10.233.90.0/24 via 192.168.34.10 dev tunl0 proto bird onlink
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™æ ·å½¼æ­¤å°±å¯ä»¥è¿›è¡Œé€šä¿¡äº†ã€‚</p><p>å…·ä½“ bird ç›¸å…³ä¿¡æ¯å¯ä»¥é€šè¿‡ calico daemonset ä¸­è¿›è¡ŒæŸ¥çœ‹ï¼š</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ k get po <span class="token parameter variable">-n</span> calico-system calico-node-xk4kn <span class="token parameter variable">-oyaml</span>
    - name: CALICO_NETWORKING_BACKEND
      value: bird
    name: calico-node
    readinessProbe:
      exec:
        command:
        - /bin/calico-node
        - -bird-ready
        - -felix-ready
      failureThreshold: <span class="token number">3</span>
      periodSeconds: <span class="token number">10</span>
      successThreshold: <span class="token number">1</span>
      timeoutSeconds: <span class="token number">5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å®¿ä¸»æœºä¸ŠæŸ¥çœ‹ bird è¿›ç¨‹</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">ps</span> -ef<span class="token operator">|</span><span class="token function">grep</span> bird
root        <span class="token number">2433</span>    <span class="token number">2386</span>  <span class="token number">0</span> <span class="token number">10</span>:58 ?        00:00:00 runsv bird
root        <span class="token number">2435</span>    <span class="token number">2386</span>  <span class="token number">0</span> <span class="token number">10</span>:58 ?        00:00:00 runsv bird6
root        <span class="token number">2505</span>    <span class="token number">2469</span>  <span class="token number">0</span> <span class="token number">10</span>:58 ?        00:00:00 svlogd <span class="token parameter variable">-ttt</span> /var/log/calico/bird6
root        <span class="token number">2516</span>    <span class="token number">2510</span>  <span class="token number">0</span> <span class="token number">10</span>:58 ?        00:00:00 svlogd <span class="token parameter variable">-ttt</span> /var/log/calico/bird
root        <span class="token number">3662</span>    <span class="token number">2433</span>  <span class="token number">0</span> <span class="token number">10</span>:58 ?        00:00:00 bird <span class="token parameter variable">-R</span> <span class="token parameter variable">-s</span> /var/run/calico/bird.ctl <span class="token parameter variable">-d</span> <span class="token parameter variable">-c</span> /etc/calico/confd/config/bird.cfg
root        <span class="token number">3664</span>    <span class="token number">2435</span>  <span class="token number">0</span> <span class="token number">10</span>:58 ?        00:00:00 bird6 <span class="token parameter variable">-R</span> <span class="token parameter variable">-s</span> /var/run/calico/bird6.ctl <span class="token parameter variable">-d</span> <span class="token parameter variable">-c</span> /etc/calico/confd/config/bird6.cfg
root        <span class="token number">9167</span>    <span class="token number">5788</span>  <span class="token number">0</span> <span class="token number">11</span>:05 pts/0    00:00:00 <span class="token function">grep</span> <span class="token parameter variable">--color</span><span class="token operator">=</span>auto bird
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿›å…¥ Pod æŸ¥çœ‹ bird é…ç½®æ–‡ä»¶</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ k <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> calico-node-7hmbt <span class="token parameter variable">-n</span> calico-system <span class="token function">cat</span> /etc/calico/confd/config/bird.cfg

router <span class="token function">id</span> <span class="token number">192.168</span>.34.2<span class="token punctuation">;</span>

protocol direct <span class="token punctuation">{</span>
  debug <span class="token punctuation">{</span> states <span class="token punctuation">}</span><span class="token punctuation">;</span>
  interface -<span class="token string">&quot;cali*&quot;</span>, -<span class="token string">&quot;kube-ipvs*&quot;</span>, <span class="token string">&quot;*&quot;</span><span class="token punctuation">;</span> <span class="token comment"># Exclude cali* and kube-ipvs* but</span>
                                          <span class="token comment"># include everything else.  In</span>
                                          <span class="token comment"># IPVS-mode, kube-proxy creates a</span>
                                          <span class="token comment"># kube-ipvs0 interface. We exclude</span>
                                          <span class="token comment"># kube-ipvs0 because this interface</span>
                                          <span class="token comment"># gets an address for every in use</span>
                                          <span class="token comment"># cluster IP. We use static routes</span>
                                          <span class="token comment"># for when we legitimately want to</span>
                                          <span class="token comment"># export cluster IPs.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹åº”çš„ iptables è§„åˆ™ï¼š</p><p>iptables-save, masq all traffic to outside</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>-A cali-nat-outgoing -m comment --comment &quot;cali:flqWnvo8yq4ULQLa&quot; -m set --match-set cali40masq-ipam-pools src -m set ! --match-set cali40all-ipam-pools dst -j MASQUERADE --random-fully
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="cni-plugin-çš„å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#cni-plugin-çš„å¯¹æ¯”" aria-hidden="true">#</a> CNI Plugin çš„å¯¹æ¯”</h3><blockquote><p>å¦‚æœæ˜¯ä¸Šç”Ÿäº§çš„è¯ï¼Œä¸€èˆ¬æ˜¯è€ƒè™‘ calico æˆ–è€… Ciliumï¼ŒFlannel ç°åœ¨éƒ½ä¸ç»´æŠ¤äº†ã€‚</p></blockquote><table><thead><tr><th>è§£å†³æ–¹æ¡ˆ</th><th>æ˜¯å¦æ”¯æŒç½‘ç»œç­–ç•¥</th><th>æ˜¯å¦æ”¯æŒ ipv6</th><th>åŸºäºç½‘ç»œå±‚çº§</th><th>éƒ¨ç½²æ–¹å¼</th><th>å‘½ä»¤è¡Œ</th></tr></thead><tbody><tr><td>Calico</td><td>æ˜¯</td><td>æ˜¯</td><td>L3(IPinIP,BGP)</td><td>DaemonSet</td><td>calicoctl</td></tr><tr><td>Cilium</td><td>æ˜¯</td><td>æ˜¯</td><td>L3 / L4+L7(filtering)</td><td>DaemonSet</td><td>cilium</td></tr><tr><td>Contiv</td><td>å¦</td><td>æ˜¯</td><td>L2(VxLAN) / L3(BGP)</td><td>DaemonSet</td><td>æ— </td></tr><tr><td>Flannel</td><td>å¦</td><td>å¦</td><td>L2(VxLAN)</td><td>DaemonSet</td><td>æ— </td></tr><tr><td>Weave net</td><td>æ˜¯</td><td>æ˜¯</td><td>L2(VxLAN)</td><td>DaemonSet</td><td>æ— </td></tr></tbody></table><h3 id="å‚è€ƒæ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£" aria-hidden="true">#</a> å‚è€ƒæ–‡æ¡£</h3><p><a href="https://www.cnblogs.com/varden/p/15140293.html" target="_blank" rel="noopener noreferrer">ã€K8sæ¦‚å¿µã€‘ç†è§£å®¹å™¨ç½‘ç»œæ¥å£ CNI å’Œ CNI æ’ä»¶<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="http://www.javashuo.com/article/p-ezbzsjlc-vd.html" target="_blank" rel="noopener noreferrer">ã€å¹²è´§åˆ†äº«ã€‘Kuberneteså®¹å™¨ç½‘ç»œä¹‹CNIæ¼«è°ˆ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://zhuanlan.zhihu.com/p/450140876" target="_blank" rel="noopener noreferrer">K8s ç½‘ç»œä¹‹æ·±å…¥ç†è§£ CNI<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="csi" tabindex="-1"><a class="header-anchor" href="#csi" aria-hidden="true">#</a> CSI</h2><p>Kubernetes CSIï¼ˆContainer Storage Interfaceï¼‰æ˜¯é’ˆå¯¹å®¹å™¨åŒ–ç¯å¢ƒè®¾è®¡çš„å­˜å‚¨æ¥å£ï¼Œç”¨äºå°†æŒä¹…åŒ–å­˜å‚¨ç³»ç»Ÿé›†æˆåˆ° Kubernetes é›†ç¾¤ä¸­ã€‚è¯¥æ¥å£çš„ç›®çš„æ˜¯æé«˜å­˜å‚¨ç³»ç»Ÿçš„å¯æ’æ‹”æ€§å’Œå¯ç§»æ¤æ€§ï¼ŒåŒæ—¶ç®€åŒ–äº†å­˜å‚¨ç³»ç»Ÿçš„ç®¡ç†ã€‚</p><p>Kubernetesæ”¯æŒä»¥æ’ä»¶çš„å½¢å¼æ¥å®ç°å¯¹ä¸åŒå­˜å‚¨çš„æ”¯æŒå’Œæ‰©å±•ï¼Œè¿™äº›æ‰©å±•åŸºäºå¦‚ä¸‹ä¸‰ç§æ–¹å¼ï¼š</p><ul><li>FlexVolume</li><li>in-tree volume plugins</li><li>CSI</li></ul><p>å…¶ä¸­ CSI æ˜¯ä¸€ç§æ ‡å‡†åŒ–çš„å­˜å‚¨æ¥å£ï¼Œå…è®¸ Kubernetes ä¸å„ç§å­˜å‚¨åç«¯äº¤äº’ã€‚CSI æé«˜äº†å­˜å‚¨ç³»ç»Ÿçš„å¯æ’æ‹”æ€§å’Œå¯ç§»æ¤æ€§ï¼Œå¹¶ç®€åŒ–äº†å­˜å‚¨ç³»ç»Ÿçš„ç®¡ç†ã€‚é€šè¿‡äº†è§£ CSI çš„å·¥ä½œåŸç†å’Œä½¿ç”¨æ–¹æ³•ï¼Œå¯ä»¥æ›´å¥½åœ°åˆ©ç”¨ Kubernetes æä¾›çš„å­˜å‚¨åŠŸèƒ½ã€‚</p><h3 id="å®¹å™¨è¿è¡Œæ—¶å­˜å‚¨" tabindex="-1"><a class="header-anchor" href="#å®¹å™¨è¿è¡Œæ—¶å­˜å‚¨" aria-hidden="true">#</a> å®¹å™¨è¿è¡Œæ—¶å­˜å‚¨</h3><ul><li>é™¤å¤–æŒ‚å­˜å‚¨å·å¤–ï¼Œå®¹å™¨å¯åŠ¨åï¼Œè¿è¡Œæ—¶æ‰€éœ€æ–‡ä»¶ç³»ç»Ÿæ€§èƒ½ç›´æ¥å½±å“å®¹å™¨æ€§èƒ½;</li><li>æ—©æœŸçš„ Docker é‡‡ç”¨ Device Mapper ä½œä¸ºå®¹å™¨è¿è¡Œæ—¶å­˜å‚¨é©±åŠ¨ï¼Œå› ä¸º OverlayFS å°šæœªåˆå¹¶è¿› Kernel;</li><li>ç›®å‰ Docker å’Œ containerd éƒ½é»˜è®¤ä»¥ <code>OverlayFS</code> ä½œä¸ºè¿è¡Œæ—¶å­˜å‚¨é©±åŠ¨;</li><li>OverlayFS ç›®å‰å·²ç»æœ‰éå¸¸å¥½çš„æ€§èƒ½ï¼Œä¸ DeviceMapper ç›¸æ¯”ä¼˜ 20%ï¼Œä¸æ“ä½œä¸»æœºæ–‡ä»¶æ€§èƒ½å‡ ä¹ä¸€è‡´ã€‚</li></ul><blockquote><p>æ³¨æ„è¿™æ˜¯è¿è¡Œæ—¶å­˜å‚¨ï¼Œæ˜¯ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œè¿™ä¸ªç”¨ä½œæ‹‰å–è¿è¡Œæ—¶å°±å¥½äº†ï¼Œä¸å»ºè®®å†™ä»»ä½•ä¸œè¥¿æˆ–è€…æ—¥å¿—ï¼Œè¿™æ ·ä¼šå½±å“æ•ˆç‡ã€‚</p></blockquote><p><img src="http://sm.nsddd.top/sm202303082238763.png" alt="img"></p><h3 id="å­˜å‚¨å·æ’ä»¶ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#å­˜å‚¨å·æ’ä»¶ç®¡ç†" aria-hidden="true">#</a> å­˜å‚¨å·æ’ä»¶ç®¡ç†</h3><p>Kubernetesæ”¯æŒä»¥æ’ä»¶çš„å½¢å¼æ¥å®ç°å¯¹ä¸åŒå­˜å‚¨çš„æ”¯æŒå’Œæ‰©å±•ï¼Œè¿™äº›æ‰©å±•åŸºäºå¦‚ä¸‹ä¸‰ç§æ–¹å¼:</p><ul><li><p><code>in-tree</code> æ’ä»¶ï¼šç›´æ¥ä¸‹è½½ k8s ä»“åº“ä¸­çš„æ’ä»¶ï¼Œå½“å‰ k8s ç¤¾åŒºå·²ç»ä¸åœ¨æ¥å—æ–°çš„ <code>in-tree</code> å­˜å‚¨æ’ä»¶äº†ï¼Œå¿…é¡»ä»¥ out-of-tree æ’ä»¶æ–¹å¼æ”¯æŒ</p></li><li><p><code>out-of-tree FlexVolume</code> æ’ä»¶ï¼šè¿™ä¸ªæ¨¡å¼ä¹Ÿé€æ¸å–æ¶ˆäº†</p><ul><li><code>FlexVolume</code> æ˜¯æŒ‡ Kubernetes é€šè¿‡è°ƒç”¨è®¡ç®—èŠ‚ç‚¹çš„æœ¬åœ°å¯æ‰§è¡Œæ–‡ä»¶ä¸å­˜å‚¨æ’ä»¶è¿›è¡Œäº¤äº’</li><li><code>FlexVolume</code> æ’ä»¶éœ€è¦å®¿ä¸»æœºç”¨ root æƒé™æ¥å®‰è£…æ’ä»¶é©±åŠ¨</li><li><code>FlexVolume</code> å­˜å‚¨é©±åŠ¨éœ€è¦å®¿ä¸»æœºå®‰è£… attachã€mount ç­‰å·¥å…·ï¼Œä¹Ÿéœ€è¦å…·æœ‰ root è®¿é—®æƒé™ã€‚</li></ul></li><li><p><code>out-of-tree CSI</code> æ’ä»¶ï¼šCSI æ’ä»¶é€šè¿‡ RPC ä¸å­˜å‚¨é©±åŠ¨äº¤äº’ï¼Œå½“å‰ä¸»æµçš„æ’ä»¶å½¢å¼ã€‚</p></li></ul><blockquote><p>æ€è€ƒï¼šCNI æ’ä»¶æ˜¯å¦ä¹Ÿå¯ä»¥æ”¹æˆè¿™ç§è°ƒç”¨æ–¹å¼ï¼Ÿ</p><p>Kubernetes CSI æ˜¯ä¸“é—¨ä¸ºå®¹å™¨åŒ–ç¯å¢ƒè®¾è®¡çš„å­˜å‚¨æ¥å£å…è®¸ Kubernetes ä¸å„ç§å­˜å‚¨åç«¯äº¤äº’ã€‚CNI æ’ä»¶ï¼ˆContainer Network Interfaceï¼‰ä¹Ÿæ˜¯ Kubernetes çš„æ’ä»¶ä¹‹ä¸€ï¼Œä½†æ˜¯å®ƒä¸ CSI çš„åŠŸèƒ½å’Œä½œç”¨æ˜¯ä¸åŒçš„ã€‚CNI æ’ä»¶ç”¨äºå°†ç½‘ç»œæ’ä»¶é›†æˆåˆ° Kubernetes ä¸­ï¼Œç”¨äºä¸ºå®¹å™¨æä¾›ç½‘ç»œæœåŠ¡ï¼Œè€Œ CSI æ’ä»¶åˆ™ç”¨äºå°†æŒä¹…åŒ–å­˜å‚¨ç³»ç»Ÿé›†æˆåˆ° Kubernetes é›†ç¾¤ä¸­ï¼Œç”¨äºä¸ºå®¹å™¨æä¾›æŒä¹…åŒ–å­˜å‚¨æœåŠ¡ã€‚è™½ç„¶ CNI æ’ä»¶å’Œ CSI æ’ä»¶éƒ½æ˜¯æ’ä»¶æœºåˆ¶ï¼Œä½†å®ƒä»¬çš„è°ƒç”¨æ–¹å¼å’Œå®ç°æ–¹å¼æ˜¯ä¸åŒçš„ï¼Œå› æ­¤ä¸èƒ½å°† CNI æ’ä»¶æ”¹ä¸º CSI æ’ä»¶çš„è°ƒç”¨æ–¹å¼ã€‚</p></blockquote><h3 id="csi-æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#csi-æ’ä»¶" aria-hidden="true">#</a> CSI æ’ä»¶</h3><p>CSI é©±åŠ¨ç¨‹åºæ˜¯ CSI æ¥å£ä¸å­˜å‚¨åç«¯ä¹‹é—´çš„æ¡¥æ¢ã€‚å®ƒä»¬å…è®¸ Kubernetes ä¸å„ç§å­˜å‚¨åç«¯ï¼ˆå¦‚æœ¬åœ°å­˜å‚¨ã€ç½‘ç»œå­˜å‚¨ã€äº‘å­˜å‚¨ï¼‰äº¤äº’ï¼Œå¹¶ä¸”å¯ä»¥ä»¥æ’ä»¶æ–¹å¼åŠ è½½å’Œå¸è½½ã€‚</p><p>Kubernetes ç¤¾åŒºå·²ç»ä¸ºä¸€äº›å­˜å‚¨åç«¯ï¼ˆå¦‚ Cephã€NFS å’Œ AWS EBSï¼‰ç¼–å†™äº† CSI é©±åŠ¨ç¨‹åºï¼Œå¹¶ä¸”æ”¯æŒå…¶ä»–å­˜å‚¨åç«¯ç¼–å†™è‡ªå·±çš„ CSI é©±åŠ¨ç¨‹åºã€‚è¿™äº›é©±åŠ¨ç¨‹åºå…è®¸ Kubernetes ä¸å­˜å‚¨åç«¯äº¤äº’ï¼Œå¹¶å°†å­˜å‚¨åç«¯çš„åŠŸèƒ½æš´éœ²ç»™ Kubernetes ç”¨æˆ·ã€‚</p><p>åœ¨è®¾è®¡ CSI çš„æ—¶å€™ï¼Œ<strong>Kubernetes å¯¹ CSI å­˜å‚¨é©±åŠ¨çš„æ‰“åŒ…å’Œéƒ¨ç½²è¦æ±‚å¾ˆå°‘ï¼Œä¸»è¦å®šä¹‰äº† Kubernetes çš„ä¸¤ä¸ªç›¸å…³ æ¨¡å—ï¼š</strong></p><ul><li>kube-controller-manager : <ul><li>kube-controller-manager æ¨¡å—ç”¨äºæ„ŸçŸ¥ CSI é©±åŠ¨å­˜åœ¨ã€‚</li><li>Kubernetes çš„ä¸»æ§æ¨¡å—é€šè¿‡ Unix domain socket (è€Œä¸æ˜¯ CSI é©±åŠ¨)æˆ–è€…å…¶ä»–æ–¹å¼è¿›è¡Œç›´æ¥åœ°äº¤äº’ã€‚</li><li>Kubernetes çš„ä¸»æ§æ¨¡å—åªä¸ Kubernetes ç›¸å…³çš„ API è¿›è¡Œäº¤äº’ï¼Œå› æ­¤ CSI é©±åŠ¨è‹¥æœ‰ä¾èµ–äº Kubernetes API çš„æ“ä½œï¼Œä¾‹å¦‚å·çš„åˆ›å»º ã€å·çš„ attachã€ å·çš„å¿«ç…§ç­‰ï¼Œéœ€è¦åœ¨ CSI é©±åŠ¨é‡Œé¢é€šè¿‡ Kubernetes çš„ APIï¼Œæ¥è§¦å‘ç›¸å…³çš„ CSI æ“ä½œã€‚</li></ul></li><li>kubeletï¼š <ul><li>kubelet æ¨¡å—ç”¨äºä¸ CSI é©±åŠ¨è¿›è¡Œäº¤äº’ã€‚</li><li>kubelet é€šè¿‡ Unix domain socket å‘CSI é©±åŠ¨å‘èµ· CSI è°ƒç”¨(å¦‚ NodeStageVolumeã€NodePublishkubeleté€šè¿‡æ’ä»¶æ³¨å†Œæœºåˆ¶å‘ç°CSIé©±åŠ¨åŠç”¨äºå’ŒCSIé©±åŠ¨äº¤äº’çš„Unix Domain Socketã€‚Volumeç­‰)ï¼Œå†å‘èµ· mount å·å’Œ umount å·ã€‚</li><li>kubelet é€šè¿‡æ’ä»¶æ³¨å†Œæœºåˆ¶å‘ç° CSI é©±åŠ¨åŠç”¨äºå’Œ CSI é©±åŠ¨äº¤äº’çš„ Unix Domain Socketã€‚</li><li>æ‰€æœ‰éƒ¨ç½²åœ¨ Kubernetes é›†ç¾¤ä¸­çš„ CSI é©±åŠ¨éƒ½è¦é€šè¿‡ kubelet çš„æ’ä»¶æ³¨å†Œæœºåˆ¶æ¥æ³¨å†Œè‡ªå·±ã€‚</li></ul></li></ul><p><strong>ä½¿ç”¨CSIæ’ä»¶ï¼š</strong></p><p>è¦ä½¿ç”¨ CSIï¼Œéœ€è¦å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li>å®‰è£… CSI é©±åŠ¨ç¨‹åºï¼š å¯ä»¥ä»å­˜å‚¨åç«¯å‚å•†æˆ– Kubernetes ç¤¾åŒºä¸­è·å– CSI é©±åŠ¨ç¨‹åºï¼Œå¹¶å°†å…¶å®‰è£…åœ¨ Kubernetes é›†ç¾¤ä¸­ã€‚å®‰è£…è¿‡ç¨‹åŒ…æ‹¬å°† CSI é©±åŠ¨ç¨‹åºäºŒè¿›åˆ¶æ–‡ä»¶æ”¾åœ¨æ­£ç¡®çš„ä½ç½®ã€åˆ›å»º CSI é©±åŠ¨ç¨‹åºçš„ DaemonSet å’Œ ConfigMap ç­‰ã€‚</li><li>åˆ›å»º StorageClassï¼š StorageClass å®šä¹‰äº†å¦‚ä½•ä¸ºåŠ¨æ€å·åˆ†é…å­˜å‚¨ã€‚å¯ä»¥ä½¿ç”¨ kubectl å‘½ä»¤æˆ– YAML æ–‡ä»¶åˆ›å»º StorageClassã€‚åœ¨åˆ›å»º StorageClass æ—¶ï¼Œéœ€è¦æŒ‡å®šå­˜å‚¨åç«¯ã€å­˜å‚¨ç±»å‹ã€å·å¤§å°ç­‰å‚æ•°ã€‚</li><li>åˆ›å»º PersistentVolumeClaimï¼ˆPVCï¼‰ï¼š PVC æ˜¯è¯·æ±‚å®¹å™¨å·çš„å£°æ˜ã€‚å¯ä»¥ä½¿ç”¨ kubectl å‘½ä»¤æˆ– YAML æ–‡ä»¶åˆ›å»º PVCã€‚åœ¨åˆ›å»º PVC æ—¶ï¼Œéœ€è¦æŒ‡å®š StorageClassã€å·å¤§å°ã€è®¿é—®æ¨¡å¼ç­‰å‚æ•°ã€‚</li><li>ä½¿ç”¨ PVCï¼š å¯ä»¥å°† PVC é™„åŠ åˆ° Pod ä¸Šå¹¶åœ¨å…¶ä¸­å¼•ç”¨å®ƒã€‚åœ¨å®šä¹‰ Pod æ—¶ï¼Œéœ€è¦å°† PVC çš„åç§°æŒ‡å®šä¸º volumeMounts å’Œ volumes å­—æ®µä¸­çš„ä¸€éƒ¨åˆ†ã€‚</li></ol><h3 id="csi-é©±åŠ¨" tabindex="-1"><a class="header-anchor" href="#csi-é©±åŠ¨" aria-hidden="true">#</a> CSI é©±åŠ¨</h3><p>CSIçš„é©±åŠ¨ä¸€èˆ¬åŒ…å« external-attacherã€external-provisionerã€ external-resizerã€ external-snapshotterã€node-driver-registerã€ CSI driver ç­‰æ¨¡å—ï¼Œå¯ä»¥æ ¹æ®å®é™…çš„å­˜å‚¨ç±»å‹å’Œéœ€æ±‚è¿›è¡Œä¸åŒæ–¹å¼çš„éƒ¨ç½²ã€‚</p><table><thead><tr><th>æ¨¡å—</th><th>æè¿°</th></tr></thead><tbody><tr><td>external-attacher</td><td>ç”¨äºå°†å·²æœ‰çš„å­˜å‚¨å·é™„åŠ åˆ°èŠ‚ç‚¹ä¸Š</td></tr><tr><td>external-provisioner</td><td>ç”¨äºåœ¨å­˜å‚¨åç«¯åˆ›å»ºæ–°çš„å­˜å‚¨å·å¹¶å°†å…¶é™„åŠ åˆ°èŠ‚ç‚¹ä¸Š</td></tr><tr><td>external-resizer</td><td>ç”¨äºè°ƒæ•´å­˜å‚¨å·çš„å¤§å°</td></tr><tr><td>external-snapshotter</td><td>ç”¨äºä¸ºå­˜å‚¨å·åˆ›å»ºå¿«ç…§ï¼Œå¹¶åœ¨éœ€è¦æ—¶è¿˜åŸå®ƒä»¬</td></tr><tr><td>node-driver-register</td><td>ç”¨äºå°† CSI é©±åŠ¨ç¨‹åºæ³¨å†Œåˆ° Kubernetes èŠ‚ç‚¹ä¸Š</td></tr><tr><td>CSI driver</td><td>ç”¨äºå®ç° CSI æ¥å£å¹¶ä¸å­˜å‚¨åç«¯äº¤äº’</td></tr></tbody></table><p><img src="http://sm.nsddd.top/sm202303082239511.png" alt="img"></p><p><strong>hostPath å·</strong>æ˜¯ Kubernetes ä¸­æœ€ç®€å•å’Œæœ€å¸¸è§çš„ä¸€ç§å·ç±»å‹ï¼Œå®ƒå¯ä»¥å°†èŠ‚ç‚¹ä¸Šçš„ç›®å½•æˆ–æ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚hostPath å·éå¸¸é€‚åˆç”¨äº<strong>ä¸´æ—¶å­˜å‚¨</strong>ï¼Œå¦‚æ—¥å¿—æ–‡ä»¶ç­‰ã€‚ä½†æ˜¯ï¼Œç”±äº hostPath å·çš„ç”Ÿå‘½å‘¨æœŸä¸ Pod çš„ç”Ÿå‘½å‘¨æœŸå¯†åˆ‡ç›¸å…³ï¼Œå› æ­¤å®ƒå¹¶ä¸é€‚åˆç”¨äºæŒä¹…åŒ–å­˜å‚¨ã€‚å¦‚æœ Pod è¢«åˆ é™¤ï¼ŒhostPath å·ä¸­çš„æ•°æ®ä¸è¢«æ¸…ç†å°±ä¼šç•™åœ¨è¿™è¾¹ã€‚ã€‚</p><p><strong>emptyDir å·</strong>æ˜¯ Kubernetes ä¸­å¦ä¸€ç§ç®€å•çš„å·ç±»å‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªç©ºç›®å½•ï¼Œå¹¶åœ¨ Pod åˆ›å»ºæ—¶åˆ›å»ºã€‚<strong>emptyDir å·å¯ä»¥ç”¨äºåœ¨å®¹å™¨ä¹‹é—´å…±äº«æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç”¨äºå­˜å‚¨ä¸´æ—¶æ•°æ®ï¼Œå¦‚æ—¥å¿—æ–‡ä»¶ç­‰ã€‚ä¸ hostPath å·ä¸åŒï¼ŒemptyDir å·çš„ç”Ÿå‘½å‘¨æœŸä¸ Pod çš„ç”Ÿå‘½å‘¨æœŸç›¸åŒã€‚å½“ Pod è¢«åˆ é™¤æ—¶ï¼ŒemptyDir å·ä¸­çš„æ•°æ®ä¹Ÿä¼šè¢«åˆ é™¤ã€‚</strong></p><ul><li>åŠæŒä¹…åŒ–å­˜å‚¨å·ï¼ˆEmptyDirï¼‰ï¼šå­˜å‚¨åœ¨ Pod ç”Ÿå‘½å‘¨æœŸå†…çš„ä¸´æ—¶æ•°æ®å·ï¼Œç”¨äºå°†æ•°æ®å­˜å‚¨åœ¨å®¹å™¨ä¹‹é—´å…±äº«ï¼Œä½†åœ¨ Pod é‡æ–°å¯åŠ¨æ—¶ï¼Œæ•°æ®å°†è¢«æ¸…é™¤ã€‚</li><li>ä¸´æ—¶å­˜å‚¨å·ï¼šåœ¨ Pod ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶å°†è¢«åˆ é™¤çš„å­˜å‚¨å·ï¼Œé€šå¸¸ç”¨äºå­˜å‚¨ä¸´æ—¶æ•°æ®ï¼Œå¦‚æ—¥å¿—æ–‡ä»¶ã€‚è¿™ç§å·ä¸éœ€è¦æ‰‹åŠ¨æ¸…ç†ï¼Œå› ä¸ºå®ƒä»¬ä¼šéšç€ Pod çš„åˆ é™¤è€Œè‡ªåŠ¨æ¸…ç†ã€‚</li><li>æŒä¹…åŒ–å­˜å‚¨å·ï¼šå¯ä»¥åœ¨ Pod ä¹‹é—´å…±äº«çš„å­˜å‚¨å·ï¼Œå³ä½¿ Pod é‡æ–°å¯åŠ¨æˆ–é‡æ–°è°ƒåº¦ä¹Ÿå¯ä»¥ä¿ç•™æ•°æ®ã€‚ Kubernetes æ”¯æŒå¤šç§ç±»å‹çš„æŒä¹…åŒ–å­˜å‚¨å·ï¼Œå¦‚ NFSã€iSCSIã€HostPathã€AWS EBS ç­‰ã€‚</li></ul><blockquote><p>é™¤äº†è¿™ä¸‰ç§å­˜å‚¨å·å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡å®šä¹‰è‡ªå®šä¹‰å­˜å‚¨å·æ¥æ‰©å±• Kubernetes çš„å­˜å‚¨åŠŸèƒ½ã€‚è‡ªå®šä¹‰å­˜å‚¨å·å¯ä»¥é€šè¿‡ Kubernetes æ’ä»¶æˆ–å¤–éƒ¨å­˜å‚¨ç³»ç»Ÿæ¥å®ç°ã€‚</p></blockquote><p>åœ¨ä½¿ç”¨å­˜å‚¨å·æ—¶ï¼Œéœ€è¦åœ¨ Pod çš„ YAML é…ç½®æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªå·ï¼Œç„¶ååœ¨å®¹å™¨ä¸­ä½¿ç”¨ volumeMounts æ¥æŒ‚è½½è¿™äº›å·ã€‚è¿™æ ·ï¼Œå®¹å™¨å°±å¯ä»¥è®¿é—®å·ä¸­å­˜å‚¨çš„æ•°æ®ã€‚</p><p>å¦‚æœéœ€è¦ä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨å·æ¥å­˜å‚¨æ•°æ®ï¼Œè¿˜éœ€è¦åœ¨ Kubernetes é›†ç¾¤ä¸­è®¾ç½®å­˜å‚¨ç±»ã€‚å­˜å‚¨ç±»æ˜¯ç”¨äºå®šä¹‰å­˜å‚¨å·ç±»å‹çš„ Kubernetes èµ„æºï¼Œå®ƒå¯ä»¥å°† PVC æ˜ å°„åˆ°ç‰¹å®šçš„å­˜å‚¨å·ç±»å‹å’Œæä¾›å•†ã€‚</p><h3 id="ä¸´æ—¶å­˜å‚¨å·" tabindex="-1"><a class="header-anchor" href="#ä¸´æ—¶å­˜å‚¨å·" aria-hidden="true">#</a> ä¸´æ—¶å­˜å‚¨å·</h3><p>å¸¸è§çš„ä¸´æ—¶å­˜å‚¨ä¸»è¦å°±æ˜¯ emptyDir å·ã€‚</p><p>emptyDir æ˜¯ä¸€ç§ç»å¸¸è¢«ç”¨æˆ·ä½¿ç”¨çš„å·ç±»å‹ï¼Œé¡¾åæ€ä¹‰ï¼Œâ€œå·â€æœ€åˆæ˜¯ç©ºçš„ã€‚å½“ Pod ä»èŠ‚ç‚¹ä¸Šåˆ é™¤æ—¶ï¼ŒemptyDir å·ä¸­çš„æ•°æ®ä¹Ÿä¼šè¢«æ°¸ä¹…åˆ é™¤ã€‚ä½†å½“Podçš„å®¹å™¨å› ä¸ºæŸäº›åŸå› é€€å‡ºå†é‡å¯æ—¶ï¼ŒemptyDir å·å†…çš„æ•°æ®å¹¶ä¸ä¼šä¸¢å¤±ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒemptyDir å·å­˜å‚¨åœ¨æ”¯æŒè¯¥èŠ‚ç‚¹æ‰€ä½¿ç”¨çš„å­˜å‚¨ä»‹è´¨ä¸Šï¼Œå¯ä»¥æ˜¯æœ¬åœ°ç£ç›˜æˆ–ç½‘ç»œå­˜å‚¨ã€‚ emptyDir ä¹Ÿå¯ä»¥é€šè¿‡å°† <code>emptyDir.medium</code> å­—æ®µè®¾ç½®ä¸º&quot;Memory&quot; æ¥é€šçŸ¥ Kubernetes ä¸ºå®¹å™¨å®‰è£… <code>tmpfs</code>,æ­¤æ—¶æ•°æ®è¢«å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œé€Ÿåº¦ç›¸å¯¹äºæœ¬åœ°å­˜å‚¨å’Œç½‘ç»œå­˜å‚¨å¿«å¾ˆå¤šã€‚ä½†æ˜¯åœ¨èŠ‚ç‚¹é‡å¯çš„æ—¶å€™,å†…å­˜æ•°æ®ä¼šè¢«æ¸…é™¤;</p><p>è€Œå¦‚æœå­˜åœ¨ç£ç›˜ä¸Š,åˆ™é‡å¯åæ•°æ®ä¾ç„¶å­˜åœ¨ã€‚å¦å¤–ï¼Œä½¿ç”¨ tmpfs çš„å†…å­˜ä¹Ÿä¼šè®¡å…¥å®¹å™¨çš„ä½¿ç”¨å†…å­˜æ€»é‡ä¸­ï¼Œå—ç³»ç»Ÿçš„Cgroup é™åˆ¶ã€‚</p><p><strong>emptyDir è®¾è®¡çš„åˆè¡·ä¸»è¦æ˜¯ç»™åº”ç”¨å……å½“ç¼“å­˜ç©ºé—´ï¼Œæˆ–è€…å­˜å‚¨ä¸­é—´æ•°æ®ï¼Œç”¨äºå¿«é€Ÿæ¢å¤ã€‚</strong> ç„¶è€Œï¼Œè¿™å¹¶ä¸æ˜¯è¯´æ»¡è¶³ä»¥ä¸Šéœ€æ±‚çš„ç”¨æˆ·éƒ½è¢«æ¨èä½¿ç”¨ emptyDir,æˆ‘ä»¬è¦æ ¹æ®ç”¨æˆ·ä¸šåŠ¡çš„å®é™…ç‰¹ç‚¹æ¥åˆ¤æ–­æ˜¯å¦ä½¿ç”¨ emptyDirã€‚å› ä¸º emptyDir çš„ç©ºé—´ä½äºç³»ç»Ÿæ ¹ç›˜ï¼Œè¢«æ‰€æœ‰å®¹å™¨å…±äº«ï¼Œæ‰€ä»¥åœ¨ç£ç›˜çš„ä½¿ç”¨ç‡è¾ƒé«˜æ—¶ä¼šè§¦å‘ Pod çš„ eviction æ“ä½œï¼Œä»è€Œå½±å“ä¸šåŠ¡çš„ç¨³å®šã€‚</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>pod
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> test<span class="token punctuation">-</span>container
    <span class="token key atrule">image</span><span class="token punctuation">:</span> ubuntu
    <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>volume
      <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /data
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>volume
    <span class="token key atrule">emptyDir</span><span class="token punctuation">:</span>
      <span class="token key atrule">medium</span><span class="token punctuation">:</span> Memory
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åŠæŒä¹…åŒ–å­˜å‚¨" tabindex="-1"><a class="header-anchor" href="#åŠæŒä¹…åŒ–å­˜å‚¨" aria-hidden="true">#</a> åŠæŒä¹…åŒ–å­˜å‚¨</h3><p>å¸¸è§çš„åŠæŒä¹…åŒ–å­˜å‚¨ä¸»è¦æ˜¯ hostPath å·ã€‚<strong>hostPath å·èƒ½å°†ä¸»æœºèŠ‚ç‚¹æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶æˆ–ç›®å½•æŒ‚è½½åˆ°æŒ‡å®š Podä¸­ã€‚</strong></p><p>å¯¹æ™®é€šç”¨æˆ·è€Œè¨€ä¸€èˆ¬ä¸éœ€è¦è¿™æ ·çš„å·ï¼Œä½†æ˜¯å¯¹å¾ˆå¤šéœ€è¦è·å–èŠ‚ç‚¹ç³»ç»Ÿä¿¡æ¯çš„ Pod è€Œè¨€ï¼Œå´æ˜¯éå¸¸å¿…è¦çš„ã€‚ ä¾‹å¦‚ï¼ŒhostPath çš„ç”¨æ³•ä¸¾ä¾‹å¦‚ä¸‹:</p><ul><li>æŸä¸ª Pod éœ€è¦è·å–èŠ‚ç‚¹ä¸Šæ‰€æœ‰ Pod çš„ log, å¯ä»¥é€šè¿‡ hostPath è®¿é—®æ‰€æœ‰ Pod çš„ stdout è¾“å‡ºå­˜å‚¨ç›®å½•ï¼Œä¾‹å¦‚ <code>/var/log/pods</code> è·¯å¾„ã€‚</li><li>æŸä¸ª Pod éœ€è¦ç»Ÿè®¡ç³»ç»Ÿç›¸å…³çš„ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ hostPath è®¿é—®ç³»ç»Ÿçš„ <code>/proc</code> ç›®å½•ã€‚</li></ul><p>ä½¿ç”¨ hostPath çš„æ—¶å€™ï¼Œé™¤è®¾ç½®å¿…éœ€çš„ path å±æ€§å¤–ï¼Œç”¨æˆ·è¿˜å¯ä»¥æœ‰é€‰æ‹©æ€§åœ°ä¸º hostPath å·æŒ‡å®šç±»å‹,æ”¯æŒç±»å‹åŒ…å«ç›®å½•ã€å­—ç¬¦è®¾å¤‡ã€å—è®¾å¤‡ç­‰ã€‚</p><h4 id="hostpath-æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#hostpath-æ³¨æ„äº‹é¡¹" aria-hidden="true">#</a> hostpath æ³¨æ„äº‹é¡¹</h4><ul><li>ä½¿ç”¨åŒä¸€ä¸ªç›®å½•çš„ Pod å¯èƒ½ä¼šç”±äºè°ƒåº¦åˆ°ä¸åŒçš„èŠ‚ç‚¹ï¼Œå¯¼è‡´ç›®å½•ä¸­çš„å†…å®¹æœ‰æ‰€ä¸åŒã€‚</li><li>Kubernetes åœ¨è°ƒåº¦æ—¶æ— æ³•é¡¾åŠç”± hostPath ä½¿ç”¨çš„èµ„æºã€‚</li><li>Pod è¢«åˆ é™¤åï¼Œå¦‚æœæ²¡æœ‰ç‰¹åˆ«å¤„ç†ï¼Œé‚£ä¹ˆ hostPathä¸Šå†™çš„æ•°æ®ä¼šé—ç•™åˆ°èŠ‚ç‚¹ä¸Šï¼Œå ç”¨ç£ç›˜ç©ºé—´ã€‚</li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>pod
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> test<span class="token punctuation">-</span>container
    <span class="token key atrule">image</span><span class="token punctuation">:</span> ubuntu
    <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>volume
      <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /data
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>volume
    <span class="token key atrule">emptyDir</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æŒä¹…åŒ–å­˜å‚¨" tabindex="-1"><a class="header-anchor" href="#æŒä¹…åŒ–å­˜å‚¨" aria-hidden="true">#</a> æŒä¹…åŒ–å­˜å‚¨</h3><p>æ”¯æŒæŒä¹…åŒ–çš„å­˜å‚¨æ˜¯æ‰€æœ‰åˆ†å¸ƒå¼ç³»ç»Ÿæ‰€å¿…å¤‡çš„ç‰¹æ€§ã€‚</p><p>é’ˆå¯¹æŒä¹…åŒ–å­˜å‚¨ï¼Œ<code>Kubernetes</code> å¼•å…¥äº† <code>StorageClass</code>ã€<code>Volume</code>ã€ <code>PVC ( Persistent Volume Claim)</code>ã€<code>PV (Persitent Volume)</code>çš„æ¦‚å¿µï¼Œå°†å­˜å‚¨ç‹¬ç«‹äº Pod çš„ç”Ÿå‘½å‘¨æœŸæ¥è¿›è¡Œç®¡ç†ã€‚</p><p>Kuberntes ç›®å‰æ”¯æŒçš„æŒä¹…åŒ–å­˜å‚¨åŒ…å«å„ç§ä¸»æµçš„å—å­˜å‚¨å’Œæ–‡ä»¶å­˜å‚¨ï¼Œè­¬å¦‚ <code>awsElasticBlockStore</code>ã€<code>azureDisk</code>ã€<code>cinder</code>ã€ <code>NFS</code>ã€ <code>cephfs</code>ã€ <code>iscsi</code> ç­‰,åœ¨å¤§ç±»ä¸Šå¯ä»¥å°†å…¶åˆ†ä¸º<strong>ç½‘ç»œå­˜å‚¨</strong>å’Œ<strong>æœ¬åœ°å­˜å‚¨</strong>ä¸¤ç§ç±»å‹ã€‚</p><h4 id="storageclass" tabindex="-1"><a class="header-anchor" href="#storageclass" aria-hidden="true">#</a> StorageClass</h4><p>StorageClass ç”¨äºæŒ‡ç¤ºå­˜å‚¨çš„ç±»å‹ï¼Œä¸åŒçš„å­˜å‚¨ç±»å‹å¯ä»¥é€šè¿‡ä¸åŒçš„ StorageClass æ¥ä¸ºç”¨æˆ·æä¾›æœåŠ¡ã€‚</p><p>StorageClass ä¸»è¦åŒ…å«å­˜å‚¨æ’ä»¶ provisionerã€å·çš„åˆ›å»ºå’Œ mount å‚æ•°ç­‰å­—æ®µã€‚</p><h4 id="pvc" tabindex="-1"><a class="header-anchor" href="#pvc" aria-hidden="true">#</a> PVC</h4><p>ç”±ç”¨æˆ·åˆ›å»º,ä»£è¡¨ç”¨æˆ·å¯¹å­˜å‚¨éœ€æ±‚çš„å£°æ˜ï¼Œä¸»è¦åŒ…å«éœ€è¦çš„å­˜å‚¨å¤§å°ã€å­˜å‚¨å·çš„è®¿é—®æ¨¡å¼ã€StroageClass ç­‰ç±»å‹ï¼Œå…¶ä¸­å­˜å‚¨å·çš„è®¿é—®æ¨¡å¼å¿…é¡»ä¸å­˜å‚¨çš„ç±»å‹ä¸€è‡´ã€‚</p><ul><li>RWOï¼šReadWriteOnceï¼Œè¯¥å·åªèƒ½åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šè¢« mountï¼Œå±æ€§ä¸ºå¯è¯»å†™</li><li>ROXï¼šReadOnlyManyï¼Œè¯¥å·å¯ä»¥åœ¨ä¸åŒèŠ‚ç‚¹ä¸Šè¢« mountï¼Œå±æ€§ä¸ºå¯è¯»</li><li>RWXï¼šReadWriteManyï¼Œè¯¥å·å¯ä»¥åœ¨ä¸åŒèŠ‚ç‚¹ä¸Šè¢« mountï¼Œå±æ€§ä¸ºå¯è¯»å†™</li></ul><h4 id="pv" tabindex="-1"><a class="header-anchor" href="#pv" aria-hidden="true">#</a> PV</h4><p>ç”±é›†ç¾¤ç®¡ç†å‘˜æå‰åˆ›å»ºï¼Œæˆ–è€…æ ¹æ® PVC çš„ç”³è¯·éœ€æ±‚åŠ¨æ€åœ°åˆ›å»ºï¼Œå®ƒä»£è¡¨ç³»ç»Ÿåç«¯çš„çœŸå®çš„å­˜å‚¨ç©ºé—´ï¼Œå¯ä»¥ç§°ä¹‹ä¸ºå·ç©ºé—´ã€‚</p><blockquote><p>åœ¨ k8s ä¸­åˆ›å»ºä¸€ä¸ª pv æ¥ä»£è¡¨å¤–éƒ¨ç³»ç»Ÿçš„å­˜å‚¨ç©ºé—´ã€‚</p></blockquote><h4 id="å­˜å‚¨å¯¹è±¡å…³ç³»" tabindex="-1"><a class="header-anchor" href="#å­˜å‚¨å¯¹è±¡å…³ç³»" aria-hidden="true">#</a> å­˜å‚¨å¯¹è±¡å…³ç³»</h4><p><strong>ç”¨æˆ·é€šè¿‡åˆ›å»º PVC æ¥ç”³è¯·å­˜å‚¨ã€‚æ§åˆ¶å™¨é€šè¿‡ PVC çš„ StorageClass å’Œè¯·æ±‚çš„å¤§å°å£°æ˜æ¥å­˜å‚¨åç«¯åˆ›å»ºå·ï¼Œè¿›è€Œåˆ›å»º PV, Pod é€šè¿‡æŒ‡å®š PVC æ¥å¼•ç”¨å­˜å‚¨ã€‚</strong></p><p><img src="http://sm.nsddd.top/sm202303082240666.png" alt="img"></p><p>pod ä»€ä¹ˆéœ€è¦ä½¿ç”¨çš„ pvcï¼Œpvc å’Œ pv å…³è”ï¼Œpv å¯¹åº”åç«¯å­˜å‚¨ã€‚</p><blockquote><p>å…·ä½“éœ€è¦åˆ›å»ºå“ªä¸ªæ’ä»¶æ§åˆ¶çš„åç«¯å­˜å‚¨å°±æ˜¯ç”± pvc ä¸­æŒ‡å®šçš„ StorageClass æ¥æ§åˆ¶äº†ã€‚</p></blockquote><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>pod
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> test<span class="token punctuation">-</span>container
    <span class="token key atrule">image</span><span class="token punctuation">:</span> ubuntu
    <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>volume
      <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /data
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>volume
    <span class="token key atrule">persistentVolumeClaim</span><span class="token punctuation">:</span>
      <span class="token key atrule">claimName</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>pvc

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç”Ÿäº§å®è·µç»éªŒåˆ†äº«" tabindex="-1"><a class="header-anchor" href="#ç”Ÿäº§å®è·µç»éªŒåˆ†äº«" aria-hidden="true">#</a> ç”Ÿäº§å®è·µç»éªŒåˆ†äº«</h3><p>ä¸åŒä»‹è´¨ç±»å‹çš„ç£ç›˜ï¼Œéœ€è¦è®¾ç½®ä¸åŒçš„ StorageClassï¼Œä»¥ä¾¿è®©ç”¨æˆ·åšåŒºåˆ†ã€‚StorageClass éœ€è¦è®¾ç½®ç£ç›˜ä»‹è´¨çš„ç±»å‹ï¼Œä»¥ä¾¿ç”¨æˆ·äº†è§£è¯¥ç±»å­˜å‚¨çš„å±æ€§ã€‚</p><p>åœ¨æœ¬åœ°å­˜å‚¨çš„PVé™æ€éƒ¨ç½²æ¨¡å¼ä¸‹ï¼Œæ¯ä¸ªç‰©ç†ç£ç›˜éƒ½å°½é‡åªåˆ›å»ºä¸€ä¸ª PV,è€Œä¸æ˜¯åˆ’åˆ†ä¸ºå¤šä¸ªåˆ†åŒºæ¥æä¾›å¤šä¸ªæœ¬åœ°å­˜ å‚¨PV,é¿å…åœ¨ä½¿ç”¨æ—¶åˆ†åŒºä¹‹é—´çš„ I/O å¹²æ‰°ã€‚</p><p>æœ¬åœ°å­˜å‚¨éœ€è¦é…åˆç£ç›˜æ£€æµ‹æ¥ä½¿ç”¨ã€‚å½“é›†ç¾¤éƒ¨ç½²è§„æ¨¡åŒ–åï¼Œæ¯ä¸ªé›†ç¾¤çš„æœ¬åœ°å­˜å‚¨ PV å¯èƒ½ä¼šè¶…è¿‡å‡ ä¸‡ä¸ªï¼Œå¦‚ç£ç›˜æŸåå°†æ˜¯é¢‘å‘äº‹ä»¶ã€‚æ­¤æ—¶ï¼Œéœ€è¦åœ¨æ£€æµ‹åˆ°ç£ç›˜æŸåã€ä¸Ÿç›˜ç­‰é—®é¢˜åï¼Œå¯¹èŠ‚ç‚¹çš„ç£ç›˜å’Œç›¸åº”çš„æœ¬åœ°å­˜å‚¨ PV è¿›è¡Œç‰¹å®šçš„å¤„ç†,ä¾‹å¦‚è§¦å‘å‘Šè­¦ã€è‡ªåŠ¨ cordon èŠ‚ç‚¹ã€è‡ªåŠ¨é€šçŸ¥ç”¨æˆ·ç­‰ã€‚</p><p>å¯¹äºæä¾›æœ¬åœ°å­˜å‚¨èŠ‚ç‚¹çš„ç£ç›˜ç®¡ç†ï¼Œéœ€è¦åšåˆ°çµæ´»ç®¡ç†å’Œè‡ªåŠ¨åŒ–ã€‚èŠ‚ç‚¹ç£ç›˜çš„ä¿¡æ¯å¯ä»¥å½’ä¸€ã€é›†ä¸­åŒ–ç®¡ç†ã€‚åœ¨ local-volume- provisioner ä¸­å¢åŠ éƒ¨ç½²é€»è¾‘ï¼Œå½“å®¹å™¨è¿è¡Œèµ·æ¥æ—¶ï¼Œæ‹‰å–è¯¥èŠ‚ç‚¹éœ€è¦æä¾›æœ¬åœ°å­˜å‚¨çš„ç£ç›˜ä¿¡æ¯ï¼Œä¾‹å¦‚ç£ç›˜çš„è®¾å¤‡è·¯å¾„ï¼Œä»¥ Filesystem æˆ– Block çš„æ¨¡å¼æä¾›æœ¬åœ°å­˜å‚¨ï¼Œæˆ–è€…æ˜¯å¦éœ€è¦åŠ å…¥æŸä¸ª LVM çš„è™šæ‹Ÿç»„(VG)ç­‰ã€‚ local-volume-provisioner æ ¹æ®è·å–çš„ç£ç›˜ä¿¡æ¯å¯¹ç£ç›˜è¿›è¡Œæ ¼å¼åŒ–ï¼Œæˆ–è€…åŠ å…¥åˆ°æŸä¸ª VG,ä»è€Œå½¢æˆå¯¹æœ¬åœ°å­˜å‚¨æ”¯ æŒçš„è‡ªåŠ¨åŒ–é—­ç¯ã€‚</p><p><strong>å»ºè®®ï¼š</strong></p><ol><li>ä¸ºé¿å…æ•°æ®ä¸¢å¤±ï¼Œæ¨èä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨å·ã€‚åœ¨ä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨å·æ—¶ï¼Œåº”è€ƒè™‘å¤‡ä»½å’Œæ¢å¤ç­–ç•¥ï¼Œä»¥åŠå·çš„å¤§å°å’Œæ€§èƒ½è¦æ±‚ã€‚</li><li>é¿å…åœ¨ Pod ç”Ÿå‘½å‘¨æœŸå†…ä½¿ç”¨åŠæŒä¹…åŒ–å­˜å‚¨å·ï¼ˆEmptyDirï¼‰å­˜å‚¨é‡è¦æ•°æ®ã€‚å¦‚æœéœ€è¦åœ¨å®¹å™¨ä¹‹é—´å…±äº«æ•°æ®ï¼Œè¯·ä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨å·ã€‚</li><li>å¯¹äºéœ€è¦ä¸´æ—¶å­˜å‚¨æ•°æ®çš„åœºæ™¯ï¼Œå»ºè®®ä½¿ç”¨ä¸´æ—¶å­˜å‚¨å·ã€‚è¿™ç§å·ä¼šåœ¨ Pod ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶è‡ªåŠ¨æ¸…ç†ï¼Œæ— éœ€æ‰‹åŠ¨æ¸…ç†ã€‚</li><li>åœ¨ä½¿ç”¨å­˜å‚¨å·æ—¶ï¼Œè¯·ç¡®ä¿æ‚¨çš„å®¹å™¨æ˜ åƒå…·æœ‰å¿…è¦çš„æ–‡ä»¶ç³»ç»Ÿå’Œå·¥å…·ï¼Œä»¥ä¾¿è®¿é—®å·ä¸­çš„æ•°æ®ã€‚</li><li>å¦‚æœæ‚¨éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰å­˜å‚¨å·ï¼Œè¯·ç¡®ä¿æ’ä»¶æˆ–å¤–éƒ¨å­˜å‚¨ç³»ç»Ÿå·²æ­£ç¡®é…ç½®ã€‚</li><li>åœ¨å®šä¹‰å­˜å‚¨å·å’Œ PVC æ—¶ï¼Œè¯·ä½¿ç”¨æœ‰æ„ä¹‰çš„åç§°ï¼Œä»¥ä¾¿äºè¯†åˆ«å’Œç®¡ç†ã€‚</li><li>åœ¨è®¾ç½®å­˜å‚¨ç±»æ—¶ï¼Œè¯·è€ƒè™‘æ‚¨çš„åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œå¯é æ€§éœ€æ±‚ã€‚ä¸åŒçš„å­˜å‚¨ç±»å¯èƒ½å…·æœ‰ä¸åŒçš„æ€§èƒ½å’Œå¯é æ€§ç‰¹å¾ã€‚</li><li>åœ¨ä½¿ç”¨å­˜å‚¨å·æ—¶ï¼Œåº”éµå¾ª Kubernetes çš„æœ€ä½³å®è·µå’Œå®‰å…¨å‡†åˆ™ã€‚</li></ol><h3 id="ç‹¬å çš„-localvolume" tabindex="-1"><a class="header-anchor" href="#ç‹¬å çš„-localvolume" aria-hidden="true">#</a> ç‹¬å çš„ LocalVolume</h3><p>é™¤äº† Kubernetes æ”¯æŒçš„ä¸‰ç§å­˜å‚¨å·ç±»å‹å¤–ï¼Œ<strong>è¿˜å¯ä»¥ä½¿ç”¨ LocalVolume æ¥åˆ›å»ºç‹¬å çš„æœ¬åœ°å­˜å‚¨å·ã€‚</strong> LocalVolume æ˜¯ Kubernetes ä¸­çš„ä¸€ç§å­˜å‚¨ç±»å‹ï¼Œå®ƒå°† Pod ä¸æœ¬åœ°ç£ç›˜ä¸Šçš„ç›®å½•æˆ–è®¾å¤‡å…³è”èµ·æ¥ï¼Œä»¥æä¾›ç‹¬å çš„å­˜å‚¨ç©ºé—´ã€‚LocalVolume é€‚ç”¨äºéœ€è¦æœ¬åœ°ç£ç›˜è®¿é—®çš„åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚æ•°æ®åº“æˆ–æ–‡ä»¶æœåŠ¡å™¨ã€‚</p><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ LocalVolume çš„ç¤ºä¾‹ YAML é…ç½®ï¼š</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>pod
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> test<span class="token punctuation">-</span>container
    <span class="token key atrule">image</span><span class="token punctuation">:</span> ubuntu
    <span class="token key atrule">volumeMounts</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>volume
      <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /data
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>volume
    <span class="token key atrule">local</span><span class="token punctuation">:</span>
      <span class="token key atrule">path</span><span class="token punctuation">:</span> /mnt/disks/data
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°† Pod ä¸è·¯å¾„ <code>/mnt/disks/data</code> ä¸Šçš„æœ¬åœ°ç£ç›˜ç›®å½•å…³è”èµ·æ¥ï¼Œä»¥æä¾›ç‹¬å çš„å­˜å‚¨ç©ºé—´ã€‚æˆ‘ä»¬ä½¿ç”¨ local ç±»å‹æŒ‡å®šå·ç±»å‹ï¼Œå¹¶å°†è·¯å¾„æŒ‡å®šä¸º path å­—æ®µçš„å€¼ã€‚</p><p>ä¸å…¶ä»–å­˜å‚¨å·ç±»å‹ä¸åŒï¼ŒLocalVolume ä¸èƒ½è¢«å¤šä¸ª Pod å…±äº«ã€‚è¿™æ˜¯å› ä¸ºæœ¬åœ°ç£ç›˜ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿå’Œæ•°æ®åªèƒ½è¢«ä¸€ä¸ª Pod è®¿é—®ã€‚å¦‚æœéœ€è¦åœ¨å¤šä¸ª Pod ä¹‹é—´å…±äº«æ•°æ®ï¼Œåº”è¯¥ä½¿ç”¨å…¶ä»–ç±»å‹çš„å­˜å‚¨å·ï¼Œä¾‹å¦‚ NFS æˆ– iSCSIã€‚</p><ul><li><strong>åˆ›å»º PV</strong>ï¼šé€šè¿‡ <code>local-volume-provisioner DaemonSet</code> åˆ›å»ºæœ¬åœ°å­˜å‚¨çš„ PVã€‚</li><li><strong>åˆ›å»º PVC</strong>ï¼šç”¨æˆ·åˆ›å»º PVC,ç”±äºå®ƒå¤„äº pending çŠ¶æ€ï¼Œæ‰€ä»¥kube-controller-manager å¹¶ä¸ä¼šå¯¹è¯¥ PVC åšä»»ä½•æ“ä½œã€‚</li><li><strong>åˆ›å»ºPod</strong>ï¼šç”¨æˆ·åˆ›å»ºPodã€‚</li><li><strong>Pod æŒ‘é€‰èŠ‚ç‚¹</strong>ï¼škube-scheduler å¼€å§‹è°ƒåº¦ Podï¼Œé€šè¿‡ PVC çš„ <code>resources.request.storage</code> å’Œ volumeMode é€‰æ‹©æ»¡è¶³æ¡ä»¶çš„ PV,å¹¶ä¸”ä¸º Pod é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„èŠ‚ç‚¹ã€‚</li><li><strong>æ›´æ–°PV</strong>ï¼škube-scheduler å°† PV çš„ <code>pv.Spec.claimRef</code> è®¾ç½®ä¸ºå¯¹åº”çš„ PVC,å¹¶ä¸”è®¾ç½® <code>annotation pv.kubernetes.io/ bound-by-controller</code> çš„å€¼ä¸º &quot;yes&quot; ã€‚</li><li><strong>PVC å’Œ PVç»‘å®š</strong>ï¼š<code>pv_controller</code> åŒæ­¥ PVC å’Œ PV çš„çŠ¶æ€ï¼Œå¹¶å°† PVC å’Œ PV è¿›è¡Œç»‘å®šã€‚</li><li><strong>ç›‘å¬PVCå¯¹è±¡</strong>ï¼škube-scheduler ç­‰å¾… PVC çš„çŠ¶æ€å˜æˆ Bound çŠ¶æ€ã€‚</li><li><strong>Podè°ƒåº¦åˆ°èŠ‚ç‚¹</strong>ï¼šå¦‚æœ PVC çš„çŠ¶æ€å˜ä¸º Bound åˆ™è¯´æ˜è°ƒåº¦æˆåŠŸï¼Œè€Œå¦‚æœ PVC ä¸€ç›´å¤„äº pending çŠ¶æ€ï¼Œè¶…æ—¶åä¼šå†æ¬¡è¿›è¡Œè°ƒåº¦ã€‚</li><li><strong>Mount å·å¯åŠ¨å®¹å™¨</strong>ï¼škubelet ç›‘å¬åˆ°æœ‰ Pod å·²ç»è°ƒåº¦åˆ°èŠ‚ç‚¹ä¸Šï¼Œå¯¹æœ¬åœ°å­˜å‚¨è¿›è¡Œ mount æ“ä½œï¼Œå¹¶å¯åŠ¨å®¹å™¨ã€‚</li></ul><p><img src="http://sm.nsddd.top/sm202303082240376.png" alt="img"></p><h3 id="dynamic-local-volume" tabindex="-1"><a class="header-anchor" href="#dynamic-local-volume" aria-hidden="true">#</a> Dynamic Local Volume</h3><p>Dynamic Local Volume æ˜¯ Kubernetes ä¸­çš„ä¸€ç§å­˜å‚¨å·ç±»å‹ï¼Œå®ƒå¯ä»¥åŠ¨æ€åœ°åˆ›å»ºå’Œåˆ é™¤æœ¬åœ°å­˜å‚¨å·ï¼Œä»¥æä¾›ç‹¬å çš„å­˜å‚¨ç©ºé—´ã€‚ä¸å…¶ä»–ç±»å‹çš„å­˜å‚¨å·ä¸åŒï¼ŒDynamic Local Volume ä¸éœ€è¦æå‰æ‰‹åŠ¨åˆ›å»ºæœ¬åœ°å­˜å‚¨å·ï¼Œè€Œæ˜¯åœ¨ Pod åˆ›å»ºæ—¶åŠ¨æ€åœ°åˆ›å»ºæœ¬åœ°å­˜å‚¨å·ã€‚è¿™ä½¿å¾—åœ¨ Kubernetes é›†ç¾¤ä¸­ä½¿ç”¨æœ¬åœ°å­˜å‚¨å·æ›´åŠ çµæ´»å’Œæ–¹ä¾¿ã€‚</p><p>Dynamic Local Volume å¯ä»¥é€šè¿‡ Kubernetes æ’ä»¶æˆ–æœ¬åœ°å­˜å‚¨ç³»ç»Ÿæ¥å®ç°ã€‚åœ¨ä½¿ç”¨ Dynamic Local Volume ä¹‹å‰ï¼Œéœ€è¦å…ˆåœ¨ Kubernetes é›†ç¾¤ä¸­è®¾ç½® LocalVolumeDiscovery æ’ä»¶ã€‚LocalVolumeDiscovery æ’ä»¶ç”¨äºè‡ªåŠ¨å‘ç°å¹¶åˆ›å»ºæœ¬åœ°å­˜å‚¨å·ï¼Œä»¥ä¾¿å°†å…¶ä¸ Pod å…³è”èµ·æ¥ã€‚</p><p>CSI é©±åŠ¨éœ€è¦æ±‡æŠ¥èŠ‚ç‚¹ä¸Šç›¸å…³å­˜å‚¨çš„èµ„æºä¿¡æ¯ï¼Œä»¥ä¾¿ç”¨äºè°ƒåº¦</p><p>ä½†æ˜¯æœºå™¨çš„å‚å®¶ä¸åŒï¼Œæ±‡æŠ¥æ–¹å¼ä¹Ÿä¸åŒã€‚</p><p>ä¾‹å¦‚ï¼Œæœ‰çš„å‚å®¶çš„æœºå™¨èŠ‚ç‚¹ä¸Šå…·æœ‰ NVMeã€SSDã€ HDD ç­‰å¤šç§å­˜å‚¨ä»‹è´¨,å¸Œæœ›å°†è¿™äº›å­˜å‚¨ä»‹è´¨åˆ†åˆ«è¿›è¡Œæ±‡æŠ¥ã€‚</p><p>è¿™ç§éœ€æ±‚æœ‰åˆ«äºå…¶ä»–å­˜å‚¨ç±»å‹çš„ CSI é©±åŠ¨å¯¹æ¥å£çš„éœ€æ±‚ï¼Œå› æ­¤å¦‚ä½•æ±‡æŠ¥èŠ‚ç‚¹çš„å­˜å‚¨ä¿¡æ¯ï¼Œä»¥åŠå¦‚ä½•è®©èŠ‚ç‚¹çš„å­˜å‚¨ä¿¡æ¯åº”ç”¨äºè°ƒåº¦ï¼Œç›®å‰å¹¶æ²¡æœ‰å½¢æˆç»Ÿä¸€çš„æ„è§ã€‚</p><p>é›†ç¾¤ç®¡ç†å‘˜å¯ä»¥åŸºäºèŠ‚ç‚¹å­˜å‚¨çš„å®é™…æƒ…å†µå¯¹å¼€æº CSI é©±åŠ¨å’Œè°ƒåº¦è¿›è¡Œä¸€äº›ä»£ç ä¿®æ”¹ï¼Œ å†è¿›è¡Œéƒ¨ç½²å’Œä½¿ç”¨</p><h3 id="local-dynamic-çš„æŒ‚è½½æµç¨‹" tabindex="-1"><a class="header-anchor" href="#local-dynamic-çš„æŒ‚è½½æµç¨‹" aria-hidden="true">#</a> Local Dynamic çš„æŒ‚è½½æµç¨‹</h3><ul><li><strong>åˆ›å»ºPVC</strong>ï¼šç”¨æˆ·åˆ›å»º PVCï¼ŒPVC å¤„äº pending çŠ¶æ€ã€‚</li><li><strong>åˆ›å»º Pod</strong>ï¼šç”¨æˆ·åˆ›å»º Podã€‚</li><li><strong>Podé€‰æ‹©èŠ‚ç‚¹</strong>ï¼š kube-scheduler å¼€å§‹è°ƒåº¦ Pod,é€šè¿‡ PVC çš„ pvc.spec.resources.request.storage ç­‰é€‰æ‹©æ»¡è¶³æ¡ä»¶çš„èŠ‚ç‚¹ã€‚</li><li><strong>æ›´æ–° PVC</strong>ï¼šé€‰æ‹©èŠ‚ç‚¹åï¼Œkube-scheduler ä¼šç»™ PVC æ·»åŠ åŒ…å«èŠ‚ç‚¹ä¿¡æ¯çš„<code>annotation:volume.kubernetes.io/selected-node: &lt;èŠ‚ç‚¹åå­—&gt;</code>ã€‚</li><li><strong>åˆ›å»ºå·</strong>ï¼šè¿è¡Œåœ¨èŠ‚ç‚¹ä¸Šçš„å®¹å™¨ external-provisioner ç›‘å¬åˆ° PVC å¸¦æœ‰è¯¥èŠ‚ç‚¹ç›¸å…³çš„ annotation,å‘ç›¸åº”çš„ CSI é©±åŠ¨ç”³è¯·åˆ†é…å·ã€‚</li><li><strong>åˆ›å»ºPV</strong>ï¼š PVC ç”³è¯·åˆ°æ‰€éœ€çš„å­˜å‚¨ç©ºé—´åï¼Œexternal-provisioner åˆ›å»º PV,è¯¥ PV çš„ <code>pv.Spec.claimRef</code> è®¾ç½®ä¸ºå¯¹åº”çš„ PVCã€‚</li><li><strong>PVCå’ŒPVç»‘å®š</strong>ï¼škube-controller-manager å°†PVC å’Œ PV è¿›è¡Œç»‘å®šï¼ŒçŠ¶æ€ä¿®æ”¹ä¸º Boundã€‚</li><li><strong>ç›‘å¬PVCçŠ¶æ€</strong>ï¼škube-scheduler ç­‰å¾… PVC å˜æˆ Bound çŠ¶æ€ã€‚</li><li><strong>Podè°ƒåº¦åˆ°èŠ‚ç‚¹</strong>ï¼šå½“PVCçš„çŠ¶æ€ä¸º Bound æ—¶ï¼ŒPod æ‰ç®—çœŸæ­£è°ƒåº¦æˆåŠŸäº†ã€‚å¦‚æœ PVC ä¸€ç›´å¤„äº Pending çŠ¶æ€,è¶…æ—¶åä¼šå†æ¬¡è¿›è¡Œè°ƒåº¦ã€‚</li><li><strong>Mount å·</strong>ï¼škubelet ç›‘å¬åˆ°æœ‰ Pod å·²ç»è°ƒåº¦åˆ°èŠ‚ç‚¹ä¸Š,å¯¹æœ¬åœ°å­˜å‚¨è¿›è¡Œ mount æ“ä½œã€‚</li><li><strong>å¯åŠ¨å®¹å™¨</strong>ï¼šå¯åŠ¨å®¹å™¨ã€‚</li></ul><p><img src="http://sm.nsddd.top/sm202303082240603.png" alt="img"></p><h3 id="local-dynamic-çš„æŒ‘æˆ˜" tabindex="-1"><a class="header-anchor" href="#local-dynamic-çš„æŒ‘æˆ˜" aria-hidden="true">#</a> Local Dynamic çš„æŒ‘æˆ˜</h3><p>å¦‚æœå°†ç£ç›˜ç©ºé—´ä½œä¸ºä¸€ä¸ªå­˜å‚¨æ± (ä¾‹å¦‚ LVM )æ¥åŠ¨æ€åˆ†é…ï¼Œé‚£ä¹ˆåœ¨åˆ†é…å‡ºæ¥çš„é€»è¾‘å·ç©ºé—´çš„ä½¿ç”¨ä¸Š,å¯èƒ½ä¼šå—åˆ°å…¶ä»–é€»è¾‘å·çš„ I/O å¹²æ‰°ï¼Œå› ä¸ºåº•å±‚çš„ç‰©ç†å·å¯èƒ½æ˜¯åŒä¸€ä¸ªã€‚</p><p>å¦‚æœ PV åç«¯çš„ç£ç›˜ç©ºé—´æ˜¯ä¸€å—ç‹¬ç«‹çš„ç‰©ç†ç£ç›˜ï¼Œåˆ™ I/O å°±ä¸ä¼šå—åˆ°å¹²æ‰°ã€‚</p><h3 id="rook" tabindex="-1"><a class="header-anchor" href="#rook" aria-hidden="true">#</a> Rook</h3><ul><li><a href="https://github.com/rook/rook" target="_blank" rel="noopener noreferrer">https://github.com/rook/rook<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><p>Rookæ˜¯ä¸€æ¬¾äº‘åŸç”Ÿç¯å¢ƒä¸‹çš„å¼€æºåˆ†å¸ƒå¼å­˜å‚¨ç¼–æ’ç³»ç»Ÿï¼Œç›®å‰æ”¯æŒ Cephã€NFSã€EdgeFSã€Cassandraã€CockroachDB ç­‰å­˜å‚¨ç³»ç»Ÿã€‚å®ƒå®ç°äº†ä¸€ä¸ªè‡ªåŠ¨ç®¡ç†çš„ã€è‡ªåŠ¨æ‰©å®¹çš„ã€è‡ªåŠ¨ä¿®å¤çš„åˆ†å¸ƒå¼å­˜å‚¨æœåŠ¡ã€‚</p><p>Rook æ”¯æŒè‡ªåŠ¨éƒ¨ç½²ã€å¯åŠ¨ã€é…ç½®ã€åˆ†é…ã€æ‰©å®¹/ç¼©å®¹ã€å‡çº§ã€è¿ç§»ã€ç¾éš¾æ¢å¤ã€ç›‘æ§ä»¥åŠèµ„æºç®¡ç†ã€‚</p><h2 id="end-é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#end-é“¾æ¥" aria-hidden="true">#</a> END é“¾æ¥</h2><ul><li><div><a href="52.md" style="float:left;">â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”— </a><a href="54.md" style="float:right;"> ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul><ul><li><p><a href="/" class="">â“‚ï¸å›åˆ°ç›®å½•ğŸ </a></p></li><li><p><a href="https://nsddd.top/archives/contributors" target="_blank" rel="noopener noreferrer"><strong>ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–</strong><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)</p></li><li><p>âœ´ï¸ç‰ˆæƒå£°æ˜ Â© ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª<a href="http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="noopener noreferrer">CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰Â©<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li></ul></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/3293172751/awesome-docker/edit/master/docs/Cloud-Native-k8s/53.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨GitHubä¸Šè´¡çŒ®æ­¤é¡µé¢"><!--[--><!--]--> åœ¨GitHubä¸Šè´¡çŒ®æ­¤é¡µé¢ <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">ä¸Šæ¬¡æ›´æ–°: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">è´¡çŒ®è€…: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 3293172751nss@gmail.com">Xinwei Xiong</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 3293172751nss@gmail.com">xiongxinwei</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/Cloud-Native-k8s/52.html" class="" aria-label="ç¬¬52èŠ‚ kubectl"><!--[--><!--]--> ç¬¬52èŠ‚ kubectl <!--[--><!--]--></a></span><span class="next"><a href="/Cloud-Native-k8s/54.html" class="" aria-label="ç¬¬54èŠ‚ Kubernetes ç”Ÿå‘½å‘¨æœŸç®¡ç†å’ŒæœåŠ¡å‘ç°"><!--[--><!--]--> ç¬¬54èŠ‚ Kubernetes ç”Ÿå‘½å‘¨æœŸç®¡ç†å’ŒæœåŠ¡å‘ç° <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.6a4cbc08.js" defer></script>
  </body>
</html>
