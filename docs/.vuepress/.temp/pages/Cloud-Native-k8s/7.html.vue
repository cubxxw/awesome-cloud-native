<template><div><ul>
<li><a href="http://nsddd.top" target="_blank" rel="noopener noreferrer">author<ExternalLinkIcon/></a></li>
</ul>
<h1 id="ç¬¬7èŠ‚-k8såœ¨çº¿å®éªŒå­¦ä¹ å¹³å°" tabindex="-1"><a class="header-anchor" href="#ç¬¬7èŠ‚-k8såœ¨çº¿å®éªŒå­¦ä¹ å¹³å°" aria-hidden="true">#</a> ç¬¬7èŠ‚ k8såœ¨çº¿å®éªŒå­¦ä¹ å¹³å°</h1>
<div><a href = '6.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '8.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>
<blockquote>
<p>â¤ï¸ğŸ’•ğŸ’•æ–°æ—¶ä»£æ‹¥æŠ±äº‘åŸç”Ÿï¼Œäº‘åŸç”Ÿå…·æœ‰ç¯å¢ƒç»Ÿä¸€ã€æŒ‰éœ€ä»˜è´¹ã€å³å¼€å³ç”¨ã€ç¨³å®šæ€§å¼ºç‰¹ç‚¹ã€‚Myblog:<a href="http://nsddd.top/" target="_blank" rel="noopener noreferrer">http://nsddd.top<ExternalLinkIcon/></a></p>
</blockquote>
<hr>
<nav class="table-of-contents"><ul><li><router-link to="#play-with-kubernetes-ä»‹ç»">Play with Kubernetes ä»‹ç»</router-link></li><li><router-link to="#æ­å»º-kubernetes-é›†ç¾¤">æ­å»º Kubernetes é›†ç¾¤</router-link></li><li><router-link to="#kubernetes-é›†ç¾¤çš„ä½¿ç”¨">Kubernetes é›†ç¾¤çš„ä½¿ç”¨</router-link></li><li><router-link to="#end-é“¾æ¥">END é“¾æ¥</router-link></li></ul></nav>
<p>[TOC]</p>
<h2 id="play-with-kubernetes-ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#play-with-kubernetes-ä»‹ç»" aria-hidden="true">#</a> Play with Kubernetes ä»‹ç»</h2>
<p>ï¼ˆ1ï¼‰<code v-pre>Play with Kubernetes</code> ä¸€ä¸ªæä¾›äº†åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨å…è´¹ <strong>CentOS Linux</strong> è™šæ‹Ÿæœºçš„ä½“éªŒå¹³å°ï¼Œå…¶å†…éƒ¨å®é™…ä¸Šæ˜¯ <strong>Docker-in-Docker</strong>ï¼ˆ<strong>DinD</strong>ï¼‰æŠ€æœ¯æ¨¡æ‹Ÿäº†å¤šè™šæ‹Ÿæœº/<strong>PC</strong> çš„æ•ˆæœã€‚
ï¼ˆ2ï¼‰<code v-pre>Play with Kubernetes</code> å¹³å°æœ‰å¦‚ä¸‹å‡ ä¸ªç‰¹è‰²ï¼š</p>
<ul>
<li>å…è®¸æˆ‘ä»¬ä½¿ç”¨ <strong>github</strong> æˆ– <strong>dockerhub</strong> è´¦å·ç™»å½•</li>
<li>åœ¨ç™»å½•åä¼šå¼€å§‹å€’è®¡æ—¶ï¼Œè®©æˆ‘ä»¬æœ‰ <strong>4</strong> å°æ—¶çš„æ—¶é—´å»å®è·µ</li>
<li><strong>K8s</strong> ç¯å¢ƒä½¿ç”¨ <strong>kubeadm</strong> æ¥éƒ¨ç½²ï¼ˆä½¿ç”¨ç”¨ <strong>weave</strong> ç½‘ç»œï¼‰</li>
<li>å¹³å°å…±æä¾› <strong>5</strong> å° <strong>centos7</strong> è®¾å¤‡ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼ˆ<strong>docker</strong> ç‰ˆæœ¬ä¸º <strong>17.09.0-ce</strong>ï¼‰</li>
</ul>
<h2 id="æ­å»º-kubernetes-é›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#æ­å»º-kubernetes-é›†ç¾¤" aria-hidden="true">#</a> æ­å»º Kubernetes é›†ç¾¤</h2>
<p>ï¼ˆ1ï¼‰é¦–å…ˆè®¿é—®å…¶ç½‘ç«™ï¼Œå¹¶ä½¿ç”¨ <strong>github</strong> æˆ– <strong>dockerhub</strong> è´¦å·è¿›è¡Œç™»å½•ã€‚</p>
<ul>
<li><strong>PWK</strong> å®˜ç½‘åœ°å€ï¼šhttps://labs.play-with-k8s.com/</li>
</ul>
<p>ï¼ˆ2ï¼‰ç™»å½•åç‚¹å‡»é¡µé¢ä¸Šçš„ <strong>Start</strong> æŒ‰é’®ï¼Œæˆ‘ä»¬ä¾¿æ‹¥æœ‰ä¸€ä¸ªè‡ªå·±çš„å®éªŒå®¤ç¯å¢ƒã€‚</p>
<p><img src="http://sm.nsddd.top/smimage-20221019215214900.png" alt="image-20221019215214900"></p>
<p>ï¼ˆ3ï¼‰å•å‡»å·¦ä¾§çš„â€œ<strong>Add New Instance</strong>â€ æ¥åˆ›å»ºç¬¬ä¸€ä¸ª <strong>Kubernetes</strong> é›†ç¾¤èŠ‚ç‚¹ã€‚å®ƒä¼šè‡ªåŠ¨å°†å…¶å‘½åä¸ºâ€œ<strong>node1</strong>â€ï¼Œè¿™ä¸ªå°†ä½œä¸ºæˆ‘ä»¬ç¾¤é›†çš„ä¸»èŠ‚ç‚¹ã€‚</p>
<p><img src="http://sm.nsddd.top/smimage-20221019215413938.png" alt="image-20221019215413938"></p>
<p>ï¼ˆ4ï¼‰ç”±äºåˆšåˆ›å»ºçš„ä¸»èŠ‚ç‚¹ <strong>IP</strong> æ˜¯ <code v-pre>192.168.0.5</code>ï¼Œå› æ­¤æˆ‘ä»¬æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¿›è¡Œåˆå§‹åŒ–ï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>kubeadm init --apiserver-advertise-address <span class="token number">192.168</span>.0.5 --pod-network-cidr<span class="token operator">=</span><span class="token number">10.244</span>.0.0/16
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ï¼ˆ5ï¼‰åˆå§‹åŒ–å®Œæ¯•å®Œæˆä¹‹åï¼Œç•Œé¢ä¸Šä¼šæ˜¾ç¤º <code v-pre>kubeadm join</code> å‘½ä»¤ï¼Œè¿™ä¸ªç”¨äºåç»­ <strong>node</strong> èŠ‚ç‚¹åŠ å…¥é›†ç¾¤ä½¿ç”¨ï¼Œéœ€è¦ç‰¢è®°ã€‚</p>
<p><img src="http://sm.nsddd.top/smimage-20221019215641859.png" alt="image-20221019215641859"></p>
<p>ï¼ˆ6ï¼‰æ¥ç€è¿˜éœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£… <code v-pre>Pod</code> ç½‘ç»œï¼ˆè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ <code v-pre>flannel</code>ï¼‰ï¼Œå¦åˆ™ <code v-pre>Pod</code> ä¹‹é—´æ— æ³•é€šä¿¡ã€‚</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ï¼ˆ7ï¼‰æœ€åæˆ‘ä»¬æ‰§è¡Œ <code v-pre>kubectl get nodes</code> æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€ï¼Œå¯ä»¥çœ‹åˆ°ç›®å‰åªæœ‰ä¸€ä¸ª <strong>Master</strong> èŠ‚ç‚¹ã€‚</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>kubectl get nodes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="http://sm.nsddd.top/smimage-20221019221408948.png" alt="image-20221019221408948"></p>
<p>ï¼ˆ8ï¼‰æˆ‘ä»¬å•å‡»å·¦ä¾§çš„â€œ<strong>Add New Instance</strong>â€æŒ‰é’®ç»§ç»­åˆ›å»º <strong>4</strong> ä¸ªèŠ‚ç‚¹ä½œä¸º <strong>node</strong> èŠ‚ç‚¹</p>
<p><img src="http://sm.nsddd.top/smimage-20221019221428071.png" alt="image-20221019221428071"></p>
<p>ï¼ˆ9ï¼‰è¿™ <code v-pre>4</code> ä¸ªèŠ‚ç‚¹éƒ½æ‰§è¡Œç±»ä¼¼å¦‚ä¸‹çš„ <code v-pre>kubeadm join</code> å‘½ä»¤åŠ å…¥é›†ç¾¤ï¼ˆå³ä¹‹å‰ <code v-pre>master</code> èŠ‚ç‚¹åˆå§‹åŒ–å®Œæˆåçº¢æ¡†éƒ¨åˆ†å†…å®¹ï¼‰</p>
<p><img src="http://sm.nsddd.top/smimage-20221019222217349.png" alt="image-20221019222217349"></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>kubeadm <span class="token function">join</span> <span class="token number">192.168</span>.0.18:6443 <span class="token parameter variable">--token</span> mb680t.mue309o4jo5gjfyb --discovery-token-ca-cert-hash sha256:714f1794efcf23flec7f2dc6eae029466022d7c74c991cf91decf8ff22be61ab
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="http://sm.nsddd.top/smimage-20221019222531962.png" alt="image-20221019222531962"></p>
<p>ï¼ˆ10ï¼‰æœ€åæˆ‘ä»¬åœ¨ä¸»èŠ‚ç‚¹æ‰§è¡Œ <code v-pre>kubectl get nodes</code> æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªåŒ…å«æœ‰ <code v-pre>5</code> ä¸ªèŠ‚ç‚¹é›†ç¾¤å·²ç»éƒ¨ç½²æˆåŠŸäº†ã€‚</p>
<p><img src="http://sm.nsddd.top/smimage-20221019222932955.png" alt="image-20221019222932955"></p>
<h2 id="kubernetes-é›†ç¾¤çš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#kubernetes-é›†ç¾¤çš„ä½¿ç”¨" aria-hidden="true">#</a> Kubernetes é›†ç¾¤çš„ä½¿ç”¨</h2>
<p>ï¼ˆ1ï¼‰æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤é€šè¿‡ <strong>yaml</strong> æ–‡ä»¶éƒ¨ç½²è¿è¡Œ <strong>nginx</strong> æœåŠ¡ï¼ˆè¯¥ <strong>yaml</strong> æ–‡ä»¶ä¸­æŒ‡æ˜äº†å‰¯æœ¬æ•°é‡ä¸º <strong>3</strong>ï¼‰</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> https://raw.githubusercontent.com/kubernetes/website/master/content/en/examples/application/nginx-app.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ï¼ˆ2ï¼‰æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹å‰¯æœ¬ï¼ˆ<strong>pod</strong>ï¼‰æƒ…å†µï¼Œå¯ä»¥çœ‹åˆ°ç¡®å®æœ‰ä¸‰ä¸ªå‰¯æœ¬åˆ†åˆ«éƒ¨ç½²åœ¨ä¸‰ä¸ª <strong>node</strong> èŠ‚ç‚¹ä¸Šã€‚</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>kubectl get pods -o wide
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="http://sm.nsddd.top/smimage-20221020220601596.png" alt="image-20221020220601596"></p>
<p>ï¼ˆ3ï¼‰æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ™å¯ä»¥æŸ¥çœ‹ <strong>services</strong> çŠ¶æ€ã€‚</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>kubectl get service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="http://sm.nsddd.top/smimage-20221020220633446.png" alt="image-20221020220633446"></p>
<p>ï¼ˆ4ï¼‰å½“éƒ¨ç½²å®Œæ¯•åï¼Œé¡µé¢ä¸Šæ–¹ä¼šå‡ºç°ä¸€ä¸ªå¸¦æœ‰æ•°å­—çš„è“è‰²æŒ‰é’®ï¼ŒæŒ‰é’®æ•°å­—å³ä¸º <strong>Services</strong> éšæœºé…ç½®çš„å¤–éƒ¨ <strong>port</strong>ã€‚ç‚¹å‡»è“è‰²æŒ‰é’®ï¼Œå³å¯çœ‹åˆ° <strong>Nginx</strong> æœåŠ¡çš„æ¬¢è¿é¡µé¢ã€‚ï¼ˆä½†æˆ‘æµ‹è¯•æ—¶ä¸€ç›´æ²¡æœ‰å‡ºç°ï¼Œä¸æ¸…æ¥šæ˜¯ä»€ä¹ˆåŸå› ï¼Œä½ å¦‚æœæ¸…æ¥šå¯ä»¥<code v-pre>pr</code>ï¼‰</p>
<h2 id="end-é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#end-é“¾æ¥" aria-hidden="true">#</a> END é“¾æ¥</h2>
<ul><li><div><a href = '6.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '8.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>
<ul>
<li>
<p><RouterLink to="/">â“‚ï¸å›åˆ°ç›®å½•ğŸ </RouterLink></p>
</li>
<li>
<p><a href="https://nsddd.top/archives/contributors" target="_blank" rel="noopener noreferrer"><strong>ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–</strong><ExternalLinkIcon/></a>)</p>
</li>
<li>
<p>âœ´ï¸ç‰ˆæƒå£°æ˜ Â© ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª<a href="http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="noopener noreferrer">CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰Â©<ExternalLinkIcon/></a></p>
</li>
</ul>
</div></template>


