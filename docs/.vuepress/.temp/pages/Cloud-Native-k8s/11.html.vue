<template><div><ul>
<li><a href="http://nsddd.top" target="_blank" rel="noopener noreferrer">author<ExternalLinkIcon/></a></li>
</ul>
<h1 id="ç¬¬11èŠ‚-service" tabindex="-1"><a class="header-anchor" href="#ç¬¬11èŠ‚-service" aria-hidden="true">#</a> ç¬¬11èŠ‚ service</h1>
<div><a href = '10.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '12.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>
<blockquote>
<p>â¤ï¸ğŸ’•ğŸ’•æ–°æ—¶ä»£æ‹¥æŠ±äº‘åŸç”Ÿï¼Œäº‘åŸç”Ÿå…·æœ‰ç¯å¢ƒç»Ÿä¸€ã€æŒ‰éœ€ä»˜è´¹ã€å³å¼€å³ç”¨ã€ç¨³å®šæ€§å¼ºç‰¹ç‚¹ã€‚Myblog:<a href="http://nsddd.top/" target="_blank" rel="noopener noreferrer">http://nsddd.top<ExternalLinkIcon/></a></p>
</blockquote>
<hr>
<nav class="table-of-contents"><ul><li><router-link to="#service">service</router-link></li><li><router-link to="#å°†podç»Ÿä¸€æš´éœ²æˆä¸€ç»„æœåŠ¡">å°†podç»Ÿä¸€æš´éœ²æˆä¸€ç»„æœåŠ¡</router-link><ul><li><router-link to="#ä¿®æ”¹nginxé…ç½®æ–‡ä»¶">ä¿®æ”¹nginxé…ç½®æ–‡ä»¶</router-link></li><li><router-link to="#ä½¿ç”¨serviceé…ç½®å…¬å…±åœ°å€">ä½¿ç”¨serviceé…ç½®å…¬å…±åœ°å€</router-link></li></ul></li><li><router-link to="#yamlé…ç½®æ–‡ä»¶å®ç°service">yamlé…ç½®æ–‡ä»¶å®ç°service</router-link></li><li><router-link to="#æµ‹è¯•serviceçš„æœåŠ¡å‘ç°">æµ‹è¯•serviceçš„æœåŠ¡å‘ç°</router-link></li><li><router-link to="#serviceæœåŠ¡æš´éœ²å…¬ç½‘nodeport">serviceæœåŠ¡æš´éœ²å…¬ç½‘nodeport</router-link></li><li><router-link to="#åˆ é™¤service">åˆ é™¤service</router-link></li><li><router-link to="#end-é“¾æ¥">END é“¾æ¥</router-link></li></ul></nav>
<p>[TOC]</p>
<h2 id="service" tabindex="-1"><a class="header-anchor" href="#service" aria-hidden="true">#</a> service</h2>
<blockquote>
<p>æˆ‘ä»¬å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä½¿ç”¨<code v-pre>pod -owide</code>æŸ¥çœ‹çš„<code v-pre>ip</code>æ˜¯æ¯ä¸€ä¸ª<code v-pre>pod</code>ç»“ç‚¹éƒ½ä¸ä¸€æ ·çš„ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼šå°±æ˜¯å½“æˆ‘ä»¬æœ‰ä¸€ä¸ª<code v-pre>pod</code>ç»“ç‚¹å®•æœºäº†ï¼Œè¿™ä¸ªå²‚ä¸æ˜¯å‡‰å‡‰äº†ï¼ˆè¿˜éœ€è¦ä¿®æ”¹å‰ç«¯çš„åœ°å€å˜›ï¼Ÿï¼‰å¤ªéº»çƒ¦äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨<code v-pre>service</code>å¯¹å¤–æš´éœ²ä¸€ä¸ªå…¬å¼€ä¸ºç½‘ç»œæœåŠ¡çš„æŠ½è±¡æ–¹æ³•ã€‚</p>
</blockquote>
<p>ğŸ”¥Serviceï¼šPodçš„æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡</p>
<h2 id="å°†podç»Ÿä¸€æš´éœ²æˆä¸€ç»„æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#å°†podç»Ÿä¸€æš´éœ²æˆä¸€ç»„æœåŠ¡" aria-hidden="true">#</a> å°†podç»Ÿä¸€æš´éœ²æˆä¸€ç»„æœåŠ¡</h2>
<h3 id="ä¿®æ”¹nginxé…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹nginxé…ç½®æ–‡ä»¶" aria-hidden="true">#</a> ä¿®æ”¹nginxé…ç½®æ–‡ä»¶</h3>
<div class="custom-container tip"><p class="custom-container-title">è¿›å…¥nginxå¹¶ä¸”ä¿®æ”¹é…ç½®æ–‡ä»¶è®¿é—®</p>
<p>æŸ¥çœ‹å½“å‰podè¯¦ç»†ä¿¡æ¯ï¼š</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>kubectl get pod -owide
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="http://sm.nsddd.top/smimage-20221022175600469.png" alt="image-20221022175600469"></p>
<p>è¿›å…¥å®¹å™¨å†…éƒ¨å‘½ä»¤ï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>kubectl <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> my-dep-6d4ddbf4f7-bllhd -- /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆindex.htmlï¼‰ï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>root@k8s-master01 ~<span class="token punctuation">]</span><span class="token comment"># kubectl exec -it my-dep-6d4ddbf4f7-bllhd -- /bin/bash</span>
root@my-dep-6d4ddbf4f7-bllhd:/<span class="token comment"># cd /usr/share/nginx/html/</span>
root@my-dep-6d4ddbf4f7-bllhd:/usr/share/nginx/html<span class="token comment"># echo "my name is xiongxinwei email:xxw@nsddd.top" > index.html </span>
root@my-dep-6d4ddbf4f7-bllhd:/usr/share/nginx/html<span class="token comment"># exit </span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">[</span>root@k8s-master01 ~<span class="token punctuation">]</span><span class="token comment"># curl 100.66.195.43</span>
my name is xiongxinwei email:xxw@nsddd.top
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>æ­¤æ—¶å·²ç»ä¿®æ”¹æˆåŠŸ~</p>
</blockquote>
<p>åŒæ ·çš„æ–¹å¼ä¿®æ”¹ï¼š</p>
<ul>
<li>my-dep-6d4ddbf4f7-dckmw</li>
<li>my-dep-6d4ddbf4f7-vvxt8</li>
</ul>
</div>
<h3 id="ä½¿ç”¨serviceé…ç½®å…¬å…±åœ°å€" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨serviceé…ç½®å…¬å…±åœ°å€" aria-hidden="true">#</a> ä½¿ç”¨serviceé…ç½®å…¬å…±åœ°å€</h3>
<p><strong>æŸ¥çœ‹ä¿¡æ¯ï¼š</strong></p>
<p><img src="http://sm.nsddd.top/smimage-20221022180728395.png" alt="image-20221022180728395"></p>
<p><strong>æš´éœ²æˆä¸ºä¸€ä¸ªå›ºå®šçš„ipï¼š</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>root@k8s-master01 ~<span class="token punctuation">]</span><span class="token comment"># kubectl expose deploy my-dep --port=8000 --target-port=80</span>
service/my-dep exposed
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æŸ¥çœ‹serviceçš„IPï¼š</strong></p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>kubectl get service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="http://sm.nsddd.top/smimage-20221022181104154.png" alt="image-20221022181104154"></p>
<div class="custom-container tip"><p class="custom-container-title">æˆ‘ä»¬è®¿é—® `10.96.2.163:8000`</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token function">curl</span> <span class="token number">10.96</span>.2.163:8000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>æ•ˆæœï¼š</strong></p>
<p><img src="http://sm.nsddd.top/smimage-20221022181355962.png" alt="image-20221022181355962"></p>
<p><strong>è¿™æ ·å°±å®ç°äº†è´Ÿè½½å‡è¡¡äº†~</strong></p>
</div>
<h2 id="yamlé…ç½®æ–‡ä»¶å®ç°service" tabindex="-1"><a class="header-anchor" href="#yamlé…ç½®æ–‡ä»¶å®ç°service" aria-hidden="true">#</a> yamlé…ç½®æ–‡ä»¶å®ç°service</h2>
<p><strong>ç¼–å†™yamlæ–‡ä»¶ï¼š</strong></p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
  	<span class="token key atrule">app</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>dep
  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>dep
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span> 
  	<span class="token key atrule">app</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>dep
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8000</span>
  	<span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
  	<span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container danger"><p class="custom-container-title">ç‰¹åˆ«æ³¨æ„çš„å‚æ•°</p>
</div>
<p><strong>âš ï¸ åœ¨å®¹å™¨å†…éƒ¨ä¹Ÿå¯ä½¿ç”¨åŸŸåè®¿é—®ï¼š</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>root@k8s-master01 ~<span class="token punctuation">]</span><span class="token comment"># kubectl exec -it  my-dep-6d4ddbf4f7-dckmw  -- bin/bash</span>
root@my-dep-6d4ddbf4f7-dckmw:/<span class="token comment"># curl 100.66.195.42  # ipæ–¹å¼è®¿é—®</span>
my name is xiongxinwei email:3293172751@qq.com
root@my-dep-6d4ddbf4f7-dckmw:/<span class="token comment"># curl my-dep.default.svc:8000  # åŸŸåæ–¹å¼è®¿é—®</span>
my name is xiongxinwei email:xiongxinwei@mail.com
root@my-dep-6d4ddbf4f7-dckmw:/<span class="token comment"># curl my-dep.default.svc:8000 #ä¹Ÿèƒ½å®ç°è´Ÿè½½å‡è¡¡</span>
my name is xiongxinwei email:xxw@nsddd.top
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container danger"><p class="custom-container-title">æ³¨æ„</p>
<p>åœ¨æœºå™¨ä¸Šæ˜¯æ²¡åŠæ³•è¿™æ ·è®¿é—®çš„</p>
<p><img src="http://sm.nsddd.top/smimage-20221022192356049.png" alt="image-20221022192356049"></p>
</div>
<h2 id="æµ‹è¯•serviceçš„æœåŠ¡å‘ç°" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•serviceçš„æœåŠ¡å‘ç°" aria-hidden="true">#</a> æµ‹è¯•serviceçš„æœåŠ¡å‘ç°</h2>
<div class="custom-container tip"><p class="custom-container-title">æç¤º</p>
<p>æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹å…¶ä¸­ä¸€å°ä¸»æœºä¸‹çº¿ï¼Œserviceç»§ç»­å®ç°è´Ÿè½½å‡è¡¡</p>
<p>å†å¼€å¯ä¹Ÿæ˜¯æ¢å¤åˆ°äº†é»˜è®¤é¡µé¢ï¼Œæ–°å¼€å¯çš„nginxè€Œä¸æ˜¯ä»¥å‰çš„~</p>
</div>
<h2 id="serviceæœåŠ¡æš´éœ²å…¬ç½‘nodeport" tabindex="-1"><a class="header-anchor" href="#serviceæœåŠ¡æš´éœ²å…¬ç½‘nodeport" aria-hidden="true">#</a> serviceæœåŠ¡æš´éœ²å…¬ç½‘nodeport</h2>
<div class="custom-container warning"><p class="custom-container-title">æ³¨æ„</p>
<p>æˆ‘ä»¬ä¹‹å‰çš„è¿˜æ˜¯åªèƒ½åœ¨æœåŠ¡å™¨å†…éƒ¨è®¿é—®ï¼Œè¦æƒ³å®ç°åœ¨å…¬ç½‘è®¿é—®ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨å¦å¤–ä¸€ç§æ–¹å¼</p>
</div>
<p><strong>åˆ é™¤ä¹‹å‰çš„<code v-pre>my-dep</code>service</strong></p>
<p><img src="http://sm.nsddd.top/smimage-20221022193330095.png" alt="image-20221022193330095"></p>
<p><strong>é‡æ–°æš´éœ²ï¼š</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>kubectl expose deploy my-dep <span class="token parameter variable">--port</span><span class="token operator">=</span><span class="token number">8000</span> --target-port<span class="token operator">=</span><span class="token number">80</span> <span class="token parameter variable">--type</span><span class="token operator">=</span>NodePort
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="custom-container danger"><p class="custom-container-title">è­¦å‘Šserviceé»˜è®¤æ¨¡å¼</p>
<ul>
<li><code v-pre>--type=NodePort</code>ï¼šé»˜è®¤æƒ…å†µï¼Œé›†ç¾¤å†…éƒ¨çš„è®¿é—®</li>
<li><code v-pre>--type=ClusterIP</code>ï¼šè®¾ç½®ä¸ºé›†ç¾¤å¤–éƒ¨å¯ä»¥è®¿é—®</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>kubectl expose deploy my-dep <span class="token parameter variable">--port</span><span class="token operator">=</span><span class="token number">8000</span> --target-port<span class="token operator">=</span><span class="token number">80</span> <span class="token parameter variable">--type</span><span class="token operator">=</span>NodePort
kubectl expose deploy my-dep <span class="token parameter variable">--port</span><span class="token operator">=</span><span class="token number">8000</span> --target-port<span class="token operator">=</span><span class="token number">80</span> <span class="token parameter variable">--type</span><span class="token operator">=</span>ClusterIP
kubectl expose deploy my-dep <span class="token parameter variable">--port</span><span class="token operator">=</span><span class="token number">8000</span> --target-port<span class="token operator">=</span><span class="token number">80</span> <span class="token comment">#é»˜è®¤æƒ…å†µï¼Œé›†ç¾¤å†…éƒ¨çš„è®¿é—®</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://sm.nsddd.top/smimage-20221022193953537.png" alt="image-20221022193953537"></p>
</div>
<p>æˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°æš´éœ²çš„å¤šäº†ä¸€ä¸ªç«¯å£<code v-pre>80:31729/TCP  </code>ï¼Œè¿™ä¸ªæ˜¯éšæœºå¼€æ”¾çš„ç«¯å£ã€‚è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬è®¿é—®ä»»ä½•ä¸€å°æœºå™¨çš„<code v-pre>30948</code>ç«¯å£éƒ½å¯ä»¥è®¿é—®~</p>
<blockquote>
<p>è¿™ä¸ªç«¯å£æ˜¯éšæœºæš´éœ²çš„ï¼Œ ä½†æ˜¯ä¹Ÿæ˜¯æœ‰èŒƒå›´ï¼Œå°±æ˜¯<code v-pre>30000 - 32767</code>ä¹‹é—´ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å¯é˜²ç«å¢™å’Œvpcçš„ç«¯å£è½¬åŒ–ã€‚</p>
</blockquote>
<p>ğŸ”¥æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸Šé¢è®¿é—®è¿™ä¸ªé¡µé¢äº†~</p>
<img src="http://sm.nsddd.top/smimage-20221022194722363.png" alt="image-20221022194722363" style="zoom:80%;" />
<h2 id="åˆ é™¤service" tabindex="-1"><a class="header-anchor" href="#åˆ é™¤service" aria-hidden="true">#</a> åˆ é™¤service</h2>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>kubectl delete svc/kubernetes-bootcamp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="end-é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#end-é“¾æ¥" aria-hidden="true">#</a> END é“¾æ¥</h2>
<ul><li><div><a href = '10.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '12.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>
<ul>
<li>
<p><RouterLink to="/">â“‚ï¸å›åˆ°ç›®å½•ğŸ </RouterLink></p>
</li>
<li>
<p><a href="https://nsddd.top/archives/contributors" target="_blank" rel="noopener noreferrer"><strong>ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–</strong><ExternalLinkIcon/></a>)</p>
</li>
<li>
<p>âœ´ï¸ç‰ˆæƒå£°æ˜ Â© ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª<a href="http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="noopener noreferrer">CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰Â©<ExternalLinkIcon/></a></p>
</li>
</ul>
</div></template>


