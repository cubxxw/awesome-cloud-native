<template><div><ul>
<li><a href="http://nsddd.top" target="_blank" rel="noopener noreferrer">author<ExternalLinkIcon/></a></li>
</ul>
<h1 id="ç¬¬73èŠ‚-ä¸€æ¬¡å¤§å‹çš„-review-ç°åœº-generic-event-mechanism" tabindex="-1"><a class="header-anchor" href="#ç¬¬73èŠ‚-ä¸€æ¬¡å¤§å‹çš„-review-ç°åœº-generic-event-mechanism" aria-hidden="true">#</a> ç¬¬73èŠ‚ ä¸€æ¬¡å¤§å‹çš„ review ç°åœºï¼šGeneric event mechanism</h1>
<div><a href = '72.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '74.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>
<blockquote>
<p>â¤ï¸ğŸ’•ğŸ’•è®°å½•<a href="https://github.com/cubxxw/sealos" target="_blank" rel="noopener noreferrer">sealos<ExternalLinkIcon/></a>å¼€æºé¡¹ç›®çš„å­¦ä¹ è¿‡ç¨‹ã€‚<a href="https://github.com/cubxxw/sealos" target="_blank" rel="noopener noreferrer">k8s,dockerå’Œäº‘åŸç”Ÿçš„å­¦ä¹ <ExternalLinkIcon/></a>ã€‚Myblog:<a href="http://nsddd.top/" target="_blank" rel="noopener noreferrer">http://nsddd.top<ExternalLinkIcon/></a></p>
</blockquote>
<hr>
<p>[TOC]</p>
<h2 id="why" tabindex="-1"><a class="header-anchor" href="#why" aria-hidden="true">#</a> why</h2>
<p>æœ€è¿‘ç½‘æ˜“ æ£®å“¥ èŠ±äº†ä¸€ä¸ªæœˆå¤šçš„æ—¶é—´ç»ˆäºæŠŠ Generic event mechanism è®¾è®¡å‡ºæ¥äº†ï¼Œæˆ‘èµ¶ç´§å» review äº†ä¸€ä¸‹è®¾è®¡æ–¹æ¡ˆå’Œä»£ç ï¼Œå¸Œæœ›ä»ä¸­å­¦ä¹ åˆ°è®¾è®¡ç²¾é«“ã€‚</p>
<ul>
<li>issueï¼šhttps://github.com/horizoncd/horizon/issues/147</li>
<li>Google docsï¼šhttps://docs.google.com/document/d/1kE_BMVr4sYucQiSOT8LdEObAsoOtkhL5TL0NhvsML4I/edit?usp=sharing</li>
<li>PRï¼šhttps://github.com/horizoncd/horizon/pull/155</li>
</ul>
<h2 id="è®¾è®¡æ€è·¯" tabindex="-1"><a class="header-anchor" href="#è®¾è®¡æ€è·¯" aria-hidden="true">#</a> è®¾è®¡æ€è·¯</h2>
<p><strong>æ–‡æ¡£æ€è·¯ï¼š</strong></p>
<ul>
<li>Horizonå‘å¸ƒä¸‹ä¸€æ‰¹å’Œå‘å¸ƒå®Œæˆæ—¶éœ€è¦å‘é€é€šçŸ¥ç»™ç”¨æˆ·</li>
<li>å¤–éƒ¨ç”¨æˆ·ä¹Ÿéœ€è¦æ›´å¤šçš„äº‹ä»¶</li>
</ul>
<p><strong>éœ€æ±‚åˆ†æ:</strong></p>
<ol>
<li>ç”¨æˆ·ä½¿ç”¨è‡ªåŠ¨å‘å¸ƒåŠŸèƒ½ï¼Œè‡ªåŠ¨å‘å¸ƒä¸‹ä¸€æ‰¹å’Œå‘å¸ƒå®Œæˆæˆ–è€…å¤±è´¥æ—¶ï¼Œéœ€è¦å‘é€é€šçŸ¥ç»™å‘å¸ƒçš„è§¦å‘è€…ã€‚</li>
<li>å¤–éƒ¨éœ€è¦Horizonæä¾›æ›´å¤šçš„Webhookï¼Œæ¯”å¦‚ä¸Šä¸‹çº¿ï¼Œé‡å¯ç­‰äº‹ä»¶</li>
</ol>
<p><strong>äº‹ä»¶åˆ†æ:</strong></p>
<h3 id="rollout" tabindex="-1"><a class="header-anchor" href="#rollout" aria-hidden="true">#</a> Rollout</h3>
<p>å½“rolloutså‘å¸ƒä¸‹ä¸€æ‰¹æ—¶ï¼Œå‘é€SetStepIndexäº‹ä»¶</p>
<table>
<thead>
<tr>
<th>4h39m</th>
<th>Normal</th>
<th>SetStepIndex</th>
<th>rollout/bad2good-setweight-onlycheck-newrs</th>
<th>Set Step Index to 1</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ol>
<li>å½“rolloutså‘å¸ƒå®Œæˆåï¼Œå°†å‘é€SettingStableRSäº‹ä»¶</li>
</ol>
<table>
<thead>
<tr>
<th>4h39m</th>
<th>Normal</th>
<th>SettingStableRS</th>
<th>rollout/bad2good-setweight-onlycheck-newrs</th>
<th>Completed all steps</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>â€‹</p>
<h3 id="argo-application" tabindex="-1"><a class="header-anchor" href="#argo-application" aria-hidden="true">#</a> Argo Application</h3>
<p>å‘å¸ƒæˆåŠŸæ—¶ï¼ŒçŠ¶æ€ç”±Progressingè½¬å˜ä¸ºHealthy</p>
<table>
<thead>
<tr>
<th>17h</th>
<th>Normal</th>
<th>ResourceUpdated</th>
<th>application/horizon-cs-4-regression</th>
<th>Updated health status: Progressing -&gt; Healthy</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>â€‹</p>
<p>å‘å¸ƒå¤±è´¥æ—¶ï¼ŒçŠ¶æ€ç”±Progressingå˜ä¸ºDegraded</p>
<table>
<thead>
<tr>
<th>18h</th>
<th>Normal</th>
<th>ResourceUpdated</th>
<th>application/horizon-cs-4-regression</th>
<th>Updated health status: Progressing -&gt; Degraded</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>â€‹</p>
<p>å‘å¸ƒä¸‹ä¸€æ‰¹æ—¶ï¼ŒçŠ¶æ€ç”±Suspendedè½¬å˜ä¸ºProgressing</p>
<table>
<thead>
<tr>
<th>15h</th>
<th>Normal</th>
<th>ResourceUpdated</th>
<th>application/for-argocd-dfldsflsj</th>
<th>Updated health status: Suspended -&gt; Progressing</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>æ•´ä½“è®¾è®¡:</strong></p>
<ol>
<li>Horizonä¸­æ·»åŠ ç›‘å¬Eventçš„é€»è¾‘ï¼Œç›‘å¬é…ç½®èµ„æºçš„Eventï¼ŒHorizonåº”è¯¥ç›‘å¬regionè¡¨ä¸­æ‰€æœ‰å¯ç”¨çš„é›†ç¾¤</li>
<li>å°†ç›‘å¬èµ„æºäº§ç”Ÿçš„Eventå†™å…¥æ•°æ®åº“ä¸­</li>
<li>Webhook jobå–å‡ºeventï¼Œå‘é€ç›¸åº”çš„Webhook</li>
<li>å¼€å‘<code v-pre>ReleaseAdapter</code>ç»„ä»¶ï¼Œç›‘å¬webhookï¼Œå¹¶å‘é€é€šçŸ¥ç»™ç›¸å…³ç”¨æˆ·</li>
</ol>
<table>
<thead>
<tr>
<th>Event</th>
<th>Description</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>Generic event mechanism</td>
<td>Horizon listens to events on Kubernetes and supports sending related events through Webhooks</td>
<td>Designing</td>
</tr>
</tbody>
</table>
<p><strong>PR æ€è·¯ï¼š</strong></p>
<p><strong>å¤§è‡´åšäº†ä¸‰ä»¶äº‹:</strong></p>
<ul>
<li>æ·»åŠ  k8s  event package ä»¥ ä¾¦å¬ k8s äº‹ä»¶å¹¶å°†å…¶å†™å…¥æ•°æ®åº“ã€‚</li>
<li>ä½¿ç”¨ informer åˆ—å‡ºèµ„æºæ ‘ä¸­çš„æ‰€æœ‰ podï¼Œå¤§å¤§å‡è½»äº† kube API æœåŠ¡å™¨çš„å‹åŠ›ã€‚</li>
<li>æ·»åŠ æ¸…ç†ä½œä¸šä»¥å®šæœŸæ¸…ç† Webhook æ—¥å¿—å’Œäº‹ä»¶ã€‚</li>
</ul>
<h2 id="end-é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#end-é“¾æ¥" aria-hidden="true">#</a> END é“¾æ¥</h2>
<ul><li><div><a href = '72.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '74.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>
<ul>
<li>
<p><RouterLink to="/">â“‚ï¸å›åˆ°ç›®å½•ğŸ </RouterLink></p>
</li>
<li>
<p><a href="https://nsddd.top/archives/contributors" target="_blank" rel="noopener noreferrer"><strong>ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–</strong><ExternalLinkIcon/></a>)</p>
</li>
<li>
<p>âœ´ï¸ç‰ˆæƒå£°æ˜ Â© ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª<a href="http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="noopener noreferrer">CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰Â©<ExternalLinkIcon/></a></p>
</li>
</ul>
</div></template>


