<template><div><ul>
<li><a href="http://nsddd.top" target="_blank" rel="noopener noreferrer">author<ExternalLinkIcon/></a></li>
</ul>
<h1 id="ç¬¬33èŠ‚-sealos-pr" tabindex="-1"><a class="header-anchor" href="#ç¬¬33èŠ‚-sealos-pr" aria-hidden="true">#</a> ç¬¬33èŠ‚ sealos PR</h1>
<div><a href = '32.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '34.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>
<blockquote>
<p>â¤ï¸ğŸ’•ğŸ’•è®°å½•<a href="https://github.com/3293172751/sealos" target="_blank" rel="noopener noreferrer">sealos<ExternalLinkIcon/></a>å¼€æºé¡¹ç›®çš„å­¦ä¹ è¿‡ç¨‹ã€‚<a href="https://github.com/3293172751/sealos" target="_blank" rel="noopener noreferrer">k8s,dockerå’Œäº‘åŸç”Ÿçš„å­¦ä¹ <ExternalLinkIcon/></a>ã€‚Myblog:<a href="http://nsddd.top/" target="_blank" rel="noopener noreferrer">http://nsddd.top<ExternalLinkIcon/></a></p>
</blockquote>
<hr>
<p>[TOC]</p>
<h1 id="planning-draft" tabindex="-1"><a class="header-anchor" href="#planning-draft" aria-hidden="true">#</a> Planning Draft</h1>
<h2 id="problem-description" tabindex="-1"><a class="header-anchor" href="#problem-description" aria-hidden="true">#</a> Problem Description</h2>
<p>#2863</p>
<p>Sealos currently does not support the k3s runtime and requires the redesign of the runtime interface to avoid excessive coupling with the Processor and to add verification.</p>
<p>Here is a record of <a href="https://docker.nsddd.top/Cloud-Native-k8s/15.html" target="_blank" rel="noopener noreferrer">testing various k3s installation methods<ExternalLinkIcon/></a>. If you're curious about k3s, be sure to read <a href="https://docker.nsddd.top/Cloud-Native-k8s/14.html" target="_blank" rel="noopener noreferrer">this note<ExternalLinkIcon/></a>, as well as k3s â€¢ <strong><a href="https://www.rancher.cn/k3s/" target="_blank" rel="noopener noreferrer">official<ExternalLinkIcon/></a> and <a href="https://docs.rancher.cn/" target="_blank" rel="noopener noreferrer">documentation<ExternalLinkIcon/></a></strong>, and its GitHub â€¢ <strong><a href="https://github.com/k3s-io/k3s/" target="_blank" rel="noopener noreferrer">open source address<ExternalLinkIcon/></a></strong>.</p>
<br>
<h2 id="solution" tabindex="-1"><a class="header-anchor" href="#solution" aria-hidden="true">#</a> Solution</h2>
<h4 id="design-a-new-runtime-interface" tabindex="-1"><a class="header-anchor" href="#design-a-new-runtime-interface" aria-hidden="true">#</a> Design a new runtime interface</h4>
<p>Redesign the runtime interface to avoid excessive coupling with the Processor and add verification.</p>
<h4 id="design-ideas-for-the-k3s-runtime-module" tabindex="-1"><a class="header-anchor" href="#design-ideas-for-the-k3s-runtime-module" aria-hidden="true">#</a> Design ideas for the k3s runtime module</h4>
<p>To support the k3s runtime, we need to add a new runtime module. This module needs to support the following functions:</p>
<ul>
<li>Execute k3s installation commands</li>
<li>Execute k3s upgrade commands</li>
<li>Execute k3s uninstall commands</li>
</ul>
<h4 id="design-the-k3s-directory-and-filesystem-distribution-using-sealos-image-distribution-logic" tabindex="-1"><a class="header-anchor" href="#design-the-k3s-directory-and-filesystem-distribution-using-sealos-image-distribution-logic" aria-hidden="true">#</a> Design the k3s directory and filesystem distribution using Sealos' image distribution logic</h4>
<p>To support the k3s runtime, we need to use Sealos' image distribution logic to design the k3s directory and filesystem distribution of the k3s image.</p>
<h4 id="optimize-the-packaging-of-kubeadm-and-k3s-binaries" tabindex="-1"><a class="header-anchor" href="#optimize-the-packaging-of-kubeadm-and-k3s-binaries" aria-hidden="true">#</a> Optimize the packaging of kubeadm and k3s binaries</h4>
<p>To support the k3s runtime, we need to optimize the packaging of kubeadm and k3s binaries.</p>
<h4 id="provide-unit-test-and-ci-flow-to-ensure-code-quality" tabindex="-1"><a class="header-anchor" href="#provide-unit-test-and-ci-flow-to-ensure-code-quality" aria-hidden="true">#</a> Provide unit test and CI flow to ensure code quality</h4>
<p>To ensure code quality, we need to provide unit testing and CI flow.</p>
<br>
<h2 id="tasks" tabindex="-1"><a class="header-anchor" href="#tasks" aria-hidden="true">#</a> Tasks</h2>
<table>
<thead>
<tr>
<th>Type</th>
<th>Improvements</th>
<th>Issue</th>
<th>PR</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>ğŸš€ Feature</td>
<td>Design a new runtime interface to avoid excessive coupling with the Processor and add verification</td>
<td>#1943, #2037</td>
<td></td>
<td>âœ…</td>
</tr>
<tr>
<td>ğŸ”¨ Enhancement</td>
<td>Implement the k3s runtime module to support k3s installation, upgrade, and uninstall commands</td>
<td></td>
<td></td>
<td>âŒ</td>
</tr>
<tr>
<td>ğŸ”§ Maintenance</td>
<td>Design the k3s directory and filesystem distribution using Sealos' image distribution logic</td>
<td></td>
<td></td>
<td>âŒ</td>
</tr>
<tr>
<td>ğŸ‘Œ Refactoring</td>
<td>Optimize the packaging of kubeadm and k3s binaries</td>
<td></td>
<td></td>
<td>âŒ</td>
</tr>
<tr>
<td>ğŸ§ª Testing</td>
<td>Provide unit testing and CI flow to ensure code quality</td>
<td></td>
<td></td>
<td>âŒ</td>
</tr>
<tr>
<td>ğŸ“ˆ Metrics</td>
<td>Compare k3s and k0s, as well as Kubernetes for various changes in sealos, for users to choose according to their scenarios</td>
<td></td>
<td></td>
<td>âŒ</td>
</tr>
<tr>
<td>ğŸ¯ Fix</td>
<td>The current logic of sealos run will parse the environment variable $, which inevitably needs to be fixed.</td>
<td>#2861</td>
<td>#2862</td>
<td>âœ…</td>
</tr>
</tbody>
</table>
<h2 id="end-é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#end-é“¾æ¥" aria-hidden="true">#</a> END é“¾æ¥</h2>
<ul><li><div><a href = '32.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '34.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>
<ul>
<li>
<p><RouterLink to="/">â“‚ï¸å›åˆ°ç›®å½•ğŸ </RouterLink></p>
</li>
<li>
<p><a href="https://nsddd.top/archives/contributors" target="_blank" rel="noopener noreferrer"><strong>ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–</strong><ExternalLinkIcon/></a>)</p>
</li>
<li>
<p>âœ´ï¸ç‰ˆæƒå£°æ˜ Â© ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª<a href="http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="noopener noreferrer">CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰Â©<ExternalLinkIcon/></a></p>
</li>
</ul>
</div></template>


