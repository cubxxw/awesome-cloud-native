<template><div><ul>
<li><a href="http://nsddd.top" target="_blank" rel="noopener noreferrer">author<ExternalLinkIcon/></a></li>
</ul>
<h1 id="ç¬¬86èŠ‚-gorelease" tabindex="-1"><a class="header-anchor" href="#ç¬¬86èŠ‚-gorelease" aria-hidden="true">#</a> ç¬¬86èŠ‚ Gorelease</h1>
<div><a href = '85.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '87.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>
<blockquote>
<p>â¤ï¸ğŸ’•ğŸ’•è®°å½•<a href="https://github.com/cubxxw/sealos" target="_blank" rel="noopener noreferrer">sealos<ExternalLinkIcon/></a>å¼€æºé¡¹ç›®çš„å­¦ä¹ è¿‡ç¨‹ã€‚<a href="https://github.com/cubxxw/sealos" target="_blank" rel="noopener noreferrer">k8s,dockerå’Œäº‘åŸç”Ÿçš„å­¦ä¹ <ExternalLinkIcon/></a>ã€‚Myblog:<a href="http://nsddd.top/" target="_blank" rel="noopener noreferrer">http://nsddd.top<ExternalLinkIcon/></a></p>
</blockquote>
<hr>
<p>[TOC]</p>
<p>GoReleaser çš„ç›®æ ‡æ˜¯è‡ªåŠ¨åŒ–å‘å¸ƒè½¯ä»¶æ—¶çš„å¤§éƒ¨åˆ†æ— èŠå·¥ä½œï¼Œæœ€å¥½ä½¿ç”¨åˆç†çš„é»˜è®¤å€¼å¹¶ä½¿æœ€å¸¸è§çš„ç”¨ä¾‹å˜å¾—ç®€å•ã€‚</p>
<p><strong>éœ€è¦å“ªäº›ä¸œè¥¿ï¼š</strong></p>
<ul>
<li>
<p><code v-pre>.goreleaser.yaml</code><a href="https://goreleaser.com/customization" target="_blank" rel="noopener noreferrer">éƒ¨åˆ†ï¼‰<ExternalLinkIcon/></a></p>
<p>åŒ…å«é…ç½®çš„æ–‡ä»¶ï¼ˆæœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…è‡ªå®šä¹‰</p>
</li>
<li>
<p>ä¸€æ£µå¹²å‡€çš„å·¥ä½œæ ‘</p>
</li>
<li>
<p>SemVer å…¼å®¹ç‰ˆæœ¬ï¼ˆä¾‹å¦‚<code v-pre>10.21.34-prerelease+buildmeta</code>ï¼‰</p>
</li>
</ul>
<p><strong>GoReleaser è¿è¡Œåˆ†ä¸º 4 ä¸ªä¸»è¦æ­¥éª¤ï¼š</strong></p>
<ul>
<li><strong>defaulting</strong>ï¼šä¸ºæ¯ä¸ªæ­¥éª¤é…ç½®åˆç†çš„é»˜è®¤å€¼</li>
<li><strong>Building</strong>ï¼šæ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶ã€æ¡£æ¡ˆã€åŒ…ã€Docker é•œåƒç­‰</li>
<li><strong>release</strong>ï¼šå°†ç‰ˆæœ¬å‘å¸ƒåˆ°é…ç½®çš„ SCMã€Docker æ³¨å†Œè¡¨ã€blob å­˜å‚¨...</li>
<li><strong>announcing</strong>ï¼šå‘é…ç½®çš„é¢‘é“å®£å¸ƒæ‚¨çš„å‘å¸ƒ</li>
</ul>
<p>ä½¿ç”¨ -like æ ‡å¿—å¯èƒ½ä¼šè·³è¿‡æŸäº›æ­¥éª¤<code v-pre>--skip-foo</code></p>
<h2 id="quick-start" tabindex="-1"><a class="header-anchor" href="#quick-start" aria-hidden="true">#</a> <strong>Quick Start</strong></h2>
<p>è¿è¡Œ<a href="https://goreleaser.com/cmd/goreleaser_init/" target="_blank" rel="noopener noreferrer">init<ExternalLinkIcon/></a>å‘½ä»¤æ¥åˆ›å»ºç¤ºä¾‹<code v-pre>.goreleaser.yaml</code>æ–‡ä»¶ï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code>goreleaser init
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬è¿è¡Œä¸€ä¸ªâ€œä»…é™æœ¬åœ°â€ç‰ˆæœ¬ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦å¯ä»¥ä½¿ç”¨<a href="https://goreleaser.com/cmd/goreleaser_release/" target="_blank" rel="noopener noreferrer">release<ExternalLinkIcon/></a>å‘½ä»¤è¿è¡Œï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code>goreleaser release <span class="token punctuation">-</span><span class="token punctuation">-</span>snapshot <span class="token punctuation">-</span><span class="token punctuation">-</span>clean
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ­¤æ—¶ï¼Œæ‚¨å¯ä»¥<a href="https://goreleaser.com/customization/" target="_blank" rel="noopener noreferrer">è‡ªå®šä¹‰<ExternalLinkIcon/></a>ç”Ÿæˆçš„å†…å®¹<code v-pre>.goreleaser.yaml</code>æˆ–ä¿æŒåŸæ ·ï¼Œè¿™å–å†³äºæ‚¨ã€‚æœ€ä½³åšæ³•æ˜¯æ£€æŸ¥<code v-pre>.goreleaser.yaml</code>æºä»£ç æ§åˆ¶ã€‚</p>
<p>æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ GoReleaserä»…ä¸ºç»™å®šçš„ GOOS/GOARCH<a href="https://goreleaser.com/cmd/goreleaser_build/" target="_blank" rel="noopener noreferrer">æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¿™å¯¹äºæœ¬åœ°å¼€å‘å¾ˆæœ‰ç”¨ï¼š<ExternalLinkIcon/></a></p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code>goreleaser build <span class="token punctuation">-</span><span class="token punctuation">-</span>single<span class="token punctuation">-</span>target
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>éœ€è¦ç”¨ Token:</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code>export GITHUB_TOKEN="YOUR_GH_TOKEN"
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>GoReleaser å°†ä½¿ç”¨æ‚¨å­˜å‚¨åº“çš„æœ€æ–°<a href="https://git-scm.com/book/en/v2/Git-Basics-Tagging" target="_blank" rel="noopener noreferrer">Git æ ‡ç­¾<ExternalLinkIcon/></a>ã€‚</p>
<p>ç°åœ¨ï¼Œåˆ›å»ºä¸€ä¸ªæ ‡ç­¾å¹¶å°†å…¶æ¨é€åˆ° GitHubï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code>git tag <span class="token punctuation">-</span>a v0.1.0 <span class="token punctuation">-</span>m "First release"
git push origin v0.1.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨æ‚¨å¯ä»¥åœ¨å­˜å‚¨åº“çš„æ ¹ç›®å½•è¿è¡Œ GoReleaserï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code>goreleaser release
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="github-actions" tabindex="-1"><a class="header-anchor" href="#github-actions" aria-hidden="true">#</a> github actions</h2>
<p>GoReleaser è¿˜å¯ä»¥é€šè¿‡<a href="https://github.com/features/actions" target="_blank" rel="noopener noreferrer">GitHub Actionsåœ¨æˆ‘ä»¬çš„å®˜æ–¹<ExternalLinkIcon/></a><a href="https://github.com/goreleaser/goreleaser-action" target="_blank" rel="noopener noreferrer">GoReleaser Action<ExternalLinkIcon/></a>ä¸­ä½¿ç”¨ã€‚</p>
<p>æ‚¨å¯ä»¥é€šè¿‡å°† YAML é…ç½®æ”¾å…¥<code v-pre>.github/workflows/release.yml</code>.</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> goreleaser

<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token comment"># run only against tags</span>
    <span class="token key atrule">tags</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">'*'</span>

<span class="token key atrule">permissions</span><span class="token punctuation">:</span>
  <span class="token key atrule">contents</span><span class="token punctuation">:</span> write
  <span class="token comment"># packages: write</span>
  <span class="token comment"># issues: write</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">goreleaser</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">fetch-depth</span><span class="token punctuation">:</span> <span class="token number">0</span>
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> git fetch <span class="token punctuation">-</span><span class="token punctuation">-</span>force <span class="token punctuation">-</span><span class="token punctuation">-</span>tags
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>go@v4
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">go-version</span><span class="token punctuation">:</span> stable
      <span class="token comment"># More assembly might be required: Docker logins, GPG, etc. It all depends</span>
      <span class="token comment"># on your needs.</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> goreleaser/goreleaser<span class="token punctuation">-</span>action@v4
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token comment"># either 'goreleaser' (default) or 'goreleaser-pro':</span>
          <span class="token key atrule">distribution</span><span class="token punctuation">:</span> goreleaser
          <span class="token key atrule">version</span><span class="token punctuation">:</span> latest
          <span class="token key atrule">args</span><span class="token punctuation">:</span> release <span class="token punctuation">-</span><span class="token punctuation">-</span>clean
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token key atrule">GITHUB_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITHUB_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token comment"># Your GoReleaser Pro key, if you are using the 'goreleaser-pro'</span>
          <span class="token comment"># distribution:</span>
          <span class="token comment"># GORELEASER_KEY: ${{ secrets.GORELEASER_KEY }}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>GoReleaser éœ€è¦ä»¥ä¸‹<a href="https://docs.github.com/en/actions/reference/authentication-in-a-workflow#permissions-for-the-github_token" target="_blank" rel="noopener noreferrer">æƒé™ï¼š<ExternalLinkIcon/></a></p>
<ul>
<li><code v-pre>contents: write</code>å¦‚æœä½ æ„¿æ„
<ul>
<li><a href="https://goreleaser.com/customization/release/" target="_blank" rel="noopener noreferrer">å°†æ¡£æ¡ˆä¸Šä¼ ä¸º GitHub Releases<ExternalLinkIcon/></a>ï¼Œæˆ–</li>
<li>å‘å¸ƒåˆ°<a href="https://goreleaser.com/customization/homebrew/" target="_blank" rel="noopener noreferrer">Homebrew<ExternalLinkIcon/></a>æˆ–<a href="https://goreleaser.com/customization/scoop/" target="_blank" rel="noopener noreferrer">Scoop<ExternalLinkIcon/></a>ï¼ˆå‡è®¾å®ƒæ˜¯åŒä¸€å­˜å‚¨åº“çš„ä¸€éƒ¨åˆ†ï¼‰</li>
</ul>
</li>
<li>æˆ–è€…<code v-pre>contents: read</code>å¦‚æœæ‚¨ä¸éœ€è¦ä»¥ä¸Šä»»ä½•ä¸€é¡¹</li>
<li><code v-pre>packages: write</code>å¦‚æœä½ <a href="https://goreleaser.com/customization/docker/" target="_blank" rel="noopener noreferrer">å°† Docker é•œåƒæ¨é€åˆ°<ExternalLinkIcon/></a>GitHub</li>
<li><code v-pre>issues: write</code>å¦‚æœæ‚¨ä½¿ç”¨<a href="https://goreleaser.com/customization/milestone/" target="_blank" rel="noopener noreferrer">é‡Œç¨‹ç¢‘å…³é—­åŠŸèƒ½<ExternalLinkIcon/></a></li>
</ul>
<p><code v-pre>GITHUB_TOKEN</code>æƒé™<a href="https://help.github.com/en/actions/configuring-and-managing-workflows/authenticating-with-the-github_token#about-the-github_token-secret" target="_blank" rel="noopener noreferrer">ä»…é™äº<ExternalLinkIcon/></a>åŒ…å«æ‚¨çš„å·¥ä½œæµç¨‹çš„å­˜å‚¨åº“ã€‚</p>
<p>å¦‚æœæ‚¨éœ€è¦å°†è‡ªåˆ¶ç¨‹åº Tap æ¨é€åˆ°å¦ä¸€ä¸ªå­˜å‚¨åº“ï¼Œåˆ™å¿…é¡»åˆ›å»ºä¸€ä¸ªå…·æœ‰æƒé™çš„è‡ªå®šä¹‰<a href="https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/" target="_blank" rel="noopener noreferrer">ä¸ªäººè®¿é—®ä»¤ç‰Œï¼Œå¹¶å°†<ExternalLinkIcon/></a><a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/creating-and-using-encrypted-secrets" target="_blank" rel="noopener noreferrer">å…¶æ·»åŠ ä¸ºå­˜å‚¨åº“ä¸­çš„æœºå¯†<ExternalLinkIcon/></a>ã€‚å¦‚æœæ‚¨åˆ›å»ºåä¸º çš„æœºå¯†ï¼Œåˆ™æ­¥éª¤å°†å¦‚ä¸‹æ‰€ç¤ºï¼š<code v-pre>repoGH_PAT</code></p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Run GoReleaser
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> goreleaser/goreleaser<span class="token punctuation">-</span>action@v4
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">version</span><span class="token punctuation">:</span> latest
          <span class="token key atrule">args</span><span class="token punctuation">:</span> release <span class="token punctuation">-</span><span class="token punctuation">-</span>clean
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token key atrule">GITHUB_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GH_PAT <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å®šåˆ¶åŒ–éœ€æ±‚" tabindex="-1"><a class="header-anchor" href="#å®šåˆ¶åŒ–éœ€æ±‚" aria-hidden="true">#</a> å®šåˆ¶åŒ–éœ€æ±‚</h2>
<p>GoReleaser å¯ä»¥é€šè¿‡è°ƒæ•´<code v-pre>.goreleaser.yaml</code>æ–‡ä»¶æ¥å®šåˆ¶ã€‚</p>
<p><code v-pre>[goreleaser init](https://goreleaser.com/cmd/goreleaser_init/)</code>æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œæˆ–ä»å¤´å¼€å§‹ç”Ÿæˆç¤ºä¾‹é…ç½®ã€‚</p>
<p>æ‚¨è¿˜å¯ä»¥é€šè¿‡è¿è¡Œæ¥æ£€æŸ¥æ‚¨çš„é…ç½®æ˜¯å¦æœ‰æ•ˆ<code v-pre>[goreleaser check](https://goreleaser.com/cmd/goreleaser_check/)</code>ï¼Œè¿™ä¼šå‘Šè¯‰æ‚¨æ˜¯å¦ä½¿ç”¨äº†å·²å¼ƒç”¨æˆ–æ— æ•ˆçš„é€‰é¡¹ã€‚</p>
<h3 id="åç§°æ¨¡æ¿" tabindex="-1"><a class="header-anchor" href="#åç§°æ¨¡æ¿" aria-hidden="true">#</a> åç§°æ¨¡æ¿</h3>
<table>
<thead>
<tr>
<th>é’¥åŒ™</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>.ProjectName</td>
<td>é¡¹ç›®åç§°</td>
</tr>
<tr>
<td>.Version</td>
<td>æ­£åœ¨å‘å¸ƒçš„ç‰ˆæœ¬https://goreleaser.com/customization/templates/#fn:version-prefix</td>
</tr>
<tr>
<td>.Branch</td>
<td>å½“å‰çš„ git åˆ†æ”¯</td>
</tr>
<tr>
<td>.PrefixedTag</td>
<td>ä»¥ monorepo é…ç½®æ ‡ç­¾å‰ç¼€ä¸ºå‰ç¼€çš„å½“å‰ git æ ‡ç­¾ï¼ˆå¦‚æœæœ‰ï¼‰</td>
</tr>
<tr>
<td>.Tag</td>
<td>å½“å‰çš„ git æ ‡ç­¾</td>
</tr>
<tr>
<td>.PrefixedPreviousTag</td>
<td>ä¹‹å‰çš„ git æ ‡ç­¾å¸¦æœ‰ monorepo é…ç½®æ ‡ç­¾å‰ç¼€ï¼ˆå¦‚æœæœ‰ï¼‰</td>
</tr>
<tr>
<td>.PreviousTag</td>
<td>ä¹‹å‰çš„ git æ ‡ç­¾ï¼Œå¦‚æœæ²¡æœ‰ä¹‹å‰çš„æ ‡ç­¾åˆ™ä¸ºç©º</td>
</tr>
<tr>
<td>.ShortCommit</td>
<td>git æäº¤çŸ­å“ˆå¸Œ</td>
</tr>
<tr>
<td>.FullCommit</td>
<td>git æäº¤å®Œæ•´å“ˆå¸Œå€¼</td>
</tr>
<tr>
<td>.Commit</td>
<td>git æäº¤å“ˆå¸Œï¼ˆå·²å¼ƒç”¨ï¼‰</td>
</tr>
<tr>
<td>.CommitDate</td>
<td>RFC 3339 æ ¼å¼çš„ UTC æäº¤æ—¥æœŸ</td>
</tr>
<tr>
<td>.CommitTimestamp</td>
<td>Unix æ ¼å¼çš„ UTC æäº¤æ—¥æœŸ</td>
</tr>
<tr>
<td>.GitURL</td>
<td>git è¿œç¨‹ URL</td>
</tr>
<tr>
<td>.IsGitDirty</td>
<td>å½“å‰ git çŠ¶æ€æ˜¯å¦è„ã€‚è‡ª v1.19 èµ·ã€‚</td>
</tr>
<tr>
<td>.Major</td>
<td>ç‰ˆæœ¬https://goreleaser.com/customization/templates/#fn:tag-is-semver</td>
</tr>
<tr>
<td>.Minor</td>
<td>ç‰ˆæœ¬https://goreleaser.com/customization/templates/#fn:tag-is-semver</td>
</tr>
<tr>
<td>.Patch</td>
<td>https://goreleaser.com/customization/templates/#fn:tag-is-semverçš„è¡¥ä¸éƒ¨åˆ†</td>
</tr>
<tr>
<td>.Prerelease</td>
<td>ç‰ˆæœ¬çš„é¢„å‘è¡Œéƒ¨åˆ†ï¼Œä¾‹å¦‚betahttps://goreleaser.com/customization/templates/#fn:tag-is-semver</td>
</tr>
<tr>
<td>.RawVersion</td>
<td>https://goreleaser.com/customization/templates/#fn:tag-is-semverç»„æˆ{Major}.{Minor}.{Patch}</td>
</tr>
<tr>
<td>.ReleaseNotes</td>
<td>ç”Ÿæˆçš„å‘è¡Œè¯´æ˜ï¼Œåœ¨æ‰§è¡Œå˜æ›´æ—¥å¿—æ­¥éª¤åå¯ç”¨</td>
</tr>
<tr>
<td>.IsDraft</td>
<td>trueifrelease.draftåœ¨é…ç½®ä¸­è®¾ç½®ï¼Œfalseå¦åˆ™ã€‚è‡ª v1.17 èµ·ã€‚</td>
</tr>
<tr>
<td>.IsSnapshot</td>
<td>trueå¦‚æœ--snapshotå·²è®¾ç½®ï¼Œfalseå¦åˆ™</td>
</tr>
<tr>
<td>.IsNightly</td>
<td>trueå¦‚æœ--nightlyå·²è®¾ç½®ï¼Œfalseå¦åˆ™</td>
</tr>
<tr>
<td>.Env</td>
<td>åŒ…å«ç³»ç»Ÿç¯å¢ƒå˜é‡çš„æ˜ å°„</td>
</tr>
<tr>
<td>.Date</td>
<td>RFC 3339 æ ¼å¼çš„å½“å‰ UTC æ—¥æœŸ</td>
</tr>
<tr>
<td>.Now</td>
<td>å½“å‰ UTC æ—¥æœŸä½œä¸ºtime.Timeç»“æ„ï¼Œå…è®¸æ‰€æœ‰time.TimeåŠŸèƒ½ï¼ˆä¾‹å¦‚{{ .Now.Format &quot;2006&quot; }}ï¼‰ã€‚è‡ª v1.17 èµ·ã€‚</td>
</tr>
<tr>
<td>.Timestamp</td>
<td>Unix æ ¼å¼çš„å½“å‰ UTC æ—¶é—´</td>
</tr>
<tr>
<td>.ModulePath</td>
<td>go æ¨¡å—è·¯å¾„ï¼Œå¦‚æŠ¥å‘Šæ‰€ç¤ºgo list -m</td>
</tr>
<tr>
<td>incpatch &quot;v1.2.4&quot;</td>
<td>https://goreleaser.com/customization/templates/#fn:panic-if-not-semverçš„è¡¥ä¸</td>
</tr>
<tr>
<td>incminor &quot;v1.2.4&quot;</td>
<td>https://goreleaser.com/customization/templates/#fn:panic-if-not-semverçš„æ¬¡è¦ç‰ˆæœ¬</td>
</tr>
<tr>
<td>incmajor &quot;v1.2.4&quot;</td>
<td>å¢åŠ ç»™å®šç‰ˆæœ¬https://goreleaser.com/customization/templates/#fn:panic-if-not-semver</td>
</tr>
<tr>
<td>.ReleaseURL</td>
<td>å½“å‰ç‰ˆæœ¬ä¸‹è½½åœ°å€https://goreleaser.com/customization/templates/#fn:scm-release-url</td>
</tr>
<tr>
<td>.Summary</td>
<td>git æ‘˜è¦ï¼Œä¾‹å¦‚v1.0.0-10-g34f56g3https://goreleaser.com/customization/templates/#fn:git-summary</td>
</tr>
<tr>
<td>.PrefixedSummary</td>
<td>ä»¥ monorepo é…ç½®æ ‡ç­¾å‰ç¼€ä¸ºå‰ç¼€çš„ git æ‘˜è¦ï¼ˆå¦‚æœæœ‰ï¼‰</td>
</tr>
<tr>
<td>.TagSubject</td>
<td>å¸¦æ³¨é‡Šçš„æ ‡ç­¾æ¶ˆæ¯ä¸»é¢˜ï¼Œæˆ–è€…å®ƒæŒ‡å‡ºçš„æäº¤çš„æ¶ˆæ¯ä¸»é¢˜https://goreleaser.com/customization/templates/#fn:git-tag-subjectã€‚ä» v1.2 å¼€å§‹ã€‚</td>
</tr>
<tr>
<td>.TagContents</td>
<td>å¸¦æ³¨é‡Šçš„æ ‡ç­¾æ¶ˆæ¯ï¼Œæˆ–è€…å®ƒæŒ‡å‡ºçš„æäº¤æ¶ˆæ¯https://goreleaser.com/customization/templates/#fn:git-tag-body . ä» v1.2 å¼€å§‹ã€‚</td>
</tr>
<tr>
<td>.TagBody</td>
<td>å¸¦æ³¨é‡Šçš„æ ‡ç­¾æ¶ˆæ¯æ­£æ–‡ï¼Œæˆ–å…¶æŒ‡å‡ºçš„æäº¤çš„æ¶ˆæ¯æ­£æ–‡https://goreleaser.com/customization/templates/#fn:git-tag-bodyã€‚ä» v1.2 å¼€å§‹ã€‚</td>
</tr>
<tr>
<td>.Runtime.Goos</td>
<td>ç›¸å½“äºruntime.GOOS. ä» v1.5 å¼€å§‹ã€‚</td>
</tr>
<tr>
<td>.Runtime.Goarch</td>
<td>ç›¸å½“äºruntime.GOARCH. ä» v1.5 å¼€å§‹ã€‚</td>
</tr>
<tr>
<td>.Artifacts</td>
<td>å½“å‰å·¥ä»¶åˆ—è¡¨ã€‚å­—æ®µè§ä¸‹è¡¨ã€‚è‡ª v1.16-pro èµ·ã€‚</td>
</tr>
</tbody>
</table>
<h3 id="é…ç½®é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#é…ç½®é€‰é¡¹" aria-hidden="true">#</a> é…ç½®é€‰é¡¹</h3>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token comment"># Default: './dist'</span>
<span class="token key atrule">dist</span><span class="token punctuation">:</span> _output/dist

<span class="token key atrule">git</span><span class="token punctuation">:</span>
  <span class="token comment"># What should be used to sort tags when gathering the current and previous</span>
  <span class="token comment"># tags if there are more than one tag in the same commit.</span>
  <span class="token comment">#</span>
  <span class="token comment"># Default: '-version:refname'</span>
  <span class="token key atrule">tag_sort</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>version<span class="token punctuation">:</span>creatordate

  <span class="token comment"># What should be used to specify prerelease suffix while sorting tags when gathering</span>
  <span class="token comment"># the current and previous tags if there are more than one tag in the same commit.</span>
  <span class="token comment">#</span>
  <span class="token comment"># Since: v1.17</span>
  <span class="token key atrule">prerelease_suffix</span><span class="token punctuation">:</span> <span class="token string">"-"</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ„å»ºé€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#æ„å»ºé€‰é¡¹" aria-hidden="true">#</a> æ„å»ºé€‰é¡¹</h3>
<p>å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®šåˆ¶æ„å»ºã€‚æ‚¨å¯ä»¥æŒ‡å®šæ„å»ºå“ªäº›<code v-pre>GOOS</code>,<code v-pre>GOARCH</code>å’Œ<code v-pre>GOARM</code>äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆGoReleaser å°†ç”Ÿæˆæ‰€æœ‰ç»„åˆçš„çŸ©é˜µï¼‰ï¼Œå¹¶ä¸”æ‚¨å¯ä»¥æ›´æ”¹äºŒè¿›åˆ¶æ–‡ä»¶çš„åç§°ã€æ ‡å¿—ã€ç¯å¢ƒå˜é‡ã€æŒ‚é’©ç­‰ã€‚</p>
<p>builds æ˜¯é…ç½®æ–‡ä»¶ä¸­æœ€é‡è¦çš„ä¸€ä¸ªé€‰é¡¹ï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token comment"># .goreleaser.yaml</span>
<span class="token key atrule">builds</span><span class="token punctuation">:</span>
  <span class="token comment"># You can have multiple builds defined as a yaml list</span>
  <span class="token punctuation">-</span> <span class="token comment">#</span>
    <span class="token comment"># ID of the build.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: Binary name</span>
    <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token string">"my-build"</span>

    <span class="token comment"># Path to main.go file or main package.</span>
    <span class="token comment"># Notice: when used with `gomod.proxy`, this must be a package.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default is `.`.</span>
    <span class="token key atrule">main</span><span class="token punctuation">:</span> ./cmd/my<span class="token punctuation">-</span>app

    <span class="token comment"># Binary name.</span>
    <span class="token comment"># Can be a path (e.g. `bin/app`) to wrap the binary in a directory.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: Project directory name</span>
    <span class="token key atrule">binary</span><span class="token punctuation">:</span> program

    <span class="token comment"># Custom flags.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Templates: allowed</span>
    <span class="token key atrule">flags</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token punctuation">-</span>tags=dev
      <span class="token punctuation">-</span> <span class="token punctuation">-</span>v

    <span class="token comment"># Custom asmflags.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Templates: allowed</span>
    <span class="token key atrule">asmflags</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token punctuation">-</span>D mysymbol
      <span class="token punctuation">-</span> all=<span class="token punctuation">-</span>trimpath=<span class="token punctuation">{</span><span class="token punctuation">{</span>.Env.GOPATH<span class="token punctuation">}</span><span class="token punctuation">}</span>

    <span class="token comment"># Custom gcflags.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Templates: allowed</span>
    <span class="token key atrule">gcflags</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> all=<span class="token punctuation">-</span>trimpath=<span class="token punctuation">{</span><span class="token punctuation">{</span>.Env.GOPATH<span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token punctuation">-</span> ./dontoptimizeme=<span class="token punctuation">-</span>N

    <span class="token comment"># Custom ldflags.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: '-s -w -X main.version={{.Version}} -X main.commit={{.Commit}} -X main.date={{.Date}} -X main.builtBy=goreleaser'</span>
    <span class="token comment"># Templates: allowed</span>
    <span class="token key atrule">ldflags</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token punctuation">-</span>s <span class="token punctuation">-</span>w <span class="token punctuation">-</span>X main.build=<span class="token punctuation">{</span><span class="token punctuation">{</span>.Version<span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token punctuation">-</span> ./usemsan=<span class="token punctuation">-</span>msan

    <span class="token comment"># Custom Go build mode.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Valid options:</span>
    <span class="token comment"># - `c-shared`</span>
    <span class="token comment"># - `c-archive`</span>
    <span class="token comment">#</span>
    <span class="token comment"># Since: v1.13</span>
    <span class="token key atrule">buildmode</span><span class="token punctuation">:</span> c<span class="token punctuation">-</span>shared

    <span class="token comment"># Custom build tags templates.</span>
    <span class="token key atrule">tags</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> osusergo
      <span class="token punctuation">-</span> netgo
      <span class="token punctuation">-</span> static_build
      <span class="token punctuation">-</span> feature

    <span class="token comment"># Custom environment variables to be set during the builds.</span>
    <span class="token comment"># Invalid environment variables will be ignored.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: os.Environ() ++ env config section</span>
    <span class="token comment"># Templates: allowed (since v1.14)</span>
    <span class="token key atrule">env</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> CGO_ENABLED=0
      <span class="token comment"># complex, templated envs (v1.14+):</span>
      <span class="token punctuation">-</span> <span class="token punctuation">></span><span class="token punctuation">-</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> if eq .Os "darwin" <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> if eq .Arch "amd64"<span class="token punctuation">}</span><span class="token punctuation">}</span>CC=o64<span class="token punctuation">-</span>clang<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> end <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> if eq .Arch "arm64"<span class="token punctuation">}</span><span class="token punctuation">}</span>CC=aarch64<span class="token punctuation">-</span>apple<span class="token punctuation">-</span>darwin20.2<span class="token punctuation">-</span>clang<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> end <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> end <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> if eq .Os "windows" <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> if eq .Arch "amd64" <span class="token punctuation">}</span><span class="token punctuation">}</span>CC=x86_64<span class="token punctuation">-</span>w64<span class="token punctuation">-</span>mingw32<span class="token punctuation">-</span>gcc<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> end <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token punctuation">-</span> end <span class="token punctuation">}</span><span class="token punctuation">}</span>

    <span class="token comment"># GOOS list to build for.</span>
    <span class="token comment"># For more info refer to: https://golang.org/doc/install/source#environment</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: [ 'darwin', 'linux', 'windows' ]</span>
    <span class="token key atrule">goos</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> freebsd
      <span class="token punctuation">-</span> windows

    <span class="token comment"># GOARCH to build for.</span>
    <span class="token comment"># For more info refer to: https://golang.org/doc/install/source#environment</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: [ '386', 'amd64', 'arm64' ]</span>
    <span class="token key atrule">goarch</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> amd64
      <span class="token punctuation">-</span> arm
      <span class="token punctuation">-</span> arm64

    <span class="token comment"># GOARM to build for when GOARCH is arm.</span>
    <span class="token comment"># For more info refer to: https://golang.org/doc/install/source#environment</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: [ 6 ]</span>
    <span class="token key atrule">goarm</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token number">6</span>
      <span class="token punctuation">-</span> <span class="token number">7</span>

    <span class="token comment"># GOAMD64 to build when GOARCH is amd64.</span>
    <span class="token comment"># For more info refer to: https://golang.org/doc/install/source#environment</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: [ 'v1' ]</span>
    <span class="token key atrule">goamd64</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> v2
      <span class="token punctuation">-</span> v3

    <span class="token comment"># GOMIPS and GOMIPS64 to build when GOARCH is mips, mips64, mipsle or mips64le.</span>
    <span class="token comment"># For more info refer to: https://golang.org/doc/install/source#environment</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: [ 'hardfloat' ]</span>
    <span class="token key atrule">gomips</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> hardfloat
      <span class="token punctuation">-</span> softfloat

    <span class="token comment"># List of combinations of GOOS + GOARCH + GOARM to ignore.</span>
    <span class="token key atrule">ignore</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">goos</span><span class="token punctuation">:</span> darwin
        <span class="token key atrule">goarch</span><span class="token punctuation">:</span> <span class="token number">386</span>
      <span class="token punctuation">-</span> <span class="token key atrule">goos</span><span class="token punctuation">:</span> linux
        <span class="token key atrule">goarch</span><span class="token punctuation">:</span> arm
        <span class="token key atrule">goarm</span><span class="token punctuation">:</span> <span class="token number">7</span>
      <span class="token punctuation">-</span> <span class="token key atrule">goarm</span><span class="token punctuation">:</span> mips64
      <span class="token punctuation">-</span> <span class="token key atrule">gomips</span><span class="token punctuation">:</span> hardfloat
      <span class="token punctuation">-</span> <span class="token key atrule">goamd64</span><span class="token punctuation">:</span> v4

    <span class="token comment"># Optionally override the matrix generation and specify only the final list</span>
    <span class="token comment"># of targets.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Format is `{goos}_{goarch}` with their respective suffixes when</span>
    <span class="token comment"># applicable: `_{goarm}`, `_{goamd64}`, `_{gomips}`.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Special values:</span>
    <span class="token comment"># - go_118_first_class: evaluates to the first-class ports of go1.18.</span>
    <span class="token comment"># - go_first_class: evaluates to latest stable go first-class ports,</span>
    <span class="token comment">#   currently same as 1.18.</span>
    <span class="token comment">#</span>
    <span class="token comment"># This overrides `goos`, `goarch`, `goarm`, `gomips`, `goamd64` and</span>
    <span class="token comment"># `ignores`.</span>
    <span class="token key atrule">targets</span><span class="token punctuation">:</span>
      <span class="token comment"># Since: v1.9</span>
      <span class="token punctuation">-</span> go_first_class
      <span class="token comment"># Since: v1.9</span>
      <span class="token punctuation">-</span> go_118_first_class
      <span class="token punctuation">-</span> linux_amd64_v1
      <span class="token punctuation">-</span> darwin_arm64
      <span class="token punctuation">-</span> linux_arm_6

    <span class="token comment"># Set a specific go binary to use when building.</span>
    <span class="token comment"># It is safe to ignore this option in most cases.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default is "go"</span>
    <span class="token key atrule">gobinary</span><span class="token punctuation">:</span> <span class="token string">"go1.13.4"</span>

    <span class="token comment"># Sets the command to run to build.</span>
    <span class="token comment"># Can be useful if you want to build tests, for example,</span>
    <span class="token comment"># in which case you can set this to "test".</span>
    <span class="token comment"># It is safe to ignore this option in most cases.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: build.</span>
    <span class="token comment"># Since: v1.9</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> test

    <span class="token comment"># Set the modified timestamp on the output binary, typically</span>
    <span class="token comment"># you would do this to ensure a build was reproducible. Pass</span>
    <span class="token comment"># empty string to skip modifying the output.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Templates: allowed.</span>
    <span class="token key atrule">mod_timestamp</span><span class="token punctuation">:</span> <span class="token string">"{{ .CommitTimestamp }}"</span>

    <span class="token comment"># Hooks can be used to customize the final binary,</span>
    <span class="token comment"># for example, to run generators.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Templates: allowed</span>
    <span class="token key atrule">hooks</span><span class="token punctuation">:</span>
      <span class="token key atrule">pre</span><span class="token punctuation">:</span> rice embed<span class="token punctuation">-</span>go
      <span class="token key atrule">post</span><span class="token punctuation">:</span> ./script.sh <span class="token punctuation">{</span><span class="token punctuation">{</span> .Path <span class="token punctuation">}</span><span class="token punctuation">}</span>

    <span class="token comment"># If true, skip the build.</span>
    <span class="token comment"># Useful for library projects.</span>
    <span class="token key atrule">skip</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

    <span class="token comment"># By default, GoReleaser will create your binaries inside</span>
    <span class="token comment"># `dist/${BuildID}_${BuildTarget}`, which is a unique directory per build</span>
    <span class="token comment"># target in the matrix.</span>
    <span class="token comment"># You can set subdirs within that folder using the `binary` property.</span>
    <span class="token comment">#</span>
    <span class="token comment"># However, if for some reason you don't want that unique directory to be</span>
    <span class="token comment"># created, you can set this property.</span>
    <span class="token comment"># If you do, you are responsible for keeping different builds from</span>
    <span class="token comment"># overriding each other.</span>
    <span class="token key atrule">no_unique_dist_dir</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

    <span class="token comment"># By default, GoReleaser will check if the main filepath has a main</span>
    <span class="token comment"># function.</span>
    <span class="token comment"># This can be used to skip that check, in case you're building tests, for</span>
    <span class="token comment"># example.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Since: v1.9</span>
    <span class="token key atrule">no_main_check</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

    <span class="token comment"># Path to project's (sub)directory containing Go code.</span>
    <span class="token comment"># This is the working directory for the Go build command(s).</span>
    <span class="token comment"># If dir does not contain a `go.mod` file, and you are using `gomod.proxy`,</span>
    <span class="token comment"># produced binaries will be invalid.</span>
    <span class="token comment"># You would likely want to use `main` instead of this.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: '.'</span>
    <span class="token key atrule">dir</span><span class="token punctuation">:</span> go

    <span class="token comment"># Builder allows you to use a different build implementation.</span>
    <span class="token comment"># This is a GoReleaser Pro feature.</span>
    <span class="token comment"># Valid options are: `go` and `prebuilt`.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: 'go'</span>
    <span class="token key atrule">builder</span><span class="token punctuation">:</span> prebuilt

    <span class="token comment"># Overrides allows to override some fields for specific targets.</span>
    <span class="token comment"># This can be specially useful when using CGO.</span>
    <span class="token comment"># Note: it'll only match if the full target matches.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Since: v1.5</span>
    <span class="token key atrule">overrides</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">goos</span><span class="token punctuation">:</span> darwin
        <span class="token key atrule">goarch</span><span class="token punctuation">:</span> arm64
        <span class="token key atrule">goamd64</span><span class="token punctuation">:</span> v1
        <span class="token key atrule">goarm</span><span class="token punctuation">:</span> <span class="token string">""</span>
        <span class="token key atrule">gomips</span><span class="token punctuation">:</span> <span class="token string">""</span>
        <span class="token key atrule">ldflags</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> foo
        <span class="token key atrule">tags</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> bar
        <span class="token key atrule">asmflags</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> foobar
        <span class="token key atrule">gcflags</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> foobaz
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> CGO_ENABLED=1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åŒ…å«å¤šä¸ªäºŒè¿›åˆ¶æ–‡ä»¶çš„æ„å»ºï¼š</strong></p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token comment"># .goreleaser.yaml</span>
<span class="token key atrule">builds</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">main</span><span class="token punctuation">:</span> ./cmd/cli
    <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token string">"cli"</span>
    <span class="token key atrule">binary</span><span class="token punctuation">:</span> cli
    <span class="token key atrule">goos</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> linux
      <span class="token punctuation">-</span> darwin
      <span class="token punctuation">-</span> windows

  <span class="token punctuation">-</span> <span class="token key atrule">main</span><span class="token punctuation">:</span> ./cmd/worker
    <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token string">"worker"</span>
    <span class="token key atrule">binary</span><span class="token punctuation">:</span> worker
    <span class="token key atrule">goos</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> linux
      <span class="token punctuation">-</span> darwin
      <span class="token punctuation">-</span> windows

  <span class="token punctuation">-</span> <span class="token key atrule">main</span><span class="token punctuation">:</span> ./cmd/tracker
    <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token string">"tracker"</span>
    <span class="token key atrule">binary</span><span class="token punctuation">:</span> tracker
    <span class="token key atrule">goos</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> linux
      <span class="token punctuation">-</span> darwin
      <span class="token punctuation">-</span> windows
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>äºŒè¿›åˆ¶åç§°å­—æ®µæ”¯æŒ<a href="https://goreleaser.com/customization/templates/" target="_blank" rel="noopener noreferrer">æ¨¡æ¿åŒ–<ExternalLinkIcon/></a>ã€‚å…¬å¼€äº†ä»¥ä¸‹æ„å»ºè¯¦ç»†ä¿¡æ¯ï¼š</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>.Os</td>
<td>GOOS</td>
</tr>
<tr>
<td>.Arch</td>
<td>GOARCH</td>
</tr>
<tr>
<td>.Arm</td>
<td>GOARM</td>
</tr>
<tr>
<td>.Ext</td>
<td>Extension, e.g. .exe</td>
</tr>
<tr>
<td>.Target</td>
<td>Build target, e.g. darwin_amd64</td>
</tr>
</tbody>
</table>
<p>æ‚¨å¯ä»¥é€šè¿‡<code v-pre>{{ .Env.VARIABLE_NAME }}</code>åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä¾‹å¦‚ï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token comment"># .goreleaser.yaml</span>
<span class="token key atrule">builds</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">ldflags</span><span class="token punctuation">:</span>
   <span class="token punctuation">-</span> <span class="token punctuation">-</span>s <span class="token punctuation">-</span>w <span class="token punctuation">-</span>X "main.goversion=<span class="token punctuation">{</span><span class="token punctuation">{</span>.Env.GOVERSION<span class="token punctuation">}</span><span class="token punctuation">}</span>"
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åä½ å¯ä»¥è¿è¡Œï¼š</p>
<p><code v-pre>GOVERSION=$(go version) goreleaser</code></p>
<h2 id="build-hooks" tabindex="-1"><a class="header-anchor" href="#build-hooks" aria-hidden="true">#</a> build hooks</h2>
<p>pre å’Œ post æŒ‚é’©éƒ½<strong>é’ˆå¯¹æ¯ä¸ªæ„å»ºç›®æ ‡</strong>è¿è¡Œï¼Œæ— è®ºè¿™äº›ç›®æ ‡æ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿå’Œæ¶æ„çŸ©é˜µç”Ÿæˆè¿˜æ˜¯æ˜¾å¼å®šä¹‰ã€‚</p>
<p>é™¤äº†ä¸Šé¢æ‰€ç¤ºçš„ç®€å•å£°æ˜ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å£°æ˜<em>å¤šä¸ªæŒ‚é’©ï¼Œä»¥å¸®åŠ©ä¿æŒä¸åŒæ„å»ºç¯å¢ƒä¹‹é—´é…ç½®çš„å¯é‡ç”¨æ€§ã€‚</em></p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token comment"># .goreleaser.yaml</span>
<span class="token key atrule">builds</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token string">"with-hooks"</span>
    <span class="token key atrule">targets</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"darwin_amd64"</span>
      <span class="token punctuation">-</span> <span class="token string">"windows_amd64"</span>
    <span class="token key atrule">hooks</span><span class="token punctuation">:</span>
      <span class="token key atrule">pre</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> first<span class="token punctuation">-</span>script.sh
        <span class="token punctuation">-</span> second<span class="token punctuation">-</span>script.sh
      <span class="token key atrule">post</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> upx "<span class="token punctuation">{</span><span class="token punctuation">{</span> .Path <span class="token punctuation">}</span><span class="token punctuation">}</span>"
        <span class="token punctuation">-</span> codesign <span class="token punctuation">-</span>project="<span class="token punctuation">{</span><span class="token punctuation">{</span> .ProjectName <span class="token punctuation">}</span><span class="token punctuation">}</span>" "<span class="token punctuation">{</span><span class="token punctuation">{</span> .Path <span class="token punctuation">}</span><span class="token punctuation">}</span>"
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¯ä¸ªé’©å­è¿˜å¯ä»¥æœ‰è‡ªå·±çš„å·¥ä½œç›®å½•å’Œç¯å¢ƒå˜é‡ï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token comment"># .goreleaser.yaml</span>
<span class="token key atrule">builds</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token string">"with-hooks"</span>
    <span class="token key atrule">targets</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"darwin_amd64"</span>
      <span class="token punctuation">-</span> <span class="token string">"windows_amd64"</span>
    <span class="token key atrule">hooks</span><span class="token punctuation">:</span>
      <span class="token key atrule">pre</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">cmd</span><span class="token punctuation">:</span> first<span class="token punctuation">-</span>script.sh
          <span class="token key atrule">dir</span><span class="token punctuation">:</span>
            <span class="token string">"{{ dir .Dist}}"</span>
            <span class="token comment"># Always print command output, otherwise only visible in debug mode.</span>
            <span class="token comment"># Since: v1.5</span>
          <span class="token key atrule">output</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">env</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> HOOK_SPECIFIC_VAR=<span class="token punctuation">{</span><span class="token punctuation">{</span> .Env.GLOBAL_VAR <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">-</span> second<span class="token punctuation">-</span>script.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é’©å­çš„æ‰€æœ‰å±æ€§ï¼ˆ<code v-pre>cmd</code>ã€<code v-pre>dir</code>å’Œ<code v-pre>env</code>ï¼‰éƒ½æ”¯æŒä½¿ç”¨å…·æœ‰å¯ç”¨äºŒè¿›åˆ¶å·¥ä»¶çš„é’©å­<a href="https://goreleaser.com/customization/templates/" target="_blank" rel="noopener noreferrer">è¿›è¡Œæ¨¡æ¿åŒ–<ExternalLinkIcon/></a>ï¼ˆå› ä¸ºå®ƒä»¬åœ¨æ„å»º*åè¿è¡Œï¼‰ã€‚*æ­¤å¤–ï¼Œä»¥ä¸‹æ„å»ºè¯¦ç»†ä¿¡æ¯ä¹Ÿä¼šæš´éœ²ç»™å’Œé’©å­ï¼š<code v-pre>postprepost</code></p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>.Name</td>
<td>Filename of the binary, e.g.Â bin.exe</td>
</tr>
<tr>
<td>.Ext</td>
<td>Extension, e.g.Â .exe</td>
</tr>
<tr>
<td>.Path</td>
<td>Absolute path to the binary</td>
</tr>
<tr>
<td>.Target</td>
<td>Build target, e.g.Â darwin_amd64</td>
</tr>
</tbody>
</table>
<p>ç¯å¢ƒå˜é‡æŒ‰ä»¥ä¸‹é¡ºåºç»§æ‰¿å’Œè¦†ç›–ï¼š</p>
<ul>
<li>å…¨å±€ ( <code v-pre>env</code>)</li>
<li>æ„å»º ( <code v-pre>builds[].env</code>)</li>
<li>é’©å­ (<code v-pre>builds[].hooks.pre[].env</code>å’Œ<code v-pre>builds[].hooks.post[].env</code>)</li>
</ul>
<h3 id="æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#æ¨¡å—" aria-hidden="true">#</a> æ¨¡å—</h3>
<p>å¦‚æœæ‚¨ä½¿ç”¨å¸¦æœ‰ go æ¨¡å—æˆ– vgo çš„ Go 1.11+ï¼Œå½“ GoReleaser è¿è¡Œæ—¶ï¼Œå®ƒå¯èƒ½ä¼šå°è¯•ä¸‹è½½ä¾èµ–é¡¹ã€‚ç”±äºå¤šä¸ªæ„å»ºå¹¶è¡Œè¿è¡Œï¼Œå› æ­¤å¾ˆå¯èƒ½ä¼šå¤±è´¥ã€‚</p>
<p>æ‚¨å¯ä»¥é€šè¿‡<code v-pre>go mod tidy</code>åœ¨è°ƒç”¨ä¹‹å‰è¿è¡Œ<code v-pre>goreleaser</code>æˆ–æ·»åŠ ä¸€ä¸ªåœ¨æ–‡ä»¶ä¸Šæ‰§è¡Œæ­¤æ“ä½œçš„<a href="https://goreleaser.com/customization/hooks" target="_blank" rel="noopener noreferrer">æŒ‚é’©<ExternalLinkIcon/></a><code v-pre>.goreleaser.yaml</code>æ¥è§£å†³æ­¤é—®é¢˜ï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token comment"># .goreleaser.yaml</span>
<span class="token key atrule">before</span><span class="token punctuation">:</span>
  <span class="token key atrule">hooks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> go mod tidy
<span class="token comment"># rest of the file...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="" tabindex="-1"><a class="header-anchor" href="#" aria-hidden="true">#</a> </h2>
<h2 id="archives" tabindex="-1"><a class="header-anchor" href="#archives" aria-hidden="true">#</a> archives</h2>
<p><code v-pre>README</code>æ„å»ºçš„äºŒè¿›åˆ¶æ–‡ä»¶å°†ä¸å’Œæ–‡ä»¶ä¸€èµ·å½’æ¡£<code v-pre>LICENSE</code>åˆ°ä¸€ä¸ª<code v-pre>tar.gz</code>æ–‡ä»¶ä¸­ã€‚åœ¨æ­¤<code v-pre>archives</code>éƒ¨åˆ†ä¸­ï¼Œæ‚¨å¯ä»¥è‡ªå®šä¹‰å­˜æ¡£åç§°ã€å…¶ä»–æ–‡ä»¶å’Œæ ¼å¼ã€‚</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token comment"># .goreleaser.yaml</span>
<span class="token key atrule">archives</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token comment">#</span>
    <span class="token comment"># ID of this archive.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: 'default'</span>
    <span class="token key atrule">id</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>archive

    <span class="token comment"># Builds reference which build instances should be archived in this archive.</span>
    <span class="token key atrule">builds</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> default

    <span class="token comment"># Archive format. Valid options are `tar.gz`, `tgz`, `tar.xz`, `txz`, tar`, `gz`, `zip` and `binary`.</span>
    <span class="token comment"># If format is `binary`, no archives are created and the binaries are instead</span>
    <span class="token comment"># uploaded directly.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: 'tar.gz'</span>
    <span class="token key atrule">format</span><span class="token punctuation">:</span> zip

    <span class="token comment"># This will create an archive without any binaries, only the files are there.</span>
    <span class="token comment"># The name template must not contain any references to `Os`, `Arch` and etc, since the archive will be meta.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Since: v1.9</span>
    <span class="token comment"># Templates: allowed</span>
    <span class="token key atrule">meta</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

    <span class="token comment"># Archive name.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default:</span>
    <span class="token comment"># - if format is `binary`:</span>
    <span class="token comment">#   - `{{ .Binary }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}{{ with .Arm }}v{{ . }}{{ end }}{{ with .Mips }}_{{ . }}{{ end }}{{ if not (eq .Amd64 "v1") }}{{ .Amd64 }}{{ end }}`</span>
    <span class="token comment"># - if format is anything else:</span>
    <span class="token comment">#   - `{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}{{ with .Arm }}v{{ . }}{{ end }}{{ with .Mips }}_{{ . }}{{ end }}{{ if not (eq .Amd64 "v1") }}{{ .Amd64 }}{{ end }}`</span>
    <span class="token comment"># Templates: allowed</span>
    <span class="token key atrule">name_template</span><span class="token punctuation">:</span> <span class="token string">"{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}"</span>

    <span class="token comment"># Sets the given file info to all the binaries included from the `builds`.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: copied from the source binary.</span>
    <span class="token comment"># Since: v1.14</span>
    <span class="token key atrule">builds_info</span><span class="token punctuation">:</span>
      <span class="token key atrule">group</span><span class="token punctuation">:</span> root
      <span class="token key atrule">owner</span><span class="token punctuation">:</span> root
      <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token number">0644</span>
      <span class="token comment"># format is `time.RFC3339Nano`</span>
      <span class="token key atrule">mtime</span><span class="token punctuation">:</span> <span class="token datetime number">2008-01-02T15:04:05Z</span>

    <span class="token comment"># Set this to true if you want all files in the archive to be in a single directory.</span>
    <span class="token comment"># If set to true and you extract the archive 'goreleaser_Linux_arm64.tar.gz',</span>
    <span class="token comment"># you'll get a folder 'goreleaser_Linux_arm64'.</span>
    <span class="token comment"># If set to false, all files are extracted separately.</span>
    <span class="token comment"># You can also set it to a custom folder name (templating is supported).</span>
    <span class="token key atrule">wrap_in_directory</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

    <span class="token comment"># If set to true, will strip the parent directories away from binary files.</span>
    <span class="token comment">#</span>
    <span class="token comment"># This might be useful if you have your binary be built with a subdir for some reason, but do no want that subdir inside the archive.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Since: v1.11</span>
    <span class="token key atrule">strip_parent_binary_folder</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

    <span class="token comment"># This will make the destination paths be relative to the longest common</span>
    <span class="token comment"># path prefix between all the files matched and the source glob.</span>
    <span class="token comment"># Enabling this essentially mimic the behavior of nfpm's contents section.</span>
    <span class="token comment"># It will be the default by June 2023.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Since: v1.14</span>
    <span class="token key atrule">rlcp</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

    <span class="token comment"># Can be used to change the archive formats for specific GOOSs.</span>
    <span class="token comment"># Most common use case is to archive as zip on Windows.</span>
    <span class="token key atrule">format_overrides</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">goos</span><span class="token punctuation">:</span> windows
        <span class="token key atrule">format</span><span class="token punctuation">:</span> zip

    <span class="token comment"># Additional files/globs you want to add to the archive.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: [ 'LICENSE*', 'README*', 'CHANGELOG', 'license*', 'readme*', 'changelog']</span>
    <span class="token comment"># Templates: allowed</span>
    <span class="token key atrule">files</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> LICENSE.txt
      <span class="token punctuation">-</span> README_<span class="token punctuation">{</span><span class="token punctuation">{</span>.Os<span class="token punctuation">}</span><span class="token punctuation">}</span>.md
      <span class="token punctuation">-</span> CHANGELOG.md
      <span class="token punctuation">-</span> docs/*
      <span class="token punctuation">-</span> design/<span class="token important">*.png</span>
      <span class="token punctuation">-</span> templates/<span class="token important">**/*</span>
      <span class="token comment"># a more complete example, check the globbing deep dive below</span>
      <span class="token punctuation">-</span> <span class="token key atrule">src</span><span class="token punctuation">:</span> <span class="token string">"*.md"</span>
        <span class="token key atrule">dst</span><span class="token punctuation">:</span> docs

        <span class="token comment"># Strip parent folders when adding files to the archive.</span>
        <span class="token key atrule">strip_parent</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

        <span class="token comment"># File info.</span>
        <span class="token comment"># Not all fields are supported by all formats available formats.</span>
        <span class="token comment">#</span>
        <span class="token comment"># Default: copied from the source file</span>
        <span class="token key atrule">info</span><span class="token punctuation">:</span>
          <span class="token comment"># Templates: allowed (since v1.14)</span>
          <span class="token key atrule">owner</span><span class="token punctuation">:</span> root

          <span class="token comment"># Templates: allowed (since v1.14)</span>
          <span class="token key atrule">group</span><span class="token punctuation">:</span> root

          <span class="token comment"># Must be in time.RFC3339Nano format.</span>
          <span class="token comment">#</span>
          <span class="token comment"># Templates: allowed (since v1.14)</span>
          <span class="token key atrule">mtime</span><span class="token punctuation">:</span> <span class="token string">"{{ .CommitDate }}"</span>

          <span class="token comment"># File mode.</span>
          <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token number">0644</span>

    <span class="token comment"># Additional templated files to add to the archive.</span>
    <span class="token comment"># Those files will have their contents pass through the template engine,</span>
    <span class="token comment"># and its results will be added to the archive.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Since: v1.17 (pro)</span>
    <span class="token comment"># This feature is only available in GoReleaser Pro.</span>
    <span class="token comment"># Templates: allowed</span>
    <span class="token key atrule">templated_files</span><span class="token punctuation">:</span>
      <span class="token comment"># a more complete example, check the globbing deep dive below</span>
      <span class="token punctuation">-</span> <span class="token key atrule">src</span><span class="token punctuation">:</span> <span class="token string">"LICENSE.md.tpl"</span>
        <span class="token key atrule">dst</span><span class="token punctuation">:</span> LICENSE.md

        <span class="token comment"># File info.</span>
        <span class="token comment"># Not all fields are supported by all formats available formats.</span>
        <span class="token comment">#</span>
        <span class="token comment"># Default: copied from the source file</span>
        <span class="token key atrule">info</span><span class="token punctuation">:</span>
          <span class="token comment"># Templateable (since v1.14.0)</span>
          <span class="token key atrule">owner</span><span class="token punctuation">:</span> root

          <span class="token comment"># Templateable (since v1.14.0)</span>
          <span class="token key atrule">group</span><span class="token punctuation">:</span> root

          <span class="token comment"># Must be in time.RFC3339Nano format.</span>
          <span class="token comment"># Templateable (since v1.14.0)</span>
          <span class="token key atrule">mtime</span><span class="token punctuation">:</span> <span class="token string">"{{ .CommitDate }}"</span>

          <span class="token comment"># File mode.</span>
          <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token number">0644</span>

    <span class="token comment"># Before and after hooks for each archive.</span>
    <span class="token comment"># Skipped if archive format is binary.</span>
    <span class="token comment"># This feature is only available in GoReleaser Pro.</span>
    <span class="token key atrule">hooks</span><span class="token punctuation">:</span>
      <span class="token key atrule">before</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> make clean <span class="token comment"># simple string</span>
        <span class="token punctuation">-</span> <span class="token key atrule">cmd</span><span class="token punctuation">:</span> go generate ./<span class="token punctuation">...</span> <span class="token comment"># specify cmd</span>
        <span class="token punctuation">-</span> <span class="token key atrule">cmd</span><span class="token punctuation">:</span> go mod tidy
          <span class="token key atrule">output</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># always prints command output</span>
          <span class="token key atrule">dir</span><span class="token punctuation">:</span> ./submodule <span class="token comment"># specify command working directory</span>
        <span class="token punctuation">-</span> <span class="token key atrule">cmd</span><span class="token punctuation">:</span> touch <span class="token punctuation">{</span><span class="token punctuation">{</span> .Env.FILE_TO_TOUCH <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">env</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token string">"FILE_TO_TOUCH=something-{{ .ProjectName }}"</span> <span class="token comment"># specify hook level environment variables</span>

      <span class="token key atrule">after</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> make clean
        <span class="token punctuation">-</span> <span class="token key atrule">cmd</span><span class="token punctuation">:</span> cat <span class="token important">*.yaml</span>
          <span class="token key atrule">dir</span><span class="token punctuation">:</span> ./submodule
        <span class="token punctuation">-</span> <span class="token key atrule">cmd</span><span class="token punctuation">:</span> touch <span class="token punctuation">{</span><span class="token punctuation">{</span> .Env.RELEASE_DONE <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">env</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token string">"RELEASE_DONE=something-{{ .ProjectName }}"</span> <span class="token comment"># specify hook level environment variables</span>

    <span class="token comment"># Disables the binary count check.</span>
    <span class="token key atrule">allow_different_binary_count</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="linux-è½¯ä»¶åŒ…" tabindex="-1"><a class="header-anchor" href="#linux-è½¯ä»¶åŒ…" aria-hidden="true">#</a> linux è½¯ä»¶åŒ…</h2>
<p>GoReleaser å¯ä»¥è¿æ¥åˆ°<a href="https://github.com/goreleaser/nfpm" target="_blank" rel="noopener noreferrer">nfpm<ExternalLinkIcon/></a>ä»¥ç”Ÿæˆå’Œå‘å¸ƒ<code v-pre>.deb</code>ã€<code v-pre>.rpm</code>ã€<code v-pre>.apk</code>å’Œ Archlinux è½¯ä»¶åŒ…ã€‚</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># .goreleaser.yaml</span>
nfpms:
  <span class="token comment"># note that this is an array of nfpm configs</span>
  - <span class="token comment">#</span>
    <span class="token comment"># ID of the nfpm config, must be unique.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: 'default'</span>
    id: foo

    <span class="token comment"># Name of the package.</span>
    <span class="token comment"># Default: ProjectName</span>
    <span class="token comment"># Templates: allowed (since v1.18)</span>
    package_name: foo

    <span class="token comment"># You can change the file name of the package.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: '{{ .PackageName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}{{ with .Arm }}v{{ . }}{{ end }}{{ with .Mips }}_{{ . }}{{ end }}{{ if not (eq .Amd64 "v1") }}{{ .Amd64 }}{{ end }}'</span>
    <span class="token comment"># Templates: allowed</span>
    file_name_template: <span class="token string">"{{ .ConventionalFileName }}"</span>

    <span class="token comment"># Build IDs for the builds you want to create NFPM packages for.</span>
    <span class="token comment"># Defaults empty, which means no filtering.</span>
    builds:
      - foo
      - bar

    <span class="token comment"># Your app's vendor.</span>
    vendor: Drum Roll Inc.

    <span class="token comment"># Your app's homepage.</span>
    homepage: https://example.com/

    <span class="token comment"># Your app's maintainer (probably you).</span>
    maintainer: Drummer <span class="token operator">&lt;</span>drum-roll@example.com<span class="token operator">></span>

    <span class="token comment"># Your app's description.</span>
    description: <span class="token operator">|</span>-
      Drum rolls installer package.
      Software to create fast and easy drum rolls.

    <span class="token comment"># Your app's license.</span>
    license: Apache <span class="token number">2.0</span>

    <span class="token comment"># Formats to be generated.</span>
    formats:
      - apk
      - deb
      - <span class="token function">rpm</span>
      - termux.deb <span class="token comment"># Since: v1.11</span>
      - archlinux <span class="token comment"># Since: v1.13</span>

    <span class="token comment"># Umask to be used on files without explicit mode set. (overridable)</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: 0o002 (will remove world-writable permissions)</span>
    <span class="token comment"># Since: v1.19</span>
    umask: 0o002

    <span class="token comment"># Packages your package depends on. (overridable)</span>
    dependencies:
      - <span class="token function">git</span>
      - <span class="token function">zsh</span>

    <span class="token comment"># Packages it provides. (overridable)</span>
    <span class="token comment">#</span>
    <span class="token comment"># Since: v1.11</span>
    provides:
      - bar

    <span class="token comment"># Packages your package recommends installing. (overridable)</span>
    recommends:
      - bzr
      - gtk

    <span class="token comment"># Packages your package suggests installing. (overridable)</span>
    suggests:
      - cvs
      - ksh

    <span class="token comment"># Packages that conflict with your package. (overridable)</span>
    conflicts:
      - svn
      - <span class="token function">bash</span>

    <span class="token comment"># Packages it replaces. (overridable)</span>
    replaces:
      - fish

    <span class="token comment"># Path that the binaries should be installed.</span>
    <span class="token comment"># Default: '/usr/bin'</span>
    bindir: /usr/bin

    <span class="token comment"># Version Epoch.</span>
    <span class="token comment"># Default: extracted from `version` if it is semver compatible</span>
    epoch: <span class="token number">2</span>

    <span class="token comment"># Version Prerelease.</span>
    <span class="token comment"># Default: extracted from `version` if it is semver compatible</span>
    prerelease: beta1

    <span class="token comment"># Version Metadata (previously deb.metadata).</span>
    <span class="token comment"># Setting metadata might interfere with version comparisons depending on the</span>
    <span class="token comment"># packager.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: extracted from `version` if it is semver compatible</span>
    version_metadata: <span class="token function">git</span>

    <span class="token comment"># Version Release.</span>
    release: <span class="token number">1</span>

    <span class="token comment"># Section.</span>
    section: default

    <span class="token comment"># Priority.</span>
    priority: extra

    <span class="token comment"># Makes a meta package - an empty package that contains only supporting</span>
    <span class="token comment"># files and dependencies.</span>
    <span class="token comment"># When set to `true`, the `builds` option is ignored.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Default: false</span>
    meta: <span class="token boolean">true</span>

    <span class="token comment"># Changelog YAML file, see: https://github.com/goreleaser/chglog</span>
    <span class="token comment">#</span>
    <span class="token comment"># You can use goreleaser/chglog to create the changelog for your project,</span>
    <span class="token comment"># pass that changelog yaml file to GoReleaser,</span>
    <span class="token comment"># and it should in turn setup it accordingly for the given available</span>
    <span class="token comment"># formats (deb and rpm at the moment).</span>
    <span class="token comment">#</span>
    <span class="token comment"># Experimental.</span>
    <span class="token comment"># Since: v1.11</span>
    changelog: ./foo.yml

    <span class="token comment"># Contents to add to the package.</span>
    <span class="token comment"># GoReleaser will automatically add the binaries.</span>
    contents:
      <span class="token comment"># Basic file that applies to all packagers</span>
      - src: path/to/foo
        dst: /usr/bin/foo

      <span class="token comment"># This will add all files in some/directory or in subdirectories at the</span>
      <span class="token comment"># same level under the directory /etc. This means the tree structure in</span>
      <span class="token comment"># some/directory will not be replicated.</span>
      - src: some/directory/
        dst: /etc

      <span class="token comment"># This will replicate the directory structure under some/directory at</span>
      <span class="token comment"># /etc, using the "tree" type.</span>
      <span class="token comment">#</span>
      <span class="token comment"># Since: v1.17</span>
      <span class="token comment"># Templates: allowed</span>
      - src: some/directory/
        dst: /etc
        type: tree

      <span class="token comment"># Simple config file</span>
      - src: path/to/foo.conf
        dst: /etc/foo.conf
        type: config

      <span class="token comment"># Simple symlink.</span>
      <span class="token comment"># Corresponds to `ln -s /sbin/foo /usr/local/bin/foo`</span>
      - src: /sbin/foo
        dst: /usr/bin/foo
        type: <span class="token string">"symlink"</span>

      <span class="token comment"># Corresponds to `%config(noreplace)` if the packager is rpm, otherwise it</span>
      <span class="token comment"># is just a config file</span>
      - src: path/to/local/bar.conf
        dst: /etc/bar.conf
        type: <span class="token string">"config|noreplace"</span>

      <span class="token comment"># The src and dst attributes also supports name templates</span>
      - src: path/<span class="token punctuation">{</span><span class="token punctuation">{</span> .Os <span class="token punctuation">}</span><span class="token punctuation">}</span>-<span class="token punctuation">{</span><span class="token punctuation">{</span> .Arch <span class="token punctuation">}</span><span class="token punctuation">}</span>/bar.conf
        dst: /etc/foo/bar-<span class="token punctuation">{</span><span class="token punctuation">{</span> .ProjectName <span class="token punctuation">}</span><span class="token punctuation">}</span>.conf

    <span class="token comment"># Additional templated contents to add to the archive.</span>
    <span class="token comment"># Those files will have their contents pass through the template engine,</span>
    <span class="token comment"># and its results will be added to the package.</span>
    <span class="token comment">#</span>
    <span class="token comment"># Since: v1.17 (pro)</span>
    <span class="token comment"># This feature is only available in GoReleaser Pro.</span>
    <span class="token comment"># Templates: allowed</span>
    templated_contents:
      <span class="token comment"># a more complete example, check the globbing deep dive below</span>
      - src: <span class="token string">"LICENSE.md.tpl"</span>
        dst: LICENSE.md

      <span class="token comment"># These files are not actually present in the package, but the file names</span>
      <span class="token comment"># are added to the package header. From the RPM directives documentation:</span>
      <span class="token comment">#</span>
      <span class="token comment"># "There are times when a file should be owned by the package but not</span>
      <span class="token comment"># installed - log files and state files are good examples of cases you</span>
      <span class="token comment"># might desire this to happen."</span>
      <span class="token comment">#</span>
      <span class="token comment"># "The way to achieve this, is to use the %ghost directive. By adding this</span>
      <span class="token comment"># directive to the line containing a file, RPM will know about the ghosted</span>
      <span class="token comment"># file, but will not add it to the package."</span>
      <span class="token comment">#</span>
      <span class="token comment"># For non rpm packages ghost files are ignored at this time.</span>
      - dst: /etc/casper.conf
        type: ghost
      - dst: /var/log/boo.log
        type: ghost

      <span class="token comment"># You can use the packager field to add files that are unique to a</span>
      <span class="token comment"># specific packager</span>
      - src: path/to/rpm/file.conf
        dst: /etc/file.conf
        type: <span class="token string">"config|noreplace"</span>
        packager: <span class="token function">rpm</span>
      - src: path/to/deb/file.conf
        dst: /etc/file.conf
        type: <span class="token string">"config|noreplace"</span>
        packager: deb
      - src: path/to/apk/file.conf
        dst: /etc/file.conf
        type: <span class="token string">"config|noreplace"</span>
        packager: apk

      <span class="token comment"># Sometimes it is important to be able to set the mtime, mode, owner, or</span>
      <span class="token comment"># group for a file that differs from what is on the local build system at</span>
      <span class="token comment"># build time.</span>
      - src: path/to/foo
        dst: /usr/local/foo
        file_info:
          mode: 0644
          mtime: <span class="token number">2008</span>-01-02T15:04:05Z
          owner: notRoot
          group: notRoot

      <span class="token comment"># If `dst` ends with a `/`, it'll create the given path and copy the given</span>
      <span class="token comment"># `src` into it, the same way `cp` works with and without trailing `/`.</span>
      - src: ./foo/bar/*
        dst: /usr/local/myapp/

      <span class="token comment"># Using the type 'dir', empty directories can be created. When building</span>
      <span class="token comment"># RPMs, however, this type has another important purpose: Claiming</span>
      <span class="token comment"># ownership of that folder. This is important because when upgrading or</span>
      <span class="token comment"># removing an RPM package, only the directories for which it has claimed</span>
      <span class="token comment"># ownership are removed. However, you should not claim ownership of a</span>
      <span class="token comment"># folder that is created by the OS or a dependency of your package.</span>
      <span class="token comment">#</span>
      <span class="token comment"># A directory in the build environment can optionally be provided in the</span>
      <span class="token comment"># 'src' field in order copy mtime and mode from that directory without</span>
      <span class="token comment"># having to specify it manually.</span>
      - dst: /some/dir
        type: <span class="token function">dir</span>
        file_info:
          mode: 0700

    <span class="token comment"># Scripts to execute during the installation of the package. (overridable)</span>
    <span class="token comment">#</span>
    <span class="token comment"># Keys are the possible targets during the installation process</span>
    <span class="token comment"># Values are the paths to the scripts which will be executed.</span>
    scripts:
      preinstall: <span class="token string">"scripts/preinstall.sh"</span>
      postinstall: <span class="token string">"scripts/postinstall.sh"</span>
      preremove: <span class="token string">"scripts/preremove.sh"</span>
      postremove: <span class="token string">"scripts/postremove.sh"</span>

    <span class="token comment"># All fields above marked as `overridable` can be overridden for a given</span>
    <span class="token comment"># package format in this section.</span>
    overrides:
      <span class="token comment"># The dependencies override can for example be used to provide version</span>
      <span class="token comment"># constraints for dependencies where  different package formats use</span>
      <span class="token comment"># different versions or for dependencies that are named differently.</span>
      deb:
        dependencies:
          - baz <span class="token punctuation">(</span><span class="token operator">>=</span> <span class="token number">1.2</span>.3-0<span class="token punctuation">)</span>
          - some-lib-dev
        <span class="token comment"># ...</span>
      rpm:
        dependencies:
          - baz <span class="token operator">>=</span> <span class="token number">1.2</span>.3-0
          - some-lib-devel
        <span class="token comment"># ...</span>
      apk:
        <span class="token comment"># ...</span>

    <span class="token comment"># Custom configuration applied only to the RPM packager.</span>
    rpm:
      <span class="token comment"># RPM specific scripts.</span>
      scripts:
        <span class="token comment"># The pretrans script runs before all RPM package transactions / stages.</span>
        pretrans: ./scripts/pretrans.sh
        <span class="token comment"># The posttrans script runs after all RPM package transactions / stages.</span>
        posttrans: ./scripts/posttrans.sh

      <span class="token comment"># The package summary.</span>
      <span class="token comment">#</span>
      <span class="token comment"># Default: first line of the description</span>
      summary: Explicit Summary <span class="token keyword">for</span> Sample Package

      <span class="token comment"># The package group.</span>
      <span class="token comment"># This option is deprecated by most distros but required by old distros</span>
      <span class="token comment"># like CentOS 5 / EL 5 and earlier.</span>
      group: Unspecified

      <span class="token comment"># The packager is used to identify the organization that actually packaged</span>
      <span class="token comment"># the software, as opposed to the author of the software.</span>
      <span class="token comment"># `maintainer` will be used as fallback if not specified.</span>
      <span class="token comment"># This will expand any env var you set in the field, eg packager: ${PACKAGER}</span>
      packager: GoReleaser <span class="token operator">&lt;</span>staff@goreleaser.com<span class="token operator">></span>

      <span class="token comment"># Compression algorithm (gzip (default), lzma or xz).</span>
      compression: lzma

      <span class="token comment"># Prefixes for relocatable packages.</span>
      <span class="token comment">#</span>
      <span class="token comment"># Since: v1.20.</span>
      prefixes:
        - /usr/bin

      <span class="token comment"># The package is signed if a key_file is set</span>
      signature:
        <span class="token comment"># PGP secret key file path (can also be ASCII-armored).</span>
        <span class="token comment"># The passphrase is taken from the environment variable</span>
        <span class="token comment"># `$NFPM_ID_RPM_PASSPHRASE` with a fallback to `$NFPM_ID_PASSPHRASE`,</span>
        <span class="token comment"># where ID is the id of the current nfpm config.</span>
        <span class="token comment"># The id will be transformed to uppercase.</span>
        <span class="token comment"># E.g. If your nfpm id is 'default' then the rpm-specific passphrase</span>
        <span class="token comment"># should be set as `$NFPM_DEFAULT_RPM_PASSPHRASE`</span>
        <span class="token comment">#</span>
        <span class="token comment"># Templates: allowed</span>
        key_file: <span class="token string">"{{ .Env.GPG_KEY_PATH }}"</span>

    <span class="token comment"># Custom configuration applied only to the Deb packager.</span>
    deb:
      <span class="token comment"># Lintian overrides</span>
      lintian_overrides:
        - statically-linked-binary
        - changelog-file-missing-in-native-package

      <span class="token comment"># Custom deb special files.</span>
      scripts:
        <span class="token comment"># Deb rules script.</span>
        rules: foo.sh
        <span class="token comment"># Deb templates file, when using debconf.</span>
        templates: templates

      <span class="token comment"># Custom deb triggers</span>
      triggers:
        <span class="token comment"># register interest on a trigger activated by another package</span>
        <span class="token comment"># (also available: interest_await, interest_noawait)</span>
        interest:
          - some-trigger-name
        <span class="token comment"># activate a trigger for another package</span>
        <span class="token comment"># (also available: activate_await, activate_noawait)</span>
        activate:
          - another-trigger-name

      <span class="token comment"># Packages which would break if this package would be installed.</span>
      <span class="token comment"># The installation of this package is blocked if `some-package`</span>
      <span class="token comment"># is already installed.</span>
      breaks:
        - some-package

      <span class="token comment"># The package is signed if a key_file is set</span>
      signature:
        <span class="token comment"># PGP secret key file path (can also be ASCII-armored).</span>
        <span class="token comment"># The passphrase is taken from the environment variable</span>
        <span class="token comment"># `$NFPM_ID_DEB_PASSPHRASE` with a fallback to `$NFPM_ID_PASSPHRASE`,</span>
        <span class="token comment"># where ID is the id of the current nfpm config.</span>
        <span class="token comment"># The id will be transformed to uppercase.</span>
        <span class="token comment"># E.g. If your nfpm id is 'default' then the deb-specific passphrase</span>
        <span class="token comment"># should be set as `$NFPM_DEFAULT_DEB_PASSPHRASE`</span>
        <span class="token comment">#</span>
        <span class="token comment"># Templates: allowed</span>
        key_file: <span class="token string">"{{ .Env.GPG_KEY_PATH }}"</span>

        <span class="token comment"># The type describes the signers role, possible values are "origin",</span>
        <span class="token comment"># "maint" and "archive".</span>
        <span class="token comment">#</span>
        <span class="token comment"># Default: 'origin'</span>
        type: origin

    apk:
      <span class="token comment"># APK specific scripts.</span>
      scripts:
        <span class="token comment"># The preupgrade script runs before APK upgrade.</span>
        preupgrade: ./scripts/preupgrade.sh
        <span class="token comment"># The postupgrade script runs after APK.</span>
        postupgrade: ./scripts/postupgrade.sh

      <span class="token comment"># The package is signed if a key_file is set</span>
      signature:
        <span class="token comment"># PGP secret key file path (can also be ASCII-armored).</span>
        <span class="token comment"># The passphrase is taken from the environment variable</span>
        <span class="token comment"># `$NFPM_ID_APK_PASSPHRASE` with a fallback to `$NFPM_ID_PASSPHRASE`,</span>
        <span class="token comment"># where ID is the id of the current nfpm config.</span>
        <span class="token comment"># The id will be transformed to uppercase.</span>
        <span class="token comment"># E.g. If your nfpm id is 'default' then the apk-specific passphrase</span>
        <span class="token comment"># should be set as `$NFPM_DEFAULT_APK_PASSPHRASE`</span>
        <span class="token comment">#</span>
        <span class="token comment"># Templates: allowed</span>
        key_file: <span class="token string">"{{ .Env.GPG_KEY_PATH }}"</span>

        <span class="token comment"># The name of the signing key. When verifying a package, the signature</span>
        <span class="token comment"># is matched to the public key store in /etc/apk/keys/&lt;key_name>.rsa.pub.</span>
        <span class="token comment">#</span>
        <span class="token comment"># Default: maintainer's email address</span>
        <span class="token comment"># Templates: allowed (since v1.15)</span>
        key_name: origin

    archlinux:
      <span class="token comment"># Archlinux-specific scripts</span>
      scripts:
        <span class="token comment"># The preupgrade script runs before pacman upgrades the package.</span>
        preupgrade: ./scripts/preupgrade.sh
        <span class="token comment"># The postupgrade script runs after pacman upgrades the package.</span>
        postupgrade: ./scripts/postupgrade.sh

      <span class="token comment"># The pkgbase can be used to explicitly specify the name to be used to refer</span>
      <span class="token comment"># to a group of packages. See: https://wiki.archlinux.org/title/PKGBUILD#pkgbase.</span>
      pkgbase: foo

      <span class="token comment"># The packager refers to the organization packaging the software, not to be confused</span>
      <span class="token comment"># with the maintainer, which is the person who maintains the software.</span>
      packager: GoReleaser <span class="token operator">&lt;</span>staff@goreleaser.com<span class="token operator">></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Learn more about theÂ <a href="https://goreleaser.com/customization/templates/" target="_blank" rel="noopener noreferrer">name template engine<ExternalLinkIcon/></a>.</p>
<h2 id="checksums-æ ¡éªŒ" tabindex="-1"><a class="header-anchor" href="#checksums-æ ¡éªŒ" aria-hidden="true">#</a> <strong>ChecksumsÂ æ ¡éªŒ</strong></h2>
<p>GoReleaser ä¼šç”Ÿæˆä¸€ä¸ªæ–‡ä»¶å¹¶å°†å…¶ä¸ç‰ˆæœ¬ä¸€èµ·ä¸Šä¼ ï¼Œä»¥ä¾¿æ‚¨çš„ç”¨æˆ·å¯ä»¥éªŒè¯ä¸‹è½½çš„æ–‡ä»¶æ˜¯å¦æ­£ç¡®ã€‚</p>
<p>è¯¥éƒ¨åˆ†å…è®¸è‡ªå®šä¹‰æ–‡ä»¶åï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">checksum</span><span class="token operator">:</span>
  # You can change the name <span class="token keyword">of</span> the checksums file<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token punctuation">.</span>ProjectName <span class="token punctuation">}</span><span class="token punctuation">}</span>_<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token punctuation">.</span>Version <span class="token punctuation">}</span><span class="token punctuation">}</span>_checksums<span class="token punctuation">.</span>txt
  # Templates<span class="token operator">:</span> allowed
  <span class="token literal-property property">name_template</span><span class="token operator">:</span> <span class="token string">"{{ .ProjectName }}_checksums.txt"</span>

  # Algorithm to be used<span class="token punctuation">.</span>
  # Accepted options are sha256<span class="token punctuation">,</span> sha512<span class="token punctuation">,</span> sha1<span class="token punctuation">,</span> crc32<span class="token punctuation">,</span> md5<span class="token punctuation">,</span> sha224 and sha384<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> sha256<span class="token punctuation">.</span>
  <span class="token literal-property property">algorithm</span><span class="token operator">:</span> sha256

  # IDs <span class="token keyword">of</span> artifacts to include <span class="token keyword">in</span> the checksums file<span class="token punctuation">.</span>
  #
  # If left empty<span class="token punctuation">,</span> all published binaries<span class="token punctuation">,</span> archives<span class="token punctuation">,</span> linux packages and source archives
  # are included <span class="token keyword">in</span> the checksums file<span class="token punctuation">.</span>
  <span class="token literal-property property">ids</span><span class="token operator">:</span>
    <span class="token operator">-</span> foo
    <span class="token operator">-</span> bar

  # Disable the generation<span class="token operator">/</span>upload <span class="token keyword">of</span> the checksum file<span class="token punctuation">.</span>
  <span class="token literal-property property">disable</span><span class="token operator">:</span> <span class="token boolean">true</span>

  # You can add extra pre<span class="token operator">-</span>existing files to the checksums file<span class="token punctuation">.</span>
  # The filename on the checksum will be the last part <span class="token keyword">of</span> the <span class="token function">path</span> <span class="token punctuation">(</span>base<span class="token punctuation">)</span><span class="token punctuation">.</span>
  # If another file <span class="token keyword">with</span> the same name exists<span class="token punctuation">,</span> the last one found will be used<span class="token punctuation">.</span>
  #
  # Templates<span class="token operator">:</span> allowed
  <span class="token literal-property property">extra_files</span><span class="token operator">:</span>
    <span class="token operator">-</span> glob<span class="token operator">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>path<span class="token operator">/</span>to<span class="token operator">/</span>file<span class="token punctuation">.</span>txt
    <span class="token operator">-</span> glob<span class="token operator">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>glob<span class="token comment">/**/</span>to<span class="token comment">/**/</span>file<span class="token comment">/**/</span><span class="token operator">*</span>
    <span class="token operator">-</span> glob<span class="token operator">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>glob<span class="token operator">/</span>foo<span class="token operator">/</span>to<span class="token operator">/</span>bar<span class="token operator">/</span>file<span class="token operator">/</span>foobar<span class="token operator">/</span>override_from_previous
    <span class="token operator">-</span> glob<span class="token operator">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>single_file<span class="token punctuation">.</span>txt
      <span class="token literal-property property">name_template</span><span class="token operator">:</span> file<span class="token punctuation">.</span>txt # note that <span class="token keyword">this</span> only works <span class="token keyword">if</span> glob matches <span class="token number">1</span> file only

  # Additional templated extra files to add to the checksum<span class="token punctuation">.</span>
  # Those files will have their contents pass through the template engine<span class="token punctuation">,</span>
  # and its results will be added to the checksum<span class="token punctuation">.</span>
  #
  # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">17</span> <span class="token punctuation">(</span>pro<span class="token punctuation">)</span>
  # This feature is only available <span class="token keyword">in</span> GoReleaser Pro<span class="token punctuation">.</span>
  # Templates<span class="token operator">:</span> allowed
  <span class="token literal-property property">templated_extra_files</span><span class="token operator">:</span>
    <span class="token operator">-</span> src<span class="token operator">:</span> <span class="token constant">LICENSE</span><span class="token punctuation">.</span>tpl
      <span class="token literal-property property">dst</span><span class="token operator">:</span> <span class="token constant">LICENSE</span><span class="token punctuation">.</span>txt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="snapcraft-packages-snaps-snapcraft-packages" tabindex="-1"><a class="header-anchor" href="#snapcraft-packages-snaps-snapcraft-packages" aria-hidden="true">#</a> <strong>Snapcraft Packages (snaps)Â Snapcraft Packages</strong></h2>
<p>GoReleaserä¹Ÿå¯ä»¥ç”Ÿæˆè½¯ä»¶åŒ…ã€‚Snaps æ˜¯ä¸€ç§æ–°çš„æ‰“åŒ…æ ¼å¼ï¼Œå¯è®©æ‚¨å°†é¡¹ç›®ç›´æ¥å‘å¸ƒåˆ° Ubuntu å•†åº—ã€‚ä»é‚£é‡Œï¼Œå®ƒå¯ä»¥å®‰è£…åœ¨æ‰€æœ‰å—æ”¯æŒçš„Linuxå‘è¡Œç‰ˆä¸­ï¼Œå¹¶è¿›è¡Œè‡ªåŠ¨å’Œäº‹åŠ¡æ€§æ›´æ–°ã€‚</p>
<p>æ‚¨å¯ä»¥åœ¨ snapcraft æ–‡æ¡£ä¸­é˜…è¯»æ›´å¤šç›¸å…³ä¿¡æ¯ã€‚</p>
<p><strong>Snapsæ˜¯é€‚ç”¨äºæ¡Œé¢</strong>ã€<strong>äº‘</strong>å’Œ<strong>ç‰©è”ç½‘</strong>çš„ Linux åº”ç”¨ç¨‹åºåŒ…ï¼Œæ˜“äºå®‰è£…ã€å®‰å…¨ã€è·¨å¹³å°ä¸”æ— ä¾èµ–æ€§ã€‚</p>
<p>å®ƒä»¬ä¼š<strong>è‡ªåŠ¨æ›´æ–°ï¼Œå¹¶ä¸”é€šå¸¸åœ¨æœ‰é™çš„</strong>åŸºäº<strong>äº‹åŠ¡çš„</strong>ç¯å¢ƒä¸­è¿è¡Œã€‚<strong>å®‰å…¨æ€§å’Œç¨³å¥æ€§</strong>æ˜¯å…¶ä¸»è¦ç‰¹ç‚¹ï¼Œæ­¤å¤–è¿˜<strong>æ˜“äºå®‰è£…</strong>ã€<strong>æ˜“äºç»´æŠ¤</strong>å’Œ<strong>æ˜“äºå‡çº§</strong>ã€‚</p>
<p><strong>Snapd å‘å¸ƒæµç¨‹</strong></p>
<p>snapd æ˜¯ç®¡ç†å’Œç»´æŠ¤å¿«ç…§çš„åå°æœåŠ¡ã€‚å®ƒæœ¬èº«å¯ä»¥ä½œä¸º snap åŒ…æˆ–ä¼ ç»Ÿçš„ Linux è½¯ä»¶åŒ…ï¼ˆä¾‹å¦‚<em>deb</em>æˆ– RPMï¼‰æä¾›ã€‚</p>
<p>æœ‰ä¸¤ç§ç±»å‹çš„å‘å¸ƒï¼›ä¸»è¦å’Œæ¬¡è¦ç‰ˆæœ¬ï¼Œç”±å…¶ç‰ˆæœ¬å·çš„æ•°å­—çŠ¶æ€è¡¨ç¤ºï¼Œå¹¶å¸¦æœ‰æ¬¡è¦å¥ç‚¹å’Œä¸ºæ¬¡è¦ç‰ˆæœ¬ä¿ç•™çš„æ•°å­—ï¼š</p>
<ul>
<li>ä¸»è¦ç‰ˆæœ¬å‘å¸ƒï¼š2.53ã€2.54ã€2.55</li>
<li>æ¬¡è¦ç‰ˆæœ¬å‘å¸ƒï¼š2.53.1ã€2.53.2</li>
</ul>
<p>ä¸»è¦ç‰ˆæœ¬å’Œæ¬¡è¦ç‰ˆæœ¬ä¹‹é—´çš„åŒºåˆ«åœ¨äºå…¶è®¡åˆ’ã€å‡†å¤‡å’ŒåŠ¨æœºã€‚æ¯éš”å‡ å‘¨å°±æœ‰ä¸€ä¸ªä¸»è¦å‘å¸ƒå‘¨æœŸï¼Œä½†æœ‰æ—¶æˆ‘ä»¬éœ€è¦åŒ…å«è¾ƒå°æ›´æ”¹å’Œä¿®å¤çš„ä¸­é—´æ¬¡è¦ç‰ˆæœ¬å‘å¸ƒã€‚</p>
<p>ä¸»è¦ç‰ˆæœ¬å’Œåç»­æ¬¡è¦ç‰ˆæœ¬ï¼ˆä¾‹å¦‚ 2.53 -&gt; 2.53.1ï¼‰ä¹‹é—´çš„å·®å¼‚å°½å¯èƒ½å°ä¸”æœ‰é’ˆå¯¹æ€§ï¼Œå¹¶çœç•¥ä¸»è¦ä»£ç é‡æ„å’Œæ–°åŠŸèƒ½ã€‚è¿™å¹¶ä¸æ€»æ˜¯å¯èƒ½çš„ï¼Œå› ä¸ºæœ‰æ—¶é”™è¯¯æˆ–åŠŸèƒ½å¾ˆå¤æ‚ï¼Œä½†è¿™æ˜¯æˆ‘ä»¬çš„é¦–è¦ç›®æ ‡ã€‚</p>
<p><strong>é€æ­¥å‘å¸ƒæµç¨‹</strong></p>
<ul>
<li><a href="https://gist.github.com/baymaxium/e1602202e7a3ef53a723ae14a3e928bc" target="_blank" rel="noopener noreferrer">https://gist.github.com/baymaxium/e1602202e7a3ef53a723ae14a3e928bc<ExternalLinkIcon/></a></li>
</ul>
<p><strong>ä½¿ç”¨Snapcraftæ„å»ºå‘å¸ƒSnapå®‰è£…åŒ…</strong></p>
<p>ç”Ÿæˆä¸€ä¸ªåˆå§‹å·¥ç¨‹ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>$ snapcraft init
Created snap<span class="token operator">/</span>snapcraft<span class="token punctuation">.</span>yaml<span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="docker-images" tabindex="-1"><a class="header-anchor" href="#docker-images" aria-hidden="true">#</a> <strong>Docker Images</strong></h2>
<p>GoReleaser å¯ä»¥æ„å»ºå’Œæ¨é€ Docker é•œåƒã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<p>æ‚¨å¯ä»¥å£°æ˜å¤šä¸ª Docker æ˜ åƒã€‚å®ƒä»¬å°†ä¸èŠ‚ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶å’ŒèŠ‚ç”Ÿæˆçš„åŒ…è¿›è¡ŒåŒ¹é…ã€‚</p>
<p>å¦‚æœæ‚¨åªæœ‰ä¸€ä¸ªè®¾ç½®ï¼Œåˆ™é…ç½®å°±åƒå°†æ˜ åƒåç§°æ·»åŠ åˆ°æ–‡ä»¶ä¸­ä¸€æ ·ç®€å•ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token literal-property property">dockers</span><span class="token operator">:</span>
  <span class="token operator">-</span> image_templates<span class="token operator">:</span>
      <span class="token operator">-</span> user<span class="token operator">/</span>repo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‚¨è¿˜éœ€è¦åœ¨é¡¹ç›®çš„æ ¹æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª <code v-pre>Dockerfile</code>ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token constant">FROM</span> scratch
<span class="token constant">ENTRYPOINT</span> <span class="token punctuation">[</span><span class="token string">"/mybin"</span><span class="token punctuation">]</span>
<span class="token constant">COPY</span> mybin <span class="token operator">/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤é…ç½®å°†ç”Ÿæˆå¹¶æ¨é€åä¸º çš„ Docker æ˜ åƒã€‚</p>
<p><strong>CustomizationÂ å®šåˆ¶</strong></p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">dockers</span><span class="token operator">:</span>
  # You can have multiple Docker images<span class="token punctuation">.</span>
  <span class="token operator">-</span> #
    # <span class="token constant">ID</span> <span class="token keyword">of</span> the image<span class="token punctuation">,</span> needed <span class="token keyword">if</span> you want to filter by it later <span class="token function">on</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> on custom publishers<span class="token punctuation">)</span><span class="token punctuation">.</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> myimg

    # <span class="token constant">GOOS</span> <span class="token keyword">of</span> the built binaries<span class="token operator">/</span>packages that should be used<span class="token punctuation">.</span>
    # Default<span class="token operator">:</span> <span class="token string">'linux'</span>
    <span class="token literal-property property">goos</span><span class="token operator">:</span> linux

    # <span class="token constant">GOARCH</span> <span class="token keyword">of</span> the built binaries<span class="token operator">/</span>packages that should be used<span class="token punctuation">.</span>
    # Default<span class="token operator">:</span> <span class="token string">'amd64'</span>
    <span class="token literal-property property">goarch</span><span class="token operator">:</span> amd64

    # <span class="token constant">GOARM</span> <span class="token keyword">of</span> the built binaries<span class="token operator">/</span>packages that should be used<span class="token punctuation">.</span>
    # Default<span class="token operator">:</span> <span class="token string">'6'</span>
    <span class="token literal-property property">goarm</span><span class="token operator">:</span> <span class="token string">""</span>

    # <span class="token constant">GOAMD64</span> <span class="token keyword">of</span> the built binaries<span class="token operator">/</span>packages that should be used<span class="token punctuation">.</span>
    # Default<span class="token operator">:</span> <span class="token string">'v1'</span>
    <span class="token literal-property property">goamd64</span><span class="token operator">:</span> <span class="token string">"v2"</span>

    # IDs to filter the binaries<span class="token operator">/</span>packages<span class="token punctuation">.</span>
    <span class="token literal-property property">ids</span><span class="token operator">:</span>
      <span class="token operator">-</span> mybuild
      <span class="token operator">-</span> mynfpm

    # Templates <span class="token keyword">of</span> the Docker image names<span class="token punctuation">.</span>
    #
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">image_templates</span><span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token string">"myuser/myimage:latest"</span>
      <span class="token operator">-</span> <span class="token string">"myuser/myimage:{{ .Tag }}"</span>
      <span class="token operator">-</span> <span class="token string">"myuser/myimage:{{ .Tag }}-{{ .Env.FOOBAR }}"</span>
      <span class="token operator">-</span> <span class="token string">"myuser/myimage:v{{ .Major }}"</span>
      <span class="token operator">-</span> <span class="token string">"gcr.io/myuser/myimage:latest"</span>

    # Skips the docker build<span class="token punctuation">.</span>
    # Could be useful <span class="token keyword">if</span> you want to skip building the windows docker image on
    # linux<span class="token punctuation">,</span> <span class="token keyword">for</span> example<span class="token punctuation">.</span>
    #
    # Templates<span class="token operator">:</span> allowed
    # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">14</span> <span class="token punctuation">(</span>pro<span class="token punctuation">)</span>
    # This option is only available on GoReleaser Pro<span class="token punctuation">.</span>
    <span class="token literal-property property">skip_build</span><span class="token operator">:</span> <span class="token boolean">false</span>

    # Skips the docker push<span class="token punctuation">.</span>
    # Could be useful <span class="token keyword">if</span> you also <span class="token keyword">do</span> draft releases<span class="token punctuation">.</span>
    #
    # If <span class="token keyword">set</span> to auto<span class="token punctuation">,</span> the release will not be pushed to the Docker repository
    #  <span class="token keyword">in</span> <span class="token keyword">case</span> there is an indicator <span class="token keyword">of</span> a prerelease <span class="token keyword">in</span> the tag<span class="token punctuation">,</span> e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> v1<span class="token punctuation">.</span><span class="token number">0.0</span><span class="token operator">-</span>rc1<span class="token punctuation">.</span>
    #
    # Templates<span class="token operator">:</span> <span class="token function">allowed</span> <span class="token punctuation">(</span>since v1<span class="token punctuation">.</span><span class="token number">19</span><span class="token punctuation">)</span>
    <span class="token literal-property property">skip_push</span><span class="token operator">:</span> <span class="token boolean">false</span>

    # Path to the <span class="token function">Dockerfile</span> <span class="token punctuation">(</span>from the project root<span class="token punctuation">)</span><span class="token punctuation">.</span>
    #
    # Default<span class="token operator">:</span> <span class="token string">'Dockerfile'</span>
    <span class="token literal-property property">dockerfile</span><span class="token operator">:</span> <span class="token string">"{{ .Env.DOCKERFILE }}"</span>

    # Set the <span class="token string">"backend"</span> <span class="token keyword">for</span> the Docker pipe<span class="token punctuation">.</span>
    #
    # Valid options are<span class="token operator">:</span> docker<span class="token punctuation">,</span> buildx<span class="token punctuation">,</span> podman<span class="token punctuation">.</span>
    #
    # Podman is a GoReleaser Pro feature and is only available on Linux<span class="token punctuation">.</span>
    #
    # Default<span class="token operator">:</span> <span class="token string">'docker'</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> docker

    # Docker build flags<span class="token punctuation">.</span>
    #
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">build_flag_templates</span><span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token string">"--pull"</span>
      <span class="token operator">-</span> <span class="token string">"--label=org.opencontainers.image.created={{.Date}}"</span>
      <span class="token operator">-</span> <span class="token string">"--label=org.opencontainers.image.title={{.ProjectName}}"</span>
      <span class="token operator">-</span> <span class="token string">"--label=org.opencontainers.image.revision={{.FullCommit}}"</span>
      <span class="token operator">-</span> <span class="token string">"--label=org.opencontainers.image.version={{.Version}}"</span>
      <span class="token operator">-</span> <span class="token string">"--build-arg=FOO={{.Env.Bar}}"</span>
      <span class="token operator">-</span> <span class="token string">"--platform=linux/arm64"</span>

    # Extra flags to be passed down to the push command<span class="token punctuation">.</span>
    <span class="token literal-property property">push_flags</span><span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token operator">--</span>tls<span class="token operator">-</span>verify<span class="token operator">=</span><span class="token boolean">false</span>

    # If your Dockerfile copies files other than binaries and packages<span class="token punctuation">,</span>
    # you should list them here <span class="token keyword">as</span> well<span class="token punctuation">.</span>
    # Note that GoReleaser will create the same structure inside a temporary
    # folder<span class="token punctuation">,</span> so <span class="token keyword">if</span> you add <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">foo/bar.json</span><span class="token template-punctuation string">`</span></span> here<span class="token punctuation">,</span> on your Dockerfile you can
    # <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">COPY foo/bar.json /whatever.json</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span>
    # Also note that the paths here are relative to the folder <span class="token keyword">in</span> which
    # GoReleaser is being <span class="token function">run</span> <span class="token punctuation">(</span>usually the repository root folder<span class="token punctuation">)</span><span class="token punctuation">.</span>
    # This field does not support wildcards<span class="token punctuation">,</span> you can add an entire folder here
    # and use wildcards when you <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">COPY</span><span class="token template-punctuation string">`</span></span><span class="token operator">/</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ADD</span><span class="token template-punctuation string">`</span></span> <span class="token keyword">in</span> your Dockerfile<span class="token punctuation">.</span>
    <span class="token literal-property property">extra_files</span><span class="token operator">:</span>
      <span class="token operator">-</span> config<span class="token punctuation">.</span>yml

    # Additional templated extra files to add to the Docker image<span class="token punctuation">.</span>
    # Those files will have their contents pass through the template engine<span class="token punctuation">,</span>
    # and its results will be added to the build context the same way <span class="token keyword">as</span> the
    # extra_files field above<span class="token punctuation">.</span>
    #
    # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">17</span> <span class="token punctuation">(</span>pro<span class="token punctuation">)</span>
    # This feature is only available <span class="token keyword">in</span> GoReleaser Pro<span class="token punctuation">.</span>
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">templated_extra_files</span><span class="token operator">:</span>
      <span class="token operator">-</span> src<span class="token operator">:</span> <span class="token constant">LICENSE</span><span class="token punctuation">.</span>tpl
        <span class="token literal-property property">dst</span><span class="token operator">:</span> <span class="token constant">LICENSE</span><span class="token punctuation">.</span>txt
        <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token number">0644</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="docker-images-1" tabindex="-1"><a class="header-anchor" href="#docker-images-1" aria-hidden="true">#</a> <strong>Docker Images</strong></h2>
<p>GoReleaser å¯ä»¥æ„å»ºå’Œæ¨é€ Docker é•œåƒã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<p>æ‚¨å¯ä»¥å£°æ˜å¤šä¸ª Docker æ˜ åƒã€‚å®ƒä»¬å°†ä¸èŠ‚ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶å’ŒèŠ‚ç”Ÿæˆçš„åŒ…è¿›è¡ŒåŒ¹é…ã€‚</p>
<p>å¦‚æœæ‚¨åªæœ‰ä¸€ä¸ª build è®¾ç½®ï¼Œåˆ™é…ç½®å°±åƒå°†æ˜ åƒåç§°æ·»åŠ åˆ°æ–‡ä»¶ä¸­ä¸€æ ·ç®€å•ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token literal-property property">dockers</span><span class="token operator">:</span>
  <span class="token operator">-</span> image_templates<span class="token operator">:</span>
      <span class="token operator">-</span> user<span class="token operator">/</span>repo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‚¨è¿˜éœ€è¦åœ¨é¡¹ç›®çš„æ ¹æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token constant">FROM</span> scratch
<span class="token constant">ENTRYPOINT</span> <span class="token punctuation">[</span><span class="token string">"/mybin"</span><span class="token punctuation">]</span>
<span class="token constant">COPY</span> mybin <span class="token operator">/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤é…ç½®å°†ç”Ÿæˆå¹¶æ¨é€åä¸º çš„ Docker æ˜ åƒã€‚</p>
<p><strong>Customization</strong></p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">dockers</span><span class="token operator">:</span>
  # You can have multiple Docker images<span class="token punctuation">.</span>
  <span class="token operator">-</span> #
    # <span class="token constant">ID</span> <span class="token keyword">of</span> the image<span class="token punctuation">,</span> needed <span class="token keyword">if</span> you want to filter by it later <span class="token function">on</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> on custom publishers<span class="token punctuation">)</span><span class="token punctuation">.</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> myimg

    # <span class="token constant">GOOS</span> <span class="token keyword">of</span> the built binaries<span class="token operator">/</span>packages that should be used<span class="token punctuation">.</span>
    # Default<span class="token operator">:</span> <span class="token string">'linux'</span>
    <span class="token literal-property property">goos</span><span class="token operator">:</span> linux

    # <span class="token constant">GOARCH</span> <span class="token keyword">of</span> the built binaries<span class="token operator">/</span>packages that should be used<span class="token punctuation">.</span>
    # Default<span class="token operator">:</span> <span class="token string">'amd64'</span>
    <span class="token literal-property property">goarch</span><span class="token operator">:</span> amd64

    # <span class="token constant">GOARM</span> <span class="token keyword">of</span> the built binaries<span class="token operator">/</span>packages that should be used<span class="token punctuation">.</span>
    # Default<span class="token operator">:</span> <span class="token string">'6'</span>
    <span class="token literal-property property">goarm</span><span class="token operator">:</span> <span class="token string">""</span>

    # <span class="token constant">GOAMD64</span> <span class="token keyword">of</span> the built binaries<span class="token operator">/</span>packages that should be used<span class="token punctuation">.</span>
    # Default<span class="token operator">:</span> <span class="token string">'v1'</span>
    <span class="token literal-property property">goamd64</span><span class="token operator">:</span> <span class="token string">"v2"</span>

    # IDs to filter the binaries<span class="token operator">/</span>packages<span class="token punctuation">.</span>
    <span class="token literal-property property">ids</span><span class="token operator">:</span>
      <span class="token operator">-</span> mybuild
      <span class="token operator">-</span> mynfpm

    # Templates <span class="token keyword">of</span> the Docker image names<span class="token punctuation">.</span>
    #
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">image_templates</span><span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token string">"myuser/myimage:latest"</span>
      <span class="token operator">-</span> <span class="token string">"myuser/myimage:{{ .Tag }}"</span>
      <span class="token operator">-</span> <span class="token string">"myuser/myimage:{{ .Tag }}-{{ .Env.FOOBAR }}"</span>
      <span class="token operator">-</span> <span class="token string">"myuser/myimage:v{{ .Major }}"</span>
      <span class="token operator">-</span> <span class="token string">"gcr.io/myuser/myimage:latest"</span>

    # Skips the docker build<span class="token punctuation">.</span>
    # Could be useful <span class="token keyword">if</span> you want to skip building the windows docker image on
    # linux<span class="token punctuation">,</span> <span class="token keyword">for</span> example<span class="token punctuation">.</span>
    #
    # Templates<span class="token operator">:</span> allowed
    # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">14</span> <span class="token punctuation">(</span>pro<span class="token punctuation">)</span>
    # This option is only available on GoReleaser Pro<span class="token punctuation">.</span>
    <span class="token literal-property property">skip_build</span><span class="token operator">:</span> <span class="token boolean">false</span>

    # Skips the docker push<span class="token punctuation">.</span>
    # Could be useful <span class="token keyword">if</span> you also <span class="token keyword">do</span> draft releases<span class="token punctuation">.</span>
    #
    # If <span class="token keyword">set</span> to auto<span class="token punctuation">,</span> the release will not be pushed to the Docker repository
    #  <span class="token keyword">in</span> <span class="token keyword">case</span> there is an indicator <span class="token keyword">of</span> a prerelease <span class="token keyword">in</span> the tag<span class="token punctuation">,</span> e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> v1<span class="token punctuation">.</span><span class="token number">0.0</span><span class="token operator">-</span>rc1<span class="token punctuation">.</span>
    #
    # Templates<span class="token operator">:</span> <span class="token function">allowed</span> <span class="token punctuation">(</span>since v1<span class="token punctuation">.</span><span class="token number">19</span><span class="token punctuation">)</span>
    <span class="token literal-property property">skip_push</span><span class="token operator">:</span> <span class="token boolean">false</span>

    # Path to the <span class="token function">Dockerfile</span> <span class="token punctuation">(</span>from the project root<span class="token punctuation">)</span><span class="token punctuation">.</span>
    #
    # Default<span class="token operator">:</span> <span class="token string">'Dockerfile'</span>
    <span class="token literal-property property">dockerfile</span><span class="token operator">:</span> <span class="token string">"{{ .Env.DOCKERFILE }}"</span>

    # Set the <span class="token string">"backend"</span> <span class="token keyword">for</span> the Docker pipe<span class="token punctuation">.</span>
    #
    # Valid options are<span class="token operator">:</span> docker<span class="token punctuation">,</span> buildx<span class="token punctuation">,</span> podman<span class="token punctuation">.</span>
    #
    # Podman is a GoReleaser Pro feature and is only available on Linux<span class="token punctuation">.</span>
    #
    # Default<span class="token operator">:</span> <span class="token string">'docker'</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> docker

    # Docker build flags<span class="token punctuation">.</span>
    #
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">build_flag_templates</span><span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token string">"--pull"</span>
      <span class="token operator">-</span> <span class="token string">"--label=org.opencontainers.image.created={{.Date}}"</span>
      <span class="token operator">-</span> <span class="token string">"--label=org.opencontainers.image.title={{.ProjectName}}"</span>
      <span class="token operator">-</span> <span class="token string">"--label=org.opencontainers.image.revision={{.FullCommit}}"</span>
      <span class="token operator">-</span> <span class="token string">"--label=org.opencontainers.image.version={{.Version}}"</span>
      <span class="token operator">-</span> <span class="token string">"--build-arg=FOO={{.Env.Bar}}"</span>
      <span class="token operator">-</span> <span class="token string">"--platform=linux/arm64"</span>

    # Extra flags to be passed down to the push command<span class="token punctuation">.</span>
    <span class="token literal-property property">push_flags</span><span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token operator">--</span>tls<span class="token operator">-</span>verify<span class="token operator">=</span><span class="token boolean">false</span>

    # If your Dockerfile copies files other than binaries and packages<span class="token punctuation">,</span>
    # you should list them here <span class="token keyword">as</span> well<span class="token punctuation">.</span>
    # Note that GoReleaser will create the same structure inside a temporary
    # folder<span class="token punctuation">,</span> so <span class="token keyword">if</span> you add <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">foo/bar.json</span><span class="token template-punctuation string">`</span></span> here<span class="token punctuation">,</span> on your Dockerfile you can
    # <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">COPY foo/bar.json /whatever.json</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span>
    # Also note that the paths here are relative to the folder <span class="token keyword">in</span> which
    # GoReleaser is being <span class="token function">run</span> <span class="token punctuation">(</span>usually the repository root folder<span class="token punctuation">)</span><span class="token punctuation">.</span>
    # This field does not support wildcards<span class="token punctuation">,</span> you can add an entire folder here
    # and use wildcards when you <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">COPY</span><span class="token template-punctuation string">`</span></span><span class="token operator">/</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ADD</span><span class="token template-punctuation string">`</span></span> <span class="token keyword">in</span> your Dockerfile<span class="token punctuation">.</span>
    <span class="token literal-property property">extra_files</span><span class="token operator">:</span>
      <span class="token operator">-</span> config<span class="token punctuation">.</span>yml

    # Additional templated extra files to add to the Docker image<span class="token punctuation">.</span>
    # Those files will have their contents pass through the template engine<span class="token punctuation">,</span>
    # and its results will be added to the build context the same way <span class="token keyword">as</span> the
    # extra_files field above<span class="token punctuation">.</span>
    #
    # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">17</span> <span class="token punctuation">(</span>pro<span class="token punctuation">)</span>
    # This feature is only available <span class="token keyword">in</span> GoReleaser Pro<span class="token punctuation">.</span>
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">templated_extra_files</span><span class="token operator">:</span>
      <span class="token operator">-</span> src<span class="token operator">:</span> <span class="token constant">LICENSE</span><span class="token punctuation">.</span>tpl
        <span class="token literal-property property">dst</span><span class="token operator">:</span> <span class="token constant">LICENSE</span><span class="token punctuation">.</span>txt
        <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token number">0644</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯·æ³¨æ„ï¼Œæ‚¨å¿…é¡»æ‰‹åŠ¨ç™»å½•åˆ°è¦æ¨é€åˆ°çš„Dockeræ³¨å†Œè¡¨ - GoReleaserä¸ä¼šè‡ªè¡Œç™»å½•ã€‚</p>
<blockquote>
<p>è¯·æ³¨æ„ï¼Œæ‚¨å¿…é¡»æ‰‹åŠ¨ç™»å½•åˆ°è¦æ¨é€åˆ°çš„Dockeræ³¨å†Œè¡¨ - GoReleaserä¸ä¼šè‡ªè¡Œç™»å½•ã€‚</p>
</blockquote>
<p>è¿™äº›è®¾ç½®åº”è¯¥å…è®¸æ‚¨ç”Ÿæˆå¤šä¸ª Docker æ˜ åƒï¼Œä¾‹å¦‚ï¼Œä½¿ç”¨å¤šä¸ªè¯­å¥ï¼Œä»¥åŠä¸ºé¡¹ç›®ä¸­çš„æ¯ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ç”Ÿæˆä¸€ä¸ªæ˜ åƒæˆ–ä¸€ä¸ªå…·æœ‰å¤šä¸ªäºŒè¿›åˆ¶æ–‡ä»¶çš„æ˜ åƒï¼Œä»¥åŠå®‰è£…ç”Ÿæˆçš„åŒ…è€Œä¸æ˜¯æ‰‹åŠ¨å¤åˆ¶äºŒè¿›åˆ¶æ–‡ä»¶å’Œé…ç½®ã€‚</p>
<h3 id="é€šç”¨æ˜ åƒåç§°" tabindex="-1"><a class="header-anchor" href="#é€šç”¨æ˜ åƒåç§°" aria-hidden="true">#</a> <strong>é€šç”¨æ˜ åƒåç§°</strong></h3>
<p>æŸäº›ç”¨æˆ·å¯èƒ½å¸Œæœ›ä½¿å…¶æ˜ åƒåç§°å°½å¯èƒ½é€šç”¨ã€‚è¿™å¯ä»¥é€šè¿‡åœ¨å®šä¹‰ä¸­æ·»åŠ æ¨¡æ¿è¯­è¨€æ¥å®ç°ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">project_name</span><span class="token operator">:</span> foo
<span class="token literal-property property">dockers</span><span class="token operator">:</span>
  <span class="token operator">-</span> image_templates<span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token string">"myuser/{{.ProjectName}}"</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™å°†ç”Ÿæˆå¹¶å‘å¸ƒä»¥ä¸‹æ˜ åƒï¼š</p>
<ul>
<li><code v-pre>myuser/foo</code></li>
</ul>
<h3 id="ä¿æŒå½“å‰ä¸»è¦å†…å®¹çš„-docker-æ˜ åƒæ›´æ–°" tabindex="-1"><a class="header-anchor" href="#ä¿æŒå½“å‰ä¸»è¦å†…å®¹çš„-docker-æ˜ åƒæ›´æ–°" aria-hidden="true">#</a> <strong>ä¿æŒå½“å‰ä¸»è¦å†…å®¹çš„ docker æ˜ åƒæ›´æ–°</strong></h3>
<p>ä¸€äº›ç”¨æˆ·å¯èƒ½æƒ³è¦æ¨é€ docker æ ‡è®° ã€ ä»¥åŠä½•æ—¶ï¼ˆä¾‹å¦‚ï¼‰æ„å»ºã€‚è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨å¤šä¸ªï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">dockers</span><span class="token operator">:</span>
  <span class="token operator">-</span> image_templates<span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token string">"myuser/myimage:{{ .Tag }}"</span>
      <span class="token operator">-</span> <span class="token string">"myuser/myimage:v{{ .Major }}"</span>
      <span class="token operator">-</span> <span class="token string">"myuser/myimage:v{{ .Major }}.{{ .Minor }}"</span>
      <span class="token operator">-</span> <span class="token string">"myuser/myimage:latest"</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™å°†ç”Ÿæˆå¹¶å‘å¸ƒä»¥ä¸‹æ˜ åƒï¼š</p>
<ul>
<li><code v-pre>myuser/myimage:v1.6.4</code></li>
<li><code v-pre>myuser/myimage:v1</code></li>
<li><code v-pre>myuser/myimage:v1.6</code></li>
<li><code v-pre>myuser/myimage:latest</code></li>
</ul>
<p>é€šè¿‡è¿™äº›è®¾ç½®ï¼Œæ‚¨å¯ä»¥å¸Œæœ›æ¨é€å¤šä¸ªå…·æœ‰å¤šä¸ªæ ‡ç­¾çš„ Docker æ˜ åƒã€‚</p>
<h3 id="å‘å¸ƒåˆ°å¤šä¸ª-docker-æ³¨å†Œè¡¨" tabindex="-1"><a class="header-anchor" href="#å‘å¸ƒåˆ°å¤šä¸ª-docker-æ³¨å†Œè¡¨" aria-hidden="true">#</a> <strong>å‘å¸ƒåˆ°å¤šä¸ª docker æ³¨å†Œè¡¨</strong></h3>
<p>æŸäº›ç”¨æˆ·å¯èƒ½å¸Œæœ›å°†æ˜ åƒæ¨é€åˆ°å¤šä¸ª docker æ³¨å†Œè¡¨ã€‚è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨å¤šä¸ªï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">dockers</span><span class="token operator">:</span>
  <span class="token operator">-</span> image_templates<span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token string">"docker.io/myuser/myimage:{{ .Tag }}"</span>
      <span class="token operator">-</span> <span class="token string">"docker.io/myuser/myimage:latest"</span>
      <span class="token operator">-</span> <span class="token string">"gcr.io/myuser/myimage:{{ .Tag }}"</span>
      <span class="token operator">-</span> <span class="token string">"gcr.io/myuser/myimage:latest"</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¼šç”Ÿæˆä»¥ä¸‹æ˜ åƒå¹¶å°†å…¶å‘å¸ƒåˆ° å’Œ ï¼š</p>
<ul>
<li><code v-pre>myuser/myimage:v1.6.4</code></li>
<li><code v-pre>myuser/myimage:latest</code></li>
<li><code v-pre>gcr.io/myuser/myimage:v1.6.4</code></li>
<li><code v-pre>gcr.io/myuser/myimage:latest</code></li>
</ul>
<h3 id="åº”ç”¨-docker-æ„å»ºæ ‡å¿—" tabindex="-1"><a class="header-anchor" href="#åº”ç”¨-docker-æ„å»ºæ ‡å¿—" aria-hidden="true">#</a> <strong>åº”ç”¨ Docker æ„å»ºæ ‡å¿—</strong></h3>
<p>å¯ä»¥ä½¿ç”¨ åº”ç”¨ç”Ÿæˆæ ‡å¿—ã€‚è¿™äº›æ ‡å¿—å¿…é¡»æ˜¯æœ‰æ•ˆçš„ Docker æ„å»ºæ ‡å¿—ã€‚</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">dockers</span><span class="token operator">:</span>
  <span class="token operator">-</span> image_templates<span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token string">"myuser/myimage"</span>
    <span class="token literal-property property">build_flag_templates</span><span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token string">"--pull"</span>
      <span class="token operator">-</span> <span class="token string">"--label=org.opencontainers.image.created={{.Date}}"</span>
      <span class="token operator">-</span> <span class="token string">"--label=org.opencontainers.image.title={{.ProjectName}}"</span>
      <span class="token operator">-</span> <span class="token string">"--label=org.opencontainers.image.revision={{.FullCommit}}"</span>
      <span class="token operator">-</span> <span class="token string">"--label=org.opencontainers.image.version={{.Version}}"</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™å°†æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>docker build <span class="token operator">-</span>t myuser<span class="token operator">/</span>myimage <span class="token punctuation">.</span> \
  <span class="token operator">--</span>pull \
  <span class="token operator">--</span>label<span class="token operator">=</span>org<span class="token punctuation">.</span>opencontainers<span class="token punctuation">.</span>image<span class="token punctuation">.</span>created<span class="token operator">=</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span>19T15<span class="token operator">:</span><span class="token number">58</span><span class="token operator">:</span>07Z \
  <span class="token operator">--</span>label<span class="token operator">=</span>org<span class="token punctuation">.</span>opencontainers<span class="token punctuation">.</span>image<span class="token punctuation">.</span>title<span class="token operator">=</span>mybinary \
  <span class="token operator">--</span>label<span class="token operator">=</span>org<span class="token punctuation">.</span>opencontainers<span class="token punctuation">.</span>image<span class="token punctuation">.</span>revision<span class="token operator">=</span>da39a3ee5e6b4b0d3255bfef95601890afd80709 \
  <span class="token operator">--</span>label<span class="token operator">=</span>org<span class="token punctuation">.</span>opencontainers<span class="token punctuation">.</span>image<span class="token punctuation">.</span>version<span class="token operator">=</span><span class="token number">1.6</span><span class="token number">.4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å°†ç‰¹å®šçš„æ„å»ºå™¨ä¸-docker-buildx-ä¸€èµ·ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#å°†ç‰¹å®šçš„æ„å»ºå™¨ä¸-docker-buildx-ä¸€èµ·ä½¿ç”¨" aria-hidden="true">#</a> <strong>å°†ç‰¹å®šçš„æ„å»ºå™¨ä¸ Docker buildx ä¸€èµ·ä½¿ç”¨</strong></h3>
<p>å¦‚æœå¯ç”¨ï¼Œåˆ™åœ¨æ„å»ºæ˜ åƒæ—¶ä½¿ç”¨ä¸Šä¸‹æ–‡æ„å»ºå™¨ã€‚æ­¤æ„å»ºå™¨å§‹ç»ˆå¯ç”¨ï¼Œå¹¶ç”± Docker å¼•æ“ä¸­çš„ BuildKit æä¾›æ”¯æŒã€‚å¦‚æœè¦ä½¿ç”¨å…¶ä»–æ„å»ºå™¨ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å­—æ®µæŒ‡å®šå®ƒï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">dockers</span><span class="token operator">:</span>
  <span class="token operator">-</span> image_templates<span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token string">"myuser/myimage"</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> buildx
    <span class="token literal-property property">build_flag_templates</span><span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token string">"--builder=mybuilder"</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="podman" tabindex="-1"><a class="header-anchor" href="#podman" aria-hidden="true">#</a> Podman</h3>
<p>æ‚¨å¯ä»¥ä½¿ç”¨è€Œä¸æ˜¯é€šè¿‡åœ¨é…ç½®ä¸Šè®¾ç½®ä¸ºï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">dockers</span><span class="token operator">:</span>
  <span class="token operator">-</span> image_templates<span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token string">"myuser/myimage"</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> podman
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯·æ³¨æ„ï¼ŒGoReleaser ä¸ä¼šä¸ºæ‚¨å®‰è£… Podmanï¼Œä¹Ÿä¸ä¼šæ›´æ”¹å…¶ä»»ä½•é…ç½®ã€‚</p>
<h2 id="docker-manifests" tabindex="-1"><a class="header-anchor" href="#docker-manifests" aria-hidden="true">#</a> <strong>Docker Manifests</strong></h2>
<p>GoReleaser è¿˜å¯ä»¥ä½¿ç”¨è¯¥å·¥å…·åˆ›å»ºå’Œæ¨é€ Docker å¤šå¹³å°æ˜ åƒã€‚</p>
<p>æ— éœ€åˆ‡æ¢è®¾å¤‡ï¼Œåœ¨ Apple M2 èŠ¯ç‰‡çš„æœºå™¨ä¸Šæˆ‘ä»¬å¯ä»¥ç›´æ¥æ„å»ºÂ <code v-pre>amd64</code>Â ä¹Ÿå°±æ˜¯ Linux å¹³å°é•œåƒï¼Œ<code v-pre>docker build</code>Â å‘½ä»¤æä¾›äº†Â <code v-pre>--platform</code>Â å‚æ•°å¯ä»¥æ„å»ºè·¨å¹³å°é•œåƒã€‚</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>docker build <span class="token operator">--</span>platform<span class="token operator">=</span>linux<span class="token operator">/</span>amd64 <span class="token operator">-</span>t kubecub<span class="token operator">/</span>echo<span class="token operator">-</span>platform<span class="token operator">-</span>amd64 <span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿è¡Œä¸åŒå¹³å°çš„é•œåƒä¼šæ€ä¹ˆæ ·ï¼š</p>
<p>ä½ ä¹Ÿè®¸ä¼šå¥½å¥‡ï¼Œåœ¨ Apple M2 èŠ¯ç‰‡çš„ä¸»æœºè®¾å¤‡ä¸Šè¿è¡ŒÂ <code v-pre>amd64</code>Â å¹³å°é•œåƒä¼šæ€æ ·ã€‚ç›®å‰å’±ä»¬æ„å»ºçš„è¿™ä¸ªç®€å•é•œåƒå…¶å®æ˜¯èƒ½å¤Ÿè¿è¡Œçš„ï¼Œåªä¸è¿‡ä¼šå¾—åˆ°ä¸€æ¡è­¦å‘Šä¿¡æ¯ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>$ docker run <span class="token operator">--</span>rm kubecub<span class="token operator">/</span>echo<span class="token operator">-</span>platform<span class="token operator">-</span>amd64
<span class="token constant">WARNING</span><span class="token operator">:</span> The requested image's <span class="token function">platform</span> <span class="token punctuation">(</span>linux<span class="token operator">/</span>amd64<span class="token punctuation">)</span> does not match the detected host <span class="token function">platform</span> <span class="token punctuation">(</span>linux<span class="token operator">/</span>arm64<span class="token operator">/</span>v8<span class="token punctuation">)</span> and no specific platform was requested
Linux buildkitsandbox <span class="token number">5.15</span><span class="token number">.49</span><span class="token operator">-</span>linuxkit #<span class="token number">1</span> <span class="token constant">SMP</span> <span class="token constant">PREEMPT</span> Tue Sep <span class="token number">13</span> <span class="token number">07</span><span class="token operator">:</span><span class="token number">51</span><span class="token operator">:</span><span class="token number">32</span> <span class="token constant">UTC</span> <span class="token number">2022</span> x86_64 Linux
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºå†…å®¹ä¸­çš„Â <code v-pre>x86_64</code>Â å°±è¡¨ç¤ºÂ <code v-pre>AMD64</code>Â æ¶æ„ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šè™½ç„¶è¿™ä¸ªç®€å•çš„é•œåƒèƒ½å¤Ÿè¿è¡ŒæˆåŠŸï¼Œä½†å¦‚æœå®¹å™¨å†…éƒ¨ç¨‹åºä¸æ”¯æŒè·¨å¹³å°ï¼Œ<code v-pre>amd64</code>Â å¹³å°é•œåƒæ— æ³•åœ¨Â <code v-pre>arm64</code>Â å¹³å°è¿è¡ŒæˆåŠŸã€‚</p>
</blockquote>
<p><strong>ä½¿ç”¨ manifest åˆå¹¶å¤šå¹³å°é•œåƒ</strong></p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code v-pre>docker manifest</code> çš„å­å‘½ä»¤ <code v-pre>create</code> åˆ›å»ºä¸€ä¸ª <code v-pre>manifest list</code>ï¼Œå³å°†å¤šä¸ªå¹³å°çš„é•œåƒåˆå¹¶ä¸ºä¸€ä¸ªé•œåƒã€‚</p>
<p><code v-pre>create</code> å‘½ä»¤ç”¨æ³•å¾ˆç®€å•ï¼Œåé¢è·Ÿçš„ç¬¬ä¸€ä¸ªå‚æ•° <code v-pre>jianghushinian/echo-platform</code> å³ä¸ºåˆå¹¶åçš„é•œåƒï¼Œä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹å¯ä»¥æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªä¸åŒå¹³å°çš„é•œåƒã€‚</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>docker manifest create kubecub<span class="token operator">/</span>echo<span class="token operator">-</span>platform kubecub<span class="token operator">/</span>echo<span class="token operator">-</span>platform<span class="token operator">-</span>arm64 kubecub<span class="token operator">/</span>echo<span class="token operator">-</span>platform<span class="token operator">-</span>amd64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æµè§ˆå™¨ä¸­ç™»å½•Â <a href="https://link.juejin.cn/?target=https%3A%2F%2Fhub.docker.com%2F" target="_blank" rel="noopener noreferrer">Docker Hub<ExternalLinkIcon/></a>Â æŸ¥çœ‹æ¨é€æˆåŠŸçš„é•œåƒï¼š</p>
<blockquote>
<p>è¿›å…¥é•œåƒä¿¡æ¯è¯¦æƒ…é¡µé¢çš„Â <code v-pre>Tags</code>Â æ ‡ç­¾ï¼Œèƒ½å¤Ÿçœ‹åˆ°é•œåƒæ”¯æŒÂ <code v-pre>amd64</code>ã€<code v-pre>arm64/v8</code>Â è¿™ä¸¤ä¸ªå¹³å°ã€‚</p>
</blockquote>
<h3 id="manifest-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#manifest-å‘½ä»¤" aria-hidden="true">#</a> Manifest å‘½ä»¤</h3>
<p>å¯ä»¥å‘ç°ï¼Œ<code v-pre>docker manifest</code>Â å…±æä¾›äº†Â <code v-pre>annotate</code>ã€<code v-pre>create</code>ã€<code v-pre>inspect</code>ã€<code v-pre>push</code>ã€<code v-pre>rm</code>Â è¿™ 5 ä¸ªå­å‘½ã€‚</p>
<p>å¯ä»¥å‘ç°ï¼Œ<code v-pre>create</code>Â å­å‘½ä»¤æ”¯æŒä¸¤ä¸ªå¯é€‰å‚æ•°Â <code v-pre>-a/--amend</code>Â ç”¨æ¥ä¿®è®¢å·²å­˜åœ¨çš„å¤šæ¶æ„é•œåƒã€‚</p>
<p>æŒ‡å®šÂ <code v-pre>--insecure</code>Â å‚æ•°åˆ™å…è®¸ä½¿ç”¨ä¸å®‰å…¨çš„ï¼ˆé httpsï¼‰é•œåƒä»“åº“ã€‚</p>
<h3 id="push" tabindex="-1"><a class="header-anchor" href="#push" aria-hidden="true">#</a> <strong>push</strong></h3>
<p><code v-pre>push</code>Â å­å‘½ä»¤æˆ‘ä»¬ä¹Ÿè§è¿‡äº†ï¼Œä½¿ç”¨Â <code v-pre>push</code>Â å¯ä»¥å°†å¤šæ¶æ„é•œåƒæ¨é€åˆ°é•œåƒä»“åº“ã€‚</p>
<p>åŒæ ·çš„ï¼Œ<code v-pre>push</code>Â ä¹Ÿæœ‰ä¸€ä¸ªÂ <code v-pre>--insecure</code>Â å‚æ•°å…è®¸ä½¿ç”¨ä¸å®‰å…¨çš„ï¼ˆé httpsï¼‰é•œåƒä»“åº“ã€‚</p>
<ul>
<li><code v-pre>p/--purge</code>Â é€‰é¡¹çš„ä½œç”¨æ˜¯æ¨é€æœ¬åœ°é•œåƒåˆ°è¿œç¨‹ä»“åº“åï¼Œåˆ é™¤æœ¬åœ°Â <code v-pre>manifest list</code>ã€‚</li>
</ul>
<h3 id="inspect" tabindex="-1"><a class="header-anchor" href="#inspect" aria-hidden="true">#</a> <strong>inspect</strong></h3>
<p><code v-pre>inspect</code>Â ç”¨æ¥æŸ¥çœ‹Â <code v-pre>manifest</code>/<code v-pre>manifest list</code>Â æ‰€åŒ…å«çš„é•œåƒä¿¡æ¯ã€‚</p>
<p><code v-pre>--insecure</code>Â å‚æ•°å…è®¸ä½¿ç”¨ä¸å®‰å…¨çš„ï¼ˆé httpsï¼‰é•œåƒä»“åº“ã€‚è¿™å·²ç»æ˜¯æˆ‘ä»¬ç¬¬ä¸‰æ¬¡çœ‹è§è¿™ä¸ªå‚æ•°äº†ï¼Œè¿™ä¹ŸéªŒè¯äº†Â <code v-pre>docker manifest</code>Â å‘½ä»¤éœ€è¦è”ç½‘æ‰èƒ½ä½¿ç”¨çš„è¯´æ³•ï¼Œå› ä¸ºè¿™äº›å­å‘½ä»¤åŸºæœ¬éƒ½æ¶‰åŠåˆ°å’Œè¿œç¨‹é•œåƒä»“åº“çš„äº¤äº’ã€‚</p>
<h3 id="annotate" tabindex="-1"><a class="header-anchor" href="#annotate" aria-hidden="true">#</a> <strong>annotate</strong></h3>
<p><code v-pre>annotate</code>Â å­å‘½ä»¤å¯ä»¥ç»™ä¸€ä¸ªæœ¬åœ°é•œåƒÂ <code v-pre>manifest</code>Â æ·»åŠ é™„åŠ çš„ä¿¡æ¯ã€‚è¿™æœ‰ç‚¹åƒ K8s Annotations çš„æ„æ€ã€‚</p>
<p>å¯é€‰å‚æ•°åˆ—è¡¨å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>é€‰é¡¹</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>--arch</td>
<td>è®¾ç½® CPU æ¶æ„ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td>--os</td>
<td>è®¾ç½®æ“ä½œç³»ç»Ÿä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td>--os-features</td>
<td>è®¾ç½®æ“ä½œç³»ç»ŸåŠŸèƒ½ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td>--os-version</td>
<td>è®¾ç½®æ“ä½œç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td>--variant</td>
<td>è®¾ç½® CPU æ¶æ„çš„ variant ä¿¡æ¯ï¼ˆç¿»è¯‘è¿‡æ¥æ˜¯â€œå˜ç§â€çš„æ„æ€ï¼‰ï¼Œå¦‚ ARM æ¶æ„çš„ v7ã€v8 ç­‰ã€‚</td>
</tr>
</tbody>
</table>
<h2 id="rm" tabindex="-1"><a class="header-anchor" href="#rm" aria-hidden="true">#</a> rm</h2>
<p>æœ€åè¦ä»‹ç»çš„å­å‘½ä»¤æ˜¯Â <code v-pre>rm</code>ï¼Œä½¿ç”¨Â <code v-pre>rm</code>Â å¯ä»¥åˆ é™¤æœ¬åœ°ä¸€ä¸ªæˆ–å¤šä¸ªå¤šæ¶æ„é•œåƒï¼ˆ<code v-pre>manifest lists</code>ï¼‰ã€‚</p>
<h3 id="customization" tabindex="-1"><a class="header-anchor" href="#customization" aria-hidden="true">#</a> <strong>Customization</strong></h3>
<p>æ‚¨å¯ä»¥åœ¨ä¸€æ¬¡ GoReleaser è¿è¡Œä¸­åˆ›å»ºå¤šä¸ªæ¸…å•ï¼Œä»¥ä¸‹æ˜¯æ‰€æœ‰å¯ç”¨çš„é€‰é¡¹ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">docker_manifests</span><span class="token operator">:</span>
  # You can have multiple Docker manifests<span class="token punctuation">.</span>
<span class="token operator">-</span>
  # <span class="token constant">ID</span> <span class="token keyword">of</span> the manifest<span class="token punctuation">,</span> needed <span class="token keyword">if</span> you want to filter by it later <span class="token function">on</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> on
  # custom publishers<span class="token punctuation">)</span><span class="token punctuation">.</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> myimg

  # Name <span class="token keyword">for</span> the manifest<span class="token punctuation">.</span>
  #
  # Templates<span class="token operator">:</span> allowed
  <span class="token literal-property property">name_template</span><span class="token operator">:</span> <span class="token string">"foo/bar:{{ .Version }}"</span>

  # Image name to be added to <span class="token keyword">this</span> manifest<span class="token punctuation">.</span>
  #
  # Templates<span class="token operator">:</span> allowed
  <span class="token literal-property property">image_templates</span><span class="token operator">:</span>
  <span class="token operator">-</span> <span class="token string">"foo/bar:{{ .Version }}-amd64"</span>
  <span class="token operator">-</span> <span class="token string">"foo/bar:{{ .Version }}-arm64v8"</span>

  # Extra flags to be passed down to the manifest create command<span class="token punctuation">.</span>
  <span class="token literal-property property">create_flags</span><span class="token operator">:</span>
  <span class="token operator">-</span> <span class="token operator">--</span>insecure

  # Extra flags to be passed down to the manifest push command<span class="token punctuation">.</span>
  <span class="token literal-property property">push_flags</span><span class="token operator">:</span>
  <span class="token operator">-</span> <span class="token operator">--</span>insecure

  # Skips the Docker manifest<span class="token punctuation">.</span>
  # If you <span class="token keyword">set</span> <span class="token keyword">this</span> to <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">false</span><span class="token template-punctuation string">`</span></span> or <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">auto</span><span class="token template-punctuation string">`</span></span> on your source Docker configuration<span class="token punctuation">,</span>
  #  you'll probably want to <span class="token keyword">do</span> the same here<span class="token punctuation">.</span>
  #
  # If <span class="token keyword">set</span> to <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">auto</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> the manifest will not be created <span class="token keyword">in</span> <span class="token keyword">case</span> there is an
  #  indicator <span class="token keyword">of</span> a prerelease <span class="token keyword">in</span> the tag<span class="token punctuation">,</span> e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> v1<span class="token punctuation">.</span><span class="token number">0.0</span><span class="token operator">-</span>rc1<span class="token punctuation">.</span>
  #
  # Templates<span class="token operator">:</span> <span class="token function">allowed</span> <span class="token punctuation">(</span>since v1<span class="token punctuation">.</span><span class="token number">19</span><span class="token punctuation">)</span>
  <span class="token literal-property property">skip_push</span><span class="token operator">:</span> <span class="token boolean">false</span>

  # Set the <span class="token string">"backend"</span> <span class="token keyword">for</span> the Docker manifest pipe<span class="token punctuation">.</span>
  # Valid options are<span class="token operator">:</span> docker<span class="token punctuation">,</span> podman
  #
  # Relevant notes<span class="token operator">:</span>
  # <span class="token number">1.</span> podman is a GoReleaser Pro feature and is only available on Linux<span class="token punctuation">;</span>
  # <span class="token number">2.</span> <span class="token keyword">if</span> you <span class="token keyword">set</span> podman here<span class="token punctuation">,</span> the respective docker configuration need to use
  #     podman too<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> <span class="token string">'docker'</span>
  <span class="token literal-property property">use</span><span class="token operator">:</span> docker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ko" tabindex="-1"><a class="header-anchor" href="#ko" aria-hidden="true">#</a> KO</h2>
<p>https://github.com/ko-build/ko</p>
<p>KO is Build and deploy Go applications</p>
<p>install docs:</p>
<p><a href="https://ko.build/install/" target="_blank" rel="noopener noreferrer">Installation - ko: Easy Go Containers<ExternalLinkIcon/></a></p>
<p>User Actions:</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token literal-property property">steps</span><span class="token operator">:</span>
<span class="token operator">-</span> uses<span class="token operator">:</span> imjasonh<span class="token operator">/</span>setup<span class="token operator">-</span>ko@v0<span class="token punctuation">.</span><span class="token number">6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>User Ko:</strong></p>
<p><code v-pre>ko</code>å–å†³äº Docker é…ç½®ä¸­é…ç½®çš„èº«ä»½éªŒè¯ï¼ˆé€šå¸¸<code v-pre>~/.docker/config.json</code>ï¼‰ã€‚</p>
<p>âœ¨**å¦‚æœæ‚¨å¯ä»¥ä½¿ç”¨ æ¨é€å›¾ç‰‡<code v-pre>docker push</code>ï¼Œåˆ™æ‚¨å·²ç»é€šè¿‡äº†èº«ä»½éªŒè¯<code v-pre>ko</code>ï¼**âœ¨</p>
<p>ç”±äº<code v-pre>ko</code>ä¸éœ€è¦<code v-pre>docker</code>ï¼Œ<code v-pre>ko login</code>è¿˜æä¾›äº†ä¸€ä¸ªä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç ç™»å½•å®¹å™¨æ˜ åƒæ³¨å†Œè¡¨çš„ç•Œé¢ï¼Œç±»ä¼¼äº<code v-pre>[docker login](https://docs.docker.com/engine/reference/commandline/login/)</code>.</p>
<p>æ­¤å¤–ï¼Œå³ä½¿æœªåœ¨ Docker é…ç½®ä¸­é…ç½®èº«ä»½éªŒè¯ï¼Œä¹Ÿ<code v-pre>ko</code>åŒ…å«ä½¿ç”¨ç¯å¢ƒä¸­é…ç½®çš„å‡­æ®å¯¹ä»¥ä¸‹å®¹å™¨æ³¨å†Œè¡¨è¿›è¡Œèº«ä»½éªŒè¯çš„å†…ç½®æ”¯æŒï¼š</p>
<ul>
<li>
<p>Google å®¹å™¨æ³¨å†Œè¡¨å’Œ Artifact æ³¨å†Œè¡¨ï¼Œä½¿ç”¨<a href="https://cloud.google.com/docs/authentication/production" target="_blank" rel="noopener noreferrer">åº”ç”¨ç¨‹åºé»˜è®¤å‡­æ®<ExternalLinkIcon/></a><code v-pre>gcloud</code></p>
<p>æˆ–</p>
</li>
<li>
<p>Amazon Elastic Container Registryï¼Œä½¿ç”¨<a href="https://github.com/awslabs/amazon-ecr-credential-helper/#aws-credentials" target="_blank" rel="noopener noreferrer">AWS å‡­è¯<ExternalLinkIcon/></a></p>
</li>
<li>
<p>Azure å®¹å™¨æ³¨å†Œè¡¨ï¼Œä½¿ç”¨<a href="https://github.com/chrismellard/docker-credential-acr-env/" target="_blank" rel="noopener noreferrer">ç¯å¢ƒå˜é‡<ExternalLinkIcon/></a></p>
</li>
<li>
<p>GitHub Container Registryï¼Œä½¿ç”¨<code v-pre>GITHUB_TOKEN</code>ç¯å¢ƒå˜é‡</p>
</li>
</ul>
<p><code v-pre>ko</code>å–å†³äºç¯å¢ƒå˜é‡ ï¼Œ<code v-pre>KO_DOCKER_REPO</code>æ¥ç¡®å®šåº”å°†å…¶æ„å»ºçš„æ˜ åƒæ¨é€åˆ°ä½•å¤„ã€‚é€šå¸¸è¿™å°†æ˜¯è¿œç¨‹æ³¨å†Œè¡¨ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><code v-pre>KO_DOCKER_REPO=gcr.io/my-project</code>ï¼Œ æˆ–è€…</li>
<li><code v-pre>KO_DOCKER_REPO=ghcr.io/my-org/my-repo</code>ï¼Œ æˆ–è€…</li>
<li><code v-pre>KO_DOCKER_REPO=my-dockerhub-user</code></li>
</ul>
<p><strong>æ­¥éª¤ï¼š</strong></p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>echo <span class="token string">"***"</span> <span class="token operator">|</span> docker login ghcr<span class="token punctuation">.</span>io <span class="token operator">-</span>u kuebcub <span class="token operator">--</span>password<span class="token operator">-</span>stdin
<span class="token keyword">export</span> <span class="token constant">GITHUB_TOKEN</span><span class="token operator">=</span><span class="token string">"******"</span>
<span class="token keyword">export</span> <span class="token constant">KO_DOCKER_REPO</span><span class="token operator">=</span>ghcr<span class="token punctuation">.</span>io<span class="token operator">/</span>kubecub<span class="token operator">/</span>exporter<span class="token punctuation">;</span> ko build <span class="token punctuation">.</span><span class="token operator">/</span>cmd<span class="token operator">/</span>exporter
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æµ‹è¯•ï¼š</strong></p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>docker run <span class="token operator">-</span>p <span class="token number">8080</span><span class="token operator">:</span><span class="token number">8080</span> <span class="token function">$</span><span class="token punctuation">(</span>ko build <span class="token punctuation">.</span><span class="token operator">/</span>cmd<span class="token operator">/</span>app<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="docker-images-with-ko" tabindex="-1"><a class="header-anchor" href="#docker-images-with-ko" aria-hidden="true">#</a> <strong>Docker Images with Ko</strong></h2>
<p>è¯·æ³¨æ„ ko å°†å†æ¬¡æ„å»ºæ‚¨çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚è¿™ä¸åº”è¯¥è¿‡å¤šåœ°å¢åŠ å‘å¸ƒæ—¶é—´ï¼Œå› ä¸ºå®ƒä¼šåœ¨å¯èƒ½çš„æƒ…å†µä¸‹ä½¿ç”¨ä¸æ„å»ºç®¡é“ç›¸åŒçš„æ„å»ºé€‰é¡¹ï¼Œå› æ­¤ç»“æœå¯èƒ½ä¼šè¢«ç¼“å­˜ã€‚</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">kos</span><span class="token operator">:</span>
<span class="token operator">-</span>
  # <span class="token constant">ID</span> <span class="token keyword">of</span> <span class="token keyword">this</span> image<span class="token punctuation">.</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> foo

  # Build <span class="token constant">ID</span> that should be used to <span class="token keyword">import</span> the build settings<span class="token punctuation">.</span>
  <span class="token literal-property property">build</span><span class="token operator">:</span> build<span class="token operator">-</span>id

  # Main path to build<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> build<span class="token punctuation">.</span>main
  <span class="token literal-property property">main</span><span class="token operator">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>cmd<span class="token operator">/</span><span class="token operator">...</span>

  # Working directory used to build<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> build<span class="token punctuation">.</span>dir
  <span class="token literal-property property">working_dir</span><span class="token operator">:</span> <span class="token punctuation">.</span>

  # Base image to publish to use<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> <span class="token string">'cgr.dev/chainguard/static'</span>
  <span class="token literal-property property">base_image</span><span class="token operator">:</span> alpine

  # Labels <span class="token keyword">for</span> the image<span class="token punctuation">.</span>
  #
  # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">17</span>
  <span class="token literal-property property">labels</span><span class="token operator">:</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> bar

  # Repository to push to<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> $<span class="token constant">KO_DOCKER_REPO</span>
  <span class="token literal-property property">repository</span><span class="token operator">:</span> ghcr<span class="token punctuation">.</span>io<span class="token operator">/</span>foo<span class="token operator">/</span>bar

  # Platforms to build and publish<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> <span class="token string">'linux/amd64'</span>
  <span class="token literal-property property">platforms</span><span class="token operator">:</span>
  <span class="token operator">-</span> linux<span class="token operator">/</span>amd64
  <span class="token operator">-</span> linux<span class="token operator">/</span>arm64

  # Tag to build and push<span class="token punctuation">.</span>
  # Empty tags are ignored<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> <span class="token string">'latest'</span>
  # Templates<span class="token operator">:</span> allowed
  <span class="token literal-property property">tags</span><span class="token operator">:</span>
  <span class="token operator">-</span> latest
  <span class="token operator">-</span> <span class="token string">'{{.Tag}}'</span>
  <span class="token operator">-</span> <span class="token string">'{{if not .Prerelease}}stable{{end}}'</span>

  # Creation time given to the image
  # <span class="token keyword">in</span> seconds since the Unix epoch <span class="token keyword">as</span> a string<span class="token punctuation">.</span>
  #
  # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">17</span>
  # Templates<span class="token operator">:</span> allowed
  <span class="token literal-property property">creation_time</span><span class="token operator">:</span> <span class="token string">'{{.CommitTimestamp}}'</span>

  # Creation time given to the files <span class="token keyword">in</span> the kodata directory
  # <span class="token keyword">in</span> seconds since the Unix epoch <span class="token keyword">as</span> a string<span class="token punctuation">.</span>
  #
  # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">17</span>
  # Templates<span class="token operator">:</span> allowed
  <span class="token literal-property property">ko_data_creation_time</span><span class="token operator">:</span> <span class="token string">'{{.CommitTimestamp}}'</span>

  # <span class="token constant">SBOM</span> format to use<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> <span class="token string">'spdx'</span>
  # Valid options are<span class="token operator">:</span> spdx<span class="token punctuation">,</span> cyclonedx<span class="token punctuation">,</span> go<span class="token punctuation">.</span>version<span class="token operator">-</span>m and none<span class="token punctuation">.</span>
  <span class="token literal-property property">sbom</span><span class="token operator">:</span> none

  # Ldflags to use on build<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> build<span class="token punctuation">.</span>ldflags
  <span class="token literal-property property">ldflags</span><span class="token operator">:</span>
  <span class="token operator">-</span> foo
  <span class="token operator">-</span> bar

  # Flags to use on build<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> build<span class="token punctuation">.</span>flags
  <span class="token literal-property property">flags</span><span class="token operator">:</span>
  <span class="token operator">-</span> foo
  <span class="token operator">-</span> bar

  # Env to use on build<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> build<span class="token punctuation">.</span>env
  <span class="token literal-property property">env</span><span class="token operator">:</span>
  <span class="token operator">-</span> <span class="token constant">FOO</span><span class="token operator">=</span>bar
  <span class="token operator">-</span> <span class="token constant">SOMETHING</span><span class="token operator">=</span>value

  # Bare uses a tag on the $<span class="token constant">KO_DOCKER_REPO</span> without anything additional<span class="token punctuation">.</span>
  <span class="token literal-property property">bare</span><span class="token operator">:</span> <span class="token boolean">true</span>

  # Whether to preserve the full <span class="token keyword">import</span> path after the repository name<span class="token punctuation">.</span>
  <span class="token literal-property property">preserve_import_paths</span><span class="token operator">:</span> <span class="token boolean">true</span>

  # Whether to use the base path without the <span class="token constant">MD5</span> hash after the repository name<span class="token punctuation">.</span>
  <span class="token literal-property property">base_import_paths</span><span class="token operator">:</span> <span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯ä¸€ä¸ªæœ€å°çš„ä¾‹å­ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yml
<span class="token literal-property property">before</span><span class="token operator">:</span>
  <span class="token literal-property property">hooks</span><span class="token operator">:</span>
    <span class="token operator">-</span> go mod tidy

<span class="token literal-property property">builds</span><span class="token operator">:</span>
  <span class="token operator">-</span> env<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"CGO_ENABLED=1"</span> <span class="token punctuation">]</span>
    <span class="token literal-property property">binary</span><span class="token operator">:</span> test
    <span class="token literal-property property">goos</span><span class="token operator">:</span>
    <span class="token operator">-</span> darwin
    <span class="token operator">-</span> linux
    <span class="token literal-property property">goarch</span><span class="token operator">:</span>
    <span class="token operator">-</span> amd64
    <span class="token operator">-</span> arch64

<span class="token literal-property property">kos</span><span class="token operator">:</span>
  <span class="token operator">-</span> repository<span class="token operator">:</span> ghcr<span class="token punctuation">.</span>io<span class="token operator">/</span>caarlos0<span class="token operator">/</span>test<span class="token operator">-</span>ko
    <span class="token literal-property property">tags</span><span class="token operator">:</span>
    <span class="token operator">-</span> <span class="token string">'{{.Version}}'</span>
    <span class="token operator">-</span> latest
    <span class="token literal-property property">bare</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token literal-property property">preserve_import_paths</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token literal-property property">platforms</span><span class="token operator">:</span>
    <span class="token operator">-</span> linux<span class="token operator">/</span>amd64
    <span class="token operator">-</span> linux<span class="token operator">/</span>arm64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™å°†ä¸º ã€ å’Œ æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä»¥åŠ Linux çš„ Docker æ˜ åƒå’Œæ¸…å•ã€‚</p>
<h2 id="åŒ…çš„å¤§å°" tabindex="-1"><a class="header-anchor" href="#åŒ…çš„å¤§å°" aria-hidden="true">#</a> åŒ…çš„å¤§å°</h2>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
# Whether to enable the size reporting or not<span class="token punctuation">.</span>
<span class="token literal-property property">report_sizes</span><span class="token operator">:</span> <span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="metadata-å…ƒæ•°æ®" tabindex="-1"><a class="header-anchor" href="#metadata-å…ƒæ•°æ®" aria-hidden="true">#</a> <strong>MetadataÂ å…ƒæ•°æ®</strong></h2>
<p>GoReleaser åœ¨å®Œæˆè¿è¡Œä¹‹å‰ä¼šåœ¨æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€äº›å…ƒæ•°æ®æ–‡ä»¶ã€‚</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
#
<span class="token literal-property property">metadata</span><span class="token operator">:</span>
  # Set the modified timestamp on the metadata files<span class="token punctuation">.</span>
  #
  # Templates<span class="token operator">:</span> allowed<span class="token punctuation">.</span>
  <span class="token literal-property property">mod_timestamp</span><span class="token operator">:</span> <span class="token string">"{{ .CommitTimestamp }}"</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç­¾åæ ¡éªŒ" tabindex="-1"><a class="header-anchor" href="#ç­¾åæ ¡éªŒ" aria-hidden="true">#</a> ç­¾åæ ¡éªŒ</h2>
<p>GoReleaser æä¾›äº†å¯¹å¯æ‰§è¡Œæ–‡ä»¶å’Œæ¡£æ¡ˆè¿›è¡Œç­¾åçš„æ–¹æ³•ã€‚</p>
<p>ç­¾åä¸æ ¡éªŒå’Œæ–‡ä»¶ç»“åˆä½¿ç”¨ï¼Œé€šå¸¸ä»…å¯¹æ ¡éªŒå’Œæ–‡ä»¶è¿›è¡Œç­¾åå°±è¶³å¤Ÿäº†ã€‚</p>
<p>é»˜è®¤é…ç½®ä¸ºä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¸ºæ ¡éªŒå’Œæ–‡ä»¶åˆ›å»ºç‹¬ç«‹ç­¾å<a href="https://www.gnupg.org/" target="_blank" rel="noopener noreferrer">GnuPG<ExternalLinkIcon/></a>ï¼Œä»¥åŠæ‚¨çš„é»˜è®¤å¯†é’¥ã€‚è¦å¯ç”¨ç­¾ååªéœ€æ·»åŠ </p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">signs</span><span class="token operator">:</span>
  <span class="token operator">-</span> artifacts<span class="token operator">:</span> checksum
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¦è‡ªå®šä¹‰ç­¾åç®¡é“ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é€‰é¡¹ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">signs</span><span class="token operator">:</span>
  <span class="token operator">-</span>
    # <span class="token constant">ID</span> <span class="token keyword">of</span> the sign config<span class="token punctuation">,</span> must be unique<span class="token punctuation">.</span>
    #
    # Default<span class="token operator">:</span> <span class="token string">'default'</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> foo

    # Name <span class="token keyword">of</span> the signature file<span class="token punctuation">.</span>
    #
    # Default<span class="token operator">:</span> <span class="token string">'${artifact}.sig'</span>
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">signature</span><span class="token operator">:</span> <span class="token string">"${artifact}_sig"</span>

    # Path to the signature command
    #
    # Default<span class="token operator">:</span> <span class="token string">'gpg'</span>
    <span class="token literal-property property">cmd</span><span class="token operator">:</span> gpg2

    # Command line arguments <span class="token keyword">for</span> the command
    #
    # to sign <span class="token keyword">with</span> a specific key use
    # args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"-u"</span><span class="token punctuation">,</span> <span class="token string">"&lt;key id, fingerprint, email, ...>"</span><span class="token punctuation">,</span> <span class="token string">"--output"</span><span class="token punctuation">,</span> <span class="token string">"${signature}"</span><span class="token punctuation">,</span> <span class="token string">"--detach-sign"</span><span class="token punctuation">,</span> <span class="token string">"${artifact}"</span><span class="token punctuation">]</span>
    #
    # Default<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"--output"</span><span class="token punctuation">,</span> <span class="token string">"${signature}"</span><span class="token punctuation">,</span> <span class="token string">"--detach-sign"</span><span class="token punctuation">,</span> <span class="token string">"${artifact}"</span><span class="token punctuation">]</span>
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">args</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"--output"</span><span class="token punctuation">,</span> <span class="token string">"${signature}"</span><span class="token punctuation">,</span> <span class="token string">"${artifact}"</span><span class="token punctuation">,</span> <span class="token string">"{{ .ProjectName }}"</span><span class="token punctuation">]</span>

    # Which artifacts to sign
    #
    #   all<span class="token operator">:</span>      all artifacts
    #   none<span class="token operator">:</span>     no signing
    #   checksum<span class="token operator">:</span> only checksum <span class="token function">file</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
    #   source<span class="token operator">:</span>   source archive
    #   <span class="token keyword">package</span><span class="token operator">:</span>  linux <span class="token function">packages</span> <span class="token punctuation">(</span>deb<span class="token punctuation">,</span> rpm<span class="token punctuation">,</span> apk<span class="token punctuation">)</span>
    #   archive<span class="token operator">:</span>  archives from archive pipe
    #   binary<span class="token operator">:</span>   binaries <span class="token keyword">if</span> archiving format is <span class="token keyword">set</span> to binary
    #   sbom<span class="token operator">:</span>     any Software Bill <span class="token keyword">of</span> Materials generated <span class="token keyword">for</span> other artifacts
    #
    # Default<span class="token operator">:</span> <span class="token string">'none'</span>
    <span class="token literal-property property">artifacts</span><span class="token operator">:</span> all

    # IDs <span class="token keyword">of</span> the artifacts to sign<span class="token punctuation">.</span>
    #
    # If <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">artifacts</span><span class="token template-punctuation string">`</span></span> is checksum or source<span class="token punctuation">,</span> <span class="token keyword">this</span> fields has no effect<span class="token punctuation">.</span>
    <span class="token literal-property property">ids</span><span class="token operator">:</span>
      <span class="token operator">-</span> foo
      <span class="token operator">-</span> bar

    # Stdin data to be given to the signature command <span class="token keyword">as</span> stdin<span class="token punctuation">.</span>
    #
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">stdin</span><span class="token operator">:</span> <span class="token string">'{{ .Env.GPG_PASSWORD }}'</span>

    # StdinFile file to be given to the signature command <span class="token keyword">as</span> stdin<span class="token punctuation">.</span>
    <span class="token literal-property property">stdin_file</span><span class="token operator">:</span> <span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span>password

    # Sets a certificate that your signing command should write to<span class="token punctuation">.</span>
    # You can later use <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>certificate<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> or <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.Env.certificate</span><span class="token template-punctuation string">`</span></span> <span class="token keyword">in</span> the <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">args</span><span class="token template-punctuation string">`</span></span> section<span class="token punctuation">.</span>
    # This is particularly useful <span class="token keyword">for</span> keyless <span class="token function">signing</span> <span class="token punctuation">(</span><span class="token keyword">for</span> instance<span class="token punctuation">,</span> <span class="token keyword">with</span> cosign<span class="token punctuation">)</span><span class="token punctuation">.</span>
    # Note that <span class="token keyword">this</span> should be a name<span class="token punctuation">,</span> not a path<span class="token punctuation">.</span>
    <span class="token literal-property property">certificate</span><span class="token operator">:</span> <span class="token string">'{{ trimsuffix .Env.artifact ".tar.gz" }}.pem'</span>

    # List <span class="token keyword">of</span> environment variables that will be passed to the signing command
    # <span class="token keyword">as</span> well <span class="token keyword">as</span> the templates<span class="token punctuation">.</span>
    <span class="token literal-property property">env</span><span class="token operator">:</span>
    <span class="token operator">-</span> <span class="token constant">FOO</span><span class="token operator">=</span>bar
    <span class="token operator">-</span> <span class="token constant">HONK</span><span class="token operator">=</span>honkhonk

    # By <span class="token keyword">default</span><span class="token punctuation">,</span> the stdout and stderr <span class="token keyword">of</span> the signing cmd are discarded unless
    # GoReleaser is running <span class="token keyword">with</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">--debug</span><span class="token template-punctuation string">`</span></span> set<span class="token punctuation">.</span>
    # You can <span class="token keyword">set</span> <span class="token keyword">this</span> to <span class="token boolean">true</span> <span class="token keyword">if</span> you want them to be displayed regardless<span class="token punctuation">.</span>
    #
    # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">2</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¯ç”¨çš„å˜é‡åç§°" tabindex="-1"><a class="header-anchor" href="#å¯ç”¨çš„å˜é‡åç§°" aria-hidden="true">#</a> å¯ç”¨çš„å˜é‡åç§°</h3>
<p>è¿™äº›ç¯å¢ƒå˜é‡å¯èƒ½åœ¨æ¥å—æ¨¡æ¿çš„å­—æ®µä¸­å¯ç”¨ï¼š</p>
<ul>
<li><code v-pre>${artifact}</code>ï¼šå°†è¢«ç­¾åçš„å·¥ä»¶çš„è·¯å¾„</li>
<li><code v-pre>${artifactID}</code>ï¼šå°†è¢«ç­¾åçš„å·¥ä»¶çš„ID</li>
<li><code v-pre>${certificate}</code>ï¼šè¯ä¹¦æ–‡ä»¶åï¼ˆå¦‚æœæä¾›ï¼‰</li>
<li><code v-pre>${signature}</code>: ç­¾åæ–‡ä»¶å</li>
</ul>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ª<code v-pre>cosign.key</code>åœ¨å­˜å‚¨åº“æ ¹ç›®å½•å’Œ<code v-pre>COSIGN_PWD</code>ç¯å¢ƒå˜é‡è®¾ç½®ï¼Œä¸€ä¸ªç®€å•çš„ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">signs</span><span class="token operator">:</span>
<span class="token operator">-</span> cmd<span class="token operator">:</span> cosign
  <span class="token literal-property property">stdin</span><span class="token operator">:</span> <span class="token string">'{{ .Env.COSIGN_PWD }}'</span>
  <span class="token literal-property property">args</span><span class="token operator">:</span>
  <span class="token operator">-</span> <span class="token string">"sign-blob"</span>
  <span class="token operator">-</span> <span class="token string">"--key=cosign.key"</span>
  <span class="token operator">-</span> <span class="token string">"--output-signature=${signature}"</span>
  <span class="token operator">-</span> <span class="token string">"${artifact}"</span>
  <span class="token operator">-</span> <span class="token string">"--yes"</span> # needed on cosign <span class="token number">2.0</span><span class="token number">.0</span><span class="token operator">+</span>
  <span class="token literal-property property">artifacts</span><span class="token operator">:</span> all
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åï¼Œæ‚¨çš„ç”¨æˆ·å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ç­¾åï¼š</p>
<p><code v-pre>cosign verify-blob -key cosign.pub -signature file.tar.gz.sig file.tar.gz</code></p>
<h2 id="å¯¹-docker-æ˜ åƒå’Œæ¸…å•è¿›è¡Œç­¾å" tabindex="-1"><a class="header-anchor" href="#å¯¹-docker-æ˜ åƒå’Œæ¸…å•è¿›è¡Œç­¾å" aria-hidden="true">#</a> <strong>å¯¹ Docker æ˜ åƒå’Œæ¸…å•è¿›è¡Œç­¾å</strong></h2>
<p>ä½¿ç”¨ GoReleaser ä¹Ÿå¯ä»¥å¯¹ Docker æ˜ åƒå’Œæ¸…å•è¿›è¡Œç­¾åã€‚è¯¥ç®¡é“æ˜¯æ ¹æ®é€šç”¨æ ‡å¿—ç®¡é“è®¾è®¡çš„ï¼Œå¹¶è€ƒè™‘äº†å…±ç­¾åã€‚</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yml
<span class="token literal-property property">docker_signs</span><span class="token operator">:</span>
  <span class="token operator">-</span>
    # <span class="token constant">ID</span> <span class="token keyword">of</span> the sign config<span class="token punctuation">,</span> must be unique<span class="token punctuation">.</span>
    # Only relevant <span class="token keyword">if</span> you want to produce some sort <span class="token keyword">of</span> signature file<span class="token punctuation">.</span>
    #
    # Default<span class="token operator">:</span> <span class="token string">'default'</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> foo

    # Path to the signature command
    #
    # Default<span class="token operator">:</span> <span class="token string">'cosign'</span>
    <span class="token literal-property property">cmd</span><span class="token operator">:</span> cosign

    # Command line arguments <span class="token keyword">for</span> the command
    #
    # Templates<span class="token operator">:</span> allowed
    # Default<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"sign"</span><span class="token punctuation">,</span> <span class="token string">"--key=cosign.key"</span><span class="token punctuation">,</span> <span class="token string">"${artifact}@${digest}"</span><span class="token punctuation">,</span> <span class="token string">"--yes"</span><span class="token punctuation">]</span>
    <span class="token literal-property property">args</span><span class="token operator">:</span>
    <span class="token operator">-</span> <span class="token string">"sign"</span>
    <span class="token operator">-</span> <span class="token string">"--key=cosign.key"</span>
    <span class="token operator">-</span> <span class="token string">"--upload=false"</span>
    <span class="token operator">-</span> <span class="token string">"${artifact}"</span>
    <span class="token operator">-</span> <span class="token string">"--yes"</span> # needed on cosign <span class="token number">2.0</span><span class="token number">.0</span><span class="token operator">+</span>

    # Which artifacts to sign
    #
    #   all<span class="token operator">:</span>       all artifacts
    #   none<span class="token operator">:</span>      no signing
    #   images<span class="token operator">:</span>    only docker images
    #   manifests<span class="token operator">:</span> only docker manifests
    #
    # Default<span class="token operator">:</span> <span class="token string">'none'</span>
    <span class="token literal-property property">artifacts</span><span class="token operator">:</span> all

    # IDs <span class="token keyword">of</span> the artifacts to sign<span class="token punctuation">.</span>
    <span class="token literal-property property">ids</span><span class="token operator">:</span>
      <span class="token operator">-</span> foo
      <span class="token operator">-</span> bar

    # Stdin data to be given to the signature command <span class="token keyword">as</span> stdin<span class="token punctuation">.</span>
    #
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">stdin</span><span class="token operator">:</span> <span class="token string">'{{ .Env.COSIGN_PWD }}'</span>

    # StdinFile file to be given to the signature command <span class="token keyword">as</span> stdin<span class="token punctuation">.</span>
    <span class="token literal-property property">stdin_file</span><span class="token operator">:</span> <span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span>password

    # List <span class="token keyword">of</span> environment variables that will be passed to the signing command <span class="token keyword">as</span> well <span class="token keyword">as</span> the templates<span class="token punctuation">.</span>
    <span class="token literal-property property">env</span><span class="token operator">:</span>
    <span class="token operator">-</span> <span class="token constant">FOO</span><span class="token operator">=</span>bar
    <span class="token operator">-</span> <span class="token constant">HONK</span><span class="token operator">=</span>honkhonk

    # By <span class="token keyword">default</span><span class="token punctuation">,</span> the stdout and stderr <span class="token keyword">of</span> the signing cmd are discarded unless GoReleaser is running <span class="token keyword">with</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">--debug</span><span class="token template-punctuation string">`</span></span> set<span class="token punctuation">.</span>
    # You can <span class="token keyword">set</span> <span class="token keyword">this</span> to <span class="token boolean">true</span> <span class="token keyword">if</span> you want them to be displayed regardless<span class="token punctuation">.</span>
    #
    # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">2</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™äº›ç¯å¢ƒå˜é‡å¯èƒ½åœ¨å¯æ¨¡æ¿åŒ–çš„å­—æ®µä¸­å¯ç”¨ï¼š</p>
<ul>
<li><code v-pre>${artifact}</code>: å°†è¦ç­¾åçš„é¡¹ç›®çš„è·¯å¾„</li>
<li><code v-pre>${digest}</code>: å°†ç­¾åçš„æ˜ åƒ/æ¸…å•çš„æ‘˜è¦</li>
<li><code v-pre>${artifactID}</code>: å°†è¦ç­¾åçš„é¡¹ç›®çš„ ID</li>
<li><code v-pre>${certificate}</code>: è¯ä¹¦æ–‡ä»¶åï¼ˆå¦‚æœæä¾›ï¼‰</li>
</ul>
<h2 id="release" tabindex="-1"><a class="header-anchor" href="#release" aria-hidden="true">#</a> <strong>Release</strong></h2>
<p>GoReleaser å¯ä»¥ä½¿ç”¨å½“å‰æ ‡ç­¾åˆ›å»º GitHub/GitLab/Gitea ç‰ˆæœ¬ï¼Œä¸Šä¼ æ‰€æœ‰å·¥ä»¶ï¼Œå¹¶æ ¹æ®è‡ªä¸Šä¸€ä¸ªæ ‡ç­¾ä»¥æ¥çš„æ–°æäº¤ç”Ÿæˆæ›´æ”¹æ—¥å¿—ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹ GitHub éƒ¨åˆ†å¯ä»¥è‡ªå®šä¹‰çš„å†…å®¹ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">release</span><span class="token operator">:</span>
  # Repo <span class="token keyword">in</span> which the release will be created<span class="token punctuation">.</span>
  # Default is extracted from the origin remote <span class="token constant">URL</span> or empty <span class="token keyword">if</span> its <span class="token keyword">private</span> hosted<span class="token punctuation">.</span>
  <span class="token literal-property property">github</span><span class="token operator">:</span>
    <span class="token literal-property property">owner</span><span class="token operator">:</span> user
    <span class="token literal-property property">name</span><span class="token operator">:</span> repo

  # IDs <span class="token keyword">of</span> the archives to use<span class="token punctuation">.</span>
  # Empty means all IDs<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token literal-property property">ids</span><span class="token operator">:</span>
    <span class="token operator">-</span> foo
    <span class="token operator">-</span> bar

  # If <span class="token keyword">set</span> to <span class="token boolean">true</span><span class="token punctuation">,</span> will not auto<span class="token operator">-</span>publish the release<span class="token punctuation">.</span>
  # Available only <span class="token keyword">for</span> GitHub and Gitea<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token literal-property property">draft</span><span class="token operator">:</span> <span class="token boolean">true</span>

  # Whether to remove existing draft releases <span class="token keyword">with</span> the same name before creating
  # a <span class="token keyword">new</span> <span class="token class-name">one<span class="token punctuation">.</span></span>
  # Only effective <span class="token keyword">if</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">draft</span><span class="token template-punctuation string">`</span></span> is <span class="token keyword">set</span> to <span class="token boolean">true</span><span class="token punctuation">.</span>
  # Available only <span class="token keyword">for</span> GitHub<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> <span class="token boolean">false</span>
  # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">11</span>
  <span class="token literal-property property">replace_existing_draft</span><span class="token operator">:</span> <span class="token boolean">true</span>

  # Useful <span class="token keyword">if</span> you want to delay the creation <span class="token keyword">of</span> the tag <span class="token keyword">in</span> the remote<span class="token punctuation">.</span>
  # You can create the tag locally<span class="token punctuation">,</span> but not push it<span class="token punctuation">,</span> and run GoReleaser<span class="token punctuation">.</span>
  # It'll then <span class="token keyword">set</span> the <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">target_commitish</span><span class="token template-punctuation string">`</span></span> portion <span class="token keyword">of</span> the GitHub release to the
  # value <span class="token keyword">of</span> <span class="token keyword">this</span> field<span class="token punctuation">.</span>
  # Only works on GitHub<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> <span class="token string">''</span>
  # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">11</span>
  # Templates<span class="token operator">:</span> allowed
  <span class="token literal-property property">target_commitish</span><span class="token operator">:</span> <span class="token string">"{{ .Commit }}"</span>

  # This allows to change which tag GitHub will create<span class="token punctuation">.</span>
  # Usually you'll use <span class="token keyword">this</span> together <span class="token keyword">with</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">target_commitish</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> or <span class="token keyword">if</span> you want to
  # publish a binary from a monorepo into a <span class="token keyword">public</span> repository somewhere<span class="token punctuation">,</span> without
  # the tag prefix<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> <span class="token string">'{{ .PrefixedCurrentTag }}'</span>
  # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">19</span> <span class="token punctuation">(</span>pro<span class="token punctuation">)</span>
  # Templates<span class="token operator">:</span> allowed
  <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">"{{ .CurrentTag }}"</span>

  # If set<span class="token punctuation">,</span> will create a release discussion <span class="token keyword">in</span> the category specified<span class="token punctuation">.</span>
  #
  # Warning<span class="token operator">:</span> <span class="token keyword">do</span> not use categories <span class="token keyword">in</span> the <span class="token string">'Announcement'</span> format<span class="token punctuation">.</span>
  #  Check https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>goreleaser<span class="token operator">/</span>goreleaser<span class="token operator">/</span>issues<span class="token operator">/</span><span class="token number">2304</span> <span class="token keyword">for</span> more info<span class="token punctuation">.</span>
  #
  # Default is empty<span class="token punctuation">.</span>
  <span class="token literal-property property">discussion_category_name</span><span class="token operator">:</span> General

  # If <span class="token keyword">set</span> to auto<span class="token punctuation">,</span> will mark the release <span class="token keyword">as</span> not ready <span class="token keyword">for</span> production
  # <span class="token keyword">in</span> <span class="token keyword">case</span> there is an indicator <span class="token keyword">for</span> <span class="token keyword">this</span> <span class="token keyword">in</span> the tag e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> v1<span class="token punctuation">.</span><span class="token number">0.0</span><span class="token operator">-</span>rc1
  # If <span class="token keyword">set</span> to <span class="token boolean">true</span><span class="token punctuation">,</span> will mark the release <span class="token keyword">as</span> not ready <span class="token keyword">for</span> production<span class="token punctuation">.</span>
  # Default is <span class="token boolean">false</span><span class="token punctuation">.</span>
  <span class="token literal-property property">prerelease</span><span class="token operator">:</span> auto

  # If <span class="token keyword">set</span> to <span class="token boolean">false</span><span class="token punctuation">,</span> will <span class="token constant">NOT</span> mark the release <span class="token keyword">as</span> <span class="token string">"latest"</span><span class="token punctuation">.</span>
  # This prevents it from being shown at the top <span class="token keyword">of</span> the release list<span class="token punctuation">,</span>
  # and from being returned when calling https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>api<span class="token punctuation">.</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>repos<span class="token operator">/</span><span class="token constant">OWNER</span><span class="token operator">/</span><span class="token constant">REPO</span><span class="token operator">/</span>releases<span class="token operator">/</span>latest<span class="token punctuation">.</span>
  #
  # Available only <span class="token keyword">for</span> GitHub<span class="token punctuation">.</span>
  #
  # Default is <span class="token boolean">true</span><span class="token punctuation">.</span>
  # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">20.</span>
  <span class="token literal-property property">make_latest</span><span class="token operator">:</span> <span class="token boolean">true</span>

  # What to <span class="token keyword">do</span> <span class="token keyword">with</span> the release notes <span class="token keyword">in</span> <span class="token keyword">case</span> there the release already exists<span class="token punctuation">.</span>
  #
  # Valid options are<span class="token operator">:</span>
  # <span class="token operator">-</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">keep-existing</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> keep the existing notes
  # <span class="token operator">-</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">append</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> append the current release notes to the existing notes
  # <span class="token operator">-</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">prepend</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> prepend the current release notes to the existing notes
  # <span class="token operator">-</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">replace</span><span class="token template-punctuation string">`</span></span><span class="token operator">:</span> replace existing notes
  #
  # Default is <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">keep-existing</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> append

  # Header <span class="token keyword">for</span> the release body<span class="token punctuation">.</span>
  #
  # Templates<span class="token operator">:</span> allowed
  <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token operator">|</span>
    ## Some <span class="token function">title</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token punctuation">.</span>Date <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

    Welcome to <span class="token keyword">this</span> <span class="token keyword">new</span> <span class="token class-name">release</span><span class="token operator">!</span>

  # Footer <span class="token keyword">for</span> the release body<span class="token punctuation">.</span>
  #
  # Templates<span class="token operator">:</span> allowed
  <span class="token literal-property property">footer</span><span class="token operator">:</span> <span class="token operator">|</span>
    ## Thanks<span class="token operator">!</span>

    Those were the changes on <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token punctuation">.</span>Tag <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">!</span>

  # You can change the name <span class="token keyword">of</span> the release<span class="token punctuation">.</span>
  #
  # Default<span class="token operator">:</span> <span class="token string">'{{.Tag}}'</span> <span class="token punctuation">(</span><span class="token string">'{{.PrefixedTag}}'</span> on Pro<span class="token punctuation">)</span>
  # Templates<span class="token operator">:</span> allowed
  <span class="token literal-property property">name_template</span><span class="token operator">:</span> <span class="token string">"{{.ProjectName}}-v{{.Version}} {{.Env.USER}}"</span>

  # You can disable <span class="token keyword">this</span> pipe <span class="token keyword">in</span> order to not create the release on any <span class="token constant">SCM</span><span class="token punctuation">.</span>
  # Keep <span class="token keyword">in</span> mind that <span class="token keyword">this</span> might also <span class="token keyword">break</span> things that depend on the release
  # <span class="token constant">URL</span><span class="token punctuation">,</span> <span class="token keyword">for</span> instance<span class="token punctuation">,</span> homebrew taps<span class="token punctuation">.</span>
  #
  # Templates<span class="token operator">:</span> <span class="token function">allowed</span> <span class="token punctuation">(</span>since v1<span class="token punctuation">.</span><span class="token number">15</span><span class="token punctuation">)</span>
  <span class="token literal-property property">disable</span><span class="token operator">:</span> <span class="token boolean">true</span>

  # Set <span class="token keyword">this</span> to <span class="token boolean">true</span> <span class="token keyword">if</span> you want to disable just the artifact upload to the <span class="token constant">SCM</span><span class="token punctuation">.</span>
  # If <span class="token keyword">this</span> is <span class="token boolean">true</span><span class="token punctuation">,</span> GoReleaser will still create the release <span class="token keyword">with</span> the
  # changelog<span class="token punctuation">,</span> but won't upload anything to it<span class="token punctuation">.</span>
  #
  # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">11</span>
  # Templates<span class="token operator">:</span> <span class="token function">allowed</span> <span class="token punctuation">(</span>since v1<span class="token punctuation">.</span><span class="token number">15</span><span class="token punctuation">)</span>
  <span class="token literal-property property">skip_upload</span><span class="token operator">:</span> <span class="token boolean">true</span>

  # You can add extra pre<span class="token operator">-</span>existing files to the release<span class="token punctuation">.</span>
  # The filename on the release will be the last part <span class="token keyword">of</span> the <span class="token function">path</span> <span class="token punctuation">(</span>base<span class="token punctuation">)</span><span class="token punctuation">.</span>
  # If another file <span class="token keyword">with</span> the same name exists<span class="token punctuation">,</span> the last one found will be used<span class="token punctuation">.</span>
  #
  # Templates<span class="token operator">:</span> allowed
  <span class="token literal-property property">extra_files</span><span class="token operator">:</span>
    <span class="token operator">-</span> glob<span class="token operator">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>path<span class="token operator">/</span>to<span class="token operator">/</span>file<span class="token punctuation">.</span>txt
    <span class="token operator">-</span> glob<span class="token operator">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>glob<span class="token comment">/**/</span>to<span class="token comment">/**/</span>file<span class="token comment">/**/</span><span class="token operator">*</span>
    <span class="token operator">-</span> glob<span class="token operator">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>glob<span class="token operator">/</span>foo<span class="token operator">/</span>to<span class="token operator">/</span>bar<span class="token operator">/</span>file<span class="token operator">/</span>foobar<span class="token operator">/</span>override_from_previous
    <span class="token operator">-</span> glob<span class="token operator">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>single_file<span class="token punctuation">.</span>txt
      <span class="token literal-property property">name_template</span><span class="token operator">:</span> file<span class="token punctuation">.</span>txt # note that <span class="token keyword">this</span> only works <span class="token keyword">if</span> glob matches <span class="token number">1</span> file only

  # Additional templated extra files to add to the release<span class="token punctuation">.</span>
  # Those files will have their contents pass through the template engine<span class="token punctuation">,</span>
  # and its results will be added to the release<span class="token punctuation">.</span>
  #
  # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">17</span> <span class="token punctuation">(</span>pro<span class="token punctuation">)</span>
  # This feature is only available <span class="token keyword">in</span> GoReleaser Pro<span class="token punctuation">.</span>
  # Templates<span class="token operator">:</span> allowed
  <span class="token literal-property property">templated_extra_files</span><span class="token operator">:</span>
    <span class="token operator">-</span> src<span class="token operator">:</span> <span class="token constant">LICENSE</span><span class="token punctuation">.</span>tpl
      <span class="token literal-property property">dst</span><span class="token operator">:</span> <span class="token constant">LICENSE</span><span class="token punctuation">.</span>txt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="gpg-è®¤è¯" tabindex="-1"><a class="header-anchor" href="#gpg-è®¤è¯" aria-hidden="true">#</a> GPG è®¤è¯</h2>
<p>GitHub æ”¯æŒå¤šç§ GPG å…³é”®ç®—æ³•ã€‚å¦‚æœæ‚¨å°è¯•æ·»åŠ ä½¿ç”¨ä¸å—æ”¯æŒçš„ç®—æ³•ç”Ÿæˆçš„å¯†é’¥ï¼Œåˆ™å¯èƒ½ä¼šé‡åˆ°é”™è¯¯ã€‚</p>
<h3 id="æ£€æŸ¥ç°æœ‰-gpg-å¯†é’¥" tabindex="-1"><a class="header-anchor" href="#æ£€æŸ¥ç°æœ‰-gpg-å¯†é’¥" aria-hidden="true">#</a> <strong>æ£€æŸ¥ç°æœ‰ GPG å¯†é’¥</strong></h3>
<p>ä½¿ç”¨è¯¥<code v-pre>gpg --list-secret-keys --keyid-format=long</code>å‘½ä»¤åˆ—å‡ºæ‚¨æ‹¥æœ‰å…¬é’¥å’Œç§é’¥çš„ GPG å¯†é’¥çš„é•¿æ ¼å¼ã€‚ç­¾ç½²æäº¤æˆ–æ ‡ç­¾éœ€è¦ç§é’¥ã€‚</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>gpg <span class="token operator">--</span>list<span class="token operator">-</span>secret<span class="token operator">-</span>keys <span class="token operator">--</span>keyid<span class="token operator">-</span>format<span class="token operator">=</span>long
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="ç”Ÿæˆæ–°çš„-gpg-å¯†é’¥" tabindex="-1"><a class="header-anchor" href="#ç”Ÿæˆæ–°çš„-gpg-å¯†é’¥" aria-hidden="true">#</a> <strong>ç”Ÿæˆæ–°çš„ GPG å¯†é’¥</strong></h3>
<p>é€šè¿‡ git çš„å‚æ•°æ ¡éªŒã€‚é…ç½®ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>git config <span class="token operator">--</span>global gpg<span class="token punctuation">.</span>program gpg2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>ç”Ÿæˆå¯†é’¥å¯¹ï¼š</strong></p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>gpg <span class="token operator">--</span>full<span class="token operator">-</span>generate<span class="token operator">-</span>key
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>æ£€æŸ¥å¯†é’¥å¯¹ï¼š</strong></p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>gpg <span class="token operator">--</span>list<span class="token operator">-</span>secret<span class="token operator">-</span>keys <span class="token operator">--</span>keyid<span class="token operator">-</span>format<span class="token operator">=</span>long
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä» GPG å¯†é’¥åˆ—è¡¨ä¸­ï¼Œå¤åˆ¶æ‚¨è¦ä½¿ç”¨çš„ GPG å¯†é’¥ ID çš„å®Œæ•´å½¢å¼ã€‚</p>
<ol>
<li>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼ŒGPG å¯†é’¥ ID ä¸º<code v-pre>3AA5C34371567BD2</code>ï¼š</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>$ gpg --list-secret-keys --keyid-format=long
/Users/hubot/.gnupg/secring.gpg
------------------------------------
sec   4096R/3AA5C34371567BD2 2016-03-10 [expires: 2017-03-10]
uid                          Hubot &lt;hubot@example.com>
ssb   4096R/4BB6D45482678BE3 2016-03-10
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>ç²˜è´´ä¸‹é¢çš„æ–‡æœ¬ï¼Œå¹¶å°†å…¶æ›¿æ¢ä¸ºæ‚¨è¦ä½¿ç”¨çš„ GPG å¯†é’¥ IDã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼ŒGPG å¯†é’¥ ID ä¸º<code v-pre>3AA5C34371567BD2</code>ï¼š</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>gpg --armor --export 3AA5C34371567BD2
# Prints the GPG key ID, in ASCII armor format
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li>
<li>
<p>å¤åˆ¶æ‚¨çš„ GPG å¯†é’¥ï¼Œä»¥ å¼€å¤´<code v-pre>----BEGIN PGP PUBLIC KEY BLOCK-----</code>å’Œç»“å°¾<code v-pre>----END PGP PUBLIC KEY BLOCK-----</code>ã€‚</p>
</li>
</ol>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>cat <span class="token operator">/</span>root<span class="token operator">/</span><span class="token punctuation">.</span>gnupg<span class="token operator">/</span>openpgp<span class="token operator">-</span>revocs<span class="token punctuation">.</span>d<span class="token operator">/</span>4DDA37AE0F3AEA3044B33F1B1BAD6F395338EFDE<span class="token punctuation">.</span>rev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç„¶åå°±æ˜¯å°†è¿™ä¸ªå¯†é’¥é“¾æ¥åˆ°ä½ çš„ GitHub è´¦æˆ·äº†ã€‚è¿™ä¸ªæ“ä½œå¾ˆç®€å•ï¼Œä¸ä»‹ç»äº†</p>
<p><strong>å‘Šè¯‰ Git ä½ çš„ç­¾åå¯†é’¥ï¼š</strong></p>
<p>ä½ è¿˜éœ€è¦å‘Šè¯‰ Git å…³äºä½ çš„ ç­¾å å¯†é’¥ï¼Œå› ä¸º å¦‚æœæ‚¨æœ‰å¤šä¸ª GPG å¯†é’¥ï¼Œåˆ™éœ€è¦å‘Šè¯‰ Git ä½¿ç”¨å“ªä¸€ä¸ªã€‚</p>
<ol>
<li>
<p>å¦‚æœæ‚¨ä¹‹å‰å·²å°† Git é…ç½®ä¸ºåœ¨ä½¿ç”¨ è¿›è¡Œç­¾åæ—¶ä½¿ç”¨ä¸åŒçš„å¯†é’¥æ ¼å¼ï¼Œè¯·å–æ¶ˆè®¾ç½®æ­¤é…ç½®ï¼Œä»¥ä¾¿ä½¿ç”¨<code v-pre>-gpg-sign</code>é»˜è®¤æ ¼å¼ã€‚<code v-pre>openpgp</code></p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>git config --global --unset gpg.format
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>
</ol>
<p>ä½¿ç”¨è¯¥<code v-pre>gpg --list-secret-keys --keyid-format=long</code>å‘½ä»¤åˆ—å‡ºæ‚¨æ‹¥æœ‰å…¬é’¥å’Œç§é’¥çš„ GPG å¯†é’¥çš„é•¿æ ¼å¼ã€‚ç­¾ç½²æäº¤æˆ–æ ‡ç­¾éœ€è¦ç§é’¥ã€‚</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>gpg <span class="token operator">--</span>list<span class="token operator">-</span>secret<span class="token operator">-</span>keys <span class="token operator">--</span>keyid<span class="token operator">-</span>format<span class="token operator">=</span>long
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä» GPG å¯†é’¥åˆ—è¡¨ä¸­ï¼Œå¤åˆ¶æ‚¨è¦ä½¿ç”¨çš„ GPG å¯†é’¥ ID çš„å®Œæ•´å½¢å¼ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼ŒGPG å¯†é’¥ ID ä¸º<code v-pre>3AA5C34371567BD2</code>ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>$ gpg <span class="token operator">--</span>list<span class="token operator">-</span>secret<span class="token operator">-</span>keys <span class="token operator">--</span>keyid<span class="token operator">-</span>format<span class="token operator">=</span>long
<span class="token operator">/</span>Users<span class="token operator">/</span>hubot<span class="token operator">/</span><span class="token punctuation">.</span>gnupg<span class="token operator">/</span>secring<span class="token punctuation">.</span>gpg
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
sec   4096R<span class="token operator">/</span>3AA5C34371567BD2 <span class="token number">2016</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span> <span class="token punctuation">[</span>expires<span class="token operator">:</span> <span class="token number">2017</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">]</span>
uid                          Hubot <span class="token operator">&lt;</span>hubot@example<span class="token punctuation">.</span>com<span class="token operator">></span>
ssb   4096R<span class="token operator">/</span>4BB6D45482678BE3 <span class="token number">2016</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¦åœ¨ Git ä¸­è®¾ç½®ä¸» GPG ç­¾åå¯†é’¥ï¼Œè¯·ç²˜è´´ä¸‹é¢çš„æ–‡æœ¬ï¼Œå¹¶æ›¿æ¢ä¸ºæ‚¨è¦ä½¿ç”¨çš„ GPG ä¸»å¯†é’¥ IDã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼ŒGPG å¯†é’¥ ID ä¸º<code v-pre>3AA5C34371567BD2</code>ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>git config <span class="token operator">--</span>global user<span class="token punctuation">.</span>signingkey 3AA5C34371567BD2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ–è€…ï¼Œåœ¨è®¾ç½®å­é¡¹æ—¶åŒ…å«åç¼€<code v-pre>!</code>ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼ŒGPG å­å¯†é’¥ ID ä¸º<code v-pre>4BB6D45482678BE3</code>ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>git config <span class="token operator">--</span>global user<span class="token punctuation">.</span>signingkey 4BB6D45482678BE3<span class="token operator">!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ–è€…ï¼Œè¦å°† Git é…ç½®ä¸ºé»˜è®¤ç­¾ç½²æ‰€æœ‰æäº¤ï¼Œè¯·è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>git config <span class="token operator">--</span>global commit<span class="token punctuation">.</span>gpgsign <span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li><a href="https://docs.github.com/en/authentication/managing-commit-signature-verification/telling-git-about-your-signing-key#telling-git-about-your-ssh-key" target="_blank" rel="noopener noreferrer">å‘Šè¯‰ Git ä½ çš„ SSH å¯†é’¥<ExternalLinkIcon/></a></li>
</ul>
<p>æ‚¨å¯ä»¥ä½¿ç”¨ç°æœ‰çš„ SSH å¯†é’¥æ¥ç­¾ç½²æäº¤å’Œæ ‡ç­¾ï¼Œæˆ–ç”Ÿæˆä¸“é—¨ç”¨äºç­¾åçš„æ–°å¯†é’¥ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…â€œ<a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent" target="_blank" rel="noopener noreferrer">ç”Ÿæˆæ–°çš„ SSH å¯†é’¥å¹¶å°†å…¶æ·»åŠ åˆ° ssh-agent<ExternalLinkIcon/></a>Â â€ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong></p>
<p>æˆ‘ä»¬å¯èƒ½éœ€è¦å°† <code v-pre>export GPG_TTY=$(tty)</code> æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­</p>
<h3 id="ç­¾åæ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#ç­¾åæ ‡ç­¾" aria-hidden="true">#</a> <strong>ç­¾åæ ‡ç­¾</strong></h3>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>$ git tag <span class="token operator">-</span>s <span class="token constant">MYTAG</span>
# Creates a signed tag
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡è¿è¡ŒéªŒè¯æ‚¨çš„ç­¾åæ ‡ç­¾<code v-pre>git tag -v [tag-name]</code>ã€‚</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>$ git tag -v MYTAG
# Verifies the signed tag
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="äº‘å­˜å‚¨æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#äº‘å­˜å‚¨æœåŠ¡" aria-hidden="true">#</a> äº‘å­˜å‚¨æœåŠ¡</h2>
<p>å…è®¸æ‚¨å°†å·¥ä»¶ä¸Šä¼ åˆ° Amazon S3ã€Azure Blob å’Œ Google GCSã€‚</p>
<p>å…¶å®ä¸ä»…ä»…æ˜¯è¿™äº›ï¼Œè¿˜æœ‰åŒ…æ‹¬å›½å†…çš„ COS å’Œ CSS</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">blobs</span><span class="token operator">:</span>
  # You can have multiple blob configs
  <span class="token operator">-</span> # Cloud provider name<span class="token operator">:</span>
    # <span class="token operator">-</span> s3 <span class="token keyword">for</span> <span class="token constant">AWS</span> <span class="token constant">S3</span> Storage
    # <span class="token operator">-</span> azblob <span class="token keyword">for</span> Azure Blob Storage
    # <span class="token operator">-</span> gs <span class="token keyword">for</span> Google Cloud Storage
    #
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">provider</span><span class="token operator">:</span> azblob

    # Set a custom endpoint<span class="token punctuation">,</span> useful <span class="token keyword">if</span> you're using a minio backend or
    # other s3<span class="token operator">-</span>compatible backends<span class="token punctuation">.</span>
    #
    # Implies s3ForcePathStyle and requires provider to be <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">s3</span><span class="token template-punctuation string">`</span></span>
    #
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">endpoint</span><span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>minio<span class="token punctuation">.</span>foo<span class="token punctuation">.</span>bar

    # Sets the bucket region<span class="token punctuation">.</span>
    # Requires provider to be <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">s3</span><span class="token template-punctuation string">`</span></span>
    #
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">region</span><span class="token operator">:</span> us<span class="token operator">-</span>west<span class="token operator">-</span><span class="token number">1</span>

    # Disables <span class="token constant">SSL</span>
    # Requires provider to be <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">s3</span><span class="token template-punctuation string">`</span></span>
    <span class="token literal-property property">disableSSL</span><span class="token operator">:</span> <span class="token boolean">true</span>

    # Bucket name<span class="token punctuation">.</span>
    #
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">bucket</span><span class="token operator">:</span> goreleaser<span class="token operator">-</span>bucket

    # IDs <span class="token keyword">of</span> the artifacts you want to upload<span class="token punctuation">.</span>
    <span class="token literal-property property">ids</span><span class="token operator">:</span>
      <span class="token operator">-</span> foo
      <span class="token operator">-</span> bar

    # Path<span class="token operator">/</span>name inside the bucket<span class="token punctuation">.</span>
    #
    # Default<span class="token operator">:</span> <span class="token string">'{{ .ProjectName }}/{{ .Tag }}'</span>
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">folder</span><span class="token operator">:</span> <span class="token string">"foo/bar/{{.Version}}"</span>

    # Whether to disable <span class="token keyword">this</span> particular upload configuration<span class="token punctuation">.</span>
    #
    # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">17</span>
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">disable</span><span class="token operator">:</span> <span class="token string">'{{ neq .BLOB_UPLOAD_ONLY "foo" }}'</span>

    # You can add extra pre<span class="token operator">-</span>existing files to the bucket<span class="token punctuation">.</span>
    # The filename on the release will be the last part <span class="token keyword">of</span> the <span class="token function">path</span> <span class="token punctuation">(</span>base<span class="token punctuation">)</span><span class="token punctuation">.</span>
    # If another file <span class="token keyword">with</span> the same name exists<span class="token punctuation">,</span> the last one found will be used<span class="token punctuation">.</span>
    # These globs can also include templates<span class="token punctuation">.</span>
    <span class="token literal-property property">extra_files</span><span class="token operator">:</span>
      <span class="token operator">-</span> glob<span class="token operator">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>path<span class="token operator">/</span>to<span class="token operator">/</span>file<span class="token punctuation">.</span>txt
      <span class="token operator">-</span> glob<span class="token operator">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>glob<span class="token comment">/**/</span>to<span class="token comment">/**/</span>file<span class="token comment">/**/</span><span class="token operator">*</span>
      <span class="token operator">-</span> glob<span class="token operator">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>glob<span class="token operator">/</span>foo<span class="token operator">/</span>to<span class="token operator">/</span>bar<span class="token operator">/</span>file<span class="token operator">/</span>foobar<span class="token operator">/</span>override_from_previous
      <span class="token operator">-</span> glob<span class="token operator">:</span> <span class="token punctuation">.</span><span class="token operator">/</span>single_file<span class="token punctuation">.</span>txt
        # Templates<span class="token operator">:</span> allowed
        <span class="token literal-property property">name_template</span><span class="token operator">:</span> file<span class="token punctuation">.</span>txt # note that <span class="token keyword">this</span> only works <span class="token keyword">if</span> glob matches <span class="token number">1</span> file only

    # Additional templated extra files to uploaded<span class="token punctuation">.</span>
    # Those files will have their contents pass through the template engine<span class="token punctuation">,</span>
    # and its results will be uploaded<span class="token punctuation">.</span>
    #
    # Since<span class="token operator">:</span> v1<span class="token punctuation">.</span><span class="token number">17</span> <span class="token punctuation">(</span>pro<span class="token punctuation">)</span>
    # This feature is only available <span class="token keyword">in</span> GoReleaser Pro<span class="token punctuation">.</span>
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">templated_extra_files</span><span class="token operator">:</span>
      <span class="token operator">-</span> src<span class="token operator">:</span> <span class="token constant">LICENSE</span><span class="token punctuation">.</span>tpl
        <span class="token literal-property property">dst</span><span class="token operator">:</span> <span class="token constant">LICENSE</span><span class="token punctuation">.</span>txt

  <span class="token operator">-</span> provider<span class="token operator">:</span> gs
    <span class="token literal-property property">bucket</span><span class="token operator">:</span> goreleaser<span class="token operator">-</span>bucket
    <span class="token literal-property property">folder</span><span class="token operator">:</span> <span class="token string">"foo/bar/{{.Version}}"</span>
  <span class="token operator">-</span> provider<span class="token operator">:</span> s3
    <span class="token literal-property property">bucket</span><span class="token operator">:</span> goreleaser<span class="token operator">-</span>bucket
    <span class="token literal-property property">folder</span><span class="token operator">:</span> <span class="token string">"foo/bar/{{.Version}}"</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fury-io-apt-å’Œ-rpm-å­˜å‚¨åº“" tabindex="-1"><a class="header-anchor" href="#fury-io-apt-å’Œ-rpm-å­˜å‚¨åº“" aria-hidden="true">#</a> <strong>Fury.io (apt å’Œ rpm å­˜å‚¨åº“ï¼‰</strong></h3>
<p><strong>è¿™æ˜¯ä¸€ä¸ªé«˜çº§åŠŸèƒ½</strong>ï¼Œä½†æ˜¯ sealos ä¹Ÿä½¿ç”¨äº†ï¼Œç”¨çš„æ˜¯ bash é€»è¾‘</p>
<p>æ‚¨å¯ä»¥ä½¿ç”¨ GoReleaser è½»æ¾åœ°åœ¨ fury.io ä¸Šåˆ›å»ºå’Œå­˜å‚¨åº“ã€‚</p>
<p>é¦–å…ˆï¼Œæ‚¨éœ€è¦åœ¨ fury.io ä¸Šåˆ›å»ºä¸€ä¸ªå¸æˆ·å¹¶è·å–æ¨é€ä»¤ç‰Œã€‚</p>
<p>ç„¶åï¼Œæ‚¨éœ€è¦å°†æ‚¨çš„å¸æˆ·åç§°ä¼ é€’ç»™ GoReleaserï¼Œå¹¶å°†æ‚¨çš„æ¨é€ä»¤ç‰Œä½œä¸ºåä¸º <code v-pre>FURY_TOKEN</code> ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">furies</span><span class="token operator">:</span>
<span class="token operator">-</span> account<span class="token operator">:</span> myaccount
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™å°†è‡ªåŠ¨ä¸Šä¼ æ‚¨çš„æ‰€æœ‰æ–‡ä»¶ã€‚</p>
<p><strong>è‡ªå®šä¹‰ï¼š</strong></p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># goreleaser<span class="token punctuation">.</span>yaml

<span class="token literal-property property">furies</span><span class="token operator">:</span>
  <span class="token operator">-</span>
    # fury<span class="token punctuation">.</span>io account<span class="token punctuation">.</span>
    # Config is skipped <span class="token keyword">if</span> empty
    <span class="token literal-property property">account</span><span class="token operator">:</span> <span class="token string">"{{ .Env.FURY_ACCOUNT }}"</span>

    # Skip the announcing feature <span class="token keyword">in</span> some conditions<span class="token punctuation">,</span> <span class="token keyword">for</span> instance<span class="token punctuation">,</span> when
    # publishing patch releases<span class="token punctuation">.</span>
    # Any value different <span class="token keyword">of</span> <span class="token string">'true'</span> will be considered <span class="token string">'false'</span><span class="token punctuation">.</span>
    #
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">skip</span><span class="token operator">:</span> <span class="token string">"{{gt .Patch 0}}"</span>

    # Environment variable name to <span class="token keyword">get</span> the push token from<span class="token punctuation">.</span>
    # You might want to change it <span class="token keyword">if</span> you have multiple fury configurations <span class="token keyword">for</span>
    # some reason<span class="token punctuation">.</span>
    #
    # Default<span class="token operator">:</span> <span class="token string">'FURY_TOKEN'</span>
    <span class="token literal-property property">secret_name</span><span class="token operator">:</span> <span class="token constant">MY_ACCOUNT_FURY_TOKEN</span>

    # IDs to filter by<span class="token punctuation">.</span>
    # configurations <span class="token keyword">get</span> uploaded<span class="token punctuation">.</span>
    <span class="token literal-property property">ids</span><span class="token operator">:</span>
      <span class="token operator">-</span> packages

    # Formats to upload<span class="token punctuation">.</span>
    # Available options are <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">deb</span><span class="token template-punctuation string">`</span></span> and <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">rpm</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span>
    #
    # Default<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'deb'</span><span class="token punctuation">,</span> <span class="token string">'rpm'</span><span class="token punctuation">]</span>
    <span class="token literal-property property">formats</span><span class="token operator">:</span>
      <span class="token operator">-</span> deb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="homebrew-taps" tabindex="-1"><a class="header-anchor" href="#homebrew-taps" aria-hidden="true">#</a> <strong>Homebrew Taps</strong></h2>
<p>å‘å¸ƒåˆ° GitHubã€GitLab æˆ– Gitea åï¼ŒGoReleaser å¯ä»¥ç”Ÿæˆ <em>homebrew-tap</em> å¹¶å°†å…¶å‘å¸ƒåˆ°æ‚¨æœ‰æƒè®¿é—®çš„å­˜å‚¨åº“ä¸­ã€‚</p>
<h2 id="announce" tabindex="-1"><a class="header-anchor" href="#announce" aria-hidden="true">#</a> <strong>Announce</strong></h2>
<p>GoReleaserè¿˜å¯ä»¥åœ¨ç¤¾äº¤ç½‘ç»œï¼ŒèŠå¤©å®¤å’Œç”µå­é‚®ä»¶ä¸Šå®£å¸ƒæ–°ç‰ˆæœ¬ï¼</p>
<p>å®ƒåœ¨ç®¡é“çš„æœ€æœ«ç«¯è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤çš„æ ‡å¿—æˆ–é€šè¿‡ skip å±æ€§è·³è¿‡ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">announce</span><span class="token operator">:</span>
  # Skip the announcing feature <span class="token keyword">in</span> some conditions<span class="token punctuation">,</span> <span class="token keyword">for</span> instance<span class="token punctuation">,</span> when
  # publishing patch releases<span class="token punctuation">.</span>
  #
  # Any value different <span class="token keyword">from</span> <span class="token string">'true'</span> is evaluated to <span class="token boolean">false</span><span class="token punctuation">.</span>
  #
  # Templates<span class="token operator">:</span> allowed
  <span class="token literal-property property">skip</span><span class="token operator">:</span> <span class="token string">"{{gt .Patch 0}}"</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç›®å‰æ”¯æŒå¾ˆå¤šä¸ªè´¦æˆ·" tabindex="-1"><a class="header-anchor" href="#ç›®å‰æ”¯æŒå¾ˆå¤šä¸ªè´¦æˆ·" aria-hidden="true">#</a> ç›®å‰æ”¯æŒå¾ˆå¤šä¸ªè´¦æˆ·</h3>
<p><strong>Discode:</strong></p>
<p>è¦ä½¿ç”¨ Discordï¼Œæ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ª <a href="https://support.discord.com/hc/en-us/articles/228383668-Intro-to-Webhooks" target="_blank" rel="noopener noreferrer">Webhook<ExternalLinkIcon/></a>ï¼Œå¹¶åœ¨ç®¡é“ä¸Šè®¾ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š</p>
<ul>
<li><code v-pre>DISCORD_WEBHOOK_ID</code></li>
<li><code v-pre>DISCORD_WEBHOOK_TOKEN</code></li>
</ul>
<p>åœ¨æ­¤ä¹‹åï¼Œæ‚¨å¯ä»¥å°†ä»¥ä¸‹éƒ¨åˆ†æ·»åŠ åˆ°æ‚¨çš„é…ç½®ä¸­ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">announce</span><span class="token operator">:</span>
  <span class="token literal-property property">discord</span><span class="token operator">:</span>
    # Whether its enabled or not<span class="token punctuation">.</span>
    <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">true</span>

    # Message template to use <span class="token keyword">while</span> publishing<span class="token punctuation">.</span>
    #
    # Default<span class="token operator">:</span> <span class="token string">'{{ .ProjectName }} {{ .Tag }} is out! Check it out at {{ .ReleaseURL }}'</span>
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">message_template</span><span class="token operator">:</span> <span class="token string">'Awesome project {{.Tag}} is out!'</span>

    # Set author <span class="token keyword">of</span> the embed<span class="token punctuation">.</span>
    #
    # Default<span class="token operator">:</span> <span class="token string">'GoReleaser'</span>
    <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token string">''</span>

    # Color code <span class="token keyword">of</span> the embed<span class="token punctuation">.</span> You have to use decimal numeral system<span class="token punctuation">,</span> not hexadecimal<span class="token punctuation">.</span>
    #
    # Default<span class="token operator">:</span> <span class="token string">'3888754'</span> <span class="token punctuation">(</span>the grey<span class="token operator">-</span>ish from GoReleaser<span class="token punctuation">)</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">''</span>

    # <span class="token constant">URL</span> to an image to use <span class="token keyword">as</span> the icon <span class="token keyword">for</span> the embed<span class="token punctuation">.</span>
    #
    # Default<span class="token operator">:</span> <span class="token string">'https://goreleaser.com/static/avatar.png'</span>
    <span class="token literal-property property">icon_url</span><span class="token operator">:</span> <span class="token string">''</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¦ä½¿å…¶æ­£å¸¸å·¥ä½œï¼Œæ‚¨éœ€è¦åœ¨ç®¡é“ä¸Šè®¾ç½®ä¸€äº›ç¯å¢ƒå˜é‡ï¼š</p>
<ul>
<li><code v-pre>LINKEDIN_ACCESS_TOKEN</code></li>
</ul>
<blockquote>
<p>We currently don't support posting in groups.</p>
</blockquote>
<p>ç„¶åï¼Œæ‚¨å¯ä»¥åœ¨é…ç½®ä¸­æ·»åŠ ç±»ä¼¼ä»¥ä¸‹å†…å®¹çš„å†…å®¹ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">announce</span><span class="token operator">:</span>
  <span class="token literal-property property">linkedin</span><span class="token operator">:</span>
    # Whether its enabled or not<span class="token punctuation">.</span>
    <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">true</span>

    # Message to use <span class="token keyword">while</span> publishing<span class="token punctuation">.</span>
    #
    # Default<span class="token operator">:</span> <span class="token string">'{{ .ProjectName }} {{ .Tag }} is out! Check it out at {{ .ReleaseURL }}'</span>
    <span class="token literal-property property">message_template</span><span class="token operator">:</span> <span class="token string">'Awesome project {{.Tag}} is out!'</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="slack" tabindex="-1"><a class="header-anchor" href="#slack" aria-hidden="true">#</a> slack</h3>
<p>å’Œ discode ä¸€æ ·ï¼Œ slack åŒæ ·ä¹Ÿæ˜¯éœ€è¦ä¼ å…¥ä¸€ä¸ªæ–°çš„ <code v-pre>Webhook</code></p>
<ul>
<li><code v-pre>SLACK_WEBHOOK</code></li>
</ul>
<p>ç„¶åï¼Œæ‚¨å¯ä»¥åœ¨é…ç½®ä¸­æ·»åŠ ç±»ä¼¼ä»¥ä¸‹å†…å®¹çš„å†…å®¹ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code># <span class="token punctuation">.</span>goreleaser<span class="token punctuation">.</span>yaml
<span class="token literal-property property">announce</span><span class="token operator">:</span>
  <span class="token literal-property property">slack</span><span class="token operator">:</span>
    # Whether its enabled or not<span class="token punctuation">.</span>
    <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">true</span>

    <span class="token operator">**</span><span class="token operator">**</span># Message template to use <span class="token keyword">while</span> publishing<span class="token punctuation">.</span>
    #
    # Default<span class="token operator">:</span> <span class="token string">'{{ .ProjectName }} {{ .Tag }} is out! Check it out at {{ .ReleaseURL }}'</span>
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">message_template</span><span class="token operator">:</span> <span class="token string">'Awesome project {{.Tag}} is out!'</span>

    # The name <span class="token keyword">of</span> the channel that the user selected <span class="token keyword">as</span> a destination <span class="token keyword">for</span> webhook messages<span class="token punctuation">.</span>
    <span class="token literal-property property">channel</span><span class="token operator">:</span> <span class="token string">'#channel'</span>

    # Set your Webhook's user name<span class="token punctuation">.</span>
    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">''</span>

    # Emoji to use <span class="token keyword">as</span> the icon <span class="token keyword">for</span> <span class="token keyword">this</span> message<span class="token punctuation">.</span> Overrides icon_url<span class="token punctuation">.</span>
    <span class="token literal-property property">icon_emoji</span><span class="token operator">:</span> <span class="token string">''</span>

    # <span class="token constant">URL</span> to an image to use <span class="token keyword">as</span> the icon <span class="token keyword">for</span> <span class="token keyword">this</span> message<span class="token punctuation">.</span>
    <span class="token literal-property property">icon_url</span><span class="token operator">:</span> <span class="token string">''</span>

    # Blocks <span class="token keyword">for</span> advanced formatting<span class="token punctuation">,</span> <span class="token literal-property property">see</span><span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>api<span class="token punctuation">.</span>slack<span class="token punctuation">.</span>com<span class="token operator">/</span>messaging<span class="token operator">/</span>webhooks#advanced_message_formatting
    # and https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>api<span class="token punctuation">.</span>slack<span class="token punctuation">.</span>com<span class="token operator">/</span>messaging<span class="token operator">/</span>composing<span class="token operator">/</span>layouts#adding<span class="token operator">-</span>blocks<span class="token punctuation">.</span>
    #
    # Attention<span class="token operator">:</span> goreleaser doesn't check the full structure <span class="token keyword">of</span> the Slack <span class="token constant">API</span><span class="token operator">:</span> please make sure that
    # your configuration <span class="token keyword">for</span> advanced message formatting abides by <span class="token keyword">this</span> <span class="token constant">API</span><span class="token punctuation">.</span>
    #
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">blocks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    # Attachments<span class="token punctuation">,</span> <span class="token literal-property property">see</span><span class="token operator">:</span> https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>api<span class="token punctuation">.</span>slack<span class="token punctuation">.</span>com<span class="token operator">/</span>reference<span class="token operator">/</span>messaging<span class="token operator">/</span>attachments
    #
    # Attention<span class="token operator">:</span> goreleaser doesn't check the full structure <span class="token keyword">of</span> the Slack <span class="token constant">API</span><span class="token operator">:</span> please make sure that
    # your configuration <span class="token keyword">for</span> advanced message formatting abides by <span class="token keyword">this</span> <span class="token constant">API</span><span class="token punctuation">.</span>
    #
    # Templates<span class="token operator">:</span> allowed
    <span class="token literal-property property">attachments</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#é“¾æ¥" aria-hidden="true">#</a> é“¾æ¥</h2>
<ul>
<li><a href="https://docs.docker.com/engine/reference/commandline/manifest/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/reference/commandline/manifest/<ExternalLinkIcon/></a></li>
</ul>
<h2 id="end-é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#end-é“¾æ¥" aria-hidden="true">#</a> END é“¾æ¥</h2>
<ul><li><div><a href = '85.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '87.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>
<ul>
<li>
<p><RouterLink to="/">â“‚ï¸å›åˆ°ç›®å½•ğŸ </RouterLink></p>
</li>
<li>
<p><a href="https://nsddd.top/archives/contributors" target="_blank" rel="noopener noreferrer"><strong>ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–</strong><ExternalLinkIcon/></a>)</p>
</li>
<li>
<p>âœ´ï¸ç‰ˆæƒå£°æ˜ Â© ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª<a href="http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="noopener noreferrer">CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰Â©<ExternalLinkIcon/></a></p>
</li>
</ul>
</div></template>


