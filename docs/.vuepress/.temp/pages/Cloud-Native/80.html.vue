<template><div><ul>
<li><a href="http://nsddd.top" target="_blank" rel="noopener noreferrer">author<ExternalLinkIcon/></a></li>
</ul>
<h1 id="ç¬¬80èŠ‚-è·¨å¹³å°ç¼–è¯‘" tabindex="-1"><a class="header-anchor" href="#ç¬¬80èŠ‚-è·¨å¹³å°ç¼–è¯‘" aria-hidden="true">#</a> ç¬¬80èŠ‚ è·¨å¹³å°ç¼–è¯‘</h1>
<div><a href = '79.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '81.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>
<blockquote>
<p>â¤ï¸ğŸ’•ğŸ’•è®°å½•<a href="https://github.com/cubxxw/sealos" target="_blank" rel="noopener noreferrer">sealos<ExternalLinkIcon/></a>å¼€æºé¡¹ç›®çš„å­¦ä¹ è¿‡ç¨‹ã€‚<a href="https://github.com/cubxxw/sealos" target="_blank" rel="noopener noreferrer">k8s,dockerå’Œäº‘åŸç”Ÿçš„å­¦ä¹ <ExternalLinkIcon/></a>ã€‚Myblog:<a href="http://nsddd.top/" target="_blank" rel="noopener noreferrer">http://nsddd.top<ExternalLinkIcon/></a></p>
</blockquote>
<hr>
<p>[TOC]</p>
<h2 id="å‰è¨€" tabindex="-1"><a class="header-anchor" href="#å‰è¨€" aria-hidden="true">#</a> å‰è¨€</h2>
<p>https://github.com/OpenIMSDK/Open-IM-Server/issues/432</p>
<p>ç°åœ¨å¾ˆå¤šåœ°æ–¹éƒ½å¯¹æœåŠ¡çš„å›½äº§åŒ–é€‚é…æœ‰æ‰€è¦æ±‚ï¼Œä¸€èˆ¬çš„å›½äº§åŒ–å¹³å°éƒ½æä¾›armç‰ˆæœ¬çš„linuxäº‘ç¯å¢ƒä¾›æˆ‘ä»¬è¿›è¡ŒæœåŠ¡éƒ¨ç½²ï¼Œå› æ­¤éœ€è¦æ„å»ºarmç‰ˆæœ¬çš„é•œåƒã€‚</p>
<h2 id="æ„å»ºæ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#æ„å»ºæ–¹æ¡ˆ" aria-hidden="true">#</a> æ„å»ºæ–¹æ¡ˆ</h2>
<p>åœ¨ä¸Šé¢çš„ issue ä¸­æˆ‘ä»¬æè¿°äº†å¤§è‡´çš„æ„å»ºæ€è·¯å’Œè§£å†³çš„æ­¥éª¤ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ„å»ºçš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬ä»¥æœ€å¸¸ç”¨çš„ amd æœºå™¨ä¸ºä¾‹ï¼Œæ¥ç¼–è¯‘ armã€‚å¯¹äºæ„å»ºé•œåƒçš„ARMç‰ˆæœ¬ï¼Œæœ‰å¦‚ä¸‹ä¸¤ç§æ–¹å¼ï¼š</p>
<ol>
<li>åœ¨ARMæœºå™¨ä¸Šä½¿ç”¨ docker build è¿›è¡Œæ„å»ºï¼›</li>
<li>åœ¨X86/AMD64 çš„æœºå™¨ä¸Šä½¿ç”¨ docker buildx è¿›è¡Œäº¤å‰æ„å»ºï¼›</li>
</ol>
<blockquote>
<p><strong>âš ï¸æ³¨æ„ï¼š</strong></p>
<ol>
<li>äº¤å‰æ„å»ºå’Œäº¤å‰è¿è¡Œçš„æ–¹å¼ä¼šæœ‰ä¸€äº›æ— æ³•é¢„çŸ¥çš„é—®é¢˜ï¼Œå»ºè®®ç®€å•çš„æ„å»ºæ­¥éª¤ï¼ˆå¦‚åªæ˜¯ä¸‹è½½è§£å‹å¯¹åº”æ¶æ„çš„æ–‡ä»¶ï¼‰å¯è€ƒè™‘åœ¨x86ä¸‹äº¤å‰æ„å»ºï¼Œå¤æ‚çš„ï¼ˆå¦‚éœ€è¦ç¼–è¯‘çš„ï¼‰åˆ™ç›´æ¥åœ¨armæœºå™¨ä¸Šè¿›è¡Œæ„å»ºï¼›</li>
<li>å®é™…æµ‹è¯•å‘ç°ï¼Œä½¿ç”¨<a href="https://github.com/multiarch/qemu-user-static" target="_blank" rel="noopener noreferrer">qemuæ–¹å¼<ExternalLinkIcon/></a>åœ¨x86å¹³å°ä¸‹è¿è¡Œarmç‰ˆæœ¬çš„é•œåƒæ—¶ï¼Œæ‰§è¡Œç®€å•çš„å‘½ä»¤å¯ä»¥æˆåŠŸï¼ˆå¦‚archï¼‰ï¼Œæ‰§è¡ŒæŸäº›å¤æ‚çš„ç¨‹åºæ—¶ï¼ˆå¦‚å¯åŠ¨javaè™šæ‹Ÿæœºï¼‰ï¼Œä¼šæ— å“åº”ï¼Œæ‰€ä»¥é•œåƒçš„éªŒè¯å·¥ä½œåº”å°½é‡æ”¾ç½®åˆ°armæœºå™¨ä¸Šè¿›è¡Œï¼›</li>
</ol>
<p><strong>ä¸Šé¢ç¬¬äºŒç‚¹æŒ‰å¦‚ä¸‹æ–¹å¼æµ‹è¯•ï¼š</strong></p>
<ul>
<li><code v-pre>docker run --rm --platform=linux/arm64 openjdk:8u212-jre-alpine arch</code> å¯æ­£å¸¸è¾“å‡ºï¼›</li>
<li><code v-pre>docker run --rm --platform=linux/arm64 openjdk:8u212-jre-alpine java -version</code> åˆ™ä¼š <strong>å¡ä½</strong>ï¼Œä¸”éœ€è¦ä½¿ç”¨<code v-pre>docker stop</code>åœæ­¢å®¹å™¨æ‰å¯ä»¥é€€å‡ºå®¹å™¨ï¼›</li>
</ul>
</blockquote>
<h2 id="å¯ç”¨è¯•éªŒæ€§åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#å¯ç”¨è¯•éªŒæ€§åŠŸèƒ½" aria-hidden="true">#</a> å¯ç”¨è¯•éªŒæ€§åŠŸèƒ½</h2>
<blockquote>
<p>ğŸ’¡ æ³¨æ„ï¼šbuildx ä»…æ”¯æŒ docker19.03 åŠä»¥ä¸Šdockerç‰ˆæœ¬</p>
</blockquote>
<p>å¦‚éœ€ä½¿ç”¨ buildxï¼Œéœ€è¦å¼€å¯dockerçš„å®éªŒåŠŸèƒ½åï¼Œæ‰å¯ä»¥ä½¿ç”¨ï¼Œå¼€å¯æ–¹å¼ï¼š</p>
<p>ç¼–è¾‘ <code v-pre>/etc/docker/daemon.json</code> ï¼Œæ·»åŠ ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token punctuation">{</span>
    <span class="token string-property property">"experimental"</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¼–è¾‘ <code v-pre>ï½/.docker/config.json</code> æ·»åŠ ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token string-property property">"experimental"</span> <span class="token operator">:</span> <span class="token string">"enabled"</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é‡å¯Dockerä½¿ç”Ÿæ•ˆï¼š</p>
<ul>
<li><code v-pre>sudo systemctl daemon-reload</code></li>
<li><code v-pre>sudo systemctl restart docker</code></li>
</ul>
<p>ç¡®è®¤æ˜¯å¦å¼€å¯ï¼š</p>
<ul>
<li><code v-pre>docker version -f'{{.Server.Experimental}}'</code></li>
<li>å¦‚æœè¾“å‡ºtrueï¼Œåˆ™è¡¨ç¤ºå¼€å¯æˆåŠŸ</li>
</ul>
<p>åœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸­æ„å»ºå¤šç§ç³»ç»Ÿæ¶æ„æ”¯æŒçš„ Docker é•œåƒï¼Œè¦æƒ³ä½¿ç”¨ç»Ÿä¸€çš„åå­—å¿…é¡»ä½¿ç”¨ <code v-pre>[$ docker manifest](notion://www.notion.so/docker_practice/image/manifest)</code> å‘½ä»¤ã€‚</p>
<p>åœ¨ Docker 19.03+ ç‰ˆæœ¬ä¸­å¯ä»¥ä½¿ç”¨ <code v-pre>$ docker buildx build</code> å‘½ä»¤ä½¿ç”¨ <code v-pre>BuildKit</code> æ„å»ºé•œåƒã€‚è¯¥å‘½ä»¤æ”¯æŒ <code v-pre>--platform</code> å‚æ•°å¯ä»¥åŒæ—¶æ„å»ºæ”¯æŒå¤šç§ç³»ç»Ÿæ¶æ„çš„ Docker é•œåƒï¼Œå¤§å¤§ç®€åŒ–äº†æ„å»ºæ­¥éª¤ã€‚</p>
<h2 id="ä½¿ç”¨buildxæ„å»º" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨buildxæ„å»º" aria-hidden="true">#</a> ä½¿ç”¨buildxæ„å»º</h2>
<p>buildx çš„è¯¦ç»†ä½¿ç”¨å¯å‚è€ƒï¼š<a href="https://docs.docker.com/engine/reference/commandline/buildx/?fileGuid=0l3NVKX0BgflYN3R" target="_blank" rel="noopener noreferrer">Dockerå®˜æ–¹æ–‡æ¡£-Reference-buildx<ExternalLinkIcon/></a></p>
<h3 id="åˆ›å»º-buildx-æ„å»ºå™¨" tabindex="-1"><a class="header-anchor" href="#åˆ›å»º-buildx-æ„å»ºå™¨" aria-hidden="true">#</a> <strong>åˆ›å»º buildx æ„å»ºå™¨</strong></h3>
<p>ä½¿ç”¨ docker buildx ls å‘½ä»¤æŸ¥çœ‹ç°æœ‰çš„æ„å»ºå™¨</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code>root@rbqntnwlflfxvigv:~<span class="token comment"># docker buildx ls</span>
NAME/NODE DRIVER/ENDPOINT STATUS  BUILDKIT PLATFORMS
default * <span class="token function">docker</span>                           
  default default         running <span class="token number">20.10</span>.24 linux/amd64, linux/386
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»ºå¹¶æ„å»ºå™¨ï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># ä¸‹é¢çš„åˆ›å»ºå‘½ä»¤ä»»é€‰ä¸€æ¡ç¬¦åˆæƒ…å†µçš„å³å¯</span>
<span class="token comment"># 1. ä¸æŒ‡å®šä»»ä½•å‚æ•°åˆ›å»º</span>
<span class="token function">docker</span> buildx create <span class="token parameter variable">--use</span> <span class="token parameter variable">--name</span> multiarch-builder
<span class="token comment"># 2. å¦‚åˆ›å»ºåä½¿ç”¨docker buildx ls å‘ç°æ„å»ºèµ·æ²¡æœ‰armæ¶æ„æ”¯æŒï¼Œå¯ä½¿ç”¨--platformæ˜ç¡®æŒ‡å®šè¦æ”¯æŒçš„æ„å»ºç±»å‹ï¼Œå¦‚ä»¥ä¸‹å‘½ä»¤</span>
<span class="token function">docker</span> buildx create <span class="token parameter variable">--platform</span> linux/arm64,linux/arm/v7,linux/arm/v6 <span class="token parameter variable">--name</span> multiarch-builder
<span class="token comment"># 3. å¦‚éœ€åœ¨buildxè®¿é—®ç§æœ‰registryï¼Œå¯ä½¿ç”¨hostæ¨¡å¼ï¼Œå¹¶æ‰‹åŠ¨æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œé¿å…buildxæ—¶æ— æ³•è®¿é—®æœ¬åœ°çš„registryä¸»æœº</span>
<span class="token function">docker</span> buildx create <span class="token parameter variable">--platform</span> linux/amd64,linux/arm64,linux/arm/v7,linux/arm/v6  --driver-opt <span class="token assign-left variable">network</span><span class="token operator">=</span>host <span class="token parameter variable">--config</span><span class="token operator">=</span>/Users/hanlyjiang/.docker/buildx-config.toml <span class="token parameter variable">--use</span> <span class="token parameter variable">--name</span> multiarch-builder
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>buildx-config.toml é…ç½®æ–‡ä»¶å†™æ³•ç±»ä¼¼ï¼š</p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># &lt;https://github.com/moby/buildkit/blob/master/docs/buildkitd.toml.md></span>
<span class="token comment"># registry configures a new Docker register used for cache import or output.</span>
<span class="token punctuation">[</span>registry.<span class="token string">"zh-registry.geostar.com.cn"</span><span class="token punctuation">]</span>
  mirrors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"zh-registry.geostar.com.cn"</span><span class="token punctuation">]</span>
  http <span class="token operator">=</span> <span class="token boolean">true</span>
  insecure <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¯ç”¨æ„å»ºå™¨</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># åˆå§‹åŒ–å¹¶æ¿€æ´»</span>
<span class="token function">docker</span> buildx inspect multiarch-builder <span class="token parameter variable">--bootstrap</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç¡®è®¤æˆåŠŸ</strong></p>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># ä½¿ç”¨ docker buildx ls æŸ¥çœ‹</span>
<span class="token function">docker</span> buildx <span class="token function">ls</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Docker åœ¨ Linux ç³»ç»Ÿæ¶æ„ä¸‹æ˜¯ä¸æ”¯æŒ arm æ¶æ„é•œåƒï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¿è¡Œä¸€ä¸ªæ–°çš„å®¹å™¨è®©å…¶æ”¯æŒè¯¥ç‰¹æ€§ï¼ŒDocker æ¡Œé¢ç‰ˆåˆ™æ— éœ€è¿›è¡Œæ­¤é¡¹è®¾ç½®ï¼ˆmacç³»ç»Ÿï¼‰ã€‚</p>
<ul>
<li>åœ¨å†…æ ¸ä¸­ä½¿ç”¨ QEMU ä»¿çœŸæ”¯æŒæ¥è¿›è¡Œå¤šæ¶æ„é•œåƒæ„å»º</li>
</ul>
<div class="language-bash ext-sh line-numbers-mode"><pre v-pre class="language-bash"><code><span class="token comment"># å®‰è£…æ¨¡æ‹Ÿå™¨ï¼ˆç”¨äºå¤šå¹³å°é•œåƒæ„å»ºï¼‰</span>
$ <span class="token function">docker</span> run <span class="token parameter variable">--rm</span> <span class="token parameter variable">--privileged</span> tonistiigi/binfmt:latest <span class="token parameter variable">--install</span> all
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±äº Docker é»˜è®¤çš„ <code v-pre>builder</code> å®ä¾‹ä¸æ”¯æŒåŒæ—¶æŒ‡å®šå¤šä¸ª <code v-pre>--platform</code>ï¼Œæˆ‘ä»¬å¿…é¡»é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„ <code v-pre>builder</code> å®ä¾‹ã€‚åŒæ—¶ç”±äºå›½å†…æ‹‰å–é•œåƒè¾ƒç¼“æ…¢ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é…ç½®äº† <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fmoby%2Fbuildkit%2Fblob%2Fmaster%2Fdocs%2Fbuildkitd.toml.md" target="_blank" rel="noopener noreferrer">é•œåƒåŠ é€Ÿåœ°å€<ExternalLinkIcon/></a> <code v-pre>[dockerpracticesig/buildkit:master](&lt;https://github.com/docker-practice/buildx&gt;)</code> é•œåƒæ›¿æ¢å®˜æ–¹é•œåƒ</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code># é€‚ç”¨äºå›½å†…ç¯å¢ƒ
root@i-3uavns2y:~# docker buildx create --use --name=mybuilder-cn --driver docker-container --driver-opt image=dockerpracticesig/buildkit:master

# é€‚ç”¨äºè…¾è®¯äº‘ç¯å¢ƒ(è…¾è®¯äº‘ä¸»æœºã€coding.net æŒç»­é›†æˆ)
root@i-3uavns2y:~# docker buildx create --use --name=mybuilder-cn --driver docker-container --driver-opt image=dockerpracticesig/buildkit:master-tencent
# ä½¿ç”¨é»˜è®¤é•œåƒ
root@i-3uavns2y:~# docker buildx create --name mybuilder --driver docker-container

# ä½¿ç”¨æ–°åˆ›å»ºå¥½çš„ builder å®ä¾‹
root@i-3uavns2y:~# docker buildx use mybuilder
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥çœ‹å·²æœ‰çš„ builder å®ä¾‹</p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code>root@i<span class="token operator">-</span>tpmja312<span class="token punctuation">:</span>~# docker buildx ls
NAME<span class="token operator">/</span>NODE    DRIVER<span class="token operator">/</span>ENDPOINT             STATUS   PLATFORMS
mybuilder <span class="token operator">*</span>  docker<span class="token operator">-</span>container
  mybuilder0 unix<span class="token punctuation">:</span><span class="token operator">/</span><span class="token comment">//var/run/docker.sock inactivedefault      docker</span>
  <span class="token keyword">default</span>    <span class="token keyword">default</span>                     running  linux<span class="token operator">/</span>amd64<span class="token punctuation">,</span> linux<span class="token operator">/</span><span class="token number">386</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ„å»ºï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code>docker buildx build <span class="token punctuation">-</span><span class="token punctuation">-</span>platform linux/amd64<span class="token punctuation">,</span>linux/arm/v6<span class="token punctuation">,</span>linux/arm/v7<span class="token punctuation">,</span>linux/arm64/v8<span class="token punctuation">,</span>linux/386<span class="token punctuation">,</span>linux/ppc64le<span class="token punctuation">,</span>linux/s390x <span class="token punctuation">-</span>t kubecub/hello . <span class="token punctuation">-</span><span class="token punctuation">-</span>push
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="ä¿®æ”¹dockerfile" tabindex="-1"><a class="header-anchor" href="#ä¿®æ”¹dockerfile" aria-hidden="true">#</a> <strong>ä¿®æ”¹Dockerfile</strong></h3>
<p>å¯¹ Dockerfile çš„ä¿®æ”¹ï¼Œå¤§è‡´éœ€è¦è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p>
<ol>
<li>ç¡®è®¤åŸºç¡€é•œåƒï¼ˆFROMï¼‰æ˜¯å¦æœ‰armç‰ˆæœ¬ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å¯ä»¥ä¸ç”¨æ”¹åŠ¨ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™éœ€è¦å¯»æ‰¾æ›¿ä»£é•œåƒï¼Œå¦‚æ²¡æœ‰æ›¿ä»£é•œåƒï¼Œåˆ™å¯èƒ½éœ€è¦è‡ªè¡Œç¼–è¯‘ï¼›</li>
<li>ç¡®è®¤dockerfileçš„å„ä¸ªæ­¥éª¤ä¸­æ˜¯å¦æœ‰ä¾èµ–CPUæ¶æ„çš„ï¼Œå¦‚æœæœ‰ï¼Œåˆ™éœ€è¦æ›¿æ¢æˆarmæ¶æ„çš„ï¼Œå¦‚åœ¨æ„å»ºjitisçš„é•œåƒæ—¶ï¼ŒDockerfileä¸­æœ‰æ·»åŠ ä¸€ä¸ªamd64æ¶æ„çš„è½¯ä»¶</li>
</ol>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>ADD &lt;https://github.com/just-containers/s6-overlay/releases/download/v1.21.4.0/s6-overlay-amd64.tar.gz> /tmp/s6-overlay.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ­¤æ—¶éœ€è¦æ›¿æ¢ä¸ºä¸‹é¢çš„åœ°å€(æ³¨æ„amd64æ›¿æ¢æˆäº†aarch64ï¼Œå½“ç„¶ï¼Œéœ€è¦å…ˆç¡®è®¤ä¸‹è½½åœ°å€ä¸­æœ‰æ— å¯¹åº”æ¶æ„çš„gzåŒ…ï¼Œä¸èƒ½ç®€å•åšå­—ç¬¦æ›¿æ¢)ï¼š</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>ADD &lt;https://github.com/just-containers/s6-overlay/releases/download/v1.21.4.0/s6-overlay-aarch64.tar.gz> /tmp/s6-overlay.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å½“ç„¶ï¼Œæˆ‘ä»¬éœ€è¦ç¡®è®¤è¯¥è½¯ä»¶æœ‰æ­¤æ¶æ„çš„å½’æ¡£åŒ…ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™éœ€è¦è€ƒè™‘ä»æºç æ„å»ºï¼›</p>
<blockquote>
<p>æç¤ºï¼š</p>
<p>æ€ä¹ˆç¡®å®šä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ <code v-pre>/so</code> åº“çš„å¯¹åº”çš„æ‰§è¡Œæ¶æ„ï¼Ÿ å¯ä»¥é€šè¿‡ <code v-pre>file {å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„}</code> æ¥æŸ¥çœ‹ï¼Œ</p>
<p>å¦‚ä¸‹é¢æ—¶macOSä¸Šæ‰§è¡Œfileå‘½ä»¤çš„è¾“å…¥ï¼Œå¯ä»¥å‘ç°macOSä¸Šçš„gitç¨‹åºå¯ä»¥å…¼å®¹ä¸¤ç§æ¶æ„-<code v-pre>x86_64&amp;arm64e</code>ï¼š</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>file $(which git)
/usr/bin/git: Mach-O universal binary with 2 architectures: [x86_64:Mach-O 64-bit executable x86_64] [arm64e:Mach-O 64-bit executable arm64e]
/usr/bin/git (for architecture x86_64):	Mach-O 64-bit executable x86_64
/usr/bin/git (for architecture arm64e):	Mach-O 64-bit executable arm64e
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸‹é¢çš„å‘½ä»¤åˆ™å¯¹ä¸€ä¸ªsoæ–‡ä»¶æ‰§è¡Œäº†fileï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¸­çš„æ¶æ„ä¿¡æ¯ <code v-pre>ARM aarch64</code>ï¼š</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>file /lib/aarch64-linux-gnu/libpthread-2.23.so
/lib/aarch64-linux-gnu/libpthread-2.23.so: ELF 64-bit LSB shared object, ARM aarch64, version 1 (GNU/Linux), dynamically linked, interpreter /lib/ld-linux-aarch64.so.1, BuildID[sha1]=880365ebb22114e4c10108b73243144d5fa315dc, for GNU/Linux 3.7.0, not stripped
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></blockquote>
<h3 id="docker-buildx-æ„å»ºarm64é•œåƒçš„å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#docker-buildx-æ„å»ºarm64é•œåƒçš„å‘½ä»¤" aria-hidden="true">#</a> docker buildx æ„å»ºarm64é•œåƒçš„å‘½ä»¤</h3>
<p>ä½¿ç”¨ --platformæ¥æŒ‡å®šæ¶æ„ï¼Œä½¿ç”¨ <code v-pre>--push</code> æˆ– <code v-pre>--load</code> æ¥æŒ‡å®šæ„å»ºå®Œæ¯•åçš„åŠ¨ä½œã€‚</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>docker buildx build --platform=linux/arm64,linux/amd64 -t xxxx:tag . --push
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote>
<p>æç¤ºï¼šå½“æŒ‡å®šå¤šä¸ªæ¶æ„æ—¶ï¼Œåªèƒ½ä½¿ç”¨ --push æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œæ— æ³• <code v-pre>--load</code>ï¼Œæ¨é€æˆåŠŸåå†é€šè¿‡ <code v-pre>docker pull --platform</code> æ¥æ‹‰å–æŒ‡å®šæ¶æ„çš„é•œåƒ</p>
</blockquote>
<h3 id="æ£€æŸ¥æ„å»ºæˆæœ" tabindex="-1"><a class="header-anchor" href="#æ£€æŸ¥æ„å»ºæˆæœ" aria-hidden="true">#</a> <strong>æ£€æŸ¥æ„å»ºæˆæœ</strong></h3>
<ol>
<li>é€šè¿‡ <code v-pre>docker buildx imagetools inspect</code> å‘½ä»¤æŸ¥çœ‹é•œåƒä¿¡æ¯ï¼Œçœ‹æ˜¯å¦æœ‰å¯¹åº”çš„armæ¶æ„ä¿¡æ¯ï¼›</li>
<li>å®é™…è¿è¡Œé•œåƒï¼Œç¡®è®¤è¿è¡Œæ­£å¸¸ï¼›ï¼ˆåœ¨armæœºå™¨ä¸Šæ‰§è¡Œï¼‰</li>
</ol>
<blockquote>
<p>æç¤ºï¼šå¦‚è¿è¡Œæ—¶è¾“å‡º <code v-pre>exec format error</code> ç±»ä¼¼é”™è¯¯ï¼Œåˆ™è¡¨ç¤ºé•œåƒä¸­éƒ¨åˆ†å¯æ‰§è¡Œæ–‡ä»¶æ¶æ„ä¸åŒ¹é…ã€‚</p>
</blockquote>
<h2 id="åœ¨x86ä¸Šè¿è¡Œarmé•œåƒ" tabindex="-1"><a class="header-anchor" href="#åœ¨x86ä¸Šè¿è¡Œarmé•œåƒ" aria-hidden="true">#</a> <strong>åœ¨x86ä¸Šè¿è¡Œarmé•œåƒ</strong></h2>
<p>å¯å‚è€ƒ <a href="https://github.com/multiarch/qemu-user-static" target="_blank" rel="noopener noreferrer">github/qemu-user-static<ExternalLinkIcon/></a> ,ç®€è¦æè¿°å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š</p>
<p><code v-pre>docker run --rm --privileged multiarch/qemu-user-static --reset -p yes</code></p>
</li>
<li>
<p>ä¹‹åå³å¯è¿è¡Œarmç‰ˆæœ¬çš„é•œåƒï¼Œå¦‚ï¼š</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>docker run --rm -t arm64v8/fedora uname -m
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>
</ul>
<h2 id="åœ¨x86å¹³å°ä¸‹ä½¿ç”¨buildxæ„å»ºè·¨å¹³å°é•œåƒå¹¶è¿è¡Œarmåº”ç”¨" tabindex="-1"><a class="header-anchor" href="#åœ¨x86å¹³å°ä¸‹ä½¿ç”¨buildxæ„å»ºè·¨å¹³å°é•œåƒå¹¶è¿è¡Œarmåº”ç”¨" aria-hidden="true">#</a> <strong>åœ¨x86å¹³å°ä¸‹ä½¿ç”¨Buildxæ„å»ºè·¨å¹³å°é•œåƒå¹¶è¿è¡Œarmåº”ç”¨</strong></h2>
<p>æˆ‘ä»¬æ¼”ç¤ºäº†ä¸€ä¸‹ç®€å•çš„æ„å»ºæ–¹æ³•ï¼Œ</p>
<h3 id="å®‰è£…-qemu-å¤šå¹³å°æ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#å®‰è£…-qemu-å¤šå¹³å°æ”¯æŒ" aria-hidden="true">#</a> å®‰è£… qemu å¤šå¹³å°æ”¯æŒ</h3>
<p>è¿è¡Œä»¥ä¸‹å®¹å™¨ï¼š</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>docker run --rm --privileged multiarch/qemu-user-static --reset -p yes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¯¥å®¹å™¨ä¼šä¸ºä½ çš„è®¾å¤‡å®‰è£… qemu å¤šå¹³å°æ”¯æŒï¼Œå¦‚æœä½ éœ€è¦è¿è¡Œè·¨å¹³å°å®¹å™¨ï¼Œä¹Ÿä¼šç”¨åˆ°å®ƒã€‚</p>
<h3 id="åˆ›å»ºæ–°çš„-builder-å®ä¾‹å¹¶è®¾ä¸ºé»˜è®¤" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºæ–°çš„-builder-å®ä¾‹å¹¶è®¾ä¸ºé»˜è®¤" aria-hidden="true">#</a> <strong>åˆ›å»ºæ–°çš„ builder å®ä¾‹å¹¶è®¾ä¸ºé»˜è®¤</strong></h3>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>docker buildx create --use --name mybuilder
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>çœ‹åˆ°è¾“å‡º <code v-pre>mybuilder</code> å³è¡¨ç¤ºåˆ›å»ºæˆåŠŸï¼Œä½¿ç”¨ <code v-pre>--use</code> æŒ‡ä»¤å°†åœ¨ builder å®ä¾‹åˆ›å»ºå®Œæˆæ—¶è‡ªåŠ¨å°†å…¶è®¾ä¸ºé»˜è®¤ï¼Œå¦åˆ™éœ€è¦æ‰‹åŠ¨ä½¿ç”¨ <code v-pre>docker buildx use mybuilder</code> å°†åˆ›å»ºçš„å®ä¾‹è®¾ä¸ºé»˜è®¤ã€‚</p>
<h3 id="ä½¿ç”¨-buildx-æ„å»ºå¤šå¹³å°é•œåƒ" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-buildx-æ„å»ºå¤šå¹³å°é•œåƒ" aria-hidden="true">#</a> <strong>ä½¿ç”¨ Buildx æ„å»ºå¤šå¹³å°é•œåƒ</strong></h3>
<p>Buildx çš„ä½¿ç”¨ä¸ docker build ååˆ†ç›¸ä¼¼ï¼ŒåŸºæœ¬ä¸Šåªéœ€è¦å°†å‘½ä»¤ä¸­çš„ <code v-pre>docker build</code> æ›¿æ¢æˆ <code v-pre>docker buildx build</code> å³å¯ã€‚å¦‚æœä½¿ç”¨ <code v-pre>docker buildx install</code> å°†é»˜è®¤çš„ docker build æ›¿æ¢ä¸º Buildxï¼Œé‚£ä¹ˆç›´æ¥ä½¿ç”¨ <code v-pre>docker build</code> å³å¯ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå°†å½“å‰ç›®å½•ä¸‹çš„ Dockerfile æ–‡ä»¶æ‰“åŒ…æˆé•œåƒï¼Œéœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>docker buildx build -t xxx/xxx:tag . --push
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœæ›¿æ¢äº†é»˜è®¤ docker buildï¼Œå°†æ˜¯è¿™æ ·çš„ï¼š</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>docker build -t xxx/xxx:tag . --push
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code v-pre>-push</code> æŒ‡ä»¤ä¼šè‡ªåŠ¨æŠŠæ„å»ºå¥½çš„é•œåƒæ¨é€åˆ°è¿œç«¯ä»“åº“ï¼Œå¦åˆ™åªä¼šåœ¨å­˜æ”¾åœ¨ cache ä¸­ã€‚</p>
<p>å¦‚æœè¦æ„å»ºå¤šå¹³å°é•œåƒï¼Œåœ¨æŒ‡ä»¤ä¸­åŠ å…¥ <code v-pre>--platform=</code> å³å¯ï¼Œç­‰å·åå¡«å†™éœ€è¦æ„å»ºçš„å¹³å°ï¼Œå¦‚ <code v-pre>linux/arm</code>ï¼Œ<code v-pre>linux/arm64</code>ï¼Œ<code v-pre>linux/amd64</code> ç­‰ï¼Œç”¨ <code v-pre>,</code> éš”å¼€ã€‚Dockerfile æœ¬èº«å¹¶ä¸éœ€è¦åšå‡ºæ›´æ”¹ï¼Œé™¤éä½ éœ€è¦åšçš„æ“ä½œåœ¨ä¸åŒå¹³å°ä¸‹æœ‰æ‰€åŒºåˆ«ï¼Œæ¯”å¦‚æ ¹æ®å¹³å°ä¸‹è½½ä¸åŒæ–‡ä»¶ç­‰ã€‚</p>
<div class="language-docker ext-docker line-numbers-mode"><pre v-pre class="language-docker"><code>docker buildx build --platform=linux/arm,linux/arm64,linux/amd64 -t xxx/xxx:tag . --push
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Buildx å°†æ ¹æ®ä»¥ä¸ŠæŒ‡ä»¤è‡ªåŠ¨æ„å»ºä¸‰ä¸ªå¹³å°çš„é•œåƒå¹¶æ¨é€åˆ°è¿œç«¯ï¼Œè¿™ä¸‰ä¸ªé•œåƒä¼šä½¿ç”¨å‘½ä»¤ä¸­æŒ‡å®šçš„åŒä¸€ä¸ª tagã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒæŒ‡å®šçš„å¹³å°å¿…é¡»æ˜¯åº•å±‚é•œåƒæ‰€æ”¯æŒçš„ã€‚</p>
<p>æœ¬åœ°æ”¯æŒä¸ƒç§æ„å»ºï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code>docker buildx build <span class="token punctuation">-</span><span class="token punctuation">-</span>platform linux/amd64<span class="token punctuation">,</span>linux/arm/v6<span class="token punctuation">,</span>linux/arm/v7<span class="token punctuation">,</span>linux/arm64/v8<span class="token punctuation">,</span>linux/386<span class="token punctuation">,</span>linux/ppc64le<span class="token punctuation">,</span>linux/s390x <span class="token punctuation">-</span>t doubledong/hello . <span class="token punctuation">-</span><span class="token punctuation">-</span>push
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨ <a href="https://docs.docker.com/buildx/working-with-buildx/" target="_blank" rel="noopener noreferrer">Docker Documents<ExternalLinkIcon/></a> æŸ¥çœ‹æ›´å¤šè¯¦ç»†çš„è¯´æ˜ã€‚</p>
<h2 id="ä½¿ç”¨-github-action-è‡ªåŠ¨æ„å»ºå¤šå¹³å°é•œåƒ" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-github-action-è‡ªåŠ¨æ„å»ºå¤šå¹³å°é•œåƒ" aria-hidden="true">#</a> ä½¿ç”¨ GitHub Action è‡ªåŠ¨æ„å»ºå¤šå¹³å°é•œåƒ</h2>
<p>ç”±äº DockerHub çš„è‡ªåŠ¨æ„å»ºå·¥å…·å¯¹å¤šå¹³å°æ”¯æŒå¹¶ä¸å‹å¥½ï¼Œæ¨èä½¿ç”¨ GitHub Action æ¥æ„å»ºã€‚å…·ä½“çš„ yaml  æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> docker build and push

<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">release</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> main <span class="token punctuation">]</span>
    <span class="token key atrule">types</span><span class="token punctuation">:</span> released
    <span class="token comment"># å°†åœ¨mainåˆ†æ”¯çš„releaseå‘å¸ƒæ—¶è‡ªåŠ¨è¿è¡Œè¯¥æµç¨‹</span>
  <span class="token key atrule">workflow_dispatch</span><span class="token punctuation">:</span>
    <span class="token comment"># å°†åœ¨GitHub Actionç•Œé¢åˆ›å»ºä¸€ä¸ªrun workflowæŒ‰é’®ï¼Œç‚¹å‡»åæ‰§è¡Œè¯¥æµç¨‹</span>
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest

    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Get the tag name
        <span class="token key atrule">run</span><span class="token punctuation">:</span> echo "TAG=$<span class="token punctuation">{</span>GITHUB_REF/refs\\/tags\\//<span class="token punctuation">}</span>" <span class="token punctuation">></span><span class="token punctuation">></span> $GITHUB_ENV
        <span class="token comment"># è·å–release tagï¼Œåœ¨åˆ›å»ºé•œåƒæ—¶ä¼šç”¨åˆ°</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup QEMU
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/setup<span class="token punctuation">-</span>qemu<span class="token punctuation">-</span>action@v1

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Docker Setup Buildx
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/setup<span class="token punctuation">-</span>buildx<span class="token punctuation">-</span>action@v1.3.0
        <span class="token comment"># å¯ç”¨Buildx</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Login
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/login<span class="token punctuation">-</span>action@v1
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">username</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DOCKERHUB_USERNAME <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">password</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DOCKERHUB_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token comment"># ç™»é™†DockerHubè´¦å·ï¼Œä¾›æ¨é€é•œåƒä½¿ç”¨ï¼Œè¿™é‡Œçš„secretséœ€è¦åœ¨ä»“åº“è®¾ç½®é¡µé¢æ·»åŠ </span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build and Push with Version Tag
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> docker/build<span class="token punctuation">-</span>push<span class="token punctuation">-</span>action@v2
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">context</span><span class="token punctuation">:</span> .
          <span class="token key atrule">platforms</span><span class="token punctuation">:</span> linux/amd64<span class="token punctuation">,</span>linux/arm64<span class="token punctuation">,</span>linux/arm
          <span class="token key atrule">push</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">tags</span><span class="token punctuation">:</span> xxx/abc<span class="token punctuation">:</span>$<span class="token punctuation">{</span><span class="token punctuation">{</span> env.TAG <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token comment"># ä½¿ç”¨ä»“åº“æ ¹ç›®å½•ä¸­çš„Dockerfileæ„å»ºä¸‰ä¸ªå¹³å°çš„é•œåƒï¼Œå¹¶æ¨é€åˆ°xxx/abcä»“åº“ï¼Œä½¿ç”¨ä¹‹å‰è·å–çš„tag</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è·¨å¹³å°è¿è¡Œå®¹å™¨çš„ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#è·¨å¹³å°è¿è¡Œå®¹å™¨çš„ç­–ç•¥" aria-hidden="true">#</a> è·¨å¹³å°è¿è¡Œå®¹å™¨çš„ç­–ç•¥</h3>
<p>æˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•è·¨å¹³å°ç¼–è¯‘ï¼Œé‚£ä¹ˆæ‹‰å–é•œåƒçš„ç­–ç•¥æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</p>
<p>ä¸€èˆ¬æ¥è¯´ã€‚é»˜è®¤ä½¿ç”¨ docker pull æŒ‡ä»¤åªä¼šæ‹‰å–å’Œå½“å‰å¹³å°ä¸€è‡´çš„é•œåƒï¼Œè¦æ‹‰å–å…¶ä»–å¹³å°çš„é•œåƒï¼Œä½¿ç”¨â€“platform æŒ‡å®šå¯¹åº”çš„å¹³å°ã€‚</p>
<p>åŒæ ·ï¼Œåœ¨ä½¿ç”¨ docker run è¿è¡Œå®¹å™¨æ—¶ä¹Ÿéœ€è¦ä½¿ç”¨â€“platform æŒ‡å®šå¹³å°ã€‚</p>
<p>å¦‚æœä½¿ç”¨ docker-compose æ¥ç®¡ç†å®¹å™¨ï¼Œéœ€è¦åœ¨ image çš„åŒçº§æ·»åŠ ç±»ä¼¼ <code v-pre>platform: linux/arm</code> çš„æŒ‡ä»¤æ¥æŒ‡å®šå¹³å°ã€‚å¦‚æœæœ¬åœ°å·²æœ‰ç›¸åŒ tag çš„å…¶ä»–å¹³å°é•œåƒï¼Œéœ€è¦ä½¿ç”¨ <code v-pre>docker-compose pull</code> æ¥æ‹‰å–éœ€è¦å¹³å°çš„é•œåƒ</p>
<h3 id="æ¡ˆä¾‹æ¼”ç¤º" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹æ¼”ç¤º" aria-hidden="true">#</a> æ¡ˆä¾‹æ¼”ç¤º</h3>
<p>å‡è®¾æœ‰ä¸€ä¸ªç®€å•çš„ golang ç¨‹åºæºç ï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code>â¯ cat hello.go
/<span class="token important">*************************************************************************</span>
   <span class="token punctuation">></span> File Name<span class="token punctuation">:</span> hello.go
   <span class="token punctuation">></span> Author<span class="token punctuation">:</span> smile
   <span class="token punctuation">></span> Mail<span class="token punctuation">:</span> 3293172751nss@gmail.com
   <span class="token punctuation">></span> Created Time<span class="token punctuation">:</span> Sun Jun 11 12<span class="token punctuation">:</span>37<span class="token punctuation">:</span>18 2023
<span class="token important">************************************************************************/</span>
package main

import (
        "fmt"
        "runtime"
)

func main() <span class="token punctuation">{</span>
        fmt.Printf("Hello<span class="token punctuation">,</span> %s<span class="token tag">!</span>\\n"<span class="token punctuation">,</span> runtime.GOARCH)
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»ºä¸€ä¸ª Dockerfile å°†è¯¥åº”ç”¨å®¹å™¨åŒ–ï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code>â¯ cat Dockerfile
FROM golang<span class="token punctuation">:</span>alpine AS builder
RUN mkdir /app
ADD . /app/
WORKDIR /app
RUN go build <span class="token punctuation">-</span>o hello .

FROM alpine
RUN mkdir /app
WORKDIR /app
COPY <span class="token punctuation">-</span><span class="token punctuation">-</span>from=builder /app/hello .
CMD <span class="token punctuation">[</span><span class="token string">"./hello"</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯ä¸€ä¸ªå¤šé˜¶æ®µæ„å»º Dockerfileï¼Œä½¿ç”¨ Go ç¼–è¯‘å™¨æ¥æ„å»ºåº”ç”¨ï¼Œå¹¶å°†æ„å»ºå¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶æ‹·è´åˆ° alpine é•œåƒä¸­ã€‚</p>
<p>ç°åœ¨å°±å¯ä»¥ä½¿ç”¨ buildx æ„å»ºä¸€ä¸ªæ”¯æŒ armã€arm64 å’Œ amd64 å¤šæ¶æ„çš„ Docker é•œåƒäº†ï¼ŒåŒæ—¶å°†å…¶æ¨é€åˆ° <strong>Docker Hub</strong>ï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code>â†’ docker buildx build <span class="token punctuation">-</span>t cubxxw/hello<span class="token punctuation">-</span>arch <span class="token punctuation">-</span><span class="token punctuation">-</span>platform=linux/arm<span class="token punctuation">,</span>linux/arm64<span class="token punctuation">,</span>linux/amd64 . <span class="token punctuation">-</span><span class="token punctuation">-</span>push
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote>
<p>éœ€è¦æå‰é€šè¿‡ docker login å‘½ä»¤ç™»å½•è®¤è¯ Docker Hubã€‚</p>
</blockquote>
<p>ç°åœ¨å°±å¯ä»¥é€šè¿‡ <code v-pre>docker pull mirailabs/hello-arch</code> æ‹‰å–åˆšåˆšåˆ›å»ºçš„é•œåƒäº†ï¼ŒDocker å°†ä¼šæ ¹æ®ä½ çš„ CPU æ¶æ„æ‹‰å–åŒ¹é…çš„é•œåƒã€‚</p>
<p>èƒŒåçš„åŸç†ä¹Ÿå¾ˆç®€å•ï¼Œä¹‹å‰å·²ç»æåˆ°è¿‡äº†ï¼Œbuildx ä¼šé€šè¿‡ <code v-pre>QEMU</code> å’Œ <code v-pre>binfmt_misc</code> åˆ†åˆ«ä¸º 3 ä¸ªä¸åŒçš„ CPU æ¶æ„ï¼ˆarmï¼Œarm64 å’Œ amd64ï¼‰æ„å»º 3 ä¸ªä¸åŒçš„é•œåƒã€‚æ„å»ºå®Œæˆåï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ª <strong>manifest</strong> ï¼Œå…¶ä¸­åŒ…å«äº†æŒ‡å‘è¿™ 3 ä¸ªé•œåƒçš„æŒ‡é’ˆã€‚</p>
<p>ç°åœ¨å°±å¯ä»¥é€šè¿‡ <code v-pre>docker pull mirailabs/hello-arch</code> æ‹‰å–åˆšåˆšåˆ›å»ºçš„é•œåƒäº†ï¼ŒDocker å°†ä¼šæ ¹æ®ä½ çš„ CPU æ¶æ„æ‹‰å–åŒ¹é…çš„é•œåƒã€‚</p>
<p>èƒŒåçš„åŸç†ä¹Ÿå¾ˆç®€å•ï¼Œä¹‹å‰å·²ç»æåˆ°è¿‡äº†ï¼Œbuildx ä¼šé€šè¿‡ <code v-pre>QEMU</code> å’Œ <code v-pre>binfmt_misc</code> åˆ†åˆ«ä¸º 3 ä¸ªä¸åŒçš„ CPU æ¶æ„ï¼ˆarmï¼Œarm64 å’Œ amd64ï¼‰æ„å»º 3 ä¸ªä¸åŒçš„é•œåƒã€‚æ„å»ºå®Œæˆåï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ª <strong>manifest list</strong>ï¼Œå…¶ä¸­åŒ…å«äº†æŒ‡å‘è¿™ 3 ä¸ªé•œåƒçš„æŒ‡é’ˆã€‚</p>
<p><strong>ä¿å­˜åœ¨æœ¬åœ°ï¼š</strong></p>
<p>å¦‚æœæƒ³å°†æ„å»ºå¥½çš„é•œåƒä¿å­˜åœ¨æœ¬åœ°ï¼Œå¯ä»¥å°† <code v-pre>type</code> æŒ‡å®šä¸º <code v-pre>docker</code>ï¼Œä½†å¿…é¡»åˆ†åˆ«ä¸ºä¸åŒçš„ CPU æ¶æ„æ„å»ºä¸åŒçš„é•œåƒï¼Œä¸èƒ½åˆå¹¶æˆä¸€ä¸ªé•œåƒï¼Œå³ï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code>â†’ docker buildx build <span class="token punctuation">-</span>t cubxxw/hello<span class="token punctuation">-</span>arch <span class="token punctuation">-</span><span class="token punctuation">-</span>platform=linux/arm <span class="token punctuation">-</span>o type=docker .
â†’ docker buildx build <span class="token punctuation">-</span>t cubxxw/hello<span class="token punctuation">-</span>arch <span class="token punctuation">-</span><span class="token punctuation">-</span>platform=linux/arm64 <span class="token punctuation">-</span>o type=docker .
â†’ docker buildx build <span class="token punctuation">-</span>t cubxxw/hello<span class="token punctuation">-</span>arch <span class="token punctuation">-</span><span class="token punctuation">-</span>platform=linux/amd64 <span class="token punctuation">-</span>o type=docker .
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æµ‹è¯•å¤šå¹³å°é•œåƒ" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•å¤šå¹³å°é•œåƒ" aria-hidden="true">#</a> <strong>æµ‹è¯•å¤šå¹³å°é•œåƒ</strong></h3>
<p>ç”±äºä¹‹å‰å·²ç»å¯ç”¨äº† <code v-pre>binfmt_misc</code>ï¼Œç°åœ¨æˆ‘ä»¬å°±å¯ä»¥è¿è¡Œä»»ä½• CPU æ¶æ„çš„ Docker é•œåƒäº†ï¼Œå› æ­¤å¯ä»¥åœ¨æœ¬åœ°ç³»ç»Ÿä¸Šæµ‹è¯•ä¹‹å‰ç”Ÿæˆçš„ 3 ä¸ªé•œåƒæ˜¯å¦æœ‰é—®é¢˜ã€‚</p>
<p>é¦–å…ˆåˆ—å‡ºæ¯ä¸ªé•œåƒçš„ <code v-pre>digests</code>ï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token punctuation">?</span> â†’ docker buildx imagetools inspect cubxxw/hello<span class="token punctuation">-</span>arch

<span class="token key atrule">Name</span><span class="token punctuation">:</span>      docker.io/cubxxw/hello<span class="token punctuation">-</span>arch<span class="token punctuation">:</span>latest
<span class="token key atrule">MediaType</span><span class="token punctuation">:</span> application/vnd.docker.distribution.manifest.list.v2+json
<span class="token key atrule">Digest</span><span class="token punctuation">:</span>    sha256<span class="token punctuation">:</span>ec55f5ece9a12db0c6c367acda8fd1214f50ee502902f97b72f7bff268ebc35a

<span class="token key atrule">Manifests</span><span class="token punctuation">:</span>
  <span class="token key atrule">Name</span><span class="token punctuation">:</span>      docker.io/cubxxw/hello<span class="token punctuation">-</span>arch<span class="token punctuation">:</span>latest@sha256<span class="token punctuation">:</span>38e083870044cfde7f23a2eec91e307ec645282e76fd0356a29b32122b11c639
  <span class="token key atrule">MediaType</span><span class="token punctuation">:</span> application/vnd.docker.distribution.manifest.v2+json
  <span class="token key atrule">Platform</span><span class="token punctuation">:</span>  linux/arm/v7

  <span class="token key atrule">Name</span><span class="token punctuation">:</span>      docker.io/cubxxw/hello<span class="token punctuation">-</span>arch<span class="token punctuation">:</span>latest@sha256<span class="token punctuation">:</span>de273a2a3ce92a5dc1e6f2d796bb85a81fe1a61f82c4caaf08efed9cf05af66d
  <span class="token key atrule">MediaType</span><span class="token punctuation">:</span> application/vnd.docker.distribution.manifest.v2+json
  <span class="token key atrule">Platform</span><span class="token punctuation">:</span>  linux/arm64

  <span class="token key atrule">Name</span><span class="token punctuation">:</span>      docker.io/cubxxw/hello<span class="token punctuation">-</span>arch<span class="token punctuation">:</span>latest@sha256<span class="token punctuation">:</span>8b735708d7d30e9cd6eb993449b1047b7229e53fbcebe940217cb36194e9e3a2
  <span class="token key atrule">MediaType</span><span class="token punctuation">:</span> application/vnd.docker.distribution.manifest.v2+json
  <span class="token key atrule">Platform</span><span class="token punctuation">:</span>  linux/amd64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œæ¯ä¸€ä¸ªé•œåƒå¹¶è§‚å¯Ÿè¾“å‡ºç»“æœï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code><span class="token punctuation">?</span> â†’ docker run <span class="token punctuation">-</span><span class="token punctuation">-</span>rm docker.io/cubxxw/hello<span class="token punctuation">-</span>arch<span class="token punctuation">:</span>latest@sha256<span class="token punctuation">:</span>38e083870044cfde7f23a2eec91e307ec645282e76fd0356a29b32122b11c639
Hello<span class="token punctuation">,</span> arm<span class="token tag">!</span>

<span class="token punctuation">?</span> â†’ docker run <span class="token punctuation">-</span><span class="token punctuation">-</span>rm docker.io/cubxxw/hello<span class="token punctuation">-</span>arch<span class="token punctuation">:</span>latest@sha256<span class="token punctuation">:</span>de273a2a3ce92a5dc1e6f2d796bb85a81fe1a61f82c4caaf08efed9cf05af66d
Hello<span class="token punctuation">,</span> arm64<span class="token tag">!</span>

<span class="token punctuation">?</span> â†’ docker run <span class="token punctuation">-</span><span class="token punctuation">-</span>rm docker.io/cubxxw/hello<span class="token punctuation">-</span>arch<span class="token punctuation">:</span>latest@sha256<span class="token punctuation">:</span>8b735708d7d30e9cd6eb993449b1047b7229e53fbcebe940217cb36194e9e3a2
Hello<span class="token punctuation">,</span> amd64<span class="token tag">!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="buildx-çš„è·¨å¹³å°æ„å»ºç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#buildx-çš„è·¨å¹³å°æ„å»ºç­–ç•¥" aria-hidden="true">#</a> <strong><a href="https://waynerv.com/posts/building-multi-architecture-images-with-docker-buildx/#contents:buildx-%E7%9A%84%E8%B7%A8%E5%B9%B3%E5%8F%B0%E6%9E%84%E5%BB%BA%E7%AD%96%E7%95%A5" target="_blank" rel="noopener noreferrer">buildx çš„è·¨å¹³å°æ„å»ºç­–ç•¥<ExternalLinkIcon/></a></strong></h2>
<p>æ ¹æ®æ„å»ºèŠ‚ç‚¹å’Œç›®æ ‡ç¨‹åºè¯­è¨€ä¸åŒï¼Œ<code v-pre>buildx</code> æ”¯æŒä»¥ä¸‹ä¸‰ç§è·¨å¹³å°æ„å»ºç­–ç•¥ï¼š</p>
<ol>
<li>é€šè¿‡ QEMU çš„ç”¨æˆ·æ€æ¨¡å¼åˆ›å»ºè½»é‡çº§çš„è™šæ‹Ÿæœºï¼Œåœ¨è™šæ‹Ÿæœºç³»ç»Ÿä¸­æ„å»ºé•œåƒã€‚</li>
<li>åœ¨ä¸€ä¸ª builder å®ä¾‹ä¸­åŠ å…¥å¤šä¸ªä¸åŒç›®æ ‡å¹³å°çš„èŠ‚ç‚¹ï¼Œé€šè¿‡åŸç”ŸèŠ‚ç‚¹æ„å»ºå¯¹åº”å¹³å°é•œåƒã€‚</li>
<li>åˆ†é˜¶æ®µæ„å»ºå¹¶ä¸”äº¤å‰ç¼–è¯‘åˆ°ä¸åŒçš„ç›®æ ‡æ¶æ„ã€‚</li>
</ol>
<p>QEMU é€šå¸¸ç”¨äºæ¨¡æ‹Ÿå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œå®ƒè¿˜å¯ä»¥é€šè¿‡ç”¨æˆ·æ€æ¨¡å¼è¿è¡Œï¼šä»¥ <code v-pre>binfmt_misc</code> åœ¨å®¿ä¸»æœºç³»ç»Ÿä¸­æ³¨å†Œä¸€ä¸ªäºŒè¿›åˆ¶è½¬æ¢å¤„ç†ç¨‹åºï¼Œå¹¶åœ¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€ç¿»è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ ¹æ®éœ€è¦å°†ç³»ç»Ÿè°ƒç”¨ä»ç›®æ ‡ CPU æ¶æ„è½¬æ¢ä¸ºå½“å‰ç³»ç»Ÿçš„ CPU æ¶æ„ã€‚æœ€ç»ˆçš„æ•ˆæœå°±åƒåœ¨ä¸€ä¸ªè™šæ‹Ÿæœºä¸­è¿è¡Œç›®æ ‡ CPU æ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚Docker Desktop å†…ç½®äº† QEMU æ”¯æŒï¼Œå…¶ä»–æ»¡è¶³è¿è¡Œè¦æ±‚çš„å¹³å°å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼å®‰è£…ï¼š</p>
<div class="language-yaml ext-yml line-numbers-mode"><pre v-pre class="language-yaml"><code>docker run <span class="token punctuation">-</span><span class="token punctuation">-</span>privileged <span class="token punctuation">-</span><span class="token punctuation">-</span>rm tonistiigi/binfmt <span class="token punctuation">-</span><span class="token punctuation">-</span>install all
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="openim-è·¨å¹³å°ç¼–è¯‘å®æˆ˜" tabindex="-1"><a class="header-anchor" href="#openim-è·¨å¹³å°ç¼–è¯‘å®æˆ˜" aria-hidden="true">#</a> OpenIM è·¨å¹³å°ç¼–è¯‘å®æˆ˜</h2>
<p>æˆ‘ä»¬éœ€è¦åˆ¶ä½œ OpenIM ç¦»çº¿éƒ¨ç½²çš„æ–¹æ¡ˆï¼Œé¦–å…ˆæ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦ç†Ÿæ‚‰ OpenIM éƒ¨ç½²éœ€è¦å“ªäº›ç»„ä»¶ï¼ŒæŸ¥çœ‹</p>
<table>
<thead>
<tr>
<th>Service Name</th>
<th>Image</th>
<th>Supported Architectures</th>
<th>Ports</th>
</tr>
</thead>
<tbody>
<tr>
<td>mysql</td>
<td>mysql:5.7</td>
<td>amd64, arm64v8, arm32v7</td>
<td>13306:3306, 23306:33060</td>
</tr>
<tr>
<td>mongodb</td>
<td>mongo:4.0</td>
<td>amd64, arm64v8, arm32v7</td>
<td>37017:27017</td>
</tr>
<tr>
<td>redis</td>
<td>redis</td>
<td>amd64, arm64v8, arm32v7</td>
<td>16379:6379</td>
</tr>
<tr>
<td>zookeeper</td>
<td>wurstmeister/zookeeper</td>
<td>amd64</td>
<td>2181:2181</td>
</tr>
<tr>
<td>kafka</td>
<td>wurstmeister/kafka</td>
<td>amd64, arm</td>
<td>9092:9092</td>
</tr>
<tr>
<td>etcd</td>
<td>http://quay.io/coreos/etcd</td>
<td>amd64, arm64v8</td>
<td>2379:2379, 2380:2380</td>
</tr>
<tr>
<td>minio</td>
<td>minio/minio</td>
<td>amd64, arm64v8, arm32v7</td>
<td>10005:9000, 9090:9090</td>
</tr>
<tr>
<td>open_im_server</td>
<td>openim/open_im_server:v2.3.9</td>
<td>amd64</td>
<td>N/A</td>
</tr>
<tr>
<td>open_im_enterprise</td>
<td>openim/open_im_enterprise:v1.0.3</td>
<td>amd64</td>
<td>N/A</td>
</tr>
<tr>
<td>prometheus</td>
<td>prom/prometheus</td>
<td>amd64, arm64v8, arm32v7</td>
<td>N/A</td>
</tr>
<tr>
<td>grafana</td>
<td>grafana/grafana</td>
<td>amd64, arm64v8, arm32v7</td>
<td>N/A</td>
</tr>
<tr>
<td>node-exporter</td>
<td>http://quay.io/prometheus/node-exporter</td>
<td>amd64, arm64v8, arm32v7</td>
<td>9100:9100</td>
</tr>
</tbody>
</table>
<p>æ³¨æ„çœ‹ï¼Œ zookeeper å’Œ openim å¹¶æ²¡æœ‰æä¾› arm æ¶æ„çš„è®¾è®¡æ–¹æ¡ˆã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå·±å»ç¼–è¯‘ arm æ¶æ„çš„é•œåƒï¼Œè¿™ä¸€å±‚è®¾è®¡æ¯”è¾ƒå¤æ‚ã€‚ä¸ºäº†å½¢æˆæ„å»ºçš„è‡ªåŠ¨åŒ–ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ CICD å’Œ Makefile é›†æˆã€‚</p>
<h2 id="end-é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#end-é“¾æ¥" aria-hidden="true">#</a> END é“¾æ¥</h2>
<ul><li><div><a href = '79.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '81.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>
<ul>
<li>
<p><RouterLink to="/">â“‚ï¸å›åˆ°ç›®å½•ğŸ </RouterLink></p>
</li>
<li>
<p><a href="https://nsddd.top/archives/contributors" target="_blank" rel="noopener noreferrer"><strong>ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–</strong><ExternalLinkIcon/></a>)</p>
</li>
<li>
<p>âœ´ï¸ç‰ˆæƒå£°æ˜ Â© ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª<a href="http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="noopener noreferrer">CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰Â©<ExternalLinkIcon/></a></p>
</li>
</ul>
</div></template>


