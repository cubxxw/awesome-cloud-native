<template><div><ul>
<li><a href="http://nsddd.top" target="_blank" rel="noopener noreferrer">author<ExternalLinkIcon/></a></li>
</ul>
<h1 id="ç¬¬45èŠ‚-openmi-å‘æ¶ˆæ¯çš„æ—¶å€™åšäº†ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#ç¬¬45èŠ‚-openmi-å‘æ¶ˆæ¯çš„æ—¶å€™åšäº†ä»€ä¹ˆ" aria-hidden="true">#</a> ç¬¬45èŠ‚ OpenMI å‘æ¶ˆæ¯çš„æ—¶å€™åšäº†ä»€ä¹ˆ</h1>
<div><a href = '44.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '46.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>
<blockquote>
<p>â¤ï¸ğŸ’•ğŸ’•è®°å½•<a href="https://github.com/3293172751/sealos" target="_blank" rel="noopener noreferrer">sealos<ExternalLinkIcon/></a>å¼€æºé¡¹ç›®çš„å­¦ä¹ è¿‡ç¨‹ã€‚<a href="https://github.com/3293172751/sealos" target="_blank" rel="noopener noreferrer">k8s,dockerå’Œäº‘åŸç”Ÿçš„å­¦ä¹ <ExternalLinkIcon/></a>ã€‚Myblog:<a href="http://nsddd.top/" target="_blank" rel="noopener noreferrer">http://nsddd.top<ExternalLinkIcon/></a></p>
</blockquote>
<hr>
<p>[TOC]</p>
<h2 id="æµç¨‹" tabindex="-1"><a class="header-anchor" href="#æµç¨‹" aria-hidden="true">#</a> æµç¨‹</h2>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Conversation<span class="token punctuation">)</span> <span class="token function">CreateTextMessage</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> text <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>sdk_struct<span class="token punctuation">.</span>MsgStruct<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	s <span class="token operator">:=</span> sdk_struct<span class="token punctuation">.</span>MsgStruct<span class="token punctuation">{</span><span class="token punctuation">}</span>
	err <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">initBasicInfo</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token operator">&amp;</span>s<span class="token punctuation">,</span> constant<span class="token punctuation">.</span>UserMsgType<span class="token punctuation">,</span> constant<span class="token punctuation">.</span>Text<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
	<span class="token punctuation">}</span>
	s<span class="token punctuation">.</span>Content <span class="token operator">=</span> text
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Conversation<span class="token punctuation">)</span> <span class="token function">CreateAdvancedTextMessage</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> text <span class="token builtin">string</span><span class="token punctuation">,</span> messageEntities <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>sdk_struct<span class="token punctuation">.</span>MessageEntity<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>sdk_struct<span class="token punctuation">.</span>MsgStruct<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	s <span class="token operator">:=</span> sdk_struct<span class="token punctuation">.</span>MsgStruct<span class="token punctuation">{</span><span class="token punctuation">}</span>
	err <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">initBasicInfo</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token operator">&amp;</span>s<span class="token punctuation">,</span> constant<span class="token punctuation">.</span>UserMsgType<span class="token punctuation">,</span> constant<span class="token punctuation">.</span>AdvancedText<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> err
	<span class="token punctuation">}</span>
	s<span class="token punctuation">.</span>MessageEntityElem<span class="token punctuation">.</span>Text <span class="token operator">=</span> text
	s<span class="token punctuation">.</span>MessageEntityElem<span class="token punctuation">.</span>MessageEntityList <span class="token operator">=</span> messageEntities
	s<span class="token punctuation">.</span>Content <span class="token operator">=</span> utils<span class="token punctuation">.</span><span class="token function">StructToJsonString</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>MessageEntityElem<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol>
<li><code v-pre>CreateTextMessage(ctx context.Context, text string) (*sdk_struct.MsgStruct, error)</code>ï¼šè¿™ä¸ªæ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ªæ™®é€šæ–‡æœ¬æ¶ˆæ¯ã€‚å®ƒæ¥æ”¶ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡<code v-pre>ctx</code>å’Œä¸€ä¸ªå­—ç¬¦ä¸²<code v-pre>text</code>ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘<code v-pre>sdk_struct.MsgStruct</code>ç±»å‹å¯¹è±¡çš„æŒ‡é’ˆå’Œä¸€ä¸ªé”™è¯¯å¯¹è±¡ã€‚è¯¥æ–¹æ³•é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºçš„<code v-pre>sdk_struct.MsgStruct</code>å¯¹è±¡<code v-pre>s</code>ï¼Œç„¶åè°ƒç”¨<code v-pre>initBasicInfo</code>æ–¹æ³•æ¥åˆå§‹åŒ–æ¶ˆæ¯çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¶ˆæ¯ç±»å‹å’Œå†…å®¹ç±»å‹ã€‚æœ€åï¼Œå°†æ–‡æœ¬æ¶ˆæ¯å†…å®¹<code v-pre>text</code>èµ‹å€¼ç»™<code v-pre>s.Content</code>å­—æ®µï¼Œå¹¶è¿”å›<code v-pre>s</code>æŒ‡é’ˆå’Œnilã€‚</li>
<li><code v-pre>CreateAdvancedTextMessage(ctx context.Context, text string, messageEntities []*sdk_struct.MessageEntity) (*sdk_struct.MsgStruct, error)</code>ï¼šè¿™ä¸ªæ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ªé«˜çº§æ–‡æœ¬æ¶ˆæ¯ï¼Œæ”¯æŒè‡ªå®šä¹‰æ¶ˆæ¯å®ä½“ã€‚å®ƒæ¥æ”¶ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡<code v-pre>ctx</code>ã€ä¸€ä¸ªå­—ç¬¦ä¸²<code v-pre>text</code>å’Œä¸€ä¸ª<code v-pre>sdk_struct.MessageEntity</code>ç±»å‹çš„åˆ‡ç‰‡<code v-pre>messageEntities</code>ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘<code v-pre>sdk_struct.MsgStruct</code>ç±»å‹å¯¹è±¡çš„æŒ‡é’ˆå’Œä¸€ä¸ªé”™è¯¯å¯¹è±¡ã€‚è¯¥æ–¹æ³•é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºçš„<code v-pre>sdk_struct.MsgStruct</code>å¯¹è±¡<code v-pre>s</code>ï¼Œç„¶åè°ƒç”¨<code v-pre>initBasicInfo</code>æ–¹æ³•æ¥åˆå§‹åŒ–æ¶ˆæ¯çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¶ˆæ¯ç±»å‹å’Œå†…å®¹ç±»å‹ã€‚æ¥ä¸‹æ¥ï¼Œå°†æ–‡æœ¬æ¶ˆæ¯å†…å®¹<code v-pre>text</code>èµ‹å€¼ç»™<code v-pre>s.MessageEntityElem.Text</code>å­—æ®µï¼Œå¹¶å°†<code v-pre>sdk_struct.MessageEntity</code>ç±»å‹çš„åˆ‡ç‰‡<code v-pre>messageEntities</code>èµ‹å€¼ç»™<code v-pre>s.MessageEntityElem.MessageEntityList</code>å­—æ®µã€‚æœ€åï¼Œå°†<code v-pre>s.MessageEntityElem</code>ç»“æ„ä½“åºåˆ—åŒ–æˆ<code v-pre>JSON</code>æ ¼å¼çš„å­—ç¬¦ä¸²å¹¶èµ‹å€¼ç»™<code v-pre>s.Content</code>å­—æ®µï¼Œå¹¶è¿”å›<code v-pre>s</code>æŒ‡é’ˆå’Œ<code v-pre>nil</code>ã€‚</li>
</ol>
<h3 id="ç»“æ„ä½“å­—æ®µ" tabindex="-1"><a class="header-anchor" href="#ç»“æ„ä½“å­—æ®µ" aria-hidden="true">#</a> ç»“æ„ä½“å­—æ®µ</h3>
<p>è¿™æ˜¯ä¸€ä¸ªå¾ˆé‡å¹¶ä¸”å¾ˆå¤§çš„ä¸€ä¸ªæ¶ˆæ¯ç»“æ„ä½“ï¼ŒMsgStruct ç»“æ„ä½“æ˜¯æˆ‘ä»¬ç»™å®¢æˆ·ç«¯ç”¨åˆ°çš„ç»“æ„ä½“ã€‚</p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">type</span> MsgStruct <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	ClientMsgID          <span class="token builtin">string</span>                <span class="token string">`json:"clientMsgID,omitempty"`</span>
	ServerMsgID          <span class="token builtin">string</span>                <span class="token string">`json:"serverMsgID,omitempty"`</span>
	CreateTime           <span class="token builtin">int64</span>                 <span class="token string">`json:"createTime"`</span>
	SendTime             <span class="token builtin">int64</span>                 <span class="token string">`json:"sendTime"`</span>
	SessionType          <span class="token builtin">int32</span>                 <span class="token string">`json:"sessionType"`</span>
	SendID               <span class="token builtin">string</span>                <span class="token string">`json:"sendID,omitempty"`</span>
	RecvID               <span class="token builtin">string</span>                <span class="token string">`json:"recvID,omitempty"`</span>
	MsgFrom              <span class="token builtin">int32</span>                 <span class="token string">`json:"msgFrom"`</span>
	ContentType          <span class="token builtin">int32</span>                 <span class="token string">`json:"contentType"`</span>
	SenderPlatformID     <span class="token builtin">int32</span>                 <span class="token string">`json:"platformID"`</span>
	SenderNickname       <span class="token builtin">string</span>                <span class="token string">`json:"senderNickname,omitempty"`</span>
	SenderFaceURL        <span class="token builtin">string</span>                <span class="token string">`json:"senderFaceUrl,omitempty"`</span>
	GroupID              <span class="token builtin">string</span>                <span class="token string">`json:"groupID,omitempty"`</span>
	Content              <span class="token builtin">string</span>                <span class="token string">`json:"content,omitempty"`</span>
	Seq                  <span class="token builtin">int64</span>                 <span class="token string">`json:"seq"`</span>
	IsRead               <span class="token builtin">bool</span>                  <span class="token string">`json:"isRead"`</span>
	Status               <span class="token builtin">int32</span>                 <span class="token string">`json:"status"`</span>
	IsReact              <span class="token builtin">bool</span>                  <span class="token string">`json:"isReact,omitempty"`</span>
	IsExternalExtensions <span class="token builtin">bool</span>                  <span class="token string">`json:"isExternalExtensions,omitempty"`</span>
	OfflinePush          sdkws<span class="token punctuation">.</span>OfflinePushInfo <span class="token string">`json:"offlinePush,omitempty"`</span>
	AttachedInfo         <span class="token builtin">string</span>                <span class="token string">`json:"attachedInfo,omitempty"`</span>
	Ex                   <span class="token builtin">string</span>                <span class="token string">`json:"ex,omitempty"`</span>
	PictureElem          <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		SourcePath      <span class="token builtin">string</span>          <span class="token string">`json:"sourcePath,omitempty"`</span>
		SourcePicture   PictureBaseInfo <span class="token string">`json:"sourcePicture,omitempty"`</span>
		BigPicture      PictureBaseInfo <span class="token string">`json:"bigPicture,omitempty"`</span>
		SnapshotPicture PictureBaseInfo <span class="token string">`json:"snapshotPicture,omitempty"`</span>
	<span class="token punctuation">}</span> <span class="token string">`json:"pictureElem,omitempty"`</span>
	SoundElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		UUID      <span class="token builtin">string</span> <span class="token string">`json:"uuid,omitempty"`</span>
		SoundPath <span class="token builtin">string</span> <span class="token string">`json:"soundPath,omitempty"`</span>
		SourceURL <span class="token builtin">string</span> <span class="token string">`json:"sourceUrl,omitempty"`</span>
		DataSize  <span class="token builtin">int64</span>  <span class="token string">`json:"dataSize"`</span>
		Duration  <span class="token builtin">int64</span>  <span class="token string">`json:"duration"`</span>
		SoundType <span class="token builtin">string</span> <span class="token string">`json:"soundType,omitempty"`</span>
	<span class="token punctuation">}</span> <span class="token string">`json:"soundElem,omitempty"`</span>
	VideoElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		VideoPath      <span class="token builtin">string</span> <span class="token string">`json:"videoPath,omitempty"`</span>
		VideoUUID      <span class="token builtin">string</span> <span class="token string">`json:"videoUUID,omitempty"`</span>
		VideoURL       <span class="token builtin">string</span> <span class="token string">`json:"videoUrl,omitempty"`</span>
		VideoType      <span class="token builtin">string</span> <span class="token string">`json:"videoType,omitempty"`</span>
		VideoSize      <span class="token builtin">int64</span>  <span class="token string">`json:"videoSize"`</span>
		Duration       <span class="token builtin">int64</span>  <span class="token string">`json:"duration"`</span>
		SnapshotPath   <span class="token builtin">string</span> <span class="token string">`json:"snapshotPath,omitempty"`</span>
		SnapshotUUID   <span class="token builtin">string</span> <span class="token string">`json:"snapshotUUID,omitempty"`</span>
		SnapshotSize   <span class="token builtin">int64</span>  <span class="token string">`json:"snapshotSize"`</span>
		SnapshotURL    <span class="token builtin">string</span> <span class="token string">`json:"snapshotUrl,omitempty"`</span>
		SnapshotWidth  <span class="token builtin">int32</span>  <span class="token string">`json:"snapshotWidth"`</span>
		SnapshotHeight <span class="token builtin">int32</span>  <span class="token string">`json:"snapshotHeight"`</span>
		SnapshotType   <span class="token builtin">string</span> <span class="token string">`json:"snapshotType,omitempty"`</span>
	<span class="token punctuation">}</span> <span class="token string">`json:"videoElem,omitempty"`</span>
	FileElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		FilePath  <span class="token builtin">string</span> <span class="token string">`json:"filePath,omitempty"`</span>
		UUID      <span class="token builtin">string</span> <span class="token string">`json:"uuid,omitempty"`</span>
		SourceURL <span class="token builtin">string</span> <span class="token string">`json:"sourceUrl,omitempty"`</span>
		FileName  <span class="token builtin">string</span> <span class="token string">`json:"fileName,omitempty"`</span>
		FileSize  <span class="token builtin">int64</span>  <span class="token string">`json:"fileSize"`</span>
		FileType  <span class="token builtin">string</span> <span class="token string">`json:"fileType,omitempty"`</span>
	<span class="token punctuation">}</span> <span class="token string">`json:"fileElem,omitempty"`</span>
	MergeElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		Title             <span class="token builtin">string</span>           <span class="token string">`json:"title,omitempty"`</span>
		AbstractList      <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>         <span class="token string">`json:"abstractList,omitempty"`</span>
		MultiMessage      <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>MsgStruct     <span class="token string">`json:"multiMessage,omitempty"`</span>
		MessageEntityList <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>MessageEntity <span class="token string">`json:"messageEntityList,omitempty"`</span>
	<span class="token punctuation">}</span> <span class="token string">`json:"mergeElem,omitempty"`</span>
	AtElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		Text         <span class="token builtin">string</span>     <span class="token string">`json:"text,omitempty"`</span>
		AtUserList   <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>   <span class="token string">`json:"atUserList,omitempty"`</span>
		AtUsersInfo  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>AtInfo  <span class="token string">`json:"atUsersInfo,omitempty"`</span>
		QuoteMessage <span class="token operator">*</span>MsgStruct <span class="token string">`json:"quoteMessage,omitempty"`</span>
		IsAtSelf     <span class="token builtin">bool</span>       <span class="token string">`json:"isAtSelf"`</span>
	<span class="token punctuation">}</span> <span class="token string">`json:"atElem,omitempty"`</span>
	FaceElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		Index <span class="token builtin">int</span>    <span class="token string">`json:"index"`</span>
		Data  <span class="token builtin">string</span> <span class="token string">`json:"data,omitempty"`</span>
	<span class="token punctuation">}</span> <span class="token string">`json:"faceElem,omitempty"`</span>
	LocationElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		Description <span class="token builtin">string</span>  <span class="token string">`json:"description,omitempty"`</span>
		Longitude   <span class="token builtin">float64</span> <span class="token string">`json:"longitude"`</span>
		Latitude    <span class="token builtin">float64</span> <span class="token string">`json:"latitude"`</span>
	<span class="token punctuation">}</span> <span class="token string">`json:"locationElem,omitempty"`</span>
	CustomElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		Data        <span class="token builtin">string</span> <span class="token string">`json:"data,omitempty"`</span>
		Description <span class="token builtin">string</span> <span class="token string">`json:"description,omitempty"`</span>
		Extension   <span class="token builtin">string</span> <span class="token string">`json:"extension,omitempty"`</span>
	<span class="token punctuation">}</span> <span class="token string">`json:"customElem,omitempty"`</span>
	QuoteElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		Text              <span class="token builtin">string</span>           <span class="token string">`json:"text,omitempty"`</span>
		QuoteMessage      <span class="token operator">*</span>MsgStruct       <span class="token string">`json:"quoteMessage,omitempty"`</span>
		MessageEntityList <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>MessageEntity <span class="token string">`json:"messageEntityList,omitempty"`</span>
	<span class="token punctuation">}</span> <span class="token string">`json:"quoteElem,omitempty"`</span>
	NotificationElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		Detail      <span class="token builtin">string</span> <span class="token string">`json:"detail,omitempty"`</span>
		DefaultTips <span class="token builtin">string</span> <span class="token string">`json:"defaultTips,omitempty"`</span>
	<span class="token punctuation">}</span> <span class="token string">`json:"notificationElem,omitempty"`</span>
	MessageEntityElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		Text              <span class="token builtin">string</span>           <span class="token string">`json:"text,omitempty"`</span>
		MessageEntityList <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>MessageEntity <span class="token string">`json:"messageEntityList,omitempty"`</span>
	<span class="token punctuation">}</span> <span class="token string">`json:"messageEntityElem,omitempty"`</span>
	AttachedInfoElem AttachedInfoElem <span class="token string">`json:"attachedInfoElem,omitempty"`</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯ä¸€ä¸ªåä¸º <code v-pre>MsgStruct</code> çš„ç»“æ„ä½“ï¼ŒåŒ…å«äº†ä¸€ä¸ªå³æ—¶é€šè®¯æ¶ˆæ¯çš„å„ç§å…ƒç´ ã€‚ä¸‹é¢æ˜¯æ¯ä¸ªå­—æ®µçš„è§£é‡Šï¼š</p>
<ul>
<li><code v-pre>ClientMsgID</code>ï¼šå®¢æˆ·ç«¯ç”Ÿæˆçš„æ¶ˆæ¯ IDã€‚</li>
<li><code v-pre>ServerMsgID</code>ï¼šæœåŠ¡å™¨ç”Ÿæˆçš„æ¶ˆæ¯ IDã€‚</li>
<li><code v-pre>CreateTime</code>ï¼šæ¶ˆæ¯åˆ›å»ºæ—¶é—´ï¼ŒUnix æ—¶é—´æˆ³ã€‚</li>
<li><code v-pre>SendTime</code>ï¼šæ¶ˆæ¯å‘é€æ—¶é—´ï¼ŒUnix æ—¶é—´æˆ³ã€‚</li>
<li><code v-pre>SessionType</code>ï¼šä¼šè¯ç±»å‹ï¼Œå¦‚å•èŠã€ç¾¤èŠç­‰ã€‚</li>
<li><code v-pre>SendID</code>ï¼šæ¶ˆæ¯å‘é€è€…çš„ IDã€‚</li>
<li><code v-pre>RecvID</code>ï¼šæ¶ˆæ¯æ¥æ”¶è€…çš„ IDã€‚</li>
<li><code v-pre>MsgFrom</code>ï¼šæ¶ˆæ¯æ¥æºï¼Œå¦‚å‘é€æ–¹æˆ–æ¥æ”¶æ–¹ã€‚</li>
<li><code v-pre>ContentType</code>ï¼šæ¶ˆæ¯å†…å®¹ç±»å‹ï¼Œå¦‚æ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘ç­‰ã€‚</li>
<li><code v-pre>SenderPlatformID</code>ï¼šå‘é€è€…ä½¿ç”¨çš„å¹³å° IDã€‚</li>
<li><code v-pre>SenderNickname</code>ï¼šå‘é€è€…çš„æ˜µç§°ã€‚</li>
<li><code v-pre>SenderFaceURL</code>ï¼šå‘é€è€…çš„å¤´åƒ URLã€‚</li>
<li><code v-pre>GroupID</code>ï¼šå¦‚æœæ˜¯ç¾¤èŠæ¶ˆæ¯ï¼Œç¾¤èŠ IDã€‚</li>
<li><code v-pre>Content</code>ï¼šæ¶ˆæ¯å†…å®¹ã€‚</li>
<li><code v-pre>Seq</code>ï¼šæ¶ˆæ¯åºåˆ—å·ã€‚</li>
<li><code v-pre>IsRead</code>ï¼šæ¶ˆæ¯æ˜¯å¦å·²è¯»ã€‚</li>
<li><code v-pre>Status</code>ï¼šæ¶ˆæ¯çŠ¶æ€ï¼Œå¦‚å‘é€ä¸­ã€å‘é€æˆåŠŸã€å‘é€å¤±è´¥ç­‰ã€‚</li>
<li><code v-pre>IsReact</code>ï¼šæ˜¯å¦éœ€è¦åé¦ˆã€‚</li>
<li><code v-pre>IsExternalExtensions</code>ï¼šæ˜¯å¦åŒ…å«æ‰©å±•ä¿¡æ¯ã€‚</li>
<li><code v-pre>OfflinePush</code>ï¼šç¦»çº¿æ¨é€ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ ‡é¢˜ã€å†…å®¹ã€å£°éŸ³ç­‰ã€‚</li>
<li><code v-pre>AttachedInfo</code>ï¼šé™„åŠ ä¿¡æ¯ã€‚</li>
<li><code v-pre>Ex</code>ï¼šé¢„ç•™å­—æ®µã€‚</li>
<li><code v-pre>PictureElem</code>ï¼šå›¾ç‰‡æ¶ˆæ¯å…ƒç´ ï¼ŒåŒ…æ‹¬åŸå›¾ã€å¤§å›¾ã€å¿«ç…§ç­‰ã€‚</li>
<li><code v-pre>SoundElem</code>ï¼šéŸ³é¢‘æ¶ˆæ¯å…ƒç´ ï¼ŒåŒ…æ‹¬ UUIDã€è·¯å¾„ã€å¤§å°ã€æ—¶é•¿ç­‰ã€‚</li>
<li><code v-pre>VideoElem</code>ï¼šè§†é¢‘æ¶ˆæ¯å…ƒç´ ï¼ŒåŒ…æ‹¬è·¯å¾„ã€UUIDã€å¤§å°ã€æ—¶é•¿ã€å¿«ç…§ç­‰ã€‚</li>
<li><code v-pre>FileElem</code>ï¼šæ–‡ä»¶æ¶ˆæ¯å…ƒç´ ï¼ŒåŒ…æ‹¬è·¯å¾„ã€UUIDã€å¤§å°ã€åç§°ã€ç±»å‹ç­‰ã€‚</li>
<li><code v-pre>MergeElem</code>ï¼šåˆå¹¶æ¶ˆæ¯å…ƒç´ ï¼ŒåŒ…æ‹¬æ ‡é¢˜ã€æ‘˜è¦ã€å¤šæ¡æ¶ˆæ¯ã€æ¶ˆæ¯å®ä½“ç­‰ã€‚</li>
<li><code v-pre>AtElem</code>ï¼š@ æ¶ˆæ¯å…ƒç´ ï¼ŒåŒ…æ‹¬æ–‡æœ¬ã€@ ç”¨æˆ·åˆ—è¡¨ã€@ ç”¨æˆ·ä¿¡æ¯ã€å¼•ç”¨æ¶ˆæ¯ã€æ˜¯å¦ @ è‡ªå·±ç­‰ã€‚</li>
<li><code v-pre>FaceElem</code>ï¼šè¡¨æƒ…æ¶ˆæ¯å…ƒç´ ï¼ŒåŒ…æ‹¬è¡¨æƒ…ç´¢å¼•ã€æ•°æ®ç­‰ã€‚</li>
<li><code v-pre>LocationElem</code>ï¼šä½ç½®æ¶ˆæ¯å…ƒç´ ï¼ŒåŒ…æ‹¬æè¿°ã€ç»åº¦ã€çº¬åº¦ç­‰ã€‚</li>
<li><code v-pre>CustomElem</code>ï¼šè‡ªå®šä¹‰æ¶ˆæ¯å…ƒç´ ï¼ŒåŒ…æ‹¬æ•°æ®ã€æè¿°ã€æ‰©å±•ç­‰ã€‚</li>
<li><code v-pre>QuoteElem</code>ï¼šå¼•ç”¨æ¶ˆæ¯å…ƒç´ ï¼ŒåŒ…æ‹¬æ–‡æœ¬ã€å¼•ç”¨çš„æ¶ˆæ¯ã€æ¶ˆæ¯å®ä½“ç­‰ã€‚</li>
<li><code v-pre>NotificationElem</code>ï¼šé€šçŸ¥æ¶ˆæ¯å…ƒç´ ï¼ŒåŒ…æ‹¬è¯¦æƒ…ã€é»˜è®¤æç¤ºç­‰ã€‚</li>
<li><code v-pre>MessageEntityElem</code>ï¼šæ¶ˆæ¯å®ä½“å…ƒç´ ï¼ŒåŒ…æ‹¬æ–‡æœ¬ã€æ¶ˆæ¯å®ä½“åˆ—è¡¨ç­‰ã€‚</li>
<li><code v-pre>AttachedInfoElem</code>ï¼šé™„åŠ ä¿¡æ¯å…ƒç´ ï¼ŒåŒ…æ‹¬ç±»å‹ã€æ•°æ®ç­‰ã€‚</li>
</ul>
<h3 id="å‘é€æ¶ˆæ¯éœ€è¦çš„ç»“æ„ä½“å­—æ®µ" tabindex="-1"><a class="header-anchor" href="#å‘é€æ¶ˆæ¯éœ€è¦çš„ç»“æ„ä½“å­—æ®µ" aria-hidden="true">#</a> å‘é€æ¶ˆæ¯éœ€è¦çš„ç»“æ„ä½“å­—æ®µ</h3>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">type</span> TextElem <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Text <span class="token builtin">string</span> <span class="token string">`json:"text,omitempty"`</span>
<span class="token punctuation">}</span>


<span class="token keyword">type</span> MsgStruct <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	ClientMsgID          <span class="token builtin">string</span>                <span class="token string">`json:"clientMsgID,omitempty"`</span>
	CreateTime           <span class="token builtin">int64</span>                 <span class="token string">`json:"createTime"`</span>
	SendTime             <span class="token builtin">int64</span>                 <span class="token string">`json:"sendTime"`</span>
	MsgFrom              <span class="token builtin">int32</span>                 <span class="token string">`json:"msgFrom"`</span>
	ContentType          <span class="token builtin">int32</span>                 <span class="token string">`json:"contentType"`</span>
	SenderPlatformID     <span class="token builtin">int32</span>                 <span class="token string">`json:"platformID"`</span>
	SenderNickname       <span class="token builtin">string</span>                <span class="token string">`json:"senderNickname,omitempty"`</span>
	SenderFaceURL        <span class="token builtin">string</span>                <span class="token string">`json:"senderFaceUrl,omitempty"`</span>
	Status               <span class="token builtin">int32</span>                 <span class="token string">`json:"status"`</span>
	IsReact              <span class="token builtin">bool</span>                  <span class="token string">`json:"isReact,omitempty"`</span>
	IsExternalExtensions <span class="token builtin">bool</span>                  <span class="token string">`json:"isExternalExtensions,omitempty"`</span>
	OfflinePush          sdkws<span class="token punctuation">.</span>OfflinePushInfo <span class="token string">`json:"offlinePush,omitempty"`</span>
	AttachedInfo         <span class="token builtin">string</span>                <span class="token string">`json:"attachedInfo,omitempty"`</span>
	Ex                   <span class="token builtin">string</span>                <span class="token string">`json:"ex,omitempty"`</span>
	TextElem             TextElem              <span class="token string">`json:"textElem,omitempty"`</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»ºç»“æ„ä½“çš„é€»è¾‘éƒ¨åˆ†ï¼š</p>
<div class="language-go ext-go line-numbers-mode"><pre v-pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>Conversation<span class="token punctuation">)</span> <span class="token function">initBasicInfo</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> message <span class="token operator">*</span>sdk_struct<span class="token punctuation">.</span>MsgStruct<span class="token punctuation">,</span> msgFrom<span class="token punctuation">,</span> contentType <span class="token builtin">int32</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	message<span class="token punctuation">.</span>CreateTime <span class="token operator">=</span> utils<span class="token punctuation">.</span><span class="token function">GetCurrentTimestampByMill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	message<span class="token punctuation">.</span>SendTime <span class="token operator">=</span> message<span class="token punctuation">.</span>CreateTime
	message<span class="token punctuation">.</span>IsRead <span class="token operator">=</span> <span class="token boolean">false</span>
	message<span class="token punctuation">.</span>Status <span class="token operator">=</span> constant<span class="token punctuation">.</span>MsgStatusSending
	message<span class="token punctuation">.</span>SendID <span class="token operator">=</span> c<span class="token punctuation">.</span>loginUserID
	userInfo<span class="token punctuation">,</span> err <span class="token operator">:=</span> c<span class="token punctuation">.</span>db<span class="token punctuation">.</span><span class="token function">GetLoginUser</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> c<span class="token punctuation">.</span>loginUserID<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> err
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		message<span class="token punctuation">.</span>SenderFaceURL <span class="token operator">=</span> userInfo<span class="token punctuation">.</span>FaceURL
		message<span class="token punctuation">.</span>SenderNickname <span class="token operator">=</span> userInfo<span class="token punctuation">.</span>Nickname
	<span class="token punctuation">}</span>
	ClientMsgID <span class="token operator">:=</span> utils<span class="token punctuation">.</span><span class="token function">GetMsgID</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>SendID<span class="token punctuation">)</span>
	message<span class="token punctuation">.</span>ClientMsgID <span class="token operator">=</span> ClientMsgID
	message<span class="token punctuation">.</span>MsgFrom <span class="token operator">=</span> msgFrom
	message<span class="token punctuation">.</span>ContentType <span class="token operator">=</span> contentType
	message<span class="token punctuation">.</span>SenderPlatformID <span class="token operator">=</span> c<span class="token punctuation">.</span>platformID
	message<span class="token punctuation">.</span>IsExternalExtensions <span class="token operator">=</span> c<span class="token punctuation">.</span>IsExternalExtensions
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="end-é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#end-é“¾æ¥" aria-hidden="true">#</a> END é“¾æ¥</h2>
<ul><li><div><a href = '44.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '46.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>
<ul>
<li>
<p><RouterLink to="/">â“‚ï¸å›åˆ°ç›®å½•ğŸ </RouterLink></p>
</li>
<li>
<p><a href="https://nsddd.top/archives/contributors" target="_blank" rel="noopener noreferrer"><strong>ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–</strong><ExternalLinkIcon/></a>)</p>
</li>
<li>
<p>âœ´ï¸ç‰ˆæƒå£°æ˜ Â© ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª<a href="http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="noopener noreferrer">CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰Â©<ExternalLinkIcon/></a></p>
</li>
</ul>
</div></template>


