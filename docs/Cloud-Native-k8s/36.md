+ [author](http://nsddd.top)

# ç¬¬ 36 èŠ‚

<div><a href = '35.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '37.md' style='float: right'>  â¬‡ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div>
<br>

> â¤ï¸ğŸ’•ğŸ’•æ–°æ—¶ä»£æ‹¥æŠ±äº‘åŸç”Ÿï¼Œäº‘åŸç”Ÿå…·æœ‰ç¯å¢ƒç»Ÿä¸€ã€æŒ‰éœ€ä»˜è´¹ã€å³å¼€å³ç”¨ã€ç¨³å®šæ€§å¼ºç‰¹ç‚¹ã€‚Myblog:[http://nsddd.top](http://nsddd.top/)

---
[TOC]


## Cgroups ä»‹ç»

Cgroupsï¼ˆç®€ç§°æ§åˆ¶ç»„ï¼‰æ˜¯ Linux å†…æ ¸çš„ä¸€é¡¹åŠŸèƒ½ï¼Œå…è®¸ç®¡ç†å‘˜å°†èµ„æºï¼ˆå¦‚ CPU æ—¶é—´ï¼Œå†…å­˜å’Œç£ç›˜ I/Oï¼‰åˆ†é…ç»™è¿›ç¨‹ç»„ã€‚è¿™å…è®¸ç®¡ç†å‘˜ä¼˜å…ˆå¤„ç†æŸäº›è¿›ç¨‹ï¼Œé™åˆ¶å…¶ä»–è¿›ç¨‹çš„å¯ç”¨èµ„æºï¼Œå¹¶ç›‘è§†æ¯ä¸ªç»„ä¸­è¿›ç¨‹çš„èµ„æºä½¿ç”¨æƒ…å†µã€‚

CgroupsæŒ‰å±‚æ¬¡ç»„ç»‡ï¼Œæ¯ä¸ªç»„éƒ½åˆ†é…äº†ç‰¹å®šçš„èµ„æºã€‚ä¸€ä¸ªç»„å¯ä»¥åŒ…å«å¤šä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹ä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªç»„çš„æˆå‘˜ã€‚è¿™å…è®¸ç®¡ç†å‘˜åˆ›å»ºç»„çš„å±‚æ¬¡ç»“æ„ï¼Œå¹¶ä»¥çµæ´»ï¼Œç»†ç²’åº¦çš„æ–¹å¼ä¸ºæ¯ä¸ªç»„åˆ†é…èµ„æºã€‚

Cgroupsä½¿ç”¨è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿå®ç°ï¼Œæ¯ä¸ªç»„åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ä»¥ç›®å½•çš„å½¢å¼è¡¨ç¤ºã€‚æ¯ä¸ªç»„çš„èµ„æºé™åˆ¶å’Œä½¿ç”¨æƒ…å†µéƒ½ä»¥ç›¸åº”ç›®å½•ä¸­çš„æ–‡ä»¶çš„å½¢å¼æš´éœ²ã€‚è¿™å…è®¸ç”¨æˆ·ç©ºé—´ç¨‹åºé€šè¿‡è¯»å†™è¿™äº›æ–‡ä»¶æŸ¥è¯¢å’Œæ§åˆ¶æ¯ä¸ªç»„çš„èµ„æºåˆ†é…ã€‚

Cgroupsåœ¨åŸºäºLinuxçš„ç³»ç»Ÿä¸­å¸¸ç”¨äºç®¡ç†èµ„æºåˆ†é…ï¼Œå°¤å…¶æ˜¯åœ¨å®¹å™¨çš„æƒ…å†µä¸‹ã€‚å®ƒä»¬ä¹Ÿç”¨äºå…¶ä»–åœºæ™¯ï¼Œå¦‚é™åˆ¶ç‰¹å®šç”¨æˆ·æˆ–åº”ç”¨ç¨‹åºçš„å¯ç”¨èµ„æºï¼Œæˆ–ç”¨äºç›‘è§†å’Œè°ƒè¯•ç›®çš„ã€‚


## sys ç›®å½•

åœ¨ Linux æ“ä½œç³»ç»Ÿä¸­ï¼Œ/sys ç›®å½•æ˜¯ä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæä¾›äº†å†…æ ¸æ•°æ®ç»“æ„çš„è§†å›¾ã€‚å®ƒåŒ…å«æœ‰å…³ç³»ç»Ÿç¡¬ä»¶ã€è®¾å¤‡å’Œè®¾å¤‡é©±åŠ¨ç¨‹åºçš„ä¿¡æ¯ã€‚ 
sys ç›®å½•æ˜¯ sysfs æ–‡ä»¶ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯ä½œä¸ºå°†å†…æ ¸ä¿¡æ¯å¯¼å‡ºåˆ°ç”¨æˆ·ç©ºé—´çš„ä¸€ç§æ–¹å¼å¼•å…¥ Linux å†…æ ¸çš„ã€‚å®ƒå…è®¸ç”¨æˆ·ç©ºé—´ç¨‹åºå‘å†…æ ¸æŸ¥è¯¢æœ‰å…³ç³»ç»Ÿç¡¬ä»¶çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç¡¬ä»¶çš„é…ç½®å’ŒçŠ¶æ€ã€‚ 
/sys ç›®å½•åŒ…å«è®¸å¤šå­ç›®å½•å’Œæ–‡ä»¶ï¼Œå®ƒä»¬æä¾›æœ‰å…³ç³»ç»Ÿå„ä¸ªæ–¹é¢çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œ
+ /sys/class ç›®å½•åŒ…å«æœ‰å…³ç³»ç»Ÿè®¾å¤‡ç±»çš„ä¿¡æ¯ï¼Œ
+ /sys/block ç›®å½•åŒ…å«æœ‰å…³ç³»ç»Ÿå—è®¾å¤‡çš„ä¿¡æ¯ã€‚

> å¯¹äºéœ€è¦æ”¶é›†æœ‰å…³ç³»ç»Ÿç¡¬ä»¶å’Œè®¾å¤‡ä¿¡æ¯çš„ç³»ç»Ÿç®¡ç†å‘˜å’Œå¼€å‘äººå‘˜æ¥è¯´ï¼Œ/sys ç›®å½•æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„èµ„æºã€‚å®ƒä¹Ÿå¯ä»¥è¢«ç”¨æˆ·ç©ºé—´ç¨‹åºç”¨æ¥è®¿é—®å’Œæ§åˆ¶ç³»ç»Ÿç¡¬ä»¶å’Œè®¾å¤‡çš„æŸäº›æ–¹é¢ã€‚


## fs ç›®å½•

Linux æ“ä½œç³»ç»Ÿé»˜è®¤ç›®å½•ç»“æ„ä¸­ä¸å­˜åœ¨â€œ/fsâ€ç›®å½•ã€‚æ‚¨å¯èƒ½å¼•ç”¨çš„æ˜¯/sys ç›®å½•ï¼Œè¯¥ç›®å½•æ˜¯ä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œæä¾›äº†æŸ¥çœ‹å†…æ ¸æ•°æ®ç»“æ„çš„è§†å›¾ã€‚
/sys ç›®å½•æ˜¯ sysfs æ–‡ä»¶ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯åœ¨ Linux å†…æ ¸ä¸­å¼•å…¥çš„ï¼Œç”¨äºå°†å†…æ ¸ä¿¡æ¯å¯¼å‡ºåˆ°ç”¨æˆ·ç©ºé—´ã€‚å®ƒå…è®¸ç”¨æˆ·ç©ºé—´ç¨‹åºæŸ¥è¯¢å†…æ ¸ä»¥è·å¾—æœ‰å…³ç³»ç»Ÿç¡¬ä»¶çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç¡¬ä»¶çš„é…ç½®å’ŒçŠ¶æ€ã€‚
æˆ–è€…ï¼Œæ‚¨å¯èƒ½ä¼šå¼•ç”¨/proc/fs ç›®å½•ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³å½“å‰æŒ‚è½½åœ¨ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ç³»ç»Ÿçš„ä¿¡æ¯ã€‚/proc/fs ç›®å½•åŒ…å«è®¸å¤šæ–‡ä»¶å’Œå­ç›®å½•ï¼Œå®ƒä»¬æä¾›æœ‰å…³æ–‡ä»¶ç³»ç»Ÿçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„ç±»å‹ã€æŒ‚è½½ç‚¹å’Œå…¶ä»–ç›¸å…³è¯¦ç»†ä¿¡æ¯ã€‚ä¹Ÿæœ‰å¯èƒ½æ‚¨æŒ‡çš„æ˜¯/var/fs ç›®å½•ï¼Œè¯¥ç›®å½•åœ¨ Linux æ“ä½œç³»ç»Ÿä¸­é»˜è®¤ä¸å­˜åœ¨ã€‚è¿™ä¸ªç›®å½•å¯èƒ½ç”¨äºå­˜å‚¨ä¸æ–‡ä»¶ç³»ç»Ÿç›¸å…³çš„æ–‡ä»¶ï¼Œä½†å®ƒçš„ç”¨é€”å–å†³äºåœ¨ç‰¹å®šç³»ç»Ÿä¸Šå¦‚ä½•é…ç½®å’Œä½¿ç”¨å®ƒã€‚


## ç›®å½•

```bash
root@cubmaster01:/sys/fs/cgroup/cpu# mkdir container
root@cubmaster01:/sys/fs/cgroup/cpu# ls container/
cgroup.clone_children  cpuacct.usage         cpuacct.usage_percpu_sys   cpuacct.usage_user  cpu.shares      cpu.uclamp.min
cgroup.procs           cpuacct.usage_all     cpuacct.usage_percpu_user  cpu.cfs_period_us   cpu.stat        notify_on_release
cpuacct.stat           cpuacct.usage_percpu  cpuacct.usage_sys          cpu.cfs_quota_us    cpu.uclamp.max  tasks
root@cubmaster01:/sys/fs/cgroup/cpu# ls -al container/
total 0
drwxr-xr-x 2 root root 0 Dec 31 04:26 .
dr-xr-xr-x 5 root root 0 Dec 30 08:09 ..
-rw-r--r-- 1 root root 0 Dec 31 04:26 cgroup.clone_children
-rw-r--r-- 1 root root 0 Dec 31 04:26 cgroup.procs
-r--r--r-- 1 root root 0 Dec 31 04:26 cpuacct.stat
-rw-r--r-- 1 root root 0 Dec 31 04:26 cpuacct.usage
-r--r--r-- 1 root root 0 Dec 31 04:26 cpuacct.usage_all
-r--r--r-- 1 root root 0 Dec 31 04:26 cpuacct.usage_percpu
-r--r--r-- 1 root root 0 Dec 31 04:26 cpuacct.usage_percpu_sys
-r--r--r-- 1 root root 0 Dec 31 04:26 cpuacct.usage_percpu_user
-r--r--r-- 1 root root 0 Dec 31 04:26 cpuacct.usage_sys
-r--r--r-- 1 root root 0 Dec 31 04:26 cpuacct.usage_user
-rw-r--r-- 1 root root 0 Dec 31 04:26 cpu.cfs_period_us
-rw-r--r-- 1 root root 0 Dec 31 04:26 cpu.cfs_quota_us
-rw-r--r-- 1 root root 0 Dec 31 04:26 cpu.shares
-r--r--r-- 1 root root 0 Dec 31 04:26 cpu.stat
-rw-r--r-- 1 root root 0 Dec 31 04:26 cpu.uclamp.max
-rw-r--r-- 1 root root 0 Dec 31 04:26 cpu.uclamp.min
-rw-r--r-- 1 root root 0 Dec 31 04:26 notify_on_release
-rw-r--r-- 1 root root 0 Dec 31 04:26 tasks
root@cubmaster01:/sys/fs/cgroup/cpu# time

real    0m0.000s
user    0m0.000s
sys     0m0.000s
root@cubmaster01:/sys/fs/cgroup/cpu# date
Sat 31 Dec 2022 04:26:34 AM UTC
```



## END é“¾æ¥
<ul><li><div><a href = '35.md' style='float:left'>â¬†ï¸ä¸Šä¸€èŠ‚ğŸ”—  </a><a href = '37.md' style='float: right'>  ï¸ä¸‹ä¸€èŠ‚ğŸ”—</a></div></li></ul>

+ [â“‚ï¸å›åˆ°ç›®å½•ğŸ ](../README.md)

+ [**ğŸ«µå‚ä¸è´¡çŒ®ğŸ’â¤ï¸â€ğŸ”¥ğŸ’–**](https://nsddd.top/archives/contributors))

+ âœ´ï¸ç‰ˆæƒå£°æ˜ &copy; ï¼šæœ¬ä¹¦æ‰€æœ‰å†…å®¹éµå¾ª[CC-BY-SA 3.0åè®®ï¼ˆç½²å-ç›¸åŒæ–¹å¼å…±äº«ï¼‰&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0åè®®æ–‡æœ¬) 

